/*
 * GoJS v1.5.4 JavaScript Library for HTML Diagrams
 * Northwoods Software, http://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2015 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.5.4/doc/license.html.
 */
(function(window) { var r,aa={};if(!window.document||void 0===window.document.createElement("canvas").getContext)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),f=Math.max(8,16-(c-a)),g=window.setTimeout(function(){b(c+f)},f);a=c+f;return g});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){window.clearTimeout(a)})})();aa.Debug=null;var ca=void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&0<window.navigator.userAgent.indexOf("Android"),da=void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("MSIE 10.0"),ea=void 0!==window.navigator&&0<window.navigator.userAgent.indexOf("Trident/7"),fa=0<=navigator.platform.toUpperCase().indexOf("MAC"),ga=null!==navigator.platform.match(/(iPhone|iPod|iPad)/i);
function ia(a,b){var c=-1;return function(){var d=this,e=arguments;-1!==c&&window.clearTimeout(c);c=ma(function(){c=-1;a.apply(d,e)},b)}}function ma(a,b){return window.setTimeout(a,b)}function na(a,b){return window.setInterval(a,b)}function oa(a){return window.document.createElement(a)}function v(a){throw Error(a);}function pa(a,b){if(a.qa){var c="The object is frozen, so its properties cannot be set: "+a.toString();void 0!==b&&(c+="  to value: "+b);v(c)}}
function ra(a,b,c,d){a instanceof b||(c=sa(c),void 0!==d&&(c+="."+d),ta(a,b,c))}function w(a,b,c,d){typeof a!==b&&(c=sa(c),void 0!==d&&(c+="."+d),ta(a,b,c))}function ua(a,b,c){"number"===typeof a&&isFinite(a)||(b=sa(b),void 0!==c&&(b+="."+c),v(b+" must be a real number type, and not NaN or Infinity: "+a))}function va(a,b,c,d){a instanceof wa&&a.Td===b||(c=sa(c),void 0!==d&&(c+="."+d),ta(a,"a constant of class "+xa(b),c))}
function ta(a,b,c,d){b=sa(b);c=sa(c);void 0!==d&&(c+="."+d);"string"===typeof a?v(c+" value is not an instance of "+b+': "'+a+'"'):v(c+" value is not an instance of "+b+": "+a)}function za(a,b,c,d){c=sa(c);void 0!==d&&(c+="."+d);v(c+" is not in the range "+b+": "+a)}function Aa(a){v(xa(a)+" constructor cannot take any arguments.")}
function Ba(a){v("Collection was modified during iteration: "+a.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")}function Da(a){window.console&&window.console.log(a)}function Ea(a){return"object"===typeof a&&null!==a}function Fa(a){return Array.isArray(a)||a instanceof NodeList||a instanceof HTMLCollection}function Ga(a,b,c){Fa(a)||ta(a,"Array or NodeList or HTMLCollection",b,c)}
function Ia(a){return a.length}function Ka(a){return Array.prototype.slice.call(a)}function La(a,b){Array.isArray(a);return a[b]}function Na(a,b,c){Array.isArray(a)?a[b]=c:v("Cannot replace an object in an HTMLCollection or NodeList at "+b)}function Oa(a,b){if(Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=0;d<c;d++)if(a[d]===b)return d;return-1}
function Qa(a,b,c){Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):v("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)}function Ta(a,b){Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):v("Cannot remove an object from an HTMLCollection or NodeList at "+b)}var Ua=[];function Va(){var a=Ua.pop();return void 0===a?new z:a}function Wa(a,b){var c=Ua.pop();if(void 0===c)return new z(a,b);c.x=a;c.y=b;return c}function A(a){Ua.push(a)}var Xa=[];
function Ya(){var a=Xa.pop();return void 0===a?new Za:a}function $a(a){Xa.push(a)}var ab=[];function bb(){var a=ab.pop();return void 0===a?new D:a}function db(a,b,c,d){var e=ab.pop();if(void 0===e)return new D(a,b,c,d);e.x=a;e.y=b;e.width=c;e.height=d;return e}function fb(a){ab.push(a)}var gb=[];function hb(){var a=gb.pop();return void 0===a?new ib:a}function jb(a){gb.push(a)}var lb=null;function E(){var a=lb;return null!==a?(lb=null,a):new mb}function F(a){a.reset();lb=a}var nb=[];
function ob(){var a=nb.pop();return void 0===a?[]:a}function pb(a){a.length=0;nb.push(a)}var qb=Object.freeze([]),rb=1;function sb(a){a.__gohashid=rb++}function tb(a){var b=a.__gohashid;void 0===b&&(b=rb++,a.__gohashid=b);return b}function ub(a){return a.__gohashid}function vb(a,b){b.Wv=a;aa[a]=b}function yb(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a}
function G(a,b,c,d){w(a,"function","Util.defineProperty:classfunc");w(b,"object","Util.defineProperty:propobj");w(c,"function","Util.defineProperty:getter");w(d,"function","Util.defineProperty:setter");for(var e in b){b=b[e];Object.defineProperty(a.prototype,e,{get:c,set:d});c=Object.getOwnPropertyDescriptor(a.prototype,e);b&&c&&Object.defineProperty(a.prototype,b,c);break}}
function H(a,b,c,d){w(a,"function","Util.defineReadOnlyProperty:classfunc");w(b,"object","Util.defineReadOnlyProperty:propobj");w(c,"function","Util.defineReadOnlyProperty:getter");for(var e in b){var f=b[e];b={get:c,set:function(a){v('The property "'+f+'" is read-only and cannot be set to '+a)}};if(void 0!==d)for(var g in d)b[g]=d[g];Object.defineProperty(a.prototype,e,b);d=Object.getOwnPropertyDescriptor(a.prototype,e);f&&d&&Object.defineProperty(a.prototype,f,d);break}}
function zb(a,b){for(var c in b)b[c]=!0;a.prototype.HA=b}function sa(a){return void 0===a?"":"string"===typeof a?a:"function"===typeof a?xa(a):null===a?"*":""}function xa(a){if("function"===typeof a){if(a.Wv)return a.Wv;if(a.name)return a.name;var b=a.toString(),c=b.indexOf("("),b=b.substring(9,c).trim();if(""!==b)return a.Wv=b}else if("object"===typeof a&&a.constructor)return xa(a.constructor);return typeof a}
function I(a,b,c){w(a,"function","Util.defineEnumValue:classfunc");w(b,"string","Util.defineEnumValue:name");w(c,"number","Util.defineEnumValue:num");c=new wa(a,b,c);Object.freeze(c);a[b]=c;var d=a.zs;d instanceof Fb||(d=new Fb("string",wa),a.zs=d);d.add(b,c);return c}function Gb(a,b){if(!a||!b)return null;var c=void 0;try{"function"===typeof b?c=b(a):"function"===typeof a.getAttribute?(c=a.getAttribute(b),null===c&&(c=void 0)):c=a[b]}catch(d){}return c}
function Hb(a,b,c){if(a&&b)try{"function"===typeof b?b(a,c):"function"===typeof a.setAttribute?a.setAttribute(b,c):a[b]=c}catch(d){}}
function Ib(a,b){w(a,"object","Setting properties requires Objects as arguments");w(b,"object","Setting properties requires Objects as arguments");var c=a instanceof L,d=a instanceof M,e;for(e in b){""===e&&v("Setting properties requires non-empty property names");var f=a,g=e;if(c||d){var h=e.indexOf(".");if(0<h){var k=e.substring(0,h);if(c)f=a.Bd(k);else if(f=a[k],void 0===f||null===f)f=a.Ya[k];Ea(f)?g=e.substr(h+1):v("Unable to find object named: "+k+" in "+a.toString()+" when trying to set property: "+
e)}}if("_"!==g[0]&&!Ob(f,g))if(d&&Ob(a.Ya,g))f=a.Ya;else if(d&&Pb(a,g)){a.yx(g,b[g]);continue}else v('Trying to set undefined property "'+g+'" on object: '+f.toString());f[g]=b[e];"_"===g[0]&&(h=f.Gk,Fa(h)||(h=[],f.Gk=h),h.push(g))}}function Ob(a,b){if(a.hasOwnProperty(b))return!0;for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return!0;var d=c.HA;if(d&&d[b])return!0;c=Object.getPrototypeOf(c)}return!1}
function Qb(a,b){if(!Ea(b)||b instanceof Element||b instanceof CanvasRenderingContext2D||b instanceof Rb||b instanceof Sb)return"";var c="",d;for(d in b)if("string"!==typeof d)""===c&&(c=b+"\n"),c+="  "+d+" is not a string property\n";else if("_"!==d.charAt(0)&&!(2>=d.length)){var e=Gb(b,d);null===e||"function"===typeof e||Ob(b,d)||(""===c&&(c=b+"\n"),c+='  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}return c}
function Tb(a,b){if(null!==b&&"number"!==typeof b&&"string"!==typeof b&&"boolean"!==typeof b&&"function"!==typeof b)if(void 0!==ub(b)){if(!Ub.contains(b))if(Ub.add(b),Wb.add(Qb(a,b)),b instanceof N||b instanceof Xb||b instanceof Fb)for(var c=b.i;c.next();)Tb(a+"["+c.key+"]",c.value);else for(c in b){var d=Gb(b,c);if(void 0!==d&&null!==d&&Ea(d)&&d!==b.HA){if(b instanceof Zb){if(d===b.oi)continue}else if(b instanceof L){if("data"===c||d===b.Ag)continue;if("itemArray"===c||d===b.th)continue;if(b instanceof
O&&d===b.Kj)continue}else if(!(b instanceof M))if(b instanceof ec){if("archetypeGroupData"===c||d===b.Sv)continue}else if(b instanceof hc){if("archetypeLinkData"===c||d===b.Uv)continue;if("archetypeLabelNodeData"===c||d===b.Tv)continue}else if(b instanceof ic){if("archetypeNodeData"===c||d===b.rj)continue}else if(b instanceof jc){if("nodeDataArray"===c||d===b.Be)continue;if("linkDataArray"===c||d===b.Lg||d===b.Wk)continue;if(d===b.Vb)continue;if(d===b.Eg)continue}else if(b instanceof kc||b instanceof
lc||b instanceof sc)continue;Tb(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)Tb(a+"["+c+"]",b[c]);else Wb.add(Qb(a,b))}
function tc(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];a=d.join("");a=""===a?"0":a;b=[];for(c=0;256>c;c++)b[c]=c;for(c=e=d=0;256>c;c++)d=(d+b[c]+119)%256,e=b[c],b[c]=b[d],b[d]=e;for(var d=c=0,f="",g=0;g<a.length;g++)c=(c+1)%256,d=(d+b[c])%256,e=b[c],b[c]=b[d],b[d]=e,f+=String.fromCharCode(a.charCodeAt(g)^b[(b[c]+b[d])%256]);return f}
var uc=null,Ub,Wb,uc=function(){var a=window.document.createElement("canvas"),b=a.getContext("2d");b[tc("7ca11abfd022028846")]=tc("398c3597c01238");for(var c=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22412913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],d=1;5>d;d++)b[tc("7ca11abfd7330390")](tc(c[d-1]),10,15*d+0);b[tc("7ca11abfd022028846")]=tc("39f046ebb36e4b");for(d=1;5>d;d++)b[tc("7ca11abfd7330390")](tc(c[d-
1]),10,15*d+0);if(4!==c.length||"5"!==c[0][0]||"7"!==c[3][0])I=function(a,b){var c=new wa(a,b,2);Object.freeze(c);a[b]=c;var d=a.zs;d instanceof Fb||(d=new Fb("string",wa),a.zs=d);d.add(b,c);return c};return a}();function wa(a,b,c){sb(this);this.uz=a;this.zb=b;this.mE=c}wa.prototype.toString=function(){return xa(this.uz)+"."+this.zb};H(wa,{Td:"classType"},function(){return this.uz});H(wa,{name:"name"},function(){return this.zb});H(wa,{value:"value"},function(){return this.mE});var vc;
wa.findName=vc=function(a,b){if(null===b||""===b)return null;w(a,"function","findName:classfunc");w(b,"string","EnumValue.findName:name");var c=a.zs;return c instanceof Fb?c.ja(b):null};function zc(){this.rz=[]}zc.prototype.toString=function(){return this.rz.join("")};zc.prototype.add=function(a){""!==a&&this.rz.push(a)};function Sb(){}function Ac(a){void 0===a&&(a=42);this.seed=a;this.Jv=48271;this.ys=2147483647;this.kz=this.ys/this.Jv;this.QD=this.ys%this.Jv;this.MD=1/this.ys;this.random()}
Ac.prototype.random=function(){var a=this.seed%this.kz*this.Jv-this.seed/this.kz*this.QD;this.seed=0<a?a:a+this.ys;return this.seed*this.MD};function Bc(){}H(Bc,{i:"iterator"},function(){return this});Bc.prototype.reset=Bc.prototype.reset=function(){};Bc.prototype.next=Bc.prototype.hasNext=Bc.prototype.next=function(){return!1};Bc.prototype.first=Bc.prototype.first=function(){return null};Bc.prototype.any=function(){return!1};Bc.prototype.all=function(){return!0};Bc.prototype.each=function(){};
H(Bc,{count:"count"},function(){return 0});Bc.prototype.jf=function(){};Bc.prototype.toString=function(){return"EmptyIterator"};var Cc=new Bc;function Dc(a){this.key=-1;this.value=a}zb(Dc,{key:!0,value:!0});H(Dc,{i:"iterator"},function(){return this});Dc.prototype.reset=Dc.prototype.reset=function(){this.key=-1};Dc.prototype.next=Dc.prototype.hasNext=Dc.prototype.next=function(){return-1===this.key?(this.key=0,!0):!1};Dc.prototype.first=Dc.prototype.first=function(){this.key=0;return this.value};
Dc.prototype.any=function(a){this.key=-1;return a(this.value)};Dc.prototype.all=function(a){this.key=-1;return a(this.value)};Dc.prototype.each=function(a){this.key=-1;a(this.value)};H(Dc,{count:"count"},function(){return 1});Dc.prototype.jf=function(){this.value=null};Dc.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Ec(a){this.Rc=a;this.Ci=null;this.reset()}zb(Ec,{key:!0,value:!0});H(Ec,{i:"iterator"},function(){return this});
G(Ec,{Nl:"predicate"},function(){return this.Ci},function(a){this.Ci=a});Ec.prototype.reset=Ec.prototype.reset=function(){var a=this.Rc;a.Qc=null;this.Fa=a.K;this.Oc=-1};Ec.prototype.next=Ec.prototype.hasNext=Ec.prototype.next=function(){var a=this.Rc;a.K!==this.Fa&&Ba(a);var a=a.l,b=a.length,c=++this.Oc,d=this.Ci;if(null!==d)for(;c<b;){var e=a[c];if(d(e))return this.key=this.Oc=c,this.value=e,!0;c++}else{if(c<b)return this.key=c,this.value=a[c],!0;this.jf()}return!1};
Ec.prototype.first=Ec.prototype.first=function(){var a=this.Rc;this.Fa=a.K;this.Oc=0;var a=a.l,b=a.length,c=this.Ci;if(null!==c){for(var d=0;d<b;){var e=a[d];if(c(e))return this.key=this.Oc=d,this.value=e;d++}return null}return 0<b?(e=a[0],this.key=0,this.value=e):null};Ec.prototype.any=function(a){var b=this.Rc;b.Qc=null;var c=b.K;this.Oc=-1;for(var d=b.l,e=d.length,f=this.Ci,g=0;g<e;g++){var h=d[g];if(null===f||f(h)){if(a(h))return!0;b.K!==c&&Ba(b)}}return!1};
Ec.prototype.all=function(a){var b=this.Rc;b.Qc=null;var c=b.K;this.Oc=-1;for(var d=b.l,e=d.length,f=this.Ci,g=0;g<e;g++){var h=d[g];if(null===f||f(h)){if(!a(h))return!1;b.K!==c&&Ba(b)}}return!0};Ec.prototype.each=function(a){var b=this.Rc;b.Qc=null;var c=b.K;this.Oc=-1;for(var d=b.l,e=d.length,f=this.Ci,g=0;g<e;g++){var h=d[g];if(null===f||f(h))a(h),b.K!==c&&Ba(b)}};H(Ec,{count:"count"},function(){var a=this.Ci;if(null!==a){for(var b=0,c=this.Rc.l,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.Rc.l.length});
Ec.prototype.jf=function(){this.key=-1;this.value=null;this.Fa=-1;this.Ci=null;this.Rc.Qc=this};Ec.prototype.toString=function(){return"ListIterator@"+this.Oc+"/"+this.Rc.count};function Fc(a){this.Rc=a;this.reset()}zb(Fc,{key:!0,value:!0});H(Fc,{i:"iterator"},function(){return this});Fc.prototype.reset=Fc.prototype.reset=function(){var a=this.Rc;a.Km=null;this.Fa=a.K;this.Oc=a.l.length};
Fc.prototype.next=Fc.prototype.hasNext=Fc.prototype.next=function(){var a=this.Rc;a.K!==this.Fa&&Ba(a);var b=--this.Oc;if(0<=b)return this.key=b,this.value=a.l[b],!0;this.jf();return!1};Fc.prototype.first=Fc.prototype.first=function(){var a=this.Rc;this.Fa=a.K;var b=a.l;this.Oc=a=b.length-1;return 0<=a?(b=b[a],this.key=a,this.value=b):null};Fc.prototype.any=function(a){var b=this.Rc;b.Km=null;var c=b.K,d=b.l,e=d.length;this.Oc=e;for(e-=1;0<=e;e++){if(a(d[e]))return!0;b.K!==c&&Ba(b)}return!1};
Fc.prototype.all=function(a){var b=this.Rc;b.Km=null;var c=b.K,d=b.l,e=d.length;this.Oc=e;for(e-=1;0<=e;e++){if(!a(d[e]))return!1;b.K!==c&&Ba(b)}return!0};Fc.prototype.each=function(a){var b=this.Rc;b.Km=null;var c=b.K,d=b.l,e=d.length;this.Oc=e;for(e-=1;0<=e;e++)a(d[e]),b.K!==c&&Ba(b)};H(Fc,{count:"count"},function(){return this.Rc.l.length});Fc.prototype.jf=function(){this.key=-1;this.value=null;this.Fa=-1;this.Rc.Km=this};
Fc.prototype.toString=function(){return"ListIteratorBackwards("+this.Oc+"/"+this.Rc.count+")"};
function N(a){sb(this);this.qa=!1;this.l=[];this.K=0;this.Km=this.Qc=null;void 0===a||null===a?this.fa=null:"string"===typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.fa=a:za(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"===typeof a?this.fa=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:za(a,"null, a primitive type name, or a class type","List constructor: type")}
vb("List",N);N.prototype.gd=function(){var a=this.K;a++;999999999<a&&(a=0);this.K=a};N.prototype.freeze=N.prototype.freeze=function(){this.qa=!0;return this};N.prototype.thaw=N.prototype.wa=function(){this.qa=!1;return this};N.prototype.toString=function(){return"List("+sa(this.fa)+")#"+ub(this)};N.prototype.add=N.prototype.push=N.prototype.add=function(a){null!==a&&(pa(this,a),this.l.push(a),this.gd())};
N.prototype.addAll=N.prototype.ld=function(a){if(null===a)return this;pa(this);var b=this.l;if(Fa(a))for(var c=Ia(a),d=0;d<c;d++){var e=La(a,d);b.push(e)}else for(a=a.i;a.next();)e=a.value,b.push(e);this.gd();return this};N.prototype.clear=N.prototype.clear=function(){pa(this);this.l.length=0;this.gd()};N.prototype.contains=N.prototype.has=N.prototype.contains=function(a){return null===a?!1:-1!==this.l.indexOf(a)};N.prototype.indexOf=N.prototype.indexOf=function(a){return null===a?-1:this.l.indexOf(a)};
N.prototype.elt=N.prototype.get=N.prototype.Y=function(a){var b=this.l;(0>a||a>=b.length)&&za(a,"0 <= i < length",N,"elt:i");return b[a]};N.prototype.setElt=N.prototype.set=N.prototype.Pf=function(a,b){var c=this.l;(0>a||a>=c.length)&&za(a,"0 <= i < length",N,"setElt:i");pa(this,a);c[a]=b};N.prototype.first=N.prototype.first=function(){var a=this.l;return 0===a.length?null:a[0]};N.prototype.last=N.prototype.$c=function(){var a=this.l,b=a.length;return 0<b?a[b-1]:null};
N.prototype.pop=N.prototype.pop=function(){pa(this);var a=this.l;return 0<a.length?a.pop():null};N.prototype.any=function(a){for(var b=this.l,c=this.K,d=b.length,e=0;e<d;e++){if(a(b[e]))return!0;this.K!==c&&Ba(this)}return!1};N.prototype.all=function(a){for(var b=this.l,c=this.K,d=b.length,e=0;e<d;e++){if(!a(b[e]))return!1;this.K!==c&&Ba(this)}return!0};N.prototype.each=function(a){for(var b=this.l,c=this.K,d=b.length,e=0;e<d;e++)a(b[e]),this.K!==c&&Ba(this)};
N.prototype.insertAt=N.prototype.pd=function(a,b){0>a&&za(a,">= 0",N,"insertAt:i");pa(this,a);var c=this.l;a>=c.length?c.push(b):c.splice(a,0,b);this.gd();return!0};N.prototype.remove=N.prototype["delete"]=N.prototype.remove=function(a){if(null===a)return!1;pa(this,a);var b=this.l;a=b.indexOf(a);if(-1===a)return!1;a===b.length-1?b.pop():b.splice(a,1);this.gd();return!0};
N.prototype.removeAt=N.prototype.Cc=function(a){var b=this.l;(0>a||a>=b.length)&&za(a,"0 <= i < length",N,"removeAt:i");pa(this,a);a===b.length-1?b.pop():b.splice(a,1);this.gd()};N.prototype.removeRange=N.prototype.removeRange=function(a,b){var c=this.l;(0>a||a>=c.length)&&za(a,"0 <= from < length",N,"elt:from");(0>b||b>=c.length)&&za(b,"0 <= to < length",N,"elt:to");pa(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a;c.push.apply(c,d);this.gd()};
N.prototype.copy=function(){for(var a=new N(this.fa),b=this.l,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};N.prototype.toArray=N.prototype.ae=function(){for(var a=this.l,b=this.count,c=Array(b),d=0;d<b;d++)c[d]=a[d];return c};N.prototype.toSet=function(){for(var a=new Xb(this.fa),b=this.l,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};N.prototype.sort=N.prototype.sort=function(a){pa(this);this.l.sort(a);this.gd();return this};
N.prototype.sortRange=N.prototype.fo=function(a,b,c){var d=this.l,e=d.length;void 0===b&&(b=0);void 0===c&&(c=e);pa(this);var f=c-b;if(1>=f)return this;(0>b||b>=e-1)&&za(b,"0 <= from < length",N,"sortRange:from");if(2===f)return c=d[b],e=d[b+1],0<a(c,e)&&(d[b]=e,d[b+1]=c,this.gd()),this;if(0===b)if(c>=e)d.sort(a);else for(f=d.slice(0,c),f.sort(a),a=0;a<c;a++)d[a]=f[a];else if(c>=e)for(f=d.slice(b),f.sort(a),a=b;a<e;a++)d[a]=f[a-b];else for(f=d.slice(b,c),f.sort(a),a=b;a<c;a++)d[a]=f[a-b];this.gd();
return this};N.prototype.reverse=N.prototype.reverse=function(){pa(this);this.l.reverse();this.gd();return this};H(N,{count:"count"},function(){return this.l.length});H(N,{size:"size"},function(){return this.l.length});H(N,{length:"length"},function(){return this.l.length});H(N,{i:"iterator"},function(){if(0>=this.l.length)return Cc;var a=this.Qc;return null!==a?(a.reset(),a):new Ec(this)});
H(N,{Il:"iteratorBackwards"},function(){if(0>=this.l.length)return Cc;var a=this.Km;return null!==a?(a.reset(),a):new Fc(this)});function Gc(a){this.Pj=a;this.reset()}zb(Gc,{key:!0,value:!0});H(Gc,{i:"iterator"},function(){return this});Gc.prototype.reset=Gc.prototype.reset=function(){var a=this.Pj;a.Qc=null;this.Fa=a.K;this.gb=null};
Gc.prototype.next=Gc.prototype.hasNext=Gc.prototype.next=function(){var a=this.Pj;a.K!==this.Fa&&Ba(a);var b=this.gb,b=null===b?a.La:b.xb;if(null!==b)return this.gb=b,this.value=b.value,this.key=b.key,!0;this.jf();return!1};Gc.prototype.first=Gc.prototype.first=function(){var a=this.Pj;this.Fa=a.K;a=a.La;if(null!==a){this.gb=a;var b=a.value;this.key=a.key;return this.value=b}return null};
Gc.prototype.any=function(a){var b=this.Pj;b.Qc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(a(d.value))return!0;b.K!==c&&Ba(b);d=d.xb}return!1};Gc.prototype.all=function(a){var b=this.Pj;b.Qc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(!a(d.value))return!1;b.K!==c&&Ba(b);d=d.xb}return!0};Gc.prototype.each=function(a){var b=this.Pj;b.Qc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;)a(d.value),b.K!==c&&Ba(b),d=d.xb};H(Gc,{count:"count"},function(){return this.Pj.tc});
Gc.prototype.jf=function(){this.value=this.key=null;this.Fa=-1;this.Pj.Qc=this};Gc.prototype.toString=function(){return null!==this.gb?"SetIterator@"+this.gb.value:"SetIterator"};
function Xb(a){sb(this);this.qa=!1;void 0===a||null===a?this.fa=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.fa=a:za(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"===typeof a?this.fa=a===Object?"object":a===String?"string":a===Number?"number":a:za(a,"null, a primitive type name, or a class type","Set constructor: type");this.uc={};this.tc=0;this.Qc=null;this.K=0;this.Kg=this.La=null}vb("Set",Xb);
Xb.prototype.gd=function(){var a=this.K;a++;999999999<a&&(a=0);this.K=a};Xb.prototype.freeze=Xb.prototype.freeze=function(){this.qa=!0;return this};Xb.prototype.thaw=Xb.prototype.wa=function(){this.qa=!1;return this};Xb.prototype.toString=function(){return"Set("+sa(this.fa)+")#"+ub(this)};
Xb.prototype.add=Xb.prototype.add=function(a){if(null===a)return!1;pa(this,a);var b=a;Ea(a)&&(b=tb(a));return void 0===this.uc[b]?(this.tc++,a=new Hc(a,a),this.uc[b]=a,b=this.Kg,null===b?this.La=a:(a.Um=b,b.xb=a),this.Kg=a,this.gd(),!0):!1};Xb.prototype.addAll=Xb.prototype.ld=function(a){if(null===a)return this;pa(this);if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.add(La(a,c));else for(a=a.i;a.next();)this.add(a.value);return this};
Xb.prototype.contains=Xb.prototype.has=Xb.prototype.contains=function(a){if(null===a)return!1;var b=a;return Ea(a)&&(b=ub(a),void 0===b)?!1:void 0!==this.uc[b]};Xb.prototype.containsAll=function(a){if(null===a)return!0;for(a=a.i;a.next();)if(!this.contains(a.value))return!1;return!0};Xb.prototype.containsAny=function(a){if(null===a)return!0;for(a=a.i;a.next();)if(this.contains(a.value))return!0;return!1};Xb.prototype.first=Xb.prototype.first=function(){var a=this.La;return null===a?null:a.value};
Xb.prototype.any=function(a){for(var b=this.K,c=this.La;null!==c;){if(a(c.value))return!0;this.K!==b&&Ba(this);c=c.xb}return!1};Xb.prototype.all=function(a){for(var b=this.K,c=this.La;null!==c;){if(!a(c.value))return!1;this.K!==b&&Ba(this);c=c.xb}return!0};Xb.prototype.each=function(a){for(var b=this.K,c=this.La;null!==c;)a(c.value),this.K!==b&&Ba(this),c=c.xb};
Xb.prototype.remove=Xb.prototype["delete"]=Xb.prototype.remove=function(a){if(null===a)return!1;pa(this,a);var b=a;if(Ea(a)&&(b=ub(a),void 0===b))return!1;a=this.uc[b];if(void 0===a)return!1;var c=a.xb,d=a.Um;null!==c&&(c.Um=d);null!==d&&(d.xb=c);this.La===a&&(this.La=c);this.Kg===a&&(this.Kg=d);delete this.uc[b];this.tc--;this.gd();return!0};
Xb.prototype.removeAll=Xb.prototype.RC=function(a){if(null===a)return this;pa(this);if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.remove(La(a,c));else for(a=a.i;a.next();)this.remove(a.value);return this};Xb.prototype.retainAll=function(a){if(null===a||0===this.count)return this;pa(this);var b=new Xb(this.fa);b.ld(a);a=new N(this.fa);for(var c=this.i;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.i;b.next();)this.remove(b.value);return this};
Xb.prototype.clear=Xb.prototype.clear=function(){pa(this);this.uc={};this.tc=0;this.Kg=this.La=null;this.gd()};Xb.prototype.copy=function(){var a=new Xb(this.fa),b=this.uc,c;for(c in b)a.add(b[c].value);return a};Xb.prototype.toArray=Xb.prototype.ae=function(){var a=Array(this.tc),b=this.uc,c=0,d;for(d in b)a[c]=b[d].value,c++;return a};Xb.prototype.toList=function(){var a=new N(this.fa),b=this.uc,c;for(c in b)a.add(b[c].value);return a};H(Xb,{count:"count"},function(){return this.tc});
H(Xb,{size:"size"},function(){return this.tc});H(Xb,{i:"iterator"},function(){if(0>=this.tc)return Cc;var a=this.Qc;return null!==a?(a.reset(),a):new Gc(this)});function Mc(a){this.Ea=a;this.reset()}zb(Mc,{key:!0,value:!0});H(Mc,{i:"iterator"},function(){return this});Mc.prototype.reset=Mc.prototype.reset=function(){this.Fa=this.Ea.K;this.gb=null};
Mc.prototype.next=Mc.prototype.hasNext=Mc.prototype.next=function(){var a=this.Ea;a.K!==this.Fa&&Ba(a);var b=this.gb,b=null===b?a.La:b.xb;if(null!==b)return this.gb=b,this.value=this.key=a=b.key,!0;this.jf();return!1};Mc.prototype.first=Mc.prototype.first=function(){var a=this.Ea;this.Fa=a.K;a=a.La;return null!==a?(this.gb=a,this.value=this.key=a=a.key):null};Mc.prototype.any=function(a){var b=this.Ea,c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(a(d.key))return!0;b.K!==c&&Ba(b);d=d.xb}return!1};
Mc.prototype.all=function(a){var b=this.Ea,c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(!a(d.key))return!1;b.K!==c&&Ba(b);d=d.xb}return!0};Mc.prototype.each=function(a){var b=this.Ea,c=b.K;this.gb=null;for(var d=b.La;null!==d;)a(d.key),b.K!==c&&Ba(b),d=d.xb};H(Mc,{count:"count"},function(){return this.Ea.tc});Mc.prototype.jf=function(){this.value=this.key=null;this.Fa=-1};Mc.prototype.toString=function(){return null!==this.gb?"MapKeySetIterator@"+this.gb.value:"MapKeySetIterator"};
function Pc(a){sb(this);this.qa=!0;this.Ea=a}yb(Pc,Xb);Pc.prototype.freeze=function(){return this};Pc.prototype.wa=function(){return this};Pc.prototype.toString=function(){return"MapKeySet("+this.Ea.toString()+")"};Pc.prototype.add=Pc.prototype.set=Pc.prototype.add=function(){v("This Set is read-only: "+this.toString());return!1};Pc.prototype.contains=Pc.prototype.has=Pc.prototype.contains=function(a){return this.Ea.contains(a)};
Pc.prototype.remove=Pc.prototype["delete"]=Pc.prototype.remove=function(){v("This Set is read-only: "+this.toString());return!1};Pc.prototype.clear=Pc.prototype.clear=function(){v("This Set is read-only: "+this.toString())};Pc.prototype.first=Pc.prototype.first=function(){var a=this.Ea.La;return null!==a?a.key:null};Pc.prototype.any=function(a){for(var b=this.Ea.La;null!==b;){if(a(b.key))return!0;b=b.xb}return!1};
Pc.prototype.all=function(a){for(var b=this.Ea.La;null!==b;){if(!a(b.key))return!1;b=b.xb}return!0};Pc.prototype.each=function(a){for(var b=this.Ea.La;null!==b;)a(b.key),b=b.xb};Pc.prototype.copy=function(){return new Pc(this.Ea)};Pc.prototype.toSet=function(){var a=new Xb(this.Ea.vp),b=this.Ea.uc,c;for(c in b)a.add(b[c].key);return a};Pc.prototype.toArray=Pc.prototype.ae=function(){var a=this.Ea.uc,b=Array(this.Ea.tc),c=0,d;for(d in a)b[c]=a[d].key,c++;return b};
Pc.prototype.toList=function(){var a=new N(this.fa),b=this.Ea.uc,c;for(c in b)a.add(b[c].key);return a};H(Pc,{count:"count"},function(){return this.Ea.tc});H(Pc,{size:"size"},function(){return this.Ea.tc});H(Pc,{i:"iterator"},function(){return 0>=this.Ea.tc?Cc:new Mc(this.Ea)});function Qc(a){this.Ea=a;this.reset()}zb(Qc,{key:!0,value:!0});H(Qc,{i:"iterator"},function(){return this});Qc.prototype.reset=Qc.prototype.reset=function(){var a=this.Ea;a.Lm=null;this.Fa=a.K;this.gb=null};
Qc.prototype.next=Qc.prototype.hasNext=Qc.prototype.next=function(){var a=this.Ea;a.K!==this.Fa&&Ba(a);var b=this.gb,b=null===b?a.La:b.xb;if(null!==b)return this.gb=b,this.value=b.value,this.key=b.key,!0;this.jf();return!1};Qc.prototype.first=Qc.prototype.first=function(){var a=this.Ea;this.Fa=a.K;a=a.La;if(null!==a){this.gb=a;var b=a.value;this.key=a.key;return this.value=b}return null};
Qc.prototype.any=function(a){var b=this.Ea;b.Lm=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(a(d.value))return!0;b.K!==c&&Ba(b);d=d.xb}return!1};Qc.prototype.all=function(a){var b=this.Ea;b.Lm=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(!a(d.value))return!1;b.K!==c&&Ba(b);d=d.xb}return!0};Qc.prototype.each=function(a){var b=this.Ea;b.Lm=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;)a(d.value),b.K!==c&&Ba(b),d=d.xb};H(Qc,{count:"count"},function(){return this.Ea.tc});
Qc.prototype.jf=function(){this.value=this.key=null;this.Fa=-1;this.Ea.Lm=this};Qc.prototype.toString=function(){return null!==this.gb?"MapValueSetIterator@"+this.gb.value:"MapValueSetIterator"};function Hc(a,b){this.key=a;this.value=b;this.Um=this.xb=null}zb(Hc,{key:!0,value:!0});Hc.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Rc(a){this.Ea=a;this.reset()}zb(Rc,{key:!0,value:!0});H(Rc,{i:"iterator"},function(){return this});
Rc.prototype.reset=Rc.prototype.reset=function(){var a=this.Ea;a.Qc=null;this.Fa=a.K;this.gb=null};Rc.prototype.next=Rc.prototype.hasNext=Rc.prototype.next=function(){var a=this.Ea;a.K!==this.Fa&&Ba(a);var b=this.gb,b=null===b?a.La:b.xb;if(null!==b)return this.gb=b,this.key=b.key,this.value=b.value,!0;this.jf();return!1};Rc.prototype.first=Rc.prototype.first=function(){var a=this.Ea;this.Fa=a.K;a=a.La;return null!==a?(this.gb=a,this.key=a.key,this.value=a.value,a):null};
Rc.prototype.any=function(a){var b=this.Ea;b.Qc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(a(d))return!0;b.K!==c&&Ba(b);d=d.xb}return!1};Rc.prototype.all=function(a){var b=this.Ea;b.Qc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;){if(!a(d))return!1;b.K!==c&&Ba(b);d=d.xb}return!0};Rc.prototype.each=function(a){var b=this.Ea;b.Qc=null;var c=b.K;this.gb=null;for(var d=b.La;null!==d;)a(d),b.K!==c&&Ba(b),d=d.xb};H(Rc,{count:"count"},function(){return this.Ea.tc});
Rc.prototype.jf=function(){this.value=this.key=null;this.Fa=-1;this.Ea.Qc=this};Rc.prototype.toString=function(){return null!==this.gb?"MapIterator@"+this.gb:"MapIterator"};
function Fb(a,b){sb(this);this.qa=!1;void 0===a||null===a?this.vp=null:"string"===typeof a?"object"===a||"string"===a||"number"===a?this.vp=a:za(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"===typeof a?this.vp=a===Object?"object":a===String?"string":a===Number?"number":a:za(a,"null, a primitive type name, or a class type","Map constructor: keytype");void 0===b||null===b?this.mu=null:"string"===typeof b?"object"===b||"string"===b||"boolean"===b||"number"===b||
"function"===b?this.mu=b:za(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"===typeof b?this.mu=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:za(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.uc={};this.tc=0;this.Lm=this.Qc=null;this.K=0;this.Kg=this.La=null}vb("Map",Fb);Fb.prototype.gd=function(){var a=this.K;a++;999999999<a&&(a=0);this.K=a};
Fb.prototype.freeze=Fb.prototype.freeze=function(){this.qa=!0;return this};Fb.prototype.thaw=Fb.prototype.wa=function(){this.qa=!1;return this};Fb.prototype.toString=function(){return"Map("+sa(this.vp)+","+sa(this.mu)+")#"+ub(this)};Fb.prototype.add=Fb.prototype.set=Fb.prototype.add=function(a,b){pa(this,a);var c=a;Ea(a)&&(c=tb(a));var d=this.uc[c];if(void 0===d)return this.tc++,d=new Hc(a,b),this.uc[c]=d,c=this.Kg,null===c?this.La=d:(d.Um=c,c.xb=d),this.Kg=d,this.gd(),!0;d.value=b;return!1};
Fb.prototype.addAll=Fb.prototype.ld=function(a){if(null===a)return this;if(Fa(a))for(var b=Ia(a),c=0;c<b;c++){var d=La(a,c);this.add(d.key,d.value)}else for(a=a.i;a.next();)this.add(a.key,a.value);return this};Fb.prototype.first=Fb.prototype.first=function(){return this.La};Fb.prototype.any=function(a){for(var b=this.K,c=this.La;null!==c;){if(a(c))return!0;this.K!==b&&Ba(this);c=c.xb}return!1};
Fb.prototype.all=function(a){for(var b=this.K,c=this.La;null!==c;){if(!a(c))return!1;this.K!==b&&Ba(this);c=c.xb}return!0};Fb.prototype.each=function(a){for(var b=this.K,c=this.La;null!==c;)a(c),this.K!==b&&Ba(this),c=c.xb};Fb.prototype.contains=Fb.prototype.has=Fb.prototype.contains=function(a){var b=a;return Ea(a)&&(b=ub(a),void 0===b)?!1:void 0!==this.uc[b]};
Fb.prototype.getValue=Fb.prototype.get=Fb.prototype.ja=function(a){var b=a;if(Ea(a)&&(b=ub(a),void 0===b))return null;a=this.uc[b];return void 0===a?null:a.value};Fb.prototype.remove=Fb.prototype["delete"]=Fb.prototype.remove=function(a){if(null===a)return!1;pa(this,a);var b=a;if(Ea(a)&&(b=ub(a),void 0===b))return!1;a=this.uc[b];if(void 0===a)return!1;var c=a.xb,d=a.Um;null!==c&&(c.Um=d);null!==d&&(d.xb=c);this.La===a&&(this.La=c);this.Kg===a&&(this.Kg=d);delete this.uc[b];this.tc--;this.gd();return!0};
Fb.prototype.clear=Fb.prototype.clear=function(){pa(this);this.uc={};this.tc=0;this.Kg=this.La=null;this.gd()};Fb.prototype.copy=function(){var a=new Fb(this.vp,this.mu),b=this.uc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};Fb.prototype.toArray=Fb.prototype.ae=function(){var a=this.uc,b=Array(this.tc),c=0,d;for(d in a){var e=a[d];b[c]=new Hc(e.key,e.value);c++}return b};Fb.prototype.toKeySet=Fb.prototype.Yh=function(){return new Pc(this)};H(Fb,{count:"count"},function(){return this.tc});
H(Fb,{size:"size"},function(){return this.tc});H(Fb,{i:"iterator"},function(){if(0>=this.count)return Cc;var a=this.Qc;return null!==a?(a.reset(),a):new Rc(this)});H(Fb,{kI:"iteratorKeys"},function(){return 0>=this.count?Cc:new Mc(this)});H(Fb,{yC:"iteratorValues"},function(){if(0>=this.count)return Cc;var a=this.Lm;return null!==a?(a.reset(),a):new Qc(this)});function z(a,b){void 0===a?this.y=this.x=0:(this.x=a,this.y=b);this.qa=!1}vb("Point",z);z.Og=!0;zb(z,{x:!0,y:!0});
z.prototype.assign=function(a){this.x=a.x;this.y=a.y};z.prototype.setTo=z.prototype.k=function(a,b){this.x=a;this.y=b;return this};z.prototype.set=z.prototype.set=function(a){this.lb();this.x=a.x;this.y=a.y;return this};z.prototype.copy=function(){var a=new z;a.x=this.x;a.y=this.y;return a};r=z.prototype;r.va=function(){this.qa=!0;Object.freeze(this);return this};r.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};r.freeze=function(){this.qa=!0;return this};
r.wa=function(){Object.isFrozen(this)&&v("cannot thaw constant: "+this);this.qa=!1;return this};r.lb=function(a){if(this.qa){var b="The Point is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v(b)}};z.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new z(c,e)}return new z};
z.stringify=function(a){return a instanceof z?a.x.toString()+" "+a.y.toString():a.toString()};z.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};z.prototype.equals=z.prototype.A=function(a){return a instanceof z?this.x===a.x&&this.y===a.y:!1};z.prototype.equalTo=z.prototype.Lu=function(a,b){return this.x===a&&this.y===b};z.prototype.equalsApprox=z.prototype.Wd=function(a){return Q.u(this.x,a.x)&&Q.u(this.y,a.y)};
z.prototype.add=z.prototype.add=function(a){this.lb();this.x+=a.x;this.y+=a.y;return this};z.prototype.subtract=z.prototype.rs=function(a){this.lb();this.x-=a.x;this.y-=a.y;return this};z.prototype.offset=z.prototype.offset=function(a,b){this.lb();this.x+=a;this.y+=b;return this};
z.prototype.rotate=z.prototype.rotate=function(a){this.lb();if(0===a)return this;var b=this.x,c=this.y;if(0===b&&0===c)return this;var d=0,e=0;90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(a=a*Math.PI/180,d=Math.cos(a),e=Math.sin(a));this.x=d*b-e*c;this.y=e*b+d*c;return this};z.prototype.scale=z.prototype.scale=function(a,b){this.x*=a;this.y*=b;return this};z.prototype.distanceSquaredPoint=z.prototype.Wi=function(a){var b=a.x-this.x;a=a.y-this.y;return b*b+a*a};
z.prototype.distanceSquared=z.prototype.pr=function(a,b){var c=a-this.x,d=b-this.y;return c*c+d*d};z.prototype.normalize=z.prototype.normalize=function(){this.lb();var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);0<c&&(this.x=a/c,this.y=b/c);return this};z.prototype.directionPoint=z.prototype.Ph=function(a){return Wc(a.x-this.x,a.y-this.y)};z.prototype.direction=z.prototype.direction=function(a,b){return Wc(a-this.x,b-this.y)};
function Wc(a,b){if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?c=0>b?c+180:180-c:0>b&&(c=360-c);return c}z.prototype.projectOntoLineSegment=function(a,b,c,d){Q.Kl(a,b,c,d,this.x,this.y,this);return this};z.prototype.projectOntoLineSegmentPoint=function(a,b){Q.Kl(a.x,a.y,b.x,b.y,this.x,this.y,this);return this};z.prototype.snapToGrid=function(a,b,c,d){Q.ur(this.x,this.y,a,b,c,d,this);return this};
z.prototype.snapToGridPoint=function(a,b){Q.ur(this.x,this.y,a.x,a.y,b.width,b.height,this);return this};z.prototype.setRectSpot=z.prototype.ms=function(a,b){this.lb();this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};z.prototype.setSpot=z.prototype.ns=function(a,b,c,d,e){this.lb();this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};z.prototype.transform=function(a){a.Ka(this);return this};function Xc(a,b){b.Zg(a);return a}var Yc;
z.distanceLineSegmentSquared=Yc=function(a,b,c,d,e,f){var g=e-c,h=f-d,k=g*g+h*h;c-=a;d-=b;var l=-c*g-d*h;if(0>=l||l>=k)return g=e-a,h=f-b,Math.min(c*c+d*d,g*g+h*h);a=g*d-h*c;return a*a/k};var Zc;z.distanceSquared=Zc=function(a,b,c,d){a=c-a;b=d-b;return a*a+b*b};var $c;z.direction=$c=function(a,b,c,d){a=c-a;b=d-b;if(0===a)return 0<b?90:0>b?270:0;if(0===b)return 0<a?0:180;if(isNaN(a)||isNaN(b))return 0;d=180*Math.atan(Math.abs(b/a))/Math.PI;0>a?d=0>b?d+180:180-d:0>b&&(d=360-d);return d};
z.prototype.isReal=z.prototype.w=function(){return isFinite(this.x)&&isFinite(this.y)};function Za(a,b){void 0===a?this.height=this.width=0:(this.width=a,this.height=b);this.qa=!1}vb("Size",Za);Za.Og=!0;zb(Za,{width:!0,height:!0});Za.prototype.assign=function(a){this.width=a.width;this.height=a.height};Za.prototype.setTo=Za.prototype.k=function(a,b){this.width=a;this.height=b;return this};Za.prototype.set=Za.prototype.set=function(a){this.lb();this.width=a.width;this.height=a.height;return this};
Za.prototype.copy=function(){var a=new Za;a.width=this.width;a.height=this.height;return a};r=Za.prototype;r.va=function(){this.qa=!0;Object.freeze(this);return this};r.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};r.freeze=function(){this.qa=!0;return this};r.wa=function(){Object.isFrozen(this)&&v("cannot thaw constant: "+this);this.qa=!1;return this};
r.lb=function(a){if(this.qa){var b="The Size is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v(b)}};Za.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));return new Za(c,e)}return new Za};Za.stringify=function(a){return a instanceof Za?a.width.toString()+" "+a.height.toString():a.toString()};
Za.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};Za.prototype.equals=Za.prototype.A=function(a){return a instanceof Za?this.width===a.width&&this.height===a.height:!1};Za.prototype.equalTo=Za.prototype.Lu=function(a,b){return this.width===a&&this.height===b};Za.prototype.equalsApprox=Za.prototype.Wd=function(a){return Q.u(this.width,a.width)&&Q.u(this.height,a.height)};Za.prototype.isReal=Za.prototype.w=function(){return isFinite(this.width)&&isFinite(this.height)};
function D(a,b,c,d){void 0===a?this.height=this.width=this.y=this.x=0:a instanceof z?b instanceof z?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof Za?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):v("Incorrect arguments supplied to Rect constructor"):(this.x=a,this.y=b,this.width=c,this.height=d);this.qa=!1}vb("Rect",D);D.Og=!0;zb(D,{x:!0,y:!0,width:!0,height:!0});
D.prototype.assign=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};function ad(a,b,c){a.width=b;a.height=c}D.prototype.setTo=D.prototype.k=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d;return this};D.prototype.set=D.prototype.set=function(a){this.lb();this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};D.prototype.setPoint=D.prototype.Ne=function(a){this.lb();this.x=a.x;this.y=a.y;return this};
D.prototype.setSize=function(a){this.lb();this.width=a.width;this.height=a.height;return this};D.prototype.copy=function(){var a=new D;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};r=D.prototype;r.va=function(){this.qa=!0;Object.freeze(this);return this};r.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};r.freeze=function(){this.qa=!0;return this};r.wa=function(){Object.isFrozen(this)&&v("cannot thaw constant: "+this);this.qa=!1;return this};
r.lb=function(a){if(this.qa){var b="The Rect is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v(b)}};D.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var f=0;""===a[b];)b++;(d=a[b++])&&(f=parseFloat(d));for(var g=0;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));return new D(c,e,f,g)}return new D};
D.stringify=function(a){return a instanceof D?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};D.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};D.prototype.equals=D.prototype.A=function(a){return a instanceof D?this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height:!1};D.prototype.equalTo=D.prototype.Lu=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};
D.prototype.equalsApprox=D.prototype.Wd=function(a){return Q.u(this.x,a.x)&&Q.u(this.y,a.y)&&Q.u(this.width,a.width)&&Q.u(this.height,a.height)};D.prototype.containsPoint=D.prototype.na=function(a){return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};D.prototype.containsRect=D.prototype.Vi=function(a){return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
D.prototype.contains=D.prototype.contains=function(a,b,c,d){void 0===c&&(c=0);void 0===d&&(d=0);return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};D.prototype.reset=function(){this.lb();this.height=this.width=this.y=this.x=0};D.prototype.offset=D.prototype.offset=function(a,b){this.lb();this.x+=a;this.y+=b;return this};D.prototype.inflate=D.prototype.Ze=function(a,b){return bd(this,b,a,b,a)};
D.prototype.addMargin=D.prototype.ru=function(a){return bd(this,a.top,a.right,a.bottom,a.left)};D.prototype.subtractMargin=D.prototype.TG=function(a){return bd(this,-a.top,-a.right,-a.bottom,-a.left)};D.prototype.grow=function(a,b,c,d){return bd(this,a,b,c,d)};function bd(a,b,c,d,e){a.lb();var f=a.width;c+e<=-f?(a.x+=f/2,a.width=0):(a.x-=e,a.width+=c+e);c=a.height;b+d<=-c?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d);return a}D.prototype.intersectRect=function(a){return cd(this,a.x,a.y,a.width,a.height)};
D.prototype.intersect=function(a,b,c,d){return cd(this,a,b,c,d)};function cd(a,b,c,d,e){a.lb();var f=Math.max(a.x,b),g=Math.max(a.y,c);b=Math.min(a.x+a.width,b+d);c=Math.min(a.y+a.height,c+e);a.x=f;a.y=g;a.width=Math.max(0,b-f);a.height=Math.max(0,c-g);return a}D.prototype.intersectsRect=D.prototype.Gf=function(a){return this.pC(a.x,a.y,a.width,a.height)};
D.prototype.intersects=D.prototype.pC=function(a,b,c,d){var e=this.width,f=this.x;if(Infinity!==e&&Infinity!==c&&(e+=f,c+=a,isNaN(c)||isNaN(e)||f>c||a>e))return!1;a=this.height;c=this.y;return Infinity!==a&&Infinity!==d&&(a+=c,d+=b,isNaN(d)||isNaN(a)||c>d||b>a)?!1:!0};function hd(a,b){var c=a.width,d=b.width+10+10,e=a.x,f=b.x-10;if(e>d+f||f>c+e)return!1;c=a.height;d=b.height+10+10;e=a.y;f=b.y-10;return e>d+f||f>c+e?!1:!0}D.prototype.unionPoint=D.prototype.Zh=function(a){return id(this,a.x,a.y,0,0)};
D.prototype.unionRect=D.prototype.eh=function(a){return id(this,a.x,a.y,a.width,a.height)};D.prototype.union=D.prototype.FD=function(a,b,c,d){this.lb();void 0===c&&(c=0);void 0===d&&(d=0);return id(this,a,b,c,d)};function id(a,b,c,d,e){var f=Math.min(a.x,b),g=Math.min(a.y,c);b=Math.max(a.x+a.width,b+d);c=Math.max(a.y+a.height,c+e);a.x=f;a.y=g;a.width=b-f;a.height=c-g;return a}
D.prototype.setSpot=D.prototype.ns=function(a,b,c){this.lb();this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var jd;D.contains=jd=function(a,b,c,d,e,f,g,h){void 0===g&&(g=0);void 0===h&&(h=0);return a<=e&&e+g<=a+c&&b<=f&&f+h<=b+d};D.intersects=function(a,b,c,d,e,f,g,h){c+=a;g+=e;if(a>g||e>c)return!1;a=d+b;h+=f;return b>h||f>a?!1:!0};G(D,{left:"left"},function(){return this.x},function(a){this.lb(a);this.x=a});
G(D,{top:"top"},function(){return this.y},function(a){this.lb(a);this.y=a});G(D,{right:"right"},function(){return this.x+this.width},function(a){this.lb(a);this.x+=a-(this.x+this.width)});G(D,{bottom:"bottom"},function(){return this.y+this.height},function(a){this.lb(a);this.y+=a-(this.y+this.height)});G(D,{position:"position"},function(){return new z(this.x,this.y)},function(a){this.lb(a);this.x=a.x;this.y=a.y});
G(D,{size:"size"},function(){return new Za(this.width,this.height)},function(a){this.lb(a);this.width=a.width;this.height=a.height});G(D,{Xj:"center"},function(){return new z(this.x+this.width/2,this.y+this.height/2)},function(a){this.lb(a);this.x=a.x-this.width/2;this.y=a.y-this.height/2});G(D,{ra:"centerX"},function(){return this.x+this.width/2},function(a){this.lb(a);this.x=a-this.width/2});G(D,{Ba:"centerY"},function(){return this.y+this.height/2},function(a){this.lb(a);this.y=a-this.height/2});
D.prototype.isReal=D.prototype.w=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};D.prototype.isEmpty=function(){return 0===this.width&&0===this.height};
function qd(a,b,c,d){void 0===a?this.left=this.bottom=this.right=this.top=0:void 0===b?this.left=this.bottom=this.right=this.top=a:void 0===c?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):void 0!==d?(this.top=a,this.right=b,this.bottom=c,this.left=d):v("Invalid arguments to Margin constructor");this.qa=!1}vb("Margin",qd);qd.Og=!0;zb(qd,{top:!0,right:!0,bottom:!0,left:!0});qd.prototype.assign=function(a){this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};
qd.prototype.setTo=qd.prototype.k=function(a,b,c,d){this.lb();this.top=a;this.right=b;this.bottom=c;this.left=d;return this};qd.prototype.set=qd.prototype.set=function(a){this.lb();this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};qd.prototype.copy=function(){var a=new qd;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};r=qd.prototype;r.va=function(){this.qa=!0;Object.freeze(this);return this};
r.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};r.freeze=function(){this.qa=!0;return this};r.wa=function(){Object.isFrozen(this)&&v("cannot thaw constant: "+this);this.qa=!1;return this};r.lb=function(a){if(this.qa){var b="The Margin is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v(b)}};
qd.parse=function(a){if("string"===typeof a){a=a.split(" ");for(var b=0,c=NaN;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));if(isNaN(c))return new qd;for(var e=NaN;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));if(isNaN(e))return new qd(c);for(var f=NaN;""===a[b];)b++;(d=a[b++])&&(f=parseFloat(d));if(isNaN(f))return new qd(c,e);for(var g=NaN;""===a[b];)b++;(d=a[b++])&&(g=parseFloat(d));return isNaN(g)?new qd(c,e):new qd(c,e,f,g)}return new qd};
qd.stringify=function(a){return a instanceof qd?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};qd.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};qd.prototype.equals=qd.prototype.A=function(a){return a instanceof qd?this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left:!1};
qd.prototype.equalTo=qd.prototype.Lu=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};qd.prototype.equalsApprox=qd.prototype.Wd=function(a){return Q.u(this.top,a.top)&&Q.u(this.right,a.right)&&Q.u(this.bottom,a.bottom)&&Q.u(this.left,a.left)};qd.prototype.isReal=qd.prototype.w=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function ib(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0}ib.Og=!0;
zb(ib,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0});ib.prototype.set=ib.prototype.set=function(a){this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.dx=a.dx;this.dy=a.dy;return this};ib.prototype.copy=function(){var a=new ib;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a};ib.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"};
ib.prototype.equals=ib.prototype.A=function(a){return a instanceof ib?this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy:!1};ib.prototype.reset=ib.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.dy=this.dx=0};
ib.prototype.multiply=ib.prototype.multiply=function(a){var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.dx+this.m21*a.dy+this.dx,f=this.m12*a.dx+this.m22*a.dy+this.dy;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=f;return this};
ib.prototype.multiplyInverted=ib.prototype.IC=function(a){var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,f=a.m11*b,g=b*(a.m21*a.dy-a.m22*a.dx),h=b*(a.m12*a.dx-a.m11*a.dy);a=this.m12*c+this.m22*d;b=this.m11*e+this.m21*f;e=this.m12*e+this.m22*f;f=this.m11*g+this.m21*h+this.dx;g=this.m12*g+this.m22*h+this.dy;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.dx=f;this.dy=g;return this};
ib.prototype.invert=ib.prototype.ay=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),f=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.dx=e;this.dy=f};
ib.prototype.rotate=ib.prototype.rotate=function(a,b,c){this.translate(b,c);var d=0,e=0;0===a?(d=1,e=0):90===a?(d=0,e=1):180===a?(d=-1,e=0):270===a?(d=0,e=-1):(e=a*Math.PI/180,d=Math.cos(e),e=Math.sin(e));a=this.m12*d+this.m22*e;var f=this.m11*-e+this.m21*d,g=this.m12*-e+this.m22*d;this.m11=this.m11*d+this.m21*e;this.m12=a;this.m21=f;this.m22=g;this.translate(-b,-c)};ib.prototype.translate=ib.prototype.translate=function(a,b){this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b};
ib.prototype.scale=ib.prototype.scale=function(a,b){void 0===b&&(b=a);this.m11*=a;this.m12*=a;this.m21*=b;this.m22*=b};ib.prototype.transformPoint=ib.prototype.Ka=function(a){var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.dx;a.y=b*this.m12+c*this.m22+this.dy;return a};
ib.prototype.invertedTransformPoint=ib.prototype.Zg=function(a){var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.dx-this.m11*this.dy),f=a.x,g=a.y;a.x=f*this.m22*b+g*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx);a.y=f*c+g*d+e;return a};
ib.prototype.transformRect=ib.prototype.DD=function(a){var b=a.x,c=a.y,d=b+a.width,e=c+a.height,f=this.m11,g=this.m12,h=this.m21,k=this.m22,l=this.dx,m=this.dy,n=b*f+c*h+l,p=b*g+c*k+m,q=d*f+c*h+l,c=d*g+c*k+m,s=b*f+e*h+l,b=b*g+e*k+m,f=d*f+e*h+l,d=d*g+e*k+m,e=n,g=p,n=Math.min(n,q),e=Math.max(e,q),g=Math.min(g,c),p=Math.max(p,c),n=Math.min(n,s),e=Math.max(e,s),g=Math.min(g,b),p=Math.max(p,b),n=Math.min(n,f),e=Math.max(e,f),g=Math.min(g,d),p=Math.max(p,d);a.x=n;a.y=g;a.width=e-n;a.height=p-g};
ib.prototype.isIdentity=ib.prototype.Kr=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy};function R(a,b,c,d){void 0===a?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d);this.qa=!1}vb("Spot",R);R.Og=!0;zb(R,{x:!0,y:!0,offsetX:!0,offsetY:!0});R.prototype.assign=function(a){this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};
R.prototype.setTo=R.prototype.k=function(a,b,c,d){this.lb();this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};R.prototype.set=R.prototype.set=function(a){this.lb();this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};R.prototype.copy=function(){var a=new R;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};r=R.prototype;r.va=function(){this.qa=!0;Object.freeze(this);return this};r.O=function(){return Object.isFrozen(this)?this:this.copy().freeze()};
r.freeze=function(){this.qa=!0;return this};r.wa=function(){Object.isFrozen(this)&&v("cannot thaw constant: "+this);this.qa=!1;return this};r.lb=function(a){if(this.qa){var b="The Spot is frozen, so its properties cannot be set: "+this.toString();void 0!==a&&(b+="  to value: "+a);v(b)}};function rd(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}var sd;
R.parse=sd=function(a){if("string"===typeof a){a=a.trim();if("None"===a)return td;if("TopLeft"===a)return ud;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return vd;if("TopRight"===a)return wd;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return Cd;if("Center"===a)return Dd;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return Ed;if("BottomLeft"===a)return Fd;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return Gd;if("BottomRight"===a)return Hd;if("TopSide"===a)return Id;if("LeftSide"===
a)return Jd;if("RightSide"===a)return Kd;if("BottomSide"===a)return Ld;if("TopBottomSides"===a)return Md;if("LeftRightSides"===a)return Nd;if("TopLeftSides"===a)return Od;if("TopRightSides"===a)return Pd;if("BottomLeftSides"===a)return Yd;if("BottomRightSides"===a)return Zd;if("NotTopSide"===a)return $d;if("NotLeftSide"===a)return ae;if("NotRightSide"===a)return be;if("NotBottomSide"===a)return ce;if("AllSides"===a)return de;if("Default"===a)return ee;a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;
var d=a[b++];void 0!==d&&0<d.length&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(e=parseFloat(d));for(var f=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(f=parseFloat(d));for(var g=0;""===a[b];)b++;d=a[b++];void 0!==d&&0<d.length&&(g=parseFloat(d));return new R(c,e,f,g)}return new R};R.stringify=function(a){return a instanceof R?a.Jc()?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
R.prototype.toString=function(){return this.Jc()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.A(td)?"None":this.A(ud)?"TopLeft":this.A(vd)?"Top":this.A(wd)?"TopRight":this.A(Cd)?"Left":this.A(Dd)?"Center":this.A(Ed)?"Right":this.A(Fd)?"BottomLeft":this.A(Gd)?"Bottom":this.A(Hd)?"BottomRight":this.A(Id)?"TopSide":this.A(Jd)?"LeftSide":this.A(Kd)?"RightSide":this.A(Ld)?"BottomSide":this.A(Md)?"TopBottomSides":this.A(Nd)?
"LeftRightSides":this.A(Od)?"TopLeftSides":this.A(Pd)?"TopRightSides":this.A(Yd)?"BottomLeftSides":this.A(Zd)?"BottomRightSides":this.A($d)?"NotTopSide":this.A(ae)?"NotLeftSide":this.A(be)?"NotRightSide":this.A(ce)?"NotBottomSide":this.A(de)?"AllSides":this.A(ee)?"Default":"None"};R.prototype.equals=R.prototype.A=function(a){return a instanceof R?(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY:!1};
R.prototype.opposite=function(){return new R(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)};R.prototype.includesSide=function(a){if(!this.Fn()||!a.Fn())return!1;a=a.offsetY;return(this.offsetY&a)===a};R.prototype.isSpot=R.prototype.Jc=function(){return!isNaN(this.x)&&!isNaN(this.y)};R.prototype.isNoSpot=R.prototype.Fd=function(){return isNaN(this.x)||isNaN(this.y)};R.prototype.isSide=R.prototype.Fn=function(){return this.Fd()&&1===this.offsetX&&0!==this.offsetY};
R.prototype.isDefault=R.prototype.kc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY};var td;R.None=td=rd(new R(0,0,0,0),0).va();var ee;R.Default=ee=rd(new R(0,0,-1,0),-1).va();var ud;R.TopLeft=ud=(new R(0,0,0,0)).va();var vd;R.TopCenter=vd=(new R(.5,0,0,0)).va();var wd;R.TopRight=wd=(new R(1,0,0,0)).va();var Cd;R.LeftCenter=Cd=(new R(0,.5,0,0)).va();var Dd;R.Center=Dd=(new R(.5,.5,0,0)).va();var Ed;R.RightCenter=Ed=(new R(1,.5,0,0)).va();var Fd;
R.BottomLeft=Fd=(new R(0,1,0,0)).va();var Gd;R.BottomCenter=Gd=(new R(.5,1,0,0)).va();var Hd;R.BottomRight=Hd=(new R(1,1,0,0)).va();var fe;R.MiddleTop=fe=vd;var ge;R.MiddleLeft=ge=Cd;var he;R.MiddleRight=he=Ed;var ie;R.MiddleBottom=ie=Gd;R.Top=vd;var je;R.Left=je=Cd;var ke;R.Right=ke=Ed;R.Bottom=Gd;var Id;R.TopSide=Id=rd(new R(0,0,1,1),1).va();var Jd;R.LeftSide=Jd=rd(new R(0,0,1,2),1).va();var Kd;R.RightSide=Kd=rd(new R(0,0,1,4),1).va();var Ld;R.BottomSide=Ld=rd(new R(0,0,1,8),1).va();var Md;
R.TopBottomSides=Md=rd(new R(0,0,1,9),1).va();var Nd;R.LeftRightSides=Nd=rd(new R(0,0,1,6),1).va();var Od;R.TopLeftSides=Od=rd(new R(0,0,1,3),1).va();var Pd;R.TopRightSides=Pd=rd(new R(0,0,1,5),1).va();var Yd;R.BottomLeftSides=Yd=rd(new R(0,0,1,10),1).va();var Zd;R.BottomRightSides=Zd=rd(new R(0,0,1,12),1).va();var $d;R.NotTopSide=$d=rd(new R(0,0,1,14),1).va();var ae;R.NotLeftSide=ae=rd(new R(0,0,1,13),1).va();var be;R.NotRightSide=be=rd(new R(0,0,1,11),1).va();var ce;
R.NotBottomSide=ce=rd(new R(0,0,1,7),1).va();var de;R.AllSides=de=rd(new R(0,0,1,15),1).va();function pe(){this.re=[1,0,0,1,0,0]}pe.prototype.copy=function(){var a=new pe;a.re[0]=this.re[0];a.re[1]=this.re[1];a.re[2]=this.re[2];a.re[3]=this.re[3];a.re[4]=this.re[4];a.re[5]=this.re[5];return a};function qe(a){this.type=a;this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0;this.JB=[]}qe.prototype.addColorStop=function(a,b){this.JB.push({offset:a,color:b})};
function re(a,b,c){this.fillStyle="#000000";this.font="10px sans-serif";this.globalAlpha=1;this.lineCap="butt";this.gv=0;this.lineJoin="miter";this.lineWidth=1;this.miterLimit=10;this.shadowBlur=0;this.shadowColor="rgba(0, 0, 0, 0)";this.shadowOffsetY=this.shadowOffsetX=0;this.strokeStyle="#000000";this.textAlign="start";this.document=b||document;this.XB=c;this.dv=null;this.path=[];this.Oh=new pe;this.stack=[];this.Ge=[];this.oD=this.jC=this.Eu=0;this.Ju=a;this.iG="http://www.w3.org/2000/svg";this.width=
this.Ju.width;this.height=this.Ju.height;this.zk=se(this,"svg",{width:this.width+"px",height:this.height+"px",cJ:"0 0 "+this.Ju.width+" "+this.Ju.height});this.zk.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg");this.zk.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");te(this,1,0,0,1,0,0);a=se(this,"clipPath",{id:"mainClip"});a.appendChild(se(this,"rect",{x:0,y:0,width:this.width,height:this.height}));this.zk.appendChild(a);
this.Ge[0].setAttributeNS(null,"clip-path","url(#mainClip)")}r=re.prototype;r.arc=function(a,b,c,d,e,f){ue(this,a,b,c,d,e,f)};r.beginPath=function(){this.path=[]};r.bezierCurveTo=function(a,b,c,d,e,f){this.path.push(["C",a,b,c,d,e,f])};r.clearRect=function(){};r.clip=function(){ve(this,"clipPath",this.path,new pe)};r.closePath=function(){this.path.push(["z"])};r.createLinearGradient=function(a,b,c,d){var e=new qe("linear");e.x1=a;e.y1=b;e.x2=c;e.y2=d;return e};r.createPattern=function(){};
r.createRadialGradient=function(a,b,c,d,e,f){var g=new qe("radial");g.x1=a;g.y1=b;g.r1=c;g.x2=d;g.y2=e;g.r2=f;return g};
r.drawImage=function(a,b,c,d,e,f,g,h,k){a=[b,c,d,e,f,g,h,k,a];b=this.Oh;e=a[8];c="";e instanceof HTMLCanvasElement&&(c=e.toDataURL());e instanceof HTMLImageElement&&(c=e.src);c={x:0,y:0,width:a[6],height:a[7],href:c};d="";f=a[6]/a[2];g=a[7]/a[3];if(0!==a[4]||0!==a[5])d+=" translate("+a[4]+", "+a[5]+")";if(1!==f||1!==g)d+=" scale("+f+", "+g+")";if(0!==a[0]||0!==a[1])d+=" translate("+-a[0]+", "+-a[1]+")";if(0!==a[0]||0!==a[1]||a[2]!==e.naturalWidth||a[3]!==e.naturalHeight)e="CLIP"+this.Eu,this.Eu++,
f=se(this,"clipPath",{id:e}),f.appendChild(se(this,"rect",{x:a[0],y:a[1],width:a[2],height:a[3]})),this.zk.appendChild(f),c["clip-path"]="url(#"+e+")";we(this,"image",c,b,d);this.addElement("image",c)};r.fill=function(){ve(this,"fill",this.path,this.Oh)};r.fillRect=function(a,b,c,d){Ie(this,"fill",[a,b,c,d],this.Oh)};
r.fillText=function(a,b,c){a=[a,b,c];b=this.textAlign;"left"===b?b="start":"right"===b?b="end":"center"===b&&(b="middle");b={x:a[1],y:a[2],style:"font: "+this.font,"text-anchor":b};we(this,"fill",b,this.Oh);this.addElement("text",b,a[0])};r.lineTo=function(a,b){this.path.push(["L",a,b])};r.moveTo=function(a,b){this.path.push(["M",a,b])};r.quadraticCurveTo=function(a,b,c,d){this.path.push(["Q",a,b,c,d])};r.rect=function(a,b,c,d){this.path.push(["M",a,b],["L",a+c,b],["L",a+c,b+d],["L",a,b+d],["z"])};
r.restore=function(){this.Oh=this.stack.pop();this.path=this.stack.pop();var a=this.stack.pop();this.fillStyle=a.fillStyle;this.font=a.font;this.globalAlpha=a.globalAlpha;this.lineCap=a.lineCap;this.gv=a.gv;this.lineJoin=a.lineJoin;this.lineWidth=a.lineWidth;this.miterLimit=a.miterLimit;this.shadowBlur=a.shadowBlur;this.shadowColor=a.shadowColor;this.shadowOffsetX=a.shadowOffsetX;this.shadowOffsetY=a.shadowOffsetY;this.strokeStyle=a.strokeStyle;this.textAlign=a.textAlign};
r.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,gv:this.gv,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var a=[],b=0;b<this.path.length;b++)a.push(this.path[b]);this.stack.push(a);this.stack.push(this.Oh.copy())};
r.setTransform=function(a,b,c,d,e,f){1===a&&0===b&&0===c&&1===d&&0===e&&0===f||te(this,a,b,c,d,e,f)};r.scale=function(){};r.stroke=function(){ve(this,"stroke",this.path,this.Oh)};r.strokeRect=function(a,b,c,d){Ie(this,"stroke",[a,b,c,d],this.Oh)};function se(a,b,c,d){a=a.document.createElementNS(a.iG,b);if(Ea(c))for(var e in c)a.setAttributeNS("href"===e?"http://www.w3.org/1999/xlink":"",e,c[e]);void 0!==d&&(a.textContent=d);return a}
r.addElement=function(a,b,c){a=se(this,a,b,c);0<this.Ge.length?this.Ge[this.Ge.length-1].appendChild(a):this.zk.appendChild(a);return this.dv=a};
function we(a,b,c,d,e){1!==a.globalAlpha&&(c.opacity=a.globalAlpha);"fill"==b?(/^rgba\(/.test(a.fillStyle)?(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle),c.fill="rgb("+a[1]+","+a[2]+","+a[3]+")",c["fill-opacity"]=a[4]):c.fill=a.fillStyle instanceof qe?Je(a,a.fillStyle):a.fillStyle,c.stroke="none"):"stroke"==b&&(c.fill="none",/^rgba\(/.test(a.strokeStyle)?(b=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),
c.stroke="rgb("+b[1]+","+b[2]+","+b[3]+")",c["stroke-opacity"]=b[4]):c.stroke=a.strokeStyle instanceof qe?Je(a,a.strokeStyle):a.strokeStyle,c["stroke-width"]=a.lineWidth,c["stroke-linecap"]=a.lineCap,c["stroke-linejoin"]=a.lineJoin,c["stroke-miterlimit"]=a.miterLimit);d=d.re;d="matrix("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")";void 0!==e&&(d+=e);c.transform=d}
function Je(a,b){var c="GRAD"+a.jC;a.jC++;var d;if("linear"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,id:c,gradientUnits:"userSpaceOnUse"},d=se(a,"linearGradient",d);else if("radial"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,r1:b.r1,r2:b.r2,id:c},d=se(a,"radialGradient",d);else throw Error("invalid gradient");for(var e=b.JB,f=e.length,g=[],h=0;h<f;h++){var k=e[h],l=k.color,k={offset:k.offset,"stop-color":l};/^rgba\(/.test(l)&&(l=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(l),
k["stop-color"]="rgb("+l[1]+","+l[2]+","+l[3]+")",k["stop-opacity"]=l[4]);g.push(k)}g.sort(function(a,b){return a.offset>b.offset?1:-1});for(h=0;h<f;h++)d.appendChild(se(a,"stop",g[h]));a.zk.appendChild(d);return"url(#"+c+")"}function Ie(a,b,c,d){c={x:c[0],y:c[1],width:c[2],height:c[3]};we(a,b,c,d);a.addElement("rect",c)}
function ve(a,b,c,d){for(var e=[],f=0;f<c.length;f++){var g=Ka(c[f]),h=[g.shift()];if("A"==h[0])h.push(g.shift()+","+g.shift(),g.shift(),g.shift()+","+g.shift(),g.shift()+","+g.shift());else for(;g.length;)h.push(g.shift()+","+g.shift());e.push(h.join(" "))}c={d:e.join(" ")};we(a,b,c,d);"clipPath"===b?(b="CLIP"+a.Eu,a.Eu++,d=se(a,"clipPath",{id:b}),d.appendChild(se(a,"path",c)),a.zk.appendChild(d),0<a.Ge.length&&a.Ge[a.Ge.length-1].setAttributeNS(null,"clip-path","url(#"+b+")")):a.addElement("path",
c)}function ue(a,b,c,d,e,f,g){var h=Math.abs(e-f);if(e!=f){var k=b+d*Math.cos(f);f=c+d*Math.sin(f);h>=2*Math.PI?(ue(a,b,c,d,e,e+Math.PI,g),ue(a,b,c,d,e+Math.PI,e+2*Math.PI,g),a.path.push(["M",k,f])):(b+=d*Math.cos(e),c+=d*Math.sin(e),h=180*h/Math.PI,e=g?0:1,g=180<=h==!!g?0:1,0!==a.path.length?a.path.push(["L",b,c]):a.path.push(["M",b,c]),a.path.push(["A",d,d,h,g,e,k,f]))}}function te(a,b,c,d,e,f,g){var h=new pe;h.re=[b,c,d,e,f,g];b={};we(a,"g",b,h);h=a.addElement("g",b);a.Ge.push(h)}
r.Ja=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var a="SHADOW"+this.oD;this.oD++;var b=this.addElement("filter",{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),c,d,e,f,g;c=se(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",UI:this.shadowBlur/2});d=se(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor});e=se(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"});f=se(this,"feOffset",{"in":"comp",result:"offsetBlur",
dx:this.shadowOffsetX,dy:this.shadowOffsetY});g=se(this,"feMerge",{});g.appendChild(se(this,"feMergeNode",{"in":"offsetBlur"}));g.appendChild(se(this,"feMergeNode",{"in":"SourceGraphic"}));b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(f);b.appendChild(g);0<this.Ge.length&&this.Ge[this.Ge.length-1].setAttributeNS(null,"filter","url(#"+a+")")}};
function Rb(a,b){this.ownerDocument=void 0===b?document:b;var c=this.ownerDocument.createElement("canvas");c.tabIndex=0;this.Xc=c;c.getContext&&c.getContext("2d")||v("Browser does not support HTML Canvas Element");this.JE=c.getContext("2d");c.N=a;Object.seal(this)}r=Rb.prototype;r.getContext=function(){return this.JE};r.toDataURL=function(a,b){return this.Xc.toDataURL(a,b)};r.getBoundingClientRect=function(){return this.Xc.getBoundingClientRect()};r.focus=function(){return this.Xc.focus()};
r.addEventListener=function(a,b,c){this.Xc.addEventListener(a,b,c)};r.removeEventListener=function(a,b,c){this.Xc.removeEventListener(a,b,c)};G(Rb,{width:"width"},function(){return this.Xc.width},function(a){this.Xc.width=a});G(Rb,{height:"height"},function(){return this.Xc.height},function(a){this.Xc.height=a});G(Rb,{style:"style"},function(){return this.Xc.style},function(a){this.Xc.style=a});
var Q={ia:4*((Math.sqrt(2)-1)/3),ej:(new z(0,0)).va(),TD:(new D(0,0,0,0)).va(),mo:(new qd(0,0,0,0)).va(),RD:(new qd(2,2,2,2)).va(),SD:(new Za(Infinity,Infinity)).va(),OD:(new z(-Infinity,-Infinity)).va(),ND:(new z(Infinity,Infinity)).va(),no:(new Za(0,0)).va(),Nv:(new Za(1,1)).va(),lo:(new Za(6,6)).va(),Kv:(new Za(8,8)).va(),PD:(new z(NaN,NaN)).va(),Ov:new Sb,$h:new Sb,lz:null,sqrt:function(a){if(0>=a)return 0;var b=Q.lz;if(null===b){for(var b=[],c=0;2E3>=c;c++)b[c]=Math.sqrt(c);Q.lz=b}return 1>a?
(c=1/a,2E3>=c?1/b[c|0]:Math.sqrt(a)):2E3>=a?b[a|0]:Math.sqrt(a)},u:function(a,b){var c=a-b;return.5>c&&-.5<c},Sa:function(a,b){var c=a-b;return 5E-8>c&&-5E-8<c},ad:function(a,b,c,d,e,f,g){0>=e&&(e=1E-6);var h=0,k=0,l=0,m=0;a<c?(k=a,h=c):(k=c,h=a);b<d?(m=b,l=d):(m=d,l=b);if(a===c)return m<=g&&g<=l&&a-e<=f&&f<=a+e;if(b===d)return k<=f&&f<=h&&b-e<=g&&g<=b+e;h+=e;k-=e;if(k<=f&&f<=h&&(l+=e,m-=e,m<=g&&g<=l))if(h-k>l-m)if(a-c>e||c-a>e){if(f=(d-b)/(c-a)*(f-a)+b,f-e<=g&&g<=f+e)return!0}else return!0;else if(b-
d>e||d-b>e){if(g=(c-a)/(d-b)*(g-b)+a,g-e<=f&&f<=g+e)return!0}else return!0;return!1},Bu:function(a,b,c,d,e,f,g,h,k,l,m,n){if(Q.ad(a,b,g,h,n,c,d)&&Q.ad(a,b,g,h,n,e,f))return Q.ad(a,b,g,h,n,l,m);var p=(a+c)/2,q=(b+d)/2,s=(c+e)/2,t=(d+f)/2;e=(e+g)/2;f=(f+h)/2;d=(p+s)/2;c=(q+t)/2;var s=(s+e)/2,t=(t+f)/2,u=(d+s)/2,x=(c+t)/2;return Q.Bu(a,b,p,q,d,c,u,x,k,l,m,n)||Q.Bu(u,x,s,t,e,f,g,h,k,l,m,n)},BE:function(a,b,c,d,e,f,g,h,k){var l=(c+e)/2,m=(d+f)/2;k.x=(((a+c)/2+l)/2+(l+(e+g)/2)/2)/2;k.y=(((b+d)/2+m)/2+(m+
(f+h)/2)/2)/2;return k},AE:function(a,b,c,d,e,f,g,h){var k=(c+e)/2,l=(d+f)/2;return $c(((a+c)/2+k)/2,((b+d)/2+l)/2,(k+(e+g)/2)/2,(l+(f+h)/2)/2)},nn:function(a,b,c,d,e,f,g,h,k,l){if(Q.ad(a,b,g,h,k,c,d)&&Q.ad(a,b,g,h,k,e,f))id(l,a,b,0,0),id(l,g,h,0,0);else{var m=(a+c)/2,n=(b+d)/2,p=(c+e)/2,q=(d+f)/2;e=(e+g)/2;f=(f+h)/2;d=(m+p)/2;c=(n+q)/2;var p=(p+e)/2,q=(q+f)/2,s=(d+p)/2,t=(c+q)/2;Q.nn(a,b,m,n,d,c,s,t,k,l);Q.nn(s,t,p,q,e,f,g,h,k,l)}return l},Sd:function(a,b,c,d,e,f,g,h,k,l){if(Q.ad(a,b,g,h,k,c,d)&&
Q.ad(a,b,g,h,k,e,f))0===l.length&&(l.push(a),l.push(b)),l.push(g),l.push(h);else{var m=(a+c)/2,n=(b+d)/2,p=(c+e)/2,q=(d+f)/2;e=(e+g)/2;f=(f+h)/2;d=(m+p)/2;c=(n+q)/2;var p=(p+e)/2,q=(q+f)/2,s=(d+p)/2,t=(c+q)/2;Q.Sd(a,b,m,n,d,c,s,t,k,l);Q.Sd(s,t,p,q,e,f,g,h,k,l)}return l},Ey:function(a,b,c,d,e,f,g,h,k,l){if(Q.ad(a,b,e,f,l,c,d))return Q.ad(a,b,e,f,l,h,k);var m=(a+c)/2,n=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var p=(m+c)/2,q=(n+d)/2;return Q.Ey(a,b,m,n,p,q,g,h,k,l)||Q.Ey(p,q,c,d,e,f,g,h,k,l)},LI:function(a,b,c,
d,e,f,g){g.x=((a+c)/2+(c+e)/2)/2;g.y=((b+d)/2+(d+f)/2)/2;return g},Dy:function(a,b,c,d,e,f,g,h){if(Q.ad(a,b,e,f,g,c,d))id(h,a,b,0,0),id(h,e,f,0,0);else{var k=(a+c)/2,l=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var m=(k+c)/2,n=(l+d)/2;Q.Dy(a,b,k,l,m,n,g,h);Q.Dy(m,n,c,d,e,f,g,h)}return h},Vn:function(a,b,c,d,e,f,g,h){if(Q.ad(a,b,e,f,g,c,d))0===h.length&&(h.push(a),h.push(b)),h.push(e),h.push(f);else{var k=(a+c)/2,l=(b+d)/2;c=(c+e)/2;d=(d+f)/2;var m=(k+c)/2,n=(l+d)/2;Q.Vn(a,b,k,l,m,n,g,h);Q.Vn(m,n,c,d,e,f,g,h)}return h},
ir:function(a,b,c,d,e,f,g,h,k,l,m,n,p,q){0>=p&&(p=1E-6);if(Q.ad(a,b,g,h,p,c,d)&&Q.ad(a,b,g,h,p,e,f)){var s=(a-g)*(l-n)-(b-h)*(k-m);if(0===s)return!1;p=((a*h-b*g)*(k-m)-(a-g)*(k*n-l*m))/s;s=((a*h-b*g)*(l-n)-(b-h)*(k*n-l*m))/s;if((k>m?k-m:m-k)<(l>n?l-n:n-l)){if(g=k=0,b<h?(k=b,g=h):(k=h,g=b),s<k||s>g)return!1}else if(a<g?k=a:(k=g,g=a),p<k||p>g)return!1;q.x=p;q.y=s;return!0}var s=(a+c)/2,t=(b+d)/2;c=(c+e)/2;d=(d+f)/2;e=(e+g)/2;f=(f+h)/2;var u=(s+c)/2,x=(t+d)/2;c=(c+e)/2;d=(d+f)/2;var B=(u+c)/2,y=(x+d)/
2,C=(m-k)*(m-k)+(n-l)*(n-l),K=!1;Q.ir(a,b,s,t,u,x,B,y,k,l,m,n,p,q)&&(b=(q.x-k)*(q.x-k)+(q.y-l)*(q.y-l),b<C&&(C=b,K=!0));a=q.x;s=q.y;Q.ir(B,y,c,d,e,f,g,h,k,l,m,n,p,q)&&(b=(q.x-k)*(q.x-k)+(q.y-l)*(q.y-l),b<C?K=!0:(q.x=a,q.y=s));return K},jr:function(a,b,c,d,e,f,g,h,k,l,m,n,p){var q=0;0>=p&&(p=1E-6);if(Q.ad(a,b,g,h,p,c,d)&&Q.ad(a,b,g,h,p,e,f)){p=(a-g)*(l-n)-(b-h)*(k-m);if(0===p)return q;var s=((a*h-b*g)*(k-m)-(a-g)*(k*n-l*m))/p,t=((a*h-b*g)*(l-n)-(b-h)*(k*n-l*m))/p;if(s>=m)return q;if((k>m?k-m:m-k)<
(l>n?l-n:n-l)){if(a=k=0,b<h?(k=b,a=h):(k=h,a=b),t<k||t>a)return q}else if(a<g?(k=a,a=g):k=g,s<k||s>a)return q;0<p?q++:0>p&&q--}else{var s=(a+c)/2,t=(b+d)/2,u=(c+e)/2,x=(d+f)/2;e=(e+g)/2;f=(f+h)/2;d=(s+u)/2;c=(t+x)/2;var u=(u+e)/2,x=(x+f)/2,B=(d+u)/2,y=(c+x)/2,q=q+Q.jr(a,b,s,t,d,c,B,y,k,l,m,n,p),q=q+Q.jr(B,y,u,x,e,f,g,h,k,l,m,n,p)}return q},Kl:function(a,b,c,d,e,f,g){if(Q.Sa(a,c)){var h=0;c=0;b<d?(h=b,c=d):(h=d,c=b);d=f;if(d<h)return g.x=a,g.y=h,!1;if(d>c)return g.x=a,g.y=c,!1;g.x=a;g.y=d;return!0}if(Q.Sa(b,
d)){a<c?h=a:(h=c,c=a);d=e;if(d<h)return g.x=h,g.y=b,!1;if(d>c)return g.x=c,g.y=b,!1;g.x=d;g.y=b;return!0}h=((a-e)*(a-c)+(b-f)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(-5E-6>h)return g.x=a,g.y=b,!1;if(1.000005<h)return g.x=c,g.y=d,!1;g.x=a+h*(c-a);g.y=b+h*(d-b);return!0},mg:function(a,b,c,d,e,f,g,h,k){if(Q.u(a,c)&&Q.u(b,d))return k.x=a,k.y=b,!1;if(Q.Sa(e,g)){if(Q.Sa(a,c))return Q.Kl(a,b,c,d,e,f,k),!1;f=(d-b)/(c-a)*(e-a)+b;return Q.Kl(a,b,c,d,e,f,k)}h=(h-f)/(g-e);if(Q.Sa(a,c)){f=h*(a-e)+f;c=g=0;b<d?(g=b,
c=d):(g=d,c=b);if(f<g)return k.x=a,k.y=g,!1;if(f>c)return k.x=a,k.y=c,!1;k.x=a;k.y=f;return!0}g=(d-b)/(c-a);if(Q.Sa(h,g))return Q.Kl(a,b,c,d,e,f,k),!1;e=(g*a-h*e+f-b)/(g-h);if(Q.Sa(g,0)){a<c?g=a:(g=c,c=a);if(e<g)return k.x=g,k.y=b,!1;if(e>c)return k.x=c,k.y=b,!1;k.x=e;k.y=b;return!0}f=g*(e-a)+b;return Q.Kl(a,b,c,d,e,f,k)},mI:function(a,b,c,d,e){return Q.mg(c.x,c.y,d.x,d.y,a.x,a.y,b.x,b.y,e)},VH:function(a,b,c,d,e,f,g,h,k,l){function m(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);e<n&&(n=e,k.x=c,k.y=d)}var n=
Infinity;m(k.x,k.y);var p=0,q=0,s=0,t=0;e<g?(p=e,q=g):(p=g,q=e);f<h?(s=e,t=g):(s=g,t=e);p=(q-p)/2+l;l=(t-s)/2+l;e=(e+g)/2;f=(f+h)/2;if(0===p||0===l)return k;if(.5>(c>a?c-a:a-c)){p=1-(c-e)*(c-e)/(p*p);if(0>p)return k;p=Math.sqrt(p);d=-l*p+f;m(c,l*p+f);m(c,d)}else{c=(d-b)/(c-a);d=1/(p*p)+c*c/(l*l);h=2*c*(b-c*a)/(l*l)-2*c*f/(l*l)-2*e/(p*p);p=h*h-4*d*(2*c*a*f/(l*l)-2*b*f/(l*l)+f*f/(l*l)+e*e/(p*p)-1+(b-c*a)*(b-c*a)/(l*l));if(0>p)return k;p=Math.sqrt(p);l=(-h+p)/(2*d);m(l,c*l-c*a+b);p=(-h-p)/(2*d);m(p,
c*p-c*a+b)}return k},jk:function(a,b,c,d,e,f,g,h,k){var l=1E21,m=a,n=b;if(Q.mg(a,b,a,d,e,f,g,h,k)){var p=(k.x-e)*(k.x-e)+(k.y-f)*(k.y-f);p<l&&(l=p,m=k.x,n=k.y)}Q.mg(c,b,c,d,e,f,g,h,k)&&(p=(k.x-e)*(k.x-e)+(k.y-f)*(k.y-f),p<l&&(l=p,m=k.x,n=k.y));Q.mg(a,b,c,b,e,f,g,h,k)&&(p=(k.x-e)*(k.x-e)+(k.y-f)*(k.y-f),p<l&&(l=p,m=k.x,n=k.y));Q.mg(a,d,c,d,e,f,g,h,k)&&(p=(k.x-e)*(k.x-e)+(k.y-f)*(k.y-f),p<l&&(l=p,m=k.x,n=k.y));k.x=m;k.y=n;return 1E21>l},Vu:function(a,b,c){var d=b.x,e=b.y,f=c.x,g=c.y,h=a.left,k=a.right,
l=a.top,m=a.bottom;return d===f?(f=a=0,e<g?(a=e,f=g):(a=g,f=e),h<=d&&d<=k&&a<=m&&f>=l):e===g?(d<f?a=d:(a=f,f=d),l<=e&&e<=m&&a<=k&&f>=h):a.na(b)||a.na(c)||Q.Uu(h,l,k,l,d,e,f,g)||Q.Uu(k,l,k,m,d,e,f,g)||Q.Uu(k,m,h,m,d,e,f,g)||Q.Uu(h,m,h,l,d,e,f,g)?!0:!1},Uu:function(a,b,c,d,e,f,g,h){return 0>=Q.Fu(a,b,c,d,e,f)*Q.Fu(a,b,c,d,g,h)&&0>=Q.Fu(e,f,g,h,a,b)*Q.Fu(e,f,g,h,c,d)},Fu:function(a,b,c,d,e,f){c-=a;d-=b;a=e-a;b=f-b;f=a*d-b*c;0===f&&(f=a*c+b*d,0<f&&(f=(a-c)*c+(b-d)*d,0>f&&(f=0)));return 0>f?-1:0<f?1:0},
Zr:function(a){0>a&&(a+=360);360<=a&&(a-=360);return a},RB:function(a,b,c,d,e,f){void 0===f&&(f=!1);var g=Math.PI;f||(d*=g/180,e*=g/180);f=d<e?1:-1;var h=[],k=g/2,l=d;for(d=Math.min(2*g+1E-5,Math.abs(e-d));1E-5<d;)e=l+f*Math.min(d,k),h.push(Q.PE(c,l,e,a,b)),d-=Math.abs(e-l),l=e;return h},PE:function(a,b,c,d,e){var f=(c-b)/2,g=a*Math.cos(f),h=a*Math.sin(f),k=.5522847498*Math.tan(f),l=g+k*h,g=-h+k*g,h=-g,k=f+b,f=Math.cos(k),k=Math.sin(k);return[d+a*Math.cos(b),e+a*Math.sin(b),d+l*f-g*k,e+l*k+g*f,d+
l*f-h*k,e+l*k+h*f,d+a*Math.cos(c),e+a*Math.sin(c)]},ur:function(a,b,c,d,e,f,g){c=Math.floor((a-c)/e)*e+c;d=Math.floor((b-d)/f)*f+d;var h=c;c+e-a<e/2&&(h=c+e);a=d;d+f-b<f/2&&(a=d+f);g.k(h,a);return g},gC:function(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,f=1;do e=c%d,c=f=d,d=e;while(0<e);return f},YE:function(a,b,c,d){var e=0>c,f=0>d,g=0,h=g=0;a<b?(g=1,h=0):(g=0,h=1);var k=0,l=0,m=0,k=0===g?a:b,l=0===g?c:d;if(0===g?e:f)l=-l;g=h;m=0===g?c:d;if(0===g?e:f)m=-m;return Q.ZE(k,0===g?a:b,l,m,0,0)},ZE:function(a,
b,c,d,e,f){e=0;if(0<d)if(0<c){f=a*a;e=b*b;a*=c;var g=b*d,h=-e+g,k=-e+Math.sqrt(a*a+g*g);b=h;for(var l=0;9999999999>l;++l){b=.5*(h+k);if(b===h||b===k)break;var m=a/(b+f),n=g/(b+e),m=m*m+n*n-1;if(0<m)h=b;else if(0>m)k=b;else break}c=f*c/(b+f)-c;d=e*d/(b+e)-d;e=Math.sqrt(c*c+d*d)}else e=Math.abs(d-b);else d=a*a-b*b,e=a*c,e<d?(d=e/d,e=a*d,f=b*Math.sqrt(Math.abs(1-d*d)),c=e-c,e=Math.sqrt(c*c+f*f)):e=Math.abs(c-a);return e}};
function Ke(a){1<arguments.length&&v("Geometry constructor can take at most one optional argument, the Geometry type.");sb(this);this.qa=!1;void 0===a&&(a=Le);this.fa=a;this.fb=this.Wa=this.Wb=this.Pb=0;this.ii=new N(Me);this.ft=this.ii.K;this.Qs=(new D).freeze();this.Da=!0;this.Eh=ud;this.Fh=Hd;this.Em=this.Fm=NaN;this.oh=Ne}vb("Geometry",Ke);Ke.Og=!0;
Ke.prototype.copy=function(){var a=new Ke;a.fa=this.fa;a.Pb=this.Pb;a.Wb=this.Wb;a.Wa=this.Wa;a.fb=this.fb;for(var b=this.ii.l,c=b.length,d=a.ii,e=0;e<c;e++){var f=b[e].copy();d.add(f)}a.ft=this.ft;a.Qs.assign(this.Qs);a.Da=this.Da;a.Eh=this.Eh.O();a.Fh=this.Fh.O();a.Fm=this.Fm;a.Em=this.Em;a.oh=this.oh;return a};var Oe;Ke.Line=Oe=I(Ke,"Line",0);var Pe;Ke.Rectangle=Pe=I(Ke,"Rectangle",1);var Qe;Ke.Ellipse=Qe=I(Ke,"Ellipse",2);var Le;Ke.Path=Le=I(Ke,"Path",3);
Ke.prototype.va=function(){this.freeze();Object.freeze(this);return this};Ke.prototype.freeze=function(){this.qa=!0;var a=this.Xa;a.freeze();for(var a=a.l,b=a.length,c=0;c<b;c++)a[c].freeze();return this};Ke.prototype.wa=function(){Object.isFrozen(this)&&v("cannot thaw constant: "+this);this.qa=!1;var a=this.Xa;a.wa();for(var a=a.l,b=a.length,c=0;c<b;c++)a[c].wa();return this};
Ke.prototype.equalsApprox=Ke.prototype.Wd=function(a){if(!(a instanceof Ke))return!1;if(this.type!==a.type)return this.type===Oe&&a.type===Le?Ze(this,a):a.type===Oe&&this.type===Le?Ze(a,this):!1;if(this.type===Le){var b=this.Xa.l;a=a.Xa.l;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Wd(a[d]))return!1;return!0}return Q.u(this.da,a.da)&&Q.u(this.ea,a.ea)&&Q.u(this.q,a.q)&&Q.u(this.s,a.s)};
function Ze(a,b){if(a.type!==Oe||b.type!==Le)return!1;if(1===b.Xa.count){var c=b.Xa.Y(0);if(1===c.pa.count&&Q.u(a.da,c.da)&&Q.u(a.ea,c.ea)&&(c=c.pa.Y(0),c.type===$e&&Q.u(a.q,c.q)&&Q.u(a.s,c.s)))return!0}return!1}var af;Ke.stringify=af=function(a){return a.toString()};
Ke.prototype.toString=function(a){void 0===a&&(a=-1);switch(this.type){case Oe:return 0>a?"M"+this.da.toString()+" "+this.ea.toString()+"L"+this.q.toString()+" "+this.s.toString():"M"+this.da.toFixed(a)+" "+this.ea.toFixed(a)+"L"+this.q.toFixed(a)+" "+this.s.toFixed(a);case Pe:var b=new D(this.da,this.ea,0,0);b.FD(this.q,this.s,0,0);return 0>a?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+
"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case Qe:b=new D(this.da,this.ea,0,0);b.FD(this.q,this.s,0,0);if(0>a){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/
2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case Le:for(var b="",c=this.Xa.l,d=c.length,e=0;e<d;e++){var f=c[e];0<e&&(b+=" x ");f.Jr&&(b+="F ");b+=f.toString(a)}return b;default:return this.type.toString()}};var bf;
Ke.fillPath=bf=function(a){"string"!==typeof a&&ta(a,"string",Ke,"fillPath:str");a=a.split(/[Xx]/);for(var b=a.length,c="",d=0;d<b;d++)var e=a[d],c=null!==e.match(/[Ff]/)?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var cf;
Ke.parse=cf=function(a,b){function c(){return l>=t-1?!0:null!==k[l+1].match(/[A-Za-z]/)}function d(){l++;return k[l]}function e(){var a=new z(parseFloat(d()),parseFloat(d()));m===m.toLowerCase()&&(a.x=s.x+a.x,a.y=s.y+a.y);return a}function f(){return s=e()}function g(){return q=e()}function h(){return"c"!==n.toLowerCase()&&"s"!==n.toLowerCase()?s:new z(2*s.x-q.x,2*s.y-q.y)}void 0===b&&(b=!1);"string"!==typeof a&&ta(a,"string",Ke,"parse:str");a=a.replace(/,/gm," ");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2");a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2");a=a.replace(/([0-9])([+\-])/gm,"$1 $2");a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");a=a.replace(/[\s\r\t\n]+/gm," ");a=a.replace(/^\s+|\s+$/g,"");for(var k=a.split(" "),l=-1,m="",n="",p=new z(0,0),q=new z(0,0),s=new z(0,
0),t=k.length,u=E(),x=!1,B=!1,y=!0;!(l>=t-1);)if(n=m,m=d(),""!==m)switch(m.toUpperCase()){case "X":y=!0;B=x=!1;break;case "M":var C=f();null===u.yb||!0===y?(S(u,C.x,C.y,x,!1,!B),y=!1):u.moveTo(C.x,C.y);for(p=s;!c();)C=f(),u.lineTo(C.x,C.y);break;case "L":for(;!c();)C=f(),u.lineTo(C.x,C.y);break;case "H":for(;!c();)s=C=new z((m===m.toLowerCase()?s.x:0)+parseFloat(d()),s.y),u.lineTo(s.x,s.y);break;case "V":for(;!c();)s=C=new z(s.x,(m===m.toLowerCase()?s.y:0)+parseFloat(d())),u.lineTo(s.x,s.y);break;
case "C":for(;!c();){var K=e(),J=g(),C=f();T(u,K.x,K.y,J.x,J.y,C.x,C.y)}break;case "S":for(;!c();)K=h(),J=g(),C=f(),T(u,K.x,K.y,J.x,J.y,C.x,C.y);break;case "Q":for(;!c();)J=g(),C=f(),df(u,J.x,J.y,C.x,C.y);break;case "T":for(;!c();)q=J=h(),C=f(),df(u,J.x,J.y,C.x,C.y);break;case "B":for(;!c();){var C=parseFloat(d()),K=parseFloat(d()),J=parseFloat(d()),ba=parseFloat(d()),ja=parseFloat(d()),Y=ja,P=!1;c()||(Y=parseFloat(d()),c()||(P=0!==parseFloat(d())));m===m.toLowerCase()&&(J+=s.x,ba+=s.y);u.arcTo(C,
K,J,ba,ja,Y,P)}break;case "A":for(;!c();)K=Math.abs(parseFloat(d())),J=Math.abs(parseFloat(d())),ba=parseFloat(d()),ja=!!parseFloat(d()),Y=!!parseFloat(d()),C=f(),ef(u,K,J,ba,ja,Y,C.x,C.y);break;case "Z":C=u.m.Xa.l[u.m.Xa.length-1];ff(u);s=p;break;case "F":C="";for(K=1;k[l+K];)if(null!==k[l+K].match(/[Uu]/))K++;else if(null===k[l+K].match(/[A-Za-z]/))K++;else{C=k[l+K];break}C.match(/[Mm]/)?x=!0:gf(u);break;case "U":C="";for(K=1;k[l+K];)if(null!==k[l+K].match(/[Ff]/))K++;else if(null===k[l+K].match(/[A-Za-z]/))K++;
else{C=k[l+K];break}C.match(/[Mm]/)?B=!0:u.Ja(!1)}p=u.m;F(u);if(b)for(u=p.Xa.i;u.next();)C=u.value,C.Jr=!0;return p};function hf(a,b){for(var c=a.length,d=Va(),e=0;e<c;e++){var f=a[e];d.x=f[0];d.y=f[1];b.Ka(d);f[0]=d.x;f[1]=d.y;d.x=f[2];d.y=f[3];b.Ka(d);f[2]=d.x;f[3]=d.y;d.x=f[4];d.y=f[5];b.Ka(d);f[4]=d.x;f[5]=d.y;d.x=f[6];d.y=f[7];b.Ka(d);f[6]=d.x;f[7]=d.y}A(d)}Ke.prototype.jy=function(){if(this.Da||this.ft!==this.Xa.K)return!0;for(var a=this.Xa.l,b=a.length,c=0;c<b;c++)if(a[c].jy())return!0;return!1};
Ke.prototype.dz=function(){this.Da=!1;this.ft=this.Xa.K;for(var a=this.Xa.l,b=a.length,c=0;c<b;c++)a[c].dz()};Ke.prototype.zf=function(){var a=this.Qs;a.wa();isNaN(this.Fm)||isNaN(this.Em)?a.k(0,0,0,0):a.k(0,0,this.Fm,this.Em);jf(this,a,!1);id(a,0,0,0,0);a.freeze()};Ke.prototype.computeBoundsWithoutOrigin=Ke.prototype.GE=function(){var a=new D;jf(this,a,!0);return a};
function jf(a,b,c){switch(a.type){case Oe:case Pe:case Qe:c?b.k(a.Pb,a.Wb,0,0):id(b,a.Pb,a.Wb,0,0);id(b,a.Wa,a.fb,0,0);break;case Le:var d=a.Xa;a=d.l;for(var d=d.length,e=0;e<d;e++){var f=a[e];c&&0===e?b.k(f.da,f.ea,0,0):id(b,f.da,f.ea,0,0);for(var g=f.pa.l,h=g.length,k=f.da,l=f.ea,m=0;m<h;m++){var n=g[m];switch(n.type){case $e:case vf:k=n.q;l=n.s;id(b,k,l,0,0);break;case wf:Q.nn(k,l,n.kb,n.wb,n.Hd,n.Jd,n.q,n.s,.5,b);k=n.q;l=n.s;break;case xf:Q.Dy(k,l,n.kb,n.wb,n.q,n.s,.5,b);k=n.q;l=n.s;break;case yf:case zf:for(var n=
n.type===yf?Af(n,f):Bf(n,f,k,l),p=n.length,q=null,s=0;s<p;s++)q=n[s],Q.nn(q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],.5,b);null!==q&&(k=q[6],l=q[7]);break;default:v("Unknown Segment type: "+n.type)}}}break;default:v("Unknown Geometry type: "+a.type)}}Ke.prototype.normalize=Ke.prototype.normalize=function(){pa(this);var a=this.GE();this.offset(-a.x,-a.y);return new z(-a.x,-a.y)};Ke.prototype.offset=Ke.prototype.offset=function(a,b){pa(this);this.transform(1,0,0,1,a,b);return this};
Ke.prototype.scale=Ke.prototype.scale=function(a,b){pa(this);this.transform(a,0,0,b,0,0);return this};Ke.prototype.rotate=Ke.prototype.rotate=function(a,b,c){pa(this);void 0===b&&(b=0);void 0===c&&(c=0);var d=hb();d.reset();d.rotate(a,b,c);this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);jb(d);return this};
Ke.prototype.transform=Ke.prototype.transform=function(a,b,c,d,e,f){var g=0,h=0;switch(this.type){case Oe:case Pe:case Qe:g=this.Pb;h=this.Wb;this.Pb=g*a+h*c+e;this.Wb=g*b+h*d+f;g=this.Wa;h=this.fb;this.Wa=g*a+h*c+e;this.fb=g*b+h*d+f;break;case Le:for(var k=this.Xa.l,l=k.length,m=0;m<l;m++){var n=k[m],g=n.da,h=n.ea;n.da=g*a+h*c+e;n.ea=g*b+h*d+f;for(var n=n.pa.l,p=n.length,q=0;q<p;q++){var s=n[q];switch(s.type){case $e:case vf:g=s.q;h=s.s;s.q=g*a+h*c+e;s.s=g*b+h*d+f;break;case wf:g=s.kb;h=s.wb;s.kb=
g*a+h*c+e;s.wb=g*b+h*d+f;g=s.Hd;h=s.Jd;s.Hd=g*a+h*c+e;s.Jd=g*b+h*d+f;g=s.q;h=s.s;s.q=g*a+h*c+e;s.s=g*b+h*d+f;break;case xf:g=s.kb;h=s.wb;s.kb=g*a+h*c+e;s.wb=g*b+h*d+f;g=s.q;h=s.s;s.q=g*a+h*c+e;s.s=g*b+h*d+f;break;case yf:g=s.ra;h=s.Ba;s.ra=g*a+h*c+e;s.Ba=g*b+h*d+f;s.radiusX*=Math.sqrt(a*a+c*c);void 0!==s.radiusY&&(s.radiusY*=Math.sqrt(b*b+d*d));break;case zf:g=s.q;h=s.s;s.q=g*a+h*c+e;s.s=g*b+h*d+f;s.radiusX*=Math.sqrt(a*a+c*c);s.radiusY*=Math.sqrt(b*b+d*d);break;default:v("Unknown Segment type: "+
s.type)}}}}this.Da=!0;return this};Ke.prototype.Xq=function(a,b){var c=this.Pb,d=this.Wb,e=this.Wa,f=this.fb,g=Math.min(c,e),h=Math.min(d,f),c=Math.abs(e-c),d=Math.abs(f-d),f=Va();f.x=g;f.y=h;b.Ka(f);e=new Me(f.x,f.y);f.x=g+c;f.y=h;b.Ka(f);e.pa.add(new Cf($e,f.x,f.y));f.x=g+c;f.y=h+d;b.Ka(f);e.pa.add(new Cf($e,f.x,f.y));f.x=g;f.y=h+d;b.Ka(f);e.pa.add((new Cf($e,f.x,f.y)).close());A(f);a.type=Le;a.Xa.add(e);return a};
Ke.prototype.na=function(a,b,c,d){var e=a.x,f=a.y,g=this.Qa.x-20;a=a.y;for(var h=0,k=0,l=0,m=0,n=0,p=0,q=this.Xa.l,s=q.length,t=0;t<s;t++){var u=q[t];if(u.Jr){if(c&&u.na(e,f,b))return!0;for(var x=u.pa,k=u.da,l=u.ea,B=k,y=l,C=x.l,K=0;K<=x.length;K++){var J,ba;K!==x.length?(J=C[K],ba=J.type,n=J.q,p=J.s):(ba=$e,n=B,p=y);switch(ba){case vf:m=Df(e,f,g,a,k,l,B,y);if(isNaN(m))return!0;h+=m;B=n;y=p;break;case $e:m=Df(e,f,g,a,k,l,n,p);if(isNaN(m))return!0;h+=m;break;case wf:m=Q.jr(k,l,J.kb,J.wb,J.Hd,J.Jd,
n,p,g,a,e,f,.5);h+=m;break;case xf:m=Q.jr(k,l,(k+2*J.kb)/3,(l+2*J.wb)/3,(J.kb+2*n)/3,(J.kb+2*n)/3,n,p,g,a,e,f,.5);h+=m;break;case yf:case zf:ba=J.type===yf?Af(J,u):Bf(J,u,k,l);for(var ja=ba.length,Y=null,P=0;P<ja;P++){Y=ba[P];if(0===P){m=Df(e,f,g,a,k,l,Y[0],Y[1]);if(isNaN(m))return!0;h+=m}m=Q.jr(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],g,a,e,f,.5);h+=m}null!==Y&&(n=Y[6],p=Y[7]);break;default:v("Unknown Segment type: "+J.type)}k=n;l=p}if(0!==h)return!0;h=0}else if(u.na(e,f,d?b:b+2))return!0}return 0!==
h};function Df(a,b,c,d,e,f,g,h){if(Q.ad(e,f,g,h,.05,a,b))return NaN;var k=(a-c)*(f-h);if(0===k)return 0;var l=((a*d-b*c)*(e-g)-(a-c)*(e*h-f*g))/k;b=(a*d-b*c)*(f-h)/k;if(l>=a)return 0;if((e>g?e-g:g-e)<(f>h?f-h:h-f)){if(e=a=0,f<h?(a=f,e=h):(a=h,e=f),b<a||b>e)return 0}else if(e<g?(a=e,e=g):a=g,l<a||l>e)return 0;return 0<k?1:-1}function Ef(a,b,c,d){a=a.Xa.l;for(var e=a.length,f=0;f<e;f++)if(a[f].na(b,c,d))return!0;return!1}
Ke.prototype.getPointAlongPath=function(a){(0>a||1<a)&&za(a,"0 <= fraction <= 1",Ke,"getPointAlongPath:fraction");var b=this.Xa.first(),c=ob(),d=[];d.push(b.da);d.push(b.ea);for(var e=b.da,f=b.ea,g=e,h=f,k=b.pa.l,l=k.length,m=0;m<l;m++){var n=k[m];switch(n.fa){case vf:c.push(d);d=[];d.push(n.q);d.push(n.s);e=n.q;f=n.s;g=e;h=f;break;case $e:d.push(n.q);d.push(n.s);e=n.q;f=n.s;break;case wf:Q.Sd(e,f,n.wc,n.Rd,n.sf,n.tf,n.Wa,n.fb,.5,d);e=n.q;f=n.s;break;case xf:Q.Vn(e,f,n.wc,n.Rd,n.Wa,n.fb,.5,d);e=n.q;
f=n.s;break;case yf:for(var p=Af(n,b),q=p.length,s=0;s<q;s++){var t=p[s];Q.Sd(e,f,t[2],t[3],t[4],t[5],t[6],t[7],.5,d);e=t[6];f=t[7]}break;case zf:p=Bf(n,b,e,f);q=p.length;for(s=0;s<q;s++)t=p[s],Q.Sd(e,f,t[2],t[3],t[4],t[5],t[6],t[7],.5,d),e=t[6],f=t[7];break;default:v("Segment not of valid type")}n.Jg&&(d.push(g),d.push(h))}c.push(d);p=0;g=c.length;for(h=d=b=0;h<g;h++)for(k=c[h],l=k.length,m=0;m<l;m+=2)e=k[m],f=k[m+1],0!==m&&(n=Math.sqrt(Zc(b,d,e,f)),p+=n),b=e,d=f;a*=p;for(h=p=0;h<g;h++)for(k=c[h],
l=k.length,m=0;m<l;m++){e=k[m];f=k[m+1];if(0!==m){n=Math.sqrt(Zc(b,d,e,f));if(p+n>a)return m=(a-p)/n,pb(c),new z(b+(e-b)*m,d+(f-d)*m);p+=n}b=e;d=f}pb(c);return null};G(Ke,{type:"type"},function(){return this.fa},function(a){this.fa!==a&&(pa(this,a),this.fa=a,this.Da=!0)});G(Ke,{da:"startX"},function(){return this.Pb},function(a){this.Pb!==a&&(pa(this,a),this.Pb=a,this.Da=!0)});G(Ke,{ea:"startY"},function(){return this.Wb},function(a){this.Wb!==a&&(pa(this,a),this.Wb=a,this.Da=!0)});
G(Ke,{q:"endX"},function(){return this.Wa},function(a){this.Wa!==a&&(pa(this,a),this.Wa=a,this.Da=!0)});G(Ke,{s:"endY"},function(){return this.fb},function(a){this.fb!==a&&(pa(this,a),this.fb=a,this.Da=!0)});G(Ke,{Xa:"figures"},function(){return this.ii},function(a){this.ii!==a&&(pa(this,a),this.ii=a,this.Da=!0)});Ke.prototype.add=Ke.prototype.add=function(a){this.ii.add(a);return this};G(Ke,{o:"spot1"},function(){return this.Eh},function(a){pa(this,a);this.Eh=a.O()});
G(Ke,{p:"spot2"},function(){return this.Fh},function(a){pa(this,a);this.Fh=a.O()});G(Ke,{Vc:"defaultStretch"},function(){return this.oh},function(a){pa(this,a);this.oh=a});H(Ke,{Qa:"bounds"},function(){this.jy()&&(this.dz(),this.zf());return this.Qs});function Me(a,b,c,d){sb(this);this.qa=!1;void 0===c&&(c=!0);this.Nk=c;void 0===d&&(d=!0);this.Gm=d;this.Pb=void 0!==a?a:0;this.Wb=void 0!==b?b:0;this.Ym=new N(Cf);this.Xt=this.Ym.K;this.Da=!0}vb("PathFigure",Me);Me.Og=!0;
Me.prototype.copy=function(){var a=new Me;a.Nk=this.Nk;a.Gm=this.Gm;a.Pb=this.Pb;a.Wb=this.Wb;for(var b=this.Ym.l,c=b.length,d=a.Ym,e=0;e<c;e++){var f=b[e].copy();d.add(f)}a.Xt=this.Xt;a.Da=this.Da;return a};Me.prototype.equalsApprox=Me.prototype.Wd=function(a){if(!(a instanceof Me&&Q.u(this.da,a.da)&&Q.u(this.ea,a.ea)))return!1;var b=this.pa.l;a=a.pa.l;var c=b.length;if(c!==a.length)return!1;for(var d=0;d<c;d++)if(!b[d].Wd(a[d]))return!1;return!0};r=Me.prototype;
r.toString=function(a){void 0===a&&(a=-1);for(var b=0>a?"M"+this.da.toString()+" "+this.ea.toString():"M"+this.da.toFixed(a)+" "+this.ea.toFixed(a),c=this.pa.l,d=c.length,e=0;e<d;e++)b+=" "+c[e].toString(a);return b};r.freeze=function(){this.qa=!0;var a=this.pa;a.freeze();for(var b=a.l,a=a.length,c=0;c<a;c++)b[c].freeze();return this};r.wa=function(){this.qa=!1;var a=this.pa;a.wa();for(var a=a.l,b=a.length,c=0;c<b;c++)a[c].wa();return this};
r.jy=function(){if(this.Da)return!0;var a=this.pa;if(this.Xt!==a.K)return!0;for(var a=a.l,b=a.length,c=0;c<b;c++)if(a[c].Da)return!0;return!1};r.dz=function(){this.Da=!1;var a=this.pa;this.Xt=a.K;for(var a=a.l,b=a.length,c=0;c<b;c++){var d=a[c];d.Da=!1;d.ai=null}};G(Me,{Jr:"isFilled"},function(){return this.Nk},function(a){pa(this,a);this.Nk=a});G(Me,{pk:"isShadowed"},function(){return this.Gm},function(a){pa(this,a);this.Gm=a});
G(Me,{da:"startX"},function(){return this.Pb},function(a){pa(this,a);this.Pb=a;this.Da=!0});G(Me,{ea:"startY"},function(){return this.Wb},function(a){pa(this,a);this.Wb=a;this.Da=!0});G(Me,{pa:"segments"},function(){return this.Ym},function(a){pa(this,a);this.Ym=a;this.Da=!0});Me.prototype.add=Me.prototype.add=function(a){this.Ym.add(a);return this};
Me.prototype.na=function(a,b,c){for(var d=this.da,e=this.ea,f=d,g=e,h=this.pa.l,k=h.length,l=0;l<k;l++){var m=h[l];switch(m.type){case vf:f=m.q;g=m.s;d=m.q;e=m.s;break;case $e:if(Q.ad(d,e,m.q,m.s,c,a,b))return!0;d=m.q;e=m.s;break;case wf:if(Q.Bu(d,e,m.kb,m.wb,m.Hd,m.Jd,m.q,m.s,.5,a,b,c))return!0;d=m.q;e=m.s;break;case xf:if(Q.Ey(d,e,m.kb,m.wb,m.q,m.s,.5,a,b,c))return!0;d=m.q;e=m.s;break;case yf:case zf:for(var n=m.type===yf?Af(m,this):Bf(m,this,d,e),p=n.length,q=null,s=0;s<p;s++)if(q=n[s],0===s&&
Q.ad(d,e,q[0],q[1],c,a,b)||Q.Bu(q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],.5,a,b,c))return!0;null!==q&&(d=q[6],e=q[7]);break;default:v("Unknown Segment type: "+m.type)}if(m.Xu&&(d!==f||e!==g)&&Q.ad(d,e,f,g,c,a,b))return!0}return!1};
function Cf(a,b,c,d,e,f,g,h){sb(this);this.qa=!1;void 0===a&&(a=$e);this.fa=a;this.Wa=void 0!==b?b:0;this.fb=void 0!==c?c:0;a===zf?(void 0!==f&&(a=f%360,0>a&&(a+=360),this.wc=a),void 0!==d&&(this.sf=Math.max(d,0)),void 0!==e&&(this.tf=Math.max(e,0)),this.Nm=!!g,this.em=!!h):(void 0!==d&&(this.wc=d),void 0!==e&&(this.Rd=e),void 0!==f&&(a===yf&&(f=Math.max(f,0)),this.sf=f),void 0!==g&&"number"===typeof g&&(a===yf&&(g=Math.max(g,0)),this.tf=g));this.Jg=!1;this.Da=!0;this.ai=null}vb("PathSegment",Cf);
Cf.Og=!0;Cf.prototype.copy=function(){var a=new Cf;a.fa=this.fa;a.Wa=this.Wa;a.fb=this.fb;void 0!==this.wc&&(a.wc=this.wc);void 0!==this.Rd&&(a.Rd=this.Rd);void 0!==this.sf&&(a.sf=this.sf);void 0!==this.tf&&(a.tf=this.tf);void 0!==this.Nm&&(a.Nm=this.Nm);void 0!==this.em&&(a.em=this.em);a.Jg=this.Jg;a.Da=this.Da;return a};
Cf.prototype.equalsApprox=Cf.prototype.Wd=function(a){if(!(a instanceof Cf)||this.type!==a.type||this.Xu!==a.Xu)return!1;switch(this.type){case vf:case $e:return Q.u(this.q,a.q)&&Q.u(this.s,a.s);case wf:return Q.u(this.q,a.q)&&Q.u(this.s,a.s)&&Q.u(this.kb,a.kb)&&Q.u(this.wb,a.wb)&&Q.u(this.Hd,a.Hd)&&Q.u(this.Jd,a.Jd);case xf:return Q.u(this.q,a.q)&&Q.u(this.s,a.s)&&Q.u(this.kb,a.kb)&&Q.u(this.wb,a.wb);case yf:return Q.u(this.bh,a.bh)&&Q.u(this.Xh,a.Xh)&&Q.u(this.ra,a.ra)&&Q.u(this.Ba,a.Ba)&&Q.u(this.radiusX,
a.radiusX)&&Q.u(this.radiusY,a.radiusY);case zf:return this.Wu===a.Wu&&this.$u===a.$u&&Q.u(this.Hv,a.Hv)&&Q.u(this.q,a.q)&&Q.u(this.s,a.s)&&Q.u(this.radiusX,a.radiusX)&&Q.u(this.radiusY,a.radiusY);default:return!1}};
Cf.prototype.toString=function(a){void 0===a&&(a=-1);var b="";switch(this.type){case vf:b=0>a?"M"+this.q.toString()+" "+this.s.toString():"M"+this.q.toFixed(a)+" "+this.s.toFixed(a);break;case $e:b=0>a?"L"+this.q.toString()+" "+this.s.toString():"L"+this.q.toFixed(a)+" "+this.s.toFixed(a);break;case wf:b=0>a?"C"+this.kb.toString()+" "+this.wb.toString()+" "+this.Hd.toString()+" "+this.Jd.toString()+" "+this.q.toString()+" "+this.s.toString():"C"+this.kb.toFixed(a)+" "+this.wb.toFixed(a)+" "+this.Hd.toFixed(a)+
" "+this.Jd.toFixed(a)+" "+this.q.toFixed(a)+" "+this.s.toFixed(a);break;case xf:b=0>a?"Q"+this.kb.toString()+" "+this.wb.toString()+" "+this.q.toString()+" "+this.s.toString():"Q"+this.kb.toFixed(a)+" "+this.wb.toFixed(a)+" "+this.q.toFixed(a)+" "+this.s.toFixed(a);break;case yf:b=0>a?"B"+this.bh.toString()+" "+this.Xh.toString()+" "+this.ra.toString()+" "+this.Ba.toString()+" "+this.radiusX:"B"+this.bh.toFixed(a)+" "+this.Xh.toFixed(a)+" "+this.ra.toFixed(a)+" "+this.Ba.toFixed(a)+" "+this.radiusX;
break;case zf:b=0>a?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Hv.toString()+" "+(this.$u?1:0)+" "+(this.Wu?1:0)+" "+this.q.toString()+" "+this.s.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.Hv.toFixed(a)+" "+(this.$u?1:0)+" "+(this.Wu?1:0)+" "+this.q.toFixed(a)+" "+this.s.toFixed(a);break;default:b=this.type.toString()}return b+(this.Jg?"z":"")};var vf;Cf.Move=vf=I(Cf,"Move",0);var $e;Cf.Line=$e=I(Cf,"Line",1);var wf;
Cf.Bezier=wf=I(Cf,"Bezier",2);var xf;Cf.QuadraticBezier=xf=I(Cf,"QuadraticBezier",3);var yf;Cf.Arc=yf=I(Cf,"Arc",4);var zf;Cf.SvgArc=zf=I(Cf,"SvgArc",4);Cf.prototype.freeze=function(){this.qa=!0;return this};Cf.prototype.wa=function(){this.qa=!1;return this};Cf.prototype.close=Cf.prototype.close=function(){this.Jg=!0;return this};
function Af(a,b){if(null!==a.ai&&!1===b.Da)return a.ai;var c=a.radiusX,d=a.radiusY;void 0===d&&(d=c);var e=a.wc,f=a.Rd,g=Q.RB(0,0,c<d?c:d,a.bh,a.bh+a.Xh,!1);if(c!==d){var h=hb();h.reset();c<d?h.scale(1,d/c):h.scale(c/d,1);hf(g,h);jb(h)}c=g.length;for(d=0;d<c;d++)h=g[d],h[0]+=e,h[1]+=f,h[2]+=e,h[3]+=f,h[4]+=e,h[5]+=f,h[6]+=e,h[7]+=f;a.ai=g;return a.ai}
function Bf(a,b,c,d){function e(a,b,c,d){return(a*d<b*c?-1:1)*Math.acos(f(a,b,c,d))}function f(a,b,c,d){return(a*c+b*d)/(Math.sqrt(a*a+b*b)*Math.sqrt(c*c+d*d))}if(null!==a.ai&&!1===b.Da)return a.ai;b=a.sf;var g=a.tf,h=Math.PI/180*a.wc,k=a.Nm,l=a.em,m=a.Wa,n=a.fb,p=Math.cos(h),q=Math.sin(h),s=p*(c-m)/2+q*(d-n)/2,h=-q*(c-m)/2+p*(d-n)/2,t=s*s/(b*b)+h*h/(g*g);1<t&&(b*=Math.sqrt(t),g*=Math.sqrt(t));t=(k===l?-1:1)*Math.sqrt((b*b*g*g-b*b*h*h-g*g*s*s)/(b*b*h*h+g*g*s*s));isNaN(t)&&(t=0);k=t*b*h/g;t=t*-g*s/
b;isNaN(k)&&(k=0);isNaN(t)&&(t=0);c=(c+m)/2+p*k-q*t;d=(d+n)/2+q*k+p*t;n=e(1,0,(s-k)/b,(h-t)/g);p=(s-k)/b;m=(h-t)/g;s=(-s-k)/b;k=(-h-t)/g;h=e(p,m,s,k);s=f(p,m,s,k);-1>=s?h=Math.PI:1<=s&&(h=0);!l&&0<h&&(h-=2*Math.PI);l&&0>h&&(h+=2*Math.PI);l=b>g?1:b/g;s=b>g?g/b:1;b=Q.RB(0,0,b>g?b:g,n,n+h,!0);g=hb();g.reset();g.translate(c,d);g.rotate(a.wc,0,0);g.scale(l,s);hf(b,g);jb(g);a.ai=b;return a.ai}G(Cf,{Xu:"isClosed"},function(){return this.Jg},function(a){this.Jg!==a&&(this.Jg=a,this.Da=!0)});
G(Cf,{type:"type"},function(){return this.fa},function(a){pa(this,a);this.fa=a;this.Da=!0});G(Cf,{q:"endX"},function(){return this.Wa},function(a){pa(this,a);this.Wa=a;this.Da=!0});G(Cf,{s:"endY"},function(){return this.fb},function(a){pa(this,a);this.fb=a;this.Da=!0});G(Cf,{kb:"point1X"},function(){return this.wc},function(a){pa(this,a);this.wc=a;this.Da=!0});G(Cf,{wb:"point1Y"},function(){return this.Rd},function(a){pa(this,a);this.Rd=a;this.Da=!0});
G(Cf,{Hd:"point2X"},function(){return this.sf},function(a){pa(this,a);this.sf=a;this.Da=!0});G(Cf,{Jd:"point2Y"},function(){return this.tf},function(a){pa(this,a);this.tf=a;this.Da=!0});G(Cf,{ra:"centerX"},function(){return this.wc},function(a){pa(this,a);this.wc=a;this.Da=!0});G(Cf,{Ba:"centerY"},function(){return this.Rd},function(a){pa(this,a);this.Rd=a;this.Da=!0});G(Cf,{radiusX:"radiusX"},function(){return this.sf},function(a){0>a&&za(a,">= zero",Cf,"radiusX");pa(this,a);this.sf=a;this.Da=!0});
G(Cf,{radiusY:"radiusY"},function(){return this.tf},function(a){0>a&&za(a,">= zero",Cf,"radiusY");pa(this,a);this.tf=a;this.Da=!0});G(Cf,{bh:"startAngle"},function(){return this.Wa},function(a){this.Wa!==a&&(pa(this,a),a%=360,0>a&&(a+=360),this.Wa=a,this.Da=!0)});G(Cf,{Xh:"sweepAngle"},function(){return this.fb},function(a){pa(this,a);360<a&&(a=360);-360>a&&(a=-360);this.fb=a;this.Da=!0});G(Cf,{Wu:"isClockwiseArc"},function(){return this.em},function(a){pa(this,a);this.em=a;this.Da=!0});
G(Cf,{$u:"isLargeArc"},function(){return this.Nm},function(a){pa(this,a);this.Nm=a;this.Da=!0});G(Cf,{Hv:"xAxisRotation"},function(){return this.wc},function(a){a%=360;0>a&&(a+=360);pa(this,a);this.wc=a;this.Da=!0});function Ff(){this.N=null;this.vx=(new z(0,0)).freeze();this.pw=(new z(0,0)).freeze();this.Ns=this.Ht=0;this.wt="";this.ku=this.ct=!1;this.Zs=this.Ps=0;this.bi=this.jt=this.st=!1;this.To=null;this.ju=0;this.uf=this.hu=null}vb("InputEvent",Ff);
Ff.prototype.copy=function(){var a=new Ff;a.N=this.N;a.vx.assign(this.ve);a.pw.assign(this.S);a.Ht=this.Ht;a.Ns=this.Ns;a.wt=this.wt;a.ct=this.ct;a.ku=this.ku;a.Ps=this.Ps;a.Zs=this.Zs;a.st=this.st;a.jt=this.jt;a.bi=this.bi;a.To=this.To;a.ju=this.ju;a.hu=this.hu;a.uf=this.uf;return a};
Ff.prototype.toString=function(){var a="^";0!==this.Bc&&(a+="M:"+this.Bc);0!==this.button&&(a+="B:"+this.button);""!==this.key&&(a+="K:"+this.key);0!==this.ke&&(a+="C:"+this.ke);0!==this.bk&&(a+="D:"+this.bk);this.qc&&(a+="h");this.bubbles&&(a+="b");null!==this.S&&(a+="@"+this.S.toString());return a};G(Ff,{g:"diagram"},function(){return this.N},function(a){this.N=a});G(Ff,{ve:"viewPoint"},function(){return this.vx},function(a){ra(a,z,Ff,"viewPoint");this.vx.assign(a)});
G(Ff,{S:"documentPoint"},function(){return this.pw},function(a){ra(a,z,Ff,"documentPoint");this.pw.assign(a)});G(Ff,{Bc:"modifiers"},function(){return this.Ht},function(a){this.Ht=a});G(Ff,{button:"button"},function(){return this.Ns},function(a){this.Ns=a});G(Ff,{key:"key"},function(){return this.wt},function(a){this.wt=a});G(Ff,{dk:"down"},function(){return this.ct},function(a){this.ct=a});G(Ff,{up:"up"},function(){return this.ku},function(a){this.ku=a});
G(Ff,{ke:"clickCount"},function(){return this.Ps},function(a){this.Ps=a});G(Ff,{bk:"delta"},function(){return this.Zs},function(a){this.Zs=a});G(Ff,{Lr:"isMultiTouch"},function(){return this.st},function(a){this.st=a});G(Ff,{qc:"handled"},function(){return this.jt},function(a){this.jt=a});G(Ff,{bubbles:"bubbles"},function(){return this.bi},function(a){this.bi=a});G(Ff,{event:"event"},function(){return this.To},function(a){this.To=a});
H(Ff,{qk:"isTouchEvent"},function(){var a=window.TouchEvent;return a&&this.event instanceof a?!0:(a=window.PointerEvent)&&this.event instanceof a&&"touch"===this.event.pointerType});G(Ff,{timestamp:"timestamp"},function(){return this.ju},function(a){this.ju=a});G(Ff,{Qf:"targetDiagram"},function(){return this.hu},function(a){this.hu=a});G(Ff,{Kd:"targetObject"},function(){return this.uf},function(a){this.uf=a});
G(Ff,{control:"control"},function(){return 0!==(this.Bc&1)},function(a){this.Bc=a?this.Bc|1:this.Bc&-2});G(Ff,{shift:"shift"},function(){return 0!==(this.Bc&4)},function(a){this.Bc=a?this.Bc|4:this.Bc&-5});G(Ff,{alt:"alt"},function(){return 0!==(this.Bc&2)},function(a){this.Bc=a?this.Bc|2:this.Bc&-3});G(Ff,{Ur:"meta"},function(){return 0!==(this.Bc&8)},function(a){this.Bc=a?this.Bc|8:this.Bc&-9});G(Ff,{left:"left"},function(){return 0===this.button},function(a){this.button=a?0:2});
G(Ff,{vI:"middle"},function(){return 1===this.button},function(a){this.button=a?1:0});G(Ff,{right:"right"},function(){return 2===this.button},function(a){this.button=a?2:0});function Gf(){this.N=null;this.zb="";this.Qt=this.cu=null;this.Os=!1}vb("DiagramEvent",Gf);Gf.prototype.copy=function(){var a=new Gf;a.N=this.N;a.zb=this.zb;a.cu=this.cu;a.Qt=this.Qt;a.Os=this.Os;return a};
Gf.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a+="x");null!==this.Yy&&(a+=":"+this.Yy.toString());null!==this.Cy&&(a+="("+this.Cy.toString()+")");return a};G(Gf,{g:"diagram"},function(){return this.N},function(a){this.N=a});G(Gf,{name:"name"},function(){return this.zb},function(a){this.zb=a});G(Gf,{Yy:"subject"},function(){return this.cu},function(a){this.cu=a});G(Gf,{Cy:"parameter"},function(){return this.Qt},function(a){this.Qt=a});
G(Gf,{cancel:"cancel"},function(){return this.Os},function(a){this.Os=a});function Hf(){this.zo=If;this.bl=this.Gt="";this.Wp=this.Xp=this.bq=this.cq=this.aq=this.N=this.fd=null}vb("ChangedEvent",Hf);var Pf;Hf.Transaction=Pf=I(Hf,"Transaction",-1);var If;Hf.Property=If=I(Hf,"Property",0);var Qf;Hf.Insert=Qf=I(Hf,"Insert",1);var Rf;Hf.Remove=Rf=I(Hf,"Remove",2);Hf.prototype.clear=Hf.prototype.clear=function(){this.Wp=this.Xp=this.bq=this.cq=this.aq=this.N=this.fd=null};
Hf.prototype.copy=function(){var a=new Hf;a.fd=this.fd;a.N=this.N;a.zo=this.zo;a.Gt=this.Gt;a.bl=this.bl;a.aq=this.aq;var b=this.cq;a.cq=Ea(b)&&"function"===typeof b.O?b.O():b;b=this.bq;a.bq=Ea(b)&&"function"===typeof b.O?b.O():b;b=this.Xp;a.Xp=Ea(b)&&"function"===typeof b.O?b.O():b;b=this.Wp;a.Wp=Ea(b)&&"function"===typeof b.O?b.O():b;return a};
Hf.prototype.toString=function(){var a="",a=this.Uc===Pf?a+"* ":this.Uc===If?a+(null!==this.U?"!m":"!d"):a+((null!==this.U?"!m":"!d")+this.Uc);this.propertyName&&"string"===typeof this.propertyName&&(a+=" "+this.propertyName);this.af&&this.af!==this.propertyName&&(a+=" "+this.af);a+=": ";this.Uc===Pf?null!==this.oldValue&&(a+=" "+this.oldValue):(null!==this.object&&(a+=Sf(this.object)),null!==this.oldValue&&(a+="  old: "+Sf(this.oldValue)),null!==this.Nf&&(a+=" "+this.Nf),null!==this.newValue&&(a+=
"  new: "+Sf(this.newValue)),null!==this.Lf&&(a+=" "+this.Lf));return a};Hf.prototype.getValue=Hf.prototype.ja=function(a){return a?this.oldValue:this.newValue};Hf.prototype.getParam=function(a){return a?this.Nf:this.Lf};Hf.prototype.canUndo=Hf.prototype.canUndo=function(){return null!==this.U||null!==this.g?!0:!1};Hf.prototype.undo=Hf.prototype.undo=function(){this.canUndo()&&(null!==this.U?this.U.ul(this,!0):null!==this.g&&this.g.ul(this,!0))};
Hf.prototype.canRedo=Hf.prototype.canRedo=function(){return null!==this.U||null!==this.g?!0:!1};Hf.prototype.redo=Hf.prototype.redo=function(){this.canRedo()&&(null!==this.U?this.U.ul(this,!1):null!==this.g&&this.g.ul(this,!1))};G(Hf,{U:"model"},function(){return this.fd},function(a){this.fd=a});G(Hf,{g:"diagram"},function(){return this.N},function(a){this.N=a});G(Hf,{Uc:"change"},function(){return this.zo},function(a){this.zo=a});
G(Hf,{af:"modelChange"},function(){return this.Gt},function(a){this.Gt=a});G(Hf,{propertyName:"propertyName"},function(){return this.bl},function(a){this.bl=a});H(Hf,{fI:"isTransactionFinished"},function(){return this.zo===Pf&&("CommittedTransaction"===this.bl||"FinishedUndo"===this.bl||"FinishedRedo"===this.bl)});G(Hf,{object:"object"},function(){return this.aq},function(a){this.aq=a});G(Hf,{oldValue:"oldValue"},function(){return this.cq},function(a){this.cq=a});
G(Hf,{Nf:"oldParam"},function(){return this.bq},function(a){this.bq=a});G(Hf,{newValue:"newValue"},function(){return this.Xp},function(a){this.Xp=a});G(Hf,{Lf:"newParam"},function(){return this.Wp},function(a){this.Wp=a});
function jc(a){1<arguments.length&&v("Model constructor can only take one optional argument, the Array of node data.");sb(this);this.jw=this.zb="";this.Ej=!1;this.Rw={};this.Be=[];this.Vb=new Fb(null,Object);this.Yk="key";this.Ts=this.At=null;this.bw=this.cw=!1;this.Yp="category";this.Eg=new Fb(null,Xb);this.ti=null;this.Dh=!1;this.ux=null;this.V=new Tf;void 0!==a&&(this.ng=a)}vb("Model",jc);jc.prototype.clear=jc.prototype.clear=function(){this.Be=[];this.Vb.clear();this.Eg.clear();this.V.clear()};
r=jc.prototype;r.ws=function(){var a="";""!==this.name&&(a+=',\n  "name": '+this.quote(this.name));""!==this.$j&&(a+=',\n  "dataFormat": '+this.quote(this.$j));this.Ta&&(a+=',\n  "isReadOnly": '+this.Ta);"key"!==this.Ml&&"string"===typeof this.Ml&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.Ml));this.Jx&&(a+=',\n  "copiesArrays": true');this.Ix&&(a+=',\n  "copiesArrayObjects": true');"category"!==this.Ll&&"string"===typeof this.Ll&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.Ll));return a};
r.fz=function(){var a="",b=this.Vr,c=!1,d;for(d in b)if(!Uf(d,b[d])){c=!0;break}c&&(a=',\n  "modelData": '+Vf(this,b));return a+',\n  "nodeDataArray": '+Wf(this,this.ng,!0)};r.cs=function(a){a.name&&(this.name=a.name);a.dataFormat&&(this.$j=a.dataFormat);a.isReadOnly&&(this.Ta=a.isReadOnly);a.nodeKeyProperty&&(this.Ml=a.nodeKeyProperty);a.copiesArrays&&(this.Jx=a.copiesArrays);a.copiesArrayObjects&&(this.Ix=a.copiesArrayObjects);a.nodeCategoryProperty&&(this.Ll=a.nodeCategoryProperty)};
r.Gy=function(a){var b=a.modelData;Ea(b)&&(this.es(b),this.Vr=b);a=a.nodeDataArray;Fa(a)&&(this.es(a),this.ng=a)};r.toString=function(a){void 0===a&&(a=0);if(1<a)return this.az();var b=(""!==this.name?this.name:"")+" Model";if(0<a){b+="\n node data:";a=this.ng;for(var c=Ia(a),d=0;d<c;d++)var e=La(a,d),b=b+(" "+this.$a(e)+":"+Sf(e))}return b};
jc.prototype.toJson=jc.prototype.toJSON=jc.prototype.az=function(a){void 0===a&&(a=this.constructor===jc?"go.Model":this.constructor===Xf?"go.GraphLinksModel":this.constructor===Yf?"go.TreeModel":xa(this));return'{ "class": '+this.quote(a)+this.ws()+this.fz()+"}"};
jc.fromJson=jc.fromJSON=function(a,b){void 0===b&&(b=null);null!==b&&ra(b,jc,jc,"fromJson:model");var c=null;if("string"===typeof a)if(window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){}else Da("WARNING: no JSON.parse available");else"object"===typeof a?c=a:v("Unable to construct a Model from: "+a);if(null===b){var e;e=null;var f=c["class"];if("string"===typeof f)try{var g=null;0===f.indexOf("go.")?(f=f.substr(3),g=aa[f]):(g=aa[f],void 0===g&&(g=window[f]));"function"===typeof g&&
(e=new g)}catch(h){}null===e||e instanceof jc?b=e:v("Unable to construct a Model of declared class: "+c["class"])}null===b&&(b=new Xf);b.cs(c);b.Gy(c);return b};
jc.prototype.replaceJsonObjects=jc.prototype.es=function(a){if(Fa(a))for(var b=Ia(a),c=0;c<b;c++){var d=La(a,c);Ea(d)&&Na(a,c,this.es(d))}else if(Ea(a)){for(c in a)if(d=a[c],Ea(d)&&(d=this.es(d),a[c]=d,"points"===c&&Array.isArray(d))){for(var e=0===d.length%2,f=0;f<d.length;f++)if("number"!==typeof d[f]){e=!1;break}if(e){e=new N(z);for(f=0;f<d.length/2;f++)e.add(new z(d[2*f],d[2*f+1]));e.freeze();a[c]=e}}if("object"===typeof a){c=a;d=a["class"];if("NaN"===d)c=NaN;else if("Date"===d)c=new Date(a.value);
else if("go.Point"===d)c=new z(Zf(a.x),Zf(a.y));else if("go.Size"===d)c=new Za(Zf(a.width),Zf(a.height));else if("go.Rect"===d)c=new D(Zf(a.x),Zf(a.y),Zf(a.width),Zf(a.height));else if("go.Margin"===d)c=new qd(Zf(a.top),Zf(a.right),Zf(a.bottom),Zf(a.left));else if("go.Spot"===d)c="string"===typeof a["enum"]?sd(a["enum"]):new R(Zf(a.x),Zf(a.y),Zf(a.offsetX),Zf(a.offsetY));else if("go.Brush"===d){if(c=new $f,c.type=vc($f,a.type),a.start instanceof R&&(c.start=a.start),a.end instanceof R&&(c.end=a.end),
"number"===typeof a.startRadius&&(c.qs=Zf(a.startRadius)),"number"===typeof a.endRadius&&(c.rr=Zf(a.endRadius)),a=a.colorStops,Ea(a))for(b in a)c.addColorStop(parseFloat(b),a[b])}else"go.Geometry"===d&&(b=null,b="string"===typeof a.path?cf(a.path):new Ke,b.type=vc(Ke,a.type),"number"===typeof a.startX&&(b.da=Zf(a.startX)),"number"===typeof a.startY&&(b.ea=Zf(a.startY)),"number"===typeof a.endX&&(b.q=Zf(a.endX)),"number"===typeof a.endY&&(b.s=Zf(a.endY)),a.spot1 instanceof R&&(b.o=a.spot1),a.spot2 instanceof
R&&(b.p=a.spot2),c=b);a=c}}return a};jc.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"\t"===e?b+"\\t":b+e;return'"'+b+'"'};
jc.prototype.writeJsonValue=jc.prototype.xs=function(a){return void 0===a?"undefined":null===a?"null":!0===a?"true":!1===a?"false":"string"===typeof a?this.quote(a):"number"===typeof a?Infinity===a?"9e9999":-Infinity===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString():a instanceof Date?'{"class":"Date", "value":"'+a.toJSON()+'"}':a instanceof Number?this.xs(a.valueOf()):Fa(a)?Wf(this,a):Ea(a)?Vf(this,a):"function"===typeof a?"null":a.toString()};
function Wf(a,b,c){void 0===c&&(c=!1);var d=Ia(b);if(0>=d)return"[]";var e=new zc;e.add("[ ");c&&1<d&&e.add("\n");for(var f=0;f<d;f++){var g=La(b,f);void 0!==g&&(0<f&&(e.add(","),c&&e.add("\n")),e.add(a.xs(g)))}c&&1<d&&e.add("\n");e.add(" ]");return e.toString()}function Uf(a,b){return void 0===b||"__gohashid"===a||"_"===a[0]||"function"===typeof b?!0:!1}function ag(a){return isNaN(a)?"NaN":Infinity===a?"9e9999":-Infinity===a?"-9e9999":a}
function Vf(a,b){var c=b;if(c instanceof z){var d=c;b={"class":"go.Point",x:ag(d.x),y:ag(d.y)}}else if(c instanceof Za){var e=c;b={"class":"go.Size",width:ag(e.width),height:ag(e.height)}}else if(c instanceof D)b={"class":"go.Rect",x:ag(c.x),y:ag(c.y),width:ag(c.width),height:ag(c.height)};else if(c instanceof qd)b={"class":"go.Margin",top:ag(c.top),right:ag(c.right),bottom:ag(c.bottom),left:ag(c.left)};else if(c instanceof R)e=c,b=e.Jc()?{"class":"go.Spot",x:ag(e.x),y:ag(e.y),offsetX:ag(e.offsetX),
offsetY:ag(e.offsetY)}:{"class":"go.Spot","enum":e.toString()};else if(c instanceof $f){b={"class":"go.Brush",type:c.type.name};if(c.type===bg)b.color=c.color;else if(c.type===cg||c.type===dg)b.start=c.start,b.end=c.end,c.type===dg&&(0!==c.qs&&(b.startRadius=ag(c.qs)),isNaN(c.rr)||(b.endRadius=ag(c.rr)));if(null!==c.lr){for(var f={},g=c.lr.i;g.next();)f[g.key]=g.value;b.colorStops=f}}else if(c instanceof Ke)b={"class":"go.Geometry",type:c.type.name},0!==c.da&&(b.startX=ag(c.da)),0!==c.ea&&(b.startY=
ag(c.ea)),0!==c.q&&(b.endX=ag(c.q)),0!==c.s&&(b.endY=ag(c.s)),c.o.A(ud)||(b.spot1=c.o),c.p.A(Hd)||(b.spot2=c.p),c.type===Le&&(b.path=af(c));else if(c instanceof U||c instanceof M||c instanceof jg||c instanceof jc||c instanceof kg||c instanceof ec||c instanceof lg||c instanceof kc||c instanceof Tf||c instanceof mg)return Da("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+c.toString()),"{}";f="{";c=!0;for(d in b)if(e=Gb(b,d),!Uf(d,e))if(c?
c=!1:f+=", ",f+='"'+d+'":',"points"===d&&e instanceof N&&e.fa===z){g=e;e="[";for(g=g.i;g.next();){var h=g.value;1<e.length&&(e+=",");e+=a.xs(h.x);e+=",";e+=a.xs(h.y)}e+="]";f+=e}else f+=a.xs(e);return f+"}"}function Zf(a){return"number"===typeof a?a:"NaN"===a?NaN:"9e9999"===a?Infinity:"-9e9999"===a?-Infinity:parseFloat(a)}G(jc,{name:"name"},function(){return this.zb},function(a){var b=this.zb;b!==a&&(w(a,"string",jc,"name"),this.zb=a,this.h("name",b,a))});
G(jc,{$j:"dataFormat"},function(){return this.jw},function(a){var b=this.jw;b!==a&&(w(a,"string",jc,"dataFormat"),this.jw=a,this.h("dataFormat",b,a))});G(jc,{Ta:"isReadOnly"},function(){return this.Ej},function(a){var b=this.Ej;b!==a&&(w(a,"boolean",jc,"isReadOnly"),this.Ej=a,this.h("isReadOnly",b,a))});G(jc,{Vr:"modelData"},function(){return this.Rw},function(a){var b=this.Rw;b!==a&&(w(a,"object",jc,"modelData"),this.Rw=a,this.h("modelData",b,a),this.sb(a))});
jc.prototype.addChangedListener=jc.prototype.xx=function(a){w(a,"function",jc,"addChangedListener:listener");null===this.ti&&(this.ti=new N("function"));this.ti.add(a)};jc.prototype.removeChangedListener=jc.prototype.Jy=function(a){w(a,"function",jc,"removeChangedListener:listener");null!==this.ti&&(this.ti.remove(a),0===this.ti.count&&(this.ti=null))};
jc.prototype.Cu=function(a){this.Ma||this.V.mC(a);if(null!==this.ti){var b=this.ti,c=b.length;if(1===c)b=b.Y(0),b(a);else if(0!==c)for(var d=b.ae(),e=0;e<c;e++)b=d[e],b(a)}};jc.prototype.raiseChangedEvent=jc.prototype.ec=function(a,b,c,d,e,f,g){ng(this,"",a,b,c,d,e,f,g)};jc.prototype.raiseChanged=jc.prototype.h=function(a,b,c,d,e){ng(this,"",If,a,this,b,c,d,e)};jc.prototype.raiseDataChanged=jc.prototype.Fy=function(a,b,c,d,e,f){ng(this,"",If,b,a,c,d,e,f)};
function ng(a,b,c,d,e,f,g,h,k){void 0===h&&(h=null);void 0===k&&(k=null);var l=new Hf;l.U=a;l.Uc=c;l.af=b;l.propertyName=d;l.object=e;l.oldValue=f;l.Nf=h;l.newValue=g;l.Lf=k;a.Cu(l)}G(jc,{V:"undoManager"},function(){return this.ux},function(a){var b=this.ux;b!==a&&(ra(a,Tf,jc,"undoManager"),null!==b&&b.rG(this),this.ux=a,null!==a&&a.tE(this))});G(jc,{Ma:"skipsUndoManager"},function(){return this.Dh},function(a){w(a,"boolean",jc,"skipsUndoManager");this.Dh=a});
jc.prototype.ul=function(a,b){if(null!==a&&a.U===this)if(a.Uc===If){var c=a.object,d=a.propertyName,e=a.ja(b);Hb(c,d,e)}else a.Uc===Qf?"nodeDataArray"===a.af?(c=a.newValue,Ea(c)&&(d=this.$a(c),void 0!==d&&(b?(Ta(this.Be,a.Lf),this.Vb.remove(d)):(Qa(this.Be,a.Lf,c),this.Vb.add(d,c))))):""===a.af?(c=a.object,!Fa(c)&&a.propertyName&&(c=Gb(a.object,a.propertyName)),Fa(c)&&(d=a.newValue,e=a.Lf,b?Ta(c,e):Qa(c,e,d))):v("unknown ChangedEvent.Insert object: "+a.toString()):a.Uc===Rf?"nodeDataArray"===a.af?
(c=a.oldValue,Ea(c)&&(d=this.$a(c),void 0!==d&&(b?(Qa(this.Be,a.Nf,c),this.Vb.add(d,c)):(Ta(this.Be,a.Nf),this.Vb.remove(d))))):""===a.af?(c=a.object,!Fa(c)&&a.propertyName&&(c=Gb(a.object,a.propertyName)),Fa(c)&&(d=a.oldValue,e=a.Nf,b?Qa(c,e,d):Ta(c,e))):v("unknown ChangedEvent.Remove object: "+a.toString()):a.Uc!==Pf&&v("unknown ChangedEvent: "+a.toString())};jc.prototype.startTransaction=jc.prototype.Bb=function(a){return this.V.Bb(a)};jc.prototype.commitTransaction=jc.prototype.od=function(a){return this.V.od(a)};
jc.prototype.rollbackTransaction=jc.prototype.Yn=function(){return this.V.Yn()};jc.prototype.updateTargetBindings=jc.prototype.sb=function(a,b){void 0===b&&(b="");ng(this,"SourceChanged",Pf,b,a,null,null)};G(jc,{Ml:"nodeKeyProperty"},function(){return this.Yk},function(a){var b=this.Yk;b!==a&&(og(a,jc,"nodeKeyProperty"),0<this.Vb.count&&v("Cannot set Model.nodeKeyProperty when there is existing node data"),this.Yk=a,this.h("nodeKeyProperty",b,a))});
function og(a,b,c){"string"!==typeof a&&"function"!==typeof a&&ta(a,"string or function",b,c)}jc.prototype.getKeyForNodeData=jc.prototype.$a=function(a){if(null!==a){var b=this.Yk;if(""!==b&&(b=Gb(a,b),void 0!==b)){if(pg(b))return b;v("Key value for node data "+a+" is not a number or a string: "+b)}}};
jc.prototype.setKeyForNodeData=jc.prototype.Sy=function(a,b){void 0!==b&&null!==b&&pg(b)||ta(b,"number or string",jc,"setKeyForNodeData:key");if(null!==a){var c=this.Yk;if(""!==c)if(this.le(a)){var d=Gb(a,c);d!==b&&null===this.Fe(b)&&(Hb(a,c,b),this.Vb.remove(d),this.Vb.add(b,a),ng(this,"nodeKey",If,c,a,d,b),"string"===typeof c&&this.sb(a,c),this.ds(d,b))}else Hb(a,c,b)}};
G(jc,{oI:"makeUniqueKeyFunction"},function(){return this.At},function(a){var b=this.At;b!==a&&(null!==a&&w(a,"function",jc,"makeUniqueKeyFunction"),this.At=a,this.h("makeUniqueKeyFunction",b,a))});function pg(a){return"number"===typeof a||"string"===typeof a}jc.prototype.containsNodeData=jc.prototype.le=function(a){a=this.$a(a);return void 0===a?!1:this.Vb.contains(a)};
jc.prototype.findNodeDataForKey=jc.prototype.Fe=function(a){null===a&&v("Model.findNodeDataForKey:key must not be null");return void 0!==a&&pg(a)?this.Vb.ja(a):null};
G(jc,{ng:"nodeDataArray"},function(){return this.Be},function(a){var b=this.Be;if(b!==a){Ga(a,jc,"nodeDataArray");this.Vb.clear();this.cz();for(var c=Ia(a),d=0;d<c;d++){var e=La(a,d);if(!Ea(e)){v("Model.nodeDataArray must only contain Objects, not: "+e);return}tb(e)}this.Be=a;for(var f=new N(Object),d=0;d<c;d++){var e=La(a,d),g=this.$a(e);void 0===g?f.add(e):null!==this.Vb.ja(g)?f.add(e):this.Vb.add(g,e)}for(d=f.i;d.next();)e=d.value,this.BC(e),f=this.$a(e),void 0!==f&&this.Vb.add(f,e);ng(this,"nodeDataArray",
If,"nodeDataArray",this,b,a);for(d=0;d<c;d++)e=La(a,d),this.Xn(e),this.Wn(e);this.IB();Array.isArray(a)||(this.Ta=!0)}});
jc.prototype.makeNodeDataKeyUnique=jc.prototype.BC=function(a){if(null!==a){var b=this.Yk;if(""!==b){var c=this.$a(a);if(void 0===c||this.Vb.contains(c)){var d=this.At;if(null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.Vb.contains(c))){Hb(a,b,c);return}if("string"===typeof c){for(d=2;this.Vb.contains(c+d);)d++;Hb(a,b,c+d)}else if(void 0===c||"number"===typeof c){for(d=-this.Vb.count-1;this.Vb.contains(d);)d--;Hb(a,b,d)}else v("Model.getKeyForNodeData returned something other than a string or a number: "+
c)}}}};jc.prototype.addNodeData=jc.prototype.pl=function(a){if(null!==a){tb(a);var b=this.$a(a);if(void 0===b||this.Vb.ja(b)!==a)this.BC(a),b=this.$a(a),void 0===b?v("Model.makeNodeDataKeyUnique failed on "+a+".  Data not added to Model."):(this.Vb.add(b,a),b=Ia(this.Be),Qa(this.Be,b,a),ng(this,"nodeDataArray",Qf,"nodeDataArray",this,null,a,null,b),this.Xn(a),this.Wn(a))}};jc.prototype.addNodeDataCollection=function(a){if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.pl(La(a,c));else for(a=a.i;a.next();)this.pl(a.value)};
jc.prototype.removeNodeData=jc.prototype.Ly=function(a){if(null!==a){var b=this.$a(a);void 0!==b&&this.Vb.contains(b)&&(this.Vb.remove(b),b=Oa(this.Be,a),0>b||(Ta(this.Be,b),ng(this,"nodeDataArray",Rf,"nodeDataArray",this,a,null,b,null),this.vs(a)))}};jc.prototype.removeNodeDataCollection=function(a){if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.Ly(La(a,c));else for(a=a.i;a.next();)this.Ly(a.value)};r=jc.prototype;r.ds=function(a,b){var c=qg(this,a);c instanceof Xb&&this.Eg.add(b,c)};r.cz=function(){};
r.Xn=function(){};r.Wn=function(){};r.vs=function(){};function rg(a,b,c){if(void 0!==b){var d=a.Eg.ja(b);null===d&&(d=new Xb(Object),a.Eg.add(b,d));d.add(c)}}function sg(a,b,c){if(void 0!==b){var d=a.Eg.ja(b);d instanceof Xb&&(void 0===c||null===c?a.Eg.remove(b):(d.remove(c),0===d.count&&a.Eg.remove(b)))}}function qg(a,b){if(void 0===b)return null;var c=a.Eg.ja(b);return c instanceof Xb?c:null}jc.prototype.clearUnresolvedReferences=jc.prototype.IB=function(a){void 0===a?this.Eg.clear():this.Eg.remove(a)};
G(jc,{DH:"copyNodeDataFunction"},function(){return this.Ts},function(a){var b=this.Ts;b!==a&&(null!==a&&w(a,"function",jc,"copyNodeDataFunction"),this.Ts=a,this.h("copyNodeDataFunction",b,a))});G(jc,{Jx:"copiesArrays"},function(){return this.cw},function(a){var b=this.cw;b!==a&&(null!==a&&w(a,"boolean",jc,"copiesArrays"),this.cw=a,this.h("copiesArrays",b,a))});
G(jc,{Ix:"copiesArrayObjects"},function(){return this.bw},function(a){var b=this.bw;b!==a&&(null!==a&&w(a,"boolean",jc,"copiesArrayObjects"),this.bw=a,this.h("copiesArrayObjects",b,a))});jc.prototype.copyNodeData=function(a){if(null===a)return null;var b=null,b=this.Ts,b=null!==b?b(a,this):tg(this,a,!0);Ea(b)&&sb(b);return b};
function tg(a,b,c){if(a.Jx&&Array.isArray(b)){var d=[];for(c=0;c<b.length;c++){var e=tg(a,b[c],a.Ix);d.push(e)}sb(d);return d}if(c&&Ea(b)){c=(c=b.constructor)?new c:{};for(d in b)if("__gohashid"!==d){var e=Gb(b,d),f;f=e;f instanceof U||f instanceof M||f instanceof jg||f instanceof ug||f instanceof vg||f instanceof kg||f instanceof ec||f instanceof lg||f instanceof Ff||f instanceof Gf?("_"!==d[0]&&Da('Warning: found GraphObject or Diagram reference when copying model data on property "'+d+'" of data object: '+
b.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+f.toString()),f=!0):f=f instanceof jc||f instanceof Tf||f instanceof mg||f instanceof Hf?!0:!1;f||(e=tg(a,e,!1));Hb(c,d,e)}sb(c);return c}return b}var wg=!1;
jc.prototype.setDataProperty=function(a,b,c){if(this.le(a))if(b===this.Ml)this.Sy(a,c);else{if(b===this.Ll){this.wv(a,c);return}}else!wg&&a instanceof U&&(wg=!0,Da('Model.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),Da("  Is that really your intent?"));var d=Gb(a,b);d!==c&&(Hb(a,b,c),this.Fy(a,b,d,c))};jc.prototype.addArrayItem=function(a,b){this.BF(a,-1,b)};
jc.prototype.insertArrayItem=jc.prototype.BF=function(a,b,c){a===this.Be&&v("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");0>b&&(b=Ia(a));Qa(a,b,c);ng(this,"",Qf,"",a,null,c,null,b)};jc.prototype.removeArrayItem=function(a,b){void 0===b&&(b=-1);a===this.Be&&v("Model.removeArrayItem should not be called on the Model.nodeDataArray");-1===b&&(b=Ia(a)-1);var c=La(a,b);Ta(a,b);ng(this,"",Rf,"",a,c,null,b,null)};
G(jc,{Ll:"nodeCategoryProperty"},function(){return this.Yp},function(a){var b=this.Yp;b!==a&&(og(a,jc,"nodeCategoryProperty"),this.Yp=a,this.h("nodeCategoryProperty",b,a))});jc.prototype.getCategoryForNodeData=jc.prototype.Sx=function(a){if(null===a)return"";var b=this.Yp;if(""===b)return"";b=Gb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;v("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
jc.prototype.setCategoryForNodeData=jc.prototype.wv=function(a,b){w(b,"string",jc,"setCategoryForNodeData:cat");if(null!==a){var c=this.Yp;if(""!==c)if(this.le(a)){var d=Gb(a,c);void 0===d&&(d="");d!==b&&(Hb(a,c,b),ng(this,"nodeCategory",If,c,a,d,b))}else Hb(a,c,b)}};
function Xf(a,b){2<arguments.length&&v("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");jc.call(this);this.Lg=[];this.Wk=new Xb(Object);this.rj=this.Ss=null;this.pi="from";this.si="to";this.Cp=this.Bp="";this.yp="category";this.Mg="";this.Jt="isGroup";this.zi="group";this.dw=!1;void 0!==a&&(this.ng=a);void 0!==b&&(this.$i=b)}yb(Xf,jc);vb("GraphLinksModel",Xf);
Xf.prototype.clear=Xf.prototype.clear=function(){jc.prototype.clear.call(this);this.Lg=[];this.Wk.clear()};r=Xf.prototype;r.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.az();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<a){b+="\n node data:";a=this.ng;for(var c=Ia(a),d=0,d=0;d<c;d++)var e=La(a,d),b=b+(" "+this.$a(e)+":"+Sf(e));b+="\n link data:";a=this.$i;c=Ia(a);for(d=0;d<c;d++)e=La(a,d),b+=" "+this.hk(e)+"--\x3e"+this.kk(e)}return b};
r.ws=function(){var a=jc.prototype.ws.call(this),b="";"category"!==this.Pr&&"string"===typeof this.Pr&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.Pr));"from"!==this.In&&"string"===typeof this.In&&(b+=',\n  "linkFromKeyProperty": '+this.quote(this.In));"to"!==this.Kn&&"string"===typeof this.Kn&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.Kn));""!==this.Qr&&"string"===typeof this.Qr&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.Qr));""!==this.Sr&&"string"===typeof this.Sr&&(b+=
',\n  "linkToPortIdProperty": '+this.quote(this.Sr));""!==this.Rr&&"string"===typeof this.Rr&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.Rr));"isGroup"!==this.Yr&&"string"===typeof this.Yr&&(b+=',\n  "nodeIsGroupProperty": '+this.quote(this.Yr));"group"!==this.Tn&&"string"===typeof this.Tn&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.Tn));return a+b};r.fz=function(){var a=jc.prototype.fz.call(this),b=',\n  "linkDataArray": '+Wf(this,this.$i,!0);return a+b};
r.cs=function(a){jc.prototype.cs.call(this,a);a.linkFromKeyProperty&&(this.In=a.linkFromKeyProperty);a.linkToKeyProperty&&(this.Kn=a.linkToKeyProperty);a.linkFromPortIdProperty&&(this.Qr=a.linkFromPortIdProperty);a.linkToPortIdProperty&&(this.Sr=a.linkToPortIdProperty);a.linkCategoryProperty&&(this.Pr=a.linkCategoryProperty);a.linkLabelKeysProperty&&(this.Rr=a.linkLabelKeysProperty);a.nodeIsGroupProperty&&(this.Yr=a.nodeIsGroupProperty);a.nodeGroupKeyProperty&&(this.Tn=a.nodeGroupKeyProperty)};
r.Gy=function(a){jc.prototype.Gy.call(this,a);a=a.linkDataArray;Fa(a)&&(this.es(a),this.$i=a)};r.ul=function(a,b){var c=null;if(a.Uc===Qf){if("linkDataArray"===a.af?c=this.Lg:"linkLabelKeys"===a.af&&(c=this.Zi(a.object)),Fa(c)){b?Ta(c,a.Lf):Qa(c,a.Lf,a.newValue);return}}else if(a.Uc===Rf&&("linkDataArray"===a.af?c=this.Lg:"linkLabelKeys"===a.af&&(c=this.Zi(a.object)),Fa(c))){b?Qa(c,a.Nf,a.oldValue):Ta(c,a.Nf);return}jc.prototype.ul.call(this,a,b)};
G(Xf,{Cx:"archetypeNodeData"},function(){return this.rj},function(a){var b=this.rj;b!==a&&(null!==a&&ra(a,Object,Xf,"archetypeNodeData"),this.rj=a,this.h("archetypeNodeData",b,a))});Xf.prototype.Jl=function(a){if(void 0!==a){var b=this.rj;if(null!==b){var c=this.Fe(a);null===c&&(c=this.copyNodeData(b),Hb(c,this.Yk,a),this.pl(c))}return a}};
G(Xf,{In:"linkFromKeyProperty"},function(){return this.pi},function(a){var b=this.pi;b!==a&&(og(a,Xf,"linkFromKeyProperty"),this.pi=a,this.h("linkFromKeyProperty",b,a))});Xf.prototype.getFromKeyForLinkData=Xf.prototype.hk=function(a){if(null!==a){var b=this.pi;if(""!==b&&(b=Gb(a,b),void 0!==b)){if(pg(b))return b;v("FromKey value for link data "+a+" is not a number or a string: "+b)}}};
Xf.prototype.setFromKeyForLinkData=Xf.prototype.xv=function(a,b){null===b&&(b=void 0);void 0===b||pg(b)||ta(b,"number or string",Xf,"setFromKeyForLinkData:key");if(null!==a){var c=this.pi;if(""!==c)if(b=this.Jl(b),this.Mh(a)){var d=Gb(a,c);d!==b&&(sg(this,d,a),Hb(a,c,b),null===this.Fe(b)&&rg(this,b,a),ng(this,"linkFromKey",If,c,a,d,b),"string"===typeof c&&this.sb(a,c))}else Hb(a,c,b)}};
G(Xf,{Kn:"linkToKeyProperty"},function(){return this.si},function(a){var b=this.si;b!==a&&(og(a,Xf,"linkToKeyProperty"),this.si=a,this.h("linkToKeyProperty",b,a))});Xf.prototype.getToKeyForLinkData=Xf.prototype.kk=function(a){if(null!==a){var b=this.si;if(""!==b&&(b=Gb(a,b),void 0!==b)){if(pg(b))return b;v("ToKey value for link data "+a+" is not a number or a string: "+b)}}};
Xf.prototype.setToKeyForLinkData=Xf.prototype.zv=function(a,b){null===b&&(b=void 0);void 0===b||pg(b)||ta(b,"number or string",Xf,"setToKeyForLinkData:key");if(null!==a){var c=this.si;if(""!==c)if(b=this.Jl(b),this.Mh(a)){var d=Gb(a,c);d!==b&&(sg(this,d,a),Hb(a,c,b),null===this.Fe(b)&&rg(this,b,a),ng(this,"linkToKey",If,c,a,d,b),"string"===typeof c&&this.sb(a,c))}else Hb(a,c,b)}};
G(Xf,{Qr:"linkFromPortIdProperty"},function(){return this.Bp},function(a){var b=this.Bp;b!==a&&(og(a,Xf,"linkFromPortIdProperty"),this.Bp=a,this.h("linkFromPortIdProperty",b,a))});Xf.prototype.getFromPortIdForLinkData=Xf.prototype.kF=function(a){if(null===a)return"";var b=this.Bp;if(""===b)return"";a=Gb(a,b);return void 0===a?"":a};
Xf.prototype.setFromPortIdForLinkData=Xf.prototype.Ry=function(a,b){w(b,"string",Xf,"setFromPortIdForLinkData:portname");if(null!==a){var c=this.Bp;if(""!==c)if(this.Mh(a)){var d=Gb(a,c);void 0===d&&(d="");d!==b&&(Hb(a,c,b),ng(this,"linkFromPortId",If,c,a,d,b),"string"===typeof c&&this.sb(a,c))}else Hb(a,c,b)}};G(Xf,{Sr:"linkToPortIdProperty"},function(){return this.Cp},function(a){var b=this.Cp;b!==a&&(og(a,Xf,"linkToPortIdProperty"),this.Cp=a,this.h("linkToPortIdProperty",b,a))});
Xf.prototype.getToPortIdForLinkData=Xf.prototype.nF=function(a){if(null===a)return"";var b=this.Cp;if(""===b)return"";a=Gb(a,b);return void 0===a?"":a};Xf.prototype.setToPortIdForLinkData=Xf.prototype.Vy=function(a,b){w(b,"string",Xf,"setToPortIdForLinkData:portname");if(null!==a){var c=this.Cp;if(""!==c)if(this.Mh(a)){var d=Gb(a,c);void 0===d&&(d="");d!==b&&(Hb(a,c,b),ng(this,"linkToPortId",If,c,a,d,b),"string"===typeof c&&this.sb(a,c))}else Hb(a,c,b)}};
G(Xf,{Rr:"linkLabelKeysProperty"},function(){return this.Mg},function(a){var b=this.Mg;b!==a&&(og(a,Xf,"linkLabelKeysProperty"),this.Mg=a,this.h("linkLabelKeysProperty",b,a))});Xf.prototype.getLabelKeysForLinkData=Xf.prototype.Zi=function(a){if(null===a)return qb;var b=this.Mg;if(""===b)return qb;a=Gb(a,b);return void 0===a?qb:a};
Xf.prototype.setLabelKeysForLinkData=Xf.prototype.mD=function(a,b){Ga(b,Xf,"setLabelKeysForLinkData:arr");if(null!==a){var c=this.Mg;if(""!==c)if(this.Mh(a)){var d=Gb(a,c);void 0===d&&(d=qb);if(d!==b){for(var e=Ia(d),f=0;f<e;f++){var g=La(d,f);sg(this,g,a)}Hb(a,c,b);e=Ia(b);for(f=0;f<e;f++)g=La(b,f),null===this.Fe(g)&&rg(this,g,a);ng(this,"linkLabelKeys",If,c,a,d,b);"string"===typeof c&&this.sb(a,c)}}else Hb(a,c,b)}};
Xf.prototype.addLabelKeyForLinkData=Xf.prototype.zx=function(a,b){if(null!==b&&void 0!==b&&(pg(b)||ta(b,"number or string",Xf,"addLabelKeyForLinkData:key"),null!==a)){var c=this.Mg;if(""!==c){var d=Gb(a,c);void 0===d?(c=[],c.push(b),this.mD(a,c)):Fa(d)?0<=Oa(d,b)||(Qa(d,Infinity,b),this.Mh(a)&&(null===this.Fe(b)&&rg(this,b,a),ng(this,"linkLabelKeys",Qf,c,a,null,b))):v(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
Xf.prototype.removeLabelKeyForLinkData=Xf.prototype.UC=function(a,b){if(null!==b&&void 0!==b&&(pg(b)||ta(b,"number or string",Xf,"removeLabelKeyForLinkData:key"),null!==a)){var c=this.Mg;if(""!==c){var d=Gb(a,c);if(Fa(d)){var e=Oa(d,b);0>e||(Ta(d,e),this.Mh(a)&&(sg(this,b,a),ng(this,"linkLabelKeys",Rf,c,a,b,null)))}else void 0!==d&&v(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};
G(Xf,{$i:"linkDataArray"},function(){return this.Lg},function(a){var b=this.Lg;if(b!==a){Ga(a,Xf,"linkDataArray");for(var c=Ia(a),d=0;d<c;d++){var e=La(a,d);if(!Ea(e)){v("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}tb(e)}this.Lg=a;for(var f=new Xb(Object),d=0;d<c;d++)e=La(a,d),f.add(e);this.Wk=f;ng(this,"linkDataArray",If,"linkDataArray",this,b,a);for(d=0;d<c;d++)e=La(a,d),xg(this,e)}});Xf.prototype.containsLinkData=Xf.prototype.Mh=function(a){return null===a?!1:this.Wk.contains(a)};
Xf.prototype.addLinkData=Xf.prototype.qu=function(a){if(null!==a){if(void 0===ub(a))sb(a);else if(this.Mh(a))return;this.Wk.add(a);var b=Ia(this.Lg);Qa(this.Lg,b,a);ng(this,"linkDataArray",Qf,"linkDataArray",this,null,a,null,b);xg(this,a)}};Xf.prototype.addLinkDataCollection=function(a){if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.qu(La(a,c));else for(a=a.i;a.next();)this.qu(a.value)};
Xf.prototype.removeLinkData=Xf.prototype.Ky=function(a){if(null!==a){this.Wk.remove(a);var b=this.Lg.indexOf(a);if(!(0>b)){Ta(this.Lg,b);ng(this,"linkDataArray",Rf,"linkDataArray",this,a,null,b,null);b=this.hk(a);sg(this,b,a);b=this.kk(a);sg(this,b,a);var c=this.Zi(a);if(Fa(c))for(var d=Ia(c),e=0;e<d;e++)b=La(c,e),sg(this,b,a)}}};Xf.prototype.removeLinkDataCollection=function(a){if(Fa(a))for(var b=Ia(a),c=0;c<b;c++)this.Ky(La(a,c));else for(a=a.i;a.next();)this.Ky(a.value)};
function xg(a,b){var c=a.hk(b),c=a.Jl(c);null===a.Fe(c)&&rg(a,c,b);c=a.kk(b);c=a.Jl(c);null===a.Fe(c)&&rg(a,c,b);var d=a.Zi(b);if(Fa(d))for(var e=Ia(d),f=0;f<e;f++)c=La(d,f),null===a.Fe(c)&&rg(a,c,b)}G(Xf,{CH:"copyLinkDataFunction"},function(){return this.Ss},function(a){var b=this.Ss;b!==a&&(null!==a&&w(a,"function",Xf,"copyLinkDataFunction"),this.Ss=a,this.h("copyLinkDataFunction",b,a))});
Xf.prototype.copyLinkData=Xf.prototype.QB=function(a){if(null===a)return null;var b=null,b=this.Ss;if(null!==b)b=b(a,this);else{var b=new a.constructor,c;for(c in a)if("__gohashid"!==c){var d=Gb(a,c);Hb(b,c,d)}}null!==b&&(sb(b),""!==this.pi&&Hb(b,this.pi,void 0),""!==this.si&&Hb(b,this.si,void 0),""!==this.Mg&&Hb(b,this.Mg,[]));return b};
G(Xf,{Yr:"nodeIsGroupProperty"},function(){return this.Jt},function(a){var b=this.Jt;b!==a&&(og(a,Xf,"nodeIsGroupProperty"),this.Jt=a,this.h("nodeIsGroupProperty",b,a))});Xf.prototype.isGroupForNodeData=Xf.prototype.hy=function(a){if(null===a)return!1;var b=this.Jt;return""===b?!1:Gb(a,b)?!0:!1};G(Xf,{Tn:"nodeGroupKeyProperty"},function(){return this.zi},function(a){var b=this.zi;b!==a&&(og(a,Xf,"nodeGroupKeyProperty"),this.zi=a,this.h("nodeGroupKeyProperty",b,a))});
G(Xf,{yl:"copiesGroupKeyOfNodeData"},function(){return this.dw},function(a){this.dw!==a&&(w(a,"boolean",Xf,"copiesGroupKeyOfNodeData"),this.dw=a)});Xf.prototype.getGroupKeyForNodeData=Xf.prototype.Gl=function(a){if(null!==a){var b=this.zi;if(""!==b&&(b=Gb(a,b),void 0!==b)){if(pg(b))return b;v("GroupKey value for node data "+a+" is not a number or a string: "+b)}}};
Xf.prototype.setGroupKeyForNodeData=Xf.prototype.yv=function(a,b){null===b&&(b=void 0);void 0===b||pg(b)||ta(b,"number or string",Xf,"setGroupKeyForNodeData:key");if(null!==a){var c=this.zi;if(""!==c)if(this.le(a)){var d=Gb(a,c);d!==b&&(sg(this,d,a),Hb(a,c,b),null===this.Fe(b)&&rg(this,b,a),ng(this,"nodeGroupKey",If,c,a,d,b),"string"===typeof c&&this.sb(a,c))}else Hb(a,c,b)}};
Xf.prototype.copyNodeData=function(a){if(null===a)return null;a=jc.prototype.copyNodeData.call(this,a);this.yl||""===this.zi||Hb(a,this.zi,void 0);return a};
Xf.prototype.setDataProperty=function(a,b,c){if(this.le(a))if(b===this.Ml)this.Sy(a,c);else{if(b===this.Ll){this.wv(a,c);return}if(b===this.Tn){this.yv(a,c);return}b===this.Yr&&v("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b)}else if(this.Mh(a)){if(b===this.In){this.xv(a,c);return}if(b===this.Kn){this.zv(a,c);return}if(b===this.Qr){this.Ry(a,c);return}if(b===this.Sr){this.Vy(a,c);return}if(b===this.Pr){this.lD(a,c);return}if(b===this.Rr){this.mD(a,c);return}}else!wg&&
a instanceof U&&(wg=!0,Da('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),Da("  Is that really your intent?"));var d=Gb(a,b);d!==c&&(Hb(a,b,c),this.Fy(a,b,d,c))};r=Xf.prototype;
r.ds=function(a,b){jc.prototype.ds.call(this,a,b);for(var c=this.Vb.i;c.next();)this.Ny(c.value,a,b);for(var d=this.Wk.i;d.next();){var e=c.value,f=a,g=b;if(this.hk(e)===f){var h=this.pi;Hb(e,h,g);ng(this,"linkFromKey",If,h,e,f,g);"string"===typeof h&&this.sb(e,h)}this.kk(e)===f&&(h=this.si,Hb(e,h,g),ng(this,"linkToKey",If,h,e,f,g),"string"===typeof h&&this.sb(e,h));var k=this.Zi(e);if(Fa(k))for(var l=Ia(k),h=this.Mg,m=0;m<l;m++)La(k,m)===f&&(Na(k,m,g),ng(this,"linkLabelKeys",Qf,h,e,f,g))}};
r.Ny=function(a,b,c){if(this.Gl(a)===b){var d=this.zi;Hb(a,d,c);ng(this,"nodeGroupKey",If,d,a,b,c);"string"===typeof d&&this.sb(a,d)}};r.cz=function(){jc.prototype.cz.call(this);for(var a=this.$i,b=Ia(a),c=0;c<b;c++){var d=La(a,c);xg(this,d)}};
r.Xn=function(a){jc.prototype.Xn.call(this,a);a=this.$a(a);var b=qg(this,a);if(null!==b){for(var c=new N(Object),b=b.i;b.next();){var d=b.value;if(this.le(d)){if(this.Gl(d)===a){var e=this.zi;ng(this,"nodeGroupKey",If,e,d,a,a);"string"===typeof e&&this.sb(d,e);c.add(d)}}else{this.hk(d)===a&&(e=this.pi,ng(this,"linkFromKey",If,e,d,a,a),"string"===typeof e&&this.sb(d,e),c.add(d));this.kk(d)===a&&(e=this.si,ng(this,"linkToKey",If,e,d,a,a),"string"===typeof e&&this.sb(d,e),c.add(d));var f=this.Zi(d);
if(Fa(f))for(var g=Ia(f),e=this.Mg,h=0;h<g;h++)La(f,h)===a&&(ng(this,"linkLabelKeys",Qf,e,d,a,a),c.add(d))}}for(c=c.i;c.next();)sg(this,a,c.value)}};r.Wn=function(a){jc.prototype.Wn.call(this,a);var b=this.Gl(a);null===this.Fe(b)&&rg(this,b,a)};r.vs=function(a){jc.prototype.vs.call(this,a);var b=this.Gl(a);sg(this,b,a)};G(Xf,{Pr:"linkCategoryProperty"},function(){return this.yp},function(a){var b=this.yp;b!==a&&(og(a,Xf,"linkCategoryProperty"),this.yp=a,this.h("linkCategoryProperty",b,a))});
Xf.prototype.getCategoryForLinkData=Xf.prototype.Ru=function(a){if(null===a)return"";var b=this.yp;if(""===b)return"";b=Gb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;v("getCategoryForLinkData found a non-string category for "+a+": "+b);return""};
Xf.prototype.setCategoryForLinkData=Xf.prototype.lD=function(a,b){w(b,"string",Xf,"setCategoryForLinkData:cat");if(null!==a){var c=this.yp;if(""===c)return"";if(this.Mh(a)){var d=Gb(a,c);void 0===d&&(d="");d!==b&&(Hb(a,c,b),ng(this,"linkCategory",If,c,a,d,b),"string"===typeof c&&this.sb(a,c))}else Hb(a,c,b)}};
function Yf(a){1<arguments.length&&v("TreeModel constructor can only take one optional argument, the Array of node data.");jc.call(this);this.Ai="parent";this.ew=!1;this.fq="parentLinkCategory";void 0!==a&&(this.ng=a)}yb(Yf,jc);vb("TreeModel",Yf);Yf.prototype.toString=function(a){void 0===a&&(a=0);if(2<=a)return this.az();var b=(""!==this.name?this.name:"")+" TreeModel";if(0<a){b+="\n node data:";a=this.ng;for(var c=Ia(a),d=0;d<c;d++)var e=La(a,d),b=b+(" "+this.$a(e)+":"+Sf(e))}return b};
Yf.prototype.ws=function(){var a=jc.prototype.ws.call(this),b="";"parent"!==this.Un&&"string"===typeof this.Un&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.Un));return a+b};Yf.prototype.cs=function(a){jc.prototype.cs.call(this,a);a.nodeParentKeyProperty&&(this.Un=a.nodeParentKeyProperty)};Yf.prototype.Jl=function(a){return a};
G(Yf,{Un:"nodeParentKeyProperty"},function(){return this.Ai},function(a){var b=this.Ai;b!==a&&(og(a,Yf,"nodeParentKeyProperty"),this.Ai=a,this.h("nodeParentKeyProperty",b,a))});G(Yf,{zl:"copiesParentKeyOfNodeData"},function(){return this.ew},function(a){this.ew!==a&&(w(a,"boolean",Yf,"copiesParentKeyOfNodeData"),this.ew=a)});
Yf.prototype.getParentKeyForNodeData=Yf.prototype.Hl=function(a){if(null!==a){var b=this.Ai;if(""!==b&&(b=Gb(a,b),void 0!==b)){if(pg(b))return b;v("ParentKey value for node data "+a+" is not a number or a string: "+b)}}};
Yf.prototype.setParentKeyForNodeData=Yf.prototype.ug=function(a,b){null===b&&(b=void 0);void 0===b||pg(b)||ta(b,"number or string",Yf,"setParentKeyForNodeData:key");if(null!==a){var c=this.Ai;if(""!==c)if(b=this.Jl(b),this.le(a)){var d=Gb(a,c);d!==b&&(sg(this,d,a),Hb(a,c,b),null===this.Fe(b)&&rg(this,b,a),ng(this,"nodeParentKey",If,c,a,d,b),"string"===typeof c&&this.sb(a,c))}else Hb(a,c,b)}};
G(Yf,{JI:"parentLinkCategoryProperty"},function(){return this.fq},function(a){var b=this.fq;b!==a&&(og(a,Yf,"parentLinkCategoryProperty"),this.fq=a,this.h("parentLinkCategoryProperty",b,a))});Yf.prototype.getParentLinkCategoryForNodeData=Yf.prototype.mF=function(a){if(null===a)return"";var b=this.fq;if(""===b)return"";b=Gb(a,b);if(void 0===b)return"";if("string"===typeof b)return b;v("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b);return""};
Yf.prototype.setParentLinkCategoryForNodeData=Yf.prototype.HG=function(a,b){w(b,"string",Yf,"setParentLinkCategoryForNodeData:cat");if(null!==a){var c=this.fq;if(""===c)return"";if(this.le(a)){var d=Gb(a,c);void 0===d&&(d="");d!==b&&(Hb(a,c,b),ng(this,"parentLinkCategory",If,c,a,d,b),"string"===typeof c&&this.sb(a,c))}else Hb(a,c,b)}};Yf.prototype.copyNodeData=function(a){if(null===a)return null;a=jc.prototype.copyNodeData.call(this,a);this.zl||""===this.Ai||Hb(a,this.Ai,void 0);return a};
Yf.prototype.setDataProperty=function(a,b,c){if(this.le(a))if(b===this.Ml)this.Sy(a,c);else{if(b===this.Ll){this.wv(a,c);return}if(b===this.Un){this.ug(a,c);return}}else!wg&&a instanceof U&&(wg=!0,Da('TreeModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),Da("  Is that really your intent?"));var d=Gb(a,b);d!==c&&(Hb(a,b,c),this.Fy(a,b,d,c))};r=Yf.prototype;r.ds=function(a,b){jc.prototype.ds.call(this,a,b);for(var c=this.Vb.i;c.next();)this.Ny(c.value,a,b)};
r.Ny=function(a,b,c){if(this.Hl(a)===b){var d=this.Ai;Hb(a,d,c);ng(this,"nodeParentKey",If,d,a,b,c);"string"===typeof d&&this.sb(a,d)}};r.Xn=function(a){jc.prototype.Xn.call(this,a);a=this.$a(a);var b=qg(this,a);if(null!==b){for(var c=new N(Object),b=b.i;b.next();){var d=b.value;if(this.le(d)&&this.Hl(d)===a){var e=this.Ai;ng(this,"nodeParentKey",If,e,d,a,a);"string"===typeof e&&this.sb(d,e);c.add(d)}}for(c=c.i;c.next();)sg(this,a,c.value)}};
r.Wn=function(a){jc.prototype.Wn.call(this,a);var b=this.Hl(a),b=this.Jl(b);null===this.Fe(b)&&rg(this,b,a)};r.vs=function(a){jc.prototype.vs.call(this,a);var b=this.Hl(a);sg(this,b,a)};
function yg(a,b,c){sb(this);this.qa=!1;void 0===a?a="":w(a,"string",yg,"constructor:targetprop");void 0===b?b=a:w(b,"string",yg,"constructor:sourceprop");void 0===c?c=null:null!==c&&w(c,"function",yg,"constructor:conv");this.$A=-1;this.uf=null;this.iu=a;this.gu=this.mx=0;this.VA=null;this.sx=!1;this.$t=b;this.aw=c;this.Qw=zg;this.Vv=null}vb("Binding",yg);var zg;yg.OneWay=zg=I(yg,"OneWay",1);var Ag;yg.TwoWay=Ag=I(yg,"TwoWay",2);
yg.parseEnum=function(a,b){w(a,"function",yg,"parseEnum:ctor");va(b,a,yg,"parseEnum:defval");return function(c){c=vc(a,c);return null===c?b:c}};var Sf;yg.toString=Sf=function(a){var b=a;Ea(a)&&(a.text?b=a.text:a.name?b=a.name:void 0!==a.key?b=a.key:void 0!==a.id?b=a.id:a.constructor===Object&&(a.Text?b=a.Text:a.Name?b=a.Name:void 0!==a.Key?b=a.Key:void 0!==a.Id?b=a.Id:void 0!==a.ID&&(b=a.ID)));return void 0===b?"undefined":null===b?"null":b.toString()};
yg.prototype.toString=function(){return"Binding("+this.Ev+":"+this.sD+(-1!==this.Ak?" "+this.Ak:"")+" "+this.mode.name+")"};yg.prototype.freeze=function(){this.qa=!0;return this};yg.prototype.wa=function(){this.qa=!1;return this};G(yg,{Ak:null},function(){return this.$A},function(a){pa(this);w(a,"number",yg,"targetId");this.$A=a});G(yg,{Ev:"targetProperty"},function(){return this.iu},function(a){pa(this);w(a,"string",yg,"targetProperty");this.iu=a});
G(yg,{Ql:"sourceName"},function(){return this.VA},function(a){pa(this);null!==a&&w(a,"string",yg,"sourceName");this.VA=a;null!==a&&(this.sx=!1)});G(yg,{ts:"toModel"},function(){return this.sx},function(a){pa(this);w(a,"boolean",yg,"toModel");this.sx=a});G(yg,{sD:"sourceProperty"},function(){return this.$t},function(a){pa(this);w(a,"string",yg,"sourceProperty");this.$t=a});G(yg,{KE:"converter"},function(){return this.aw},function(a){pa(this);null!==a&&w(a,"function",yg,"converter");this.aw=a});
G(yg,{zE:"backConverter"},function(){return this.Vv},function(a){pa(this);null!==a&&w(a,"function",yg,"backConverter");this.Vv=a});G(yg,{mode:"mode"},function(){return this.Qw},function(a){pa(this);va(a,yg,yg,"mode");this.Qw=a});yg.prototype.makeTwoWay=function(a){void 0===a&&(a=null);null!==a&&w(a,"function",yg,"makeTwoWay");this.mode=Ag;this.zE=a;return this};yg.prototype.ofObject=yg.prototype.kv=function(a){void 0===a&&(a="");this.Ql=a;this.ts=!1;return this};
yg.prototype.ofModel=function(){this.Ql=null;this.ts=!0;return this};yg.prototype.ofData=function(){this.Ql=null;this.ts=!1;return this};function Bg(a,b,c){a=a.Ql;var d=null;return d=null===a||""===a?b:"."===a?c:".."===a?c.I:b.Bd(a)}
yg.prototype.updateTarget=yg.prototype.GD=function(a,b,c){var d=this.$t;if(void 0===c||d===c){c=this.iu;var e=this.aw;if(null===e&&""===c)Da("Binding error: target property is the empty string: "+this.toString());else{var f=b;""!==d&&(f=Gb(b,d));if(void 0!==f)if(null===e)""!==c&&Hb(a,c,f);else try{if(""!==c){var g=e(f,a);Hb(a,c,g)}else e(f,a)}catch(h){}}}};
yg.prototype.updateSource=yg.prototype.Fv=function(a,b,c,d){void 0===d&&(d=null);if(this.Qw===Ag){var e=this.iu;if(void 0===c||e===c){c=this.$t;var f=this.Vv;if(null!==f||""!==c){var g=a;""!==e&&(g=Gb(a,e));if(void 0!==g)if(null===f)null!==d&&d.U?d.U.setDataProperty(b,c,g):Hb(b,c,g);else try{if(""!==c){var h=f(g,b);null!==d&&d.U?d.U.setDataProperty(b,c,h):Hb(b,c,h)}else f(g,b)}catch(k){}}}}};function mg(){this.VD=(new N(Hf)).freeze();this.zb="";this.aA=!1}vb("Transaction",mg);
mg.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.gg.count.toString()+(this.Ir?"":", incomplete");if(void 0!==a&&0<a){a=this.gg.count;for(var c=0;c<a;c++){var d=this.gg.Y(c);null!==d&&(b+="\n  "+d.toString())}}return b};mg.prototype.clear=mg.prototype.clear=function(){var a=this.gg;a.wa();for(var b=a.count-1;0<=b;b--){var c=a.Y(b);null!==c&&c.clear()}a.clear();a.freeze()};mg.prototype.canUndo=mg.prototype.canUndo=function(){return this.Ir};
mg.prototype.undo=mg.prototype.undo=function(){if(this.canUndo())for(var a=this.gg.count-1;0<=a;a--){var b=this.gg.Y(a);null!==b&&b.undo()}};mg.prototype.canRedo=mg.prototype.canRedo=function(){return this.Ir};mg.prototype.redo=mg.prototype.redo=function(){if(this.canRedo())for(var a=this.gg.count,b=0;b<a;b++){var c=this.gg.Y(b);null!==c&&c.redo()}};H(mg,{gg:"changes"},function(){return this.VD});G(mg,{name:"name"},function(){return this.zb},function(a){this.zb=a});
G(mg,{Ir:"isComplete"},function(){return this.aA},function(a){this.aA=a});function Tf(){this.Sw=new Xb(jc);this.de=!1;this.bE=(new N(mg)).freeze();this.Wf=-1;this.pA=999;this.sh=!1;this.Ys=null;this.Sj=0;this.sz=!1;this.bg=(new N("string")).freeze();this.Rm=new N("number");this.xw=!0;this.Lw=!1}vb("UndoManager",Tf);
Tf.prototype.toString=function(a){for(var b="UndoManager "+this.Sh+"<"+this.history.count+"<="+this.CC,b=b+"[",c=this.JC.count,d=0;d<c;d++)0<d&&(b+=" "),b+=this.JC.Y(d);b+="]";if(void 0!==a&&0<a)for(c=this.history.count,d=0;d<c;d++)b+="\n "+this.history.Y(d).toString(a-1);return b};
Tf.prototype.clear=Tf.prototype.clear=function(){var a=this.history;a.wa();for(var b=a.count-1;0<=b;b--){var c=a.Y(b);null!==c&&c.clear()}a.clear();this.Wf=-1;a.freeze();this.sh=!1;this.Ys=null;this.Sj=0;this.bg.wa();this.bg.clear();this.bg.freeze();this.Rm.clear()};Tf.prototype.addModel=Tf.prototype.tE=function(a){this.Sw.add(a)};Tf.prototype.removeModel=Tf.prototype.rG=function(a){this.Sw.remove(a)};
Tf.prototype.startTransaction=Tf.prototype.Bb=function(a){void 0===a&&(a="");null===a&&(a="");if(this.Ua)return!1;!0===this.xw&&(this.xw=!1,this.Sj++,this.oc("StartingFirstTransaction",a,this.Nh),0<this.Sj&&this.Sj--);this.isEnabled&&(this.bg.wa(),this.bg.add(a),this.bg.freeze(),null===this.Nh?this.Rm.add(0):this.Rm.add(this.Nh.gg.count));this.Sj++;var b=1===this.be;b&&this.oc("StartedTransaction",a,this.Nh);return b};
Tf.prototype.commitTransaction=Tf.prototype.od=function(a){void 0===a&&(a="");return Qg(this,!0,a)};Tf.prototype.rollbackTransaction=Tf.prototype.Yn=function(){return Qg(this,!1,"")};
function Qg(a,b,c){if(a.Ua)return!1;a.Dx&&1>a.be&&Da("Ending transaction without having started a transaction: "+c);var d=1===a.be;d&&b&&a.isEnabled&&a.oc("CommittingTransaction",c,a.Nh);var e=0;if(0<a.be&&(a.Sj--,a.isEnabled)){var f=a.bg.count;0<f&&(""===c&&(c=a.bg.Y(0)),a.bg.wa(),a.bg.Cc(f-1),a.bg.freeze());f=a.Rm.count;0<f&&(e=a.Rm.Y(f-1),a.Rm.Cc(f-1))}f=a.Nh;if(d){if(b){a.Lw=!1;if(a.isEnabled&&null!==f){b=f;b.Ir=!0;b.name=c;d=a.history;d.wa();for(e=d.count-1;e>a.Sh;e--)f=d.Y(e),null!==f&&f.clear(),
d.Cc(e),a.Lw=!0;e=a.CC;0===e&&(e=1);0<e&&d.count>=e&&(f=d.Y(0),null!==f&&f.clear(),d.Cc(0),a.Wf--);d.add(b);a.Wf++;d.freeze();f=b}a.oc("CommittedTransaction",c,f)}else{a.sh=!0;try{a.isEnabled&&null!==f&&(f.Ir=!0,f.undo())}finally{a.oc("RolledBackTransaction",c,f),a.sh=!1}null!==f&&f.clear()}a.Ys=null;return!0}if(a.isEnabled&&!b&&null!==f){a=e;c=f.gg;for(b=c.count-1;b>=a;b--)d=c.Y(b),null!==d&&d.undo(),c.wa(),c.Cc(b);c.freeze()}return!1}
Tf.prototype.canUndo=Tf.prototype.canUndo=function(){if(!this.isEnabled||0<this.be||this.Ua)return!1;var a=this.BD;return null!==a&&a.canUndo()?!0:!1};Tf.prototype.undo=Tf.prototype.undo=function(){if(this.canUndo()){var a=this.BD;try{this.oc("StartingUndo","Undo",a),this.sh=!0,this.Wf--,a.undo()}catch(b){Da("undo error: "+b.toString())}finally{this.sh=!1,this.oc("FinishedUndo","Undo",a)}}};
Tf.prototype.canRedo=Tf.prototype.canRedo=function(){if(!this.isEnabled||0<this.be||this.Ua)return!1;var a=this.AD;return null!==a&&a.canRedo()?!0:!1};Tf.prototype.redo=Tf.prototype.redo=function(){if(this.canRedo()){var a=this.AD;try{this.oc("StartingRedo","Redo",a),this.sh=!0,this.Wf++,a.redo()}catch(b){Da("redo error: "+b.toString())}finally{this.sh=!1,this.oc("FinishedRedo","Redo",a)}}};
Tf.prototype.oc=function(a,b,c){void 0===c&&(c=null);var d=new Hf;d.Uc=Pf;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.bG;a.next();)b=a.value,d.U=b,b.Cu(d)};Tf.prototype.handleChanged=Tf.prototype.mC=function(a){if(this.isEnabled&&!this.Ua&&!this.skipsEvent(a)){var b=this.Nh;null===b&&(this.Ys=b=new mg);var c=a.copy(),b=b.gg;b.wa();b.add(c);b.freeze();this.Dx&&0>=this.be&&!this.xw&&(a=a.g,null!==a&&!1===a.Ae||Da("Change not within a transaction: "+c.toString()))}};
Tf.prototype.skipsEvent=function(a){if(null===a||0>a.Uc.value)return!0;a=a.object;if(a instanceof U){if(a=a.layer,null!==a&&a.bc)return!0}else if(a instanceof jg&&a.bc)return!0;return!1};H(Tf,{bG:"models"},function(){return this.Sw.i});G(Tf,{isEnabled:"isEnabled"},function(){return this.de},function(a){this.de=a});H(Tf,{BD:"transactionToUndo"},function(){return 0<=this.Sh&&this.Sh<=this.history.count-1?this.history.Y(this.Sh):null});
H(Tf,{AD:"transactionToRedo"},function(){return this.Sh<this.history.count-1?this.history.Y(this.Sh+1):null});H(Tf,{Ua:"isUndoingRedoing"},function(){return this.sh});H(Tf,{history:"history"},function(){return this.bE});G(Tf,{CC:"maxHistoryLength"},function(){return this.pA},function(a){this.pA=a});H(Tf,{Sh:"historyIndex"},function(){return this.Wf});H(Tf,{Nh:"currentTransaction"},function(){return this.Ys});H(Tf,{be:"transactionLevel"},function(){return this.Sj});
H(Tf,{uC:"isInTransaction"},function(){return 0<this.Sj});G(Tf,{Dx:"checksTransactionLevel"},function(){return this.sz},function(a){this.sz=a});H(Tf,{JC:"nestedTransactionNames"},function(){return this.bg});function ec(){0<arguments.length&&Aa(ec);sb(this);this.N=null;this.wz=!0;this.yz=this.zz=this.Kz=this.Az=!1;this.Jj=this.Sv=null;this.rB=1.05;this.Iz=1;this.Mw=NaN;this.mA=null;this.sB=NaN}vb("CommandHandler",ec);var Rg=null,Sg="";ec.prototype.toString=function(){return"CommandHandler"};
H(ec,{g:"diagram"},function(){return this.N});ec.prototype.fc=function(a){this.N=a};
ec.prototype.doKeyDown=function(){var a=this.g;if(null!==a){var b=a.C,c=fa?b.Ur:b.control,d=b.shift,e=b.alt,f=b.key;!c||"C"!==f&&"Insert"!==f?c&&"X"===f||d&&"Del"===f?this.canCutSelection()&&this.cutSelection():c&&"V"===f||d&&"Insert"===f?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===f||e&&d&&"Backspace"===f?this.canRedo()&&this.redo():c&&"Z"===f||e&&"Backspace"===f?this.canUndo()&&this.undo():"Del"===f||"Backspace"===f?this.canDeleteSelection()&&this.deleteSelection():c&&"A"===f?this.canSelectAll()&&
this.selectAll():"Esc"===f?this.canStopCommand()&&this.stopCommand():"Up"===f?a.je&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===f?a.je&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===f?a.ie&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===f?a.ie&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===f?d&&a.ie?a.scroll("page","left"):a.je&&a.scroll("page","up"):"PageDown"===f?d&&a.ie?a.scroll("page","right"):a.je&&a.scroll("page","down"):"Home"===
f?(b=a.Wc,c&&a.je?a.position=new z(a.position.x,b.y):!c&&a.ie&&(a.position=new z(b.x,a.position.y))):"End"===f?(b=a.Wc,d=a.Va,c&&a.je?a.position=new z(d.x,b.bottom-d.height):!c&&a.ie&&(a.position=new z(b.right-d.width,d.y))):"Subtract"===f?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===f?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===f?this.canResetZoom()&&this.resetZoom():d&&"Z"===f?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===f?this.canGroupSelection()&&this.groupSelection():c&&
d&&"G"===f?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.event&&93===b.event.which?this.canShowContextMenu()&&this.showContextMenu():b.bubbles=!0:this.canCopySelection()&&this.copySelection()}};ec.prototype.doKeyUp=function(){var a=this.g;null!==a&&(a.C.bubbles=!0)};ec.prototype.stopCommand=function(){var a=this.g;if(null!==a){var b=a.Ha;b instanceof Tg&&a.De&&a.Du();null!==b&&b.doCancel()}};
ec.prototype.canStopCommand=function(){return!0};ec.prototype.selectAll=function(){var a=this.g;if(null!==a){a.ba();try{a.Gb="wait";a.ma("ChangingSelection");for(var b=a.bj;b.next();)b.value.Ia=!0;for(var c=a.Mf;c.next();)c.value.Ia=!0;for(var d=a.links;d.next();)d.value.Ia=!0}finally{a.ma("ChangedSelection"),a.Gb=""}}};ec.prototype.canSelectAll=function(){var a=this.g;return null!==a&&a.De};
ec.prototype.deleteSelection=function(){var a=this.g;if(null!==a&&!a.ma("SelectionDeleting",a.selection))try{a.Gb="wait";a.Bb("Delete");a.ma("ChangingSelection");for(var b=new Xb(O),c=a.selection.i;c.next();)Ug(b,c.value,!0,this.WE?Infinity:0,!0,function(a){return a.canDelete()});a.My(b,!0);a.ma("SelectionDeleted",b)}finally{a.ma("ChangedSelection"),a.od("Delete"),a.Gb=""}};ec.prototype.canDeleteSelection=function(){var a=this.g;return null===a||a.Ta||a.Je||!a.ql||0===a.selection.count?!1:!0};
function Ug(a,b,c,d,e,f){void 0===f&&(f=null);if(!(a.contains(b)||null!==f&&!f(b)||b instanceof Vg))if(a.add(b),b instanceof V){if(c&&b instanceof Wg)for(var g=b.lc;g.next();)Ug(a,g.value,c,d,e,f);if(e)for(g=b.Gd;g.next();){var h=g.value;if(!a.contains(h)){var k=h.M,l=h.R;null!==k&&a.contains(k)&&null!==l&&a.contains(l)?Ug(a,h,c,d,e,f):null!==k&&null!==l||Ug(a,h,c,d,e,f)}}if(1<d)for(b=b.cC();b.next();)Ug(a,b.value,c,d-1,e,f)}else if(b instanceof W)for(g=b.If;g.next();)Ug(a,g.value,c,d,e,f)}
ec.prototype.sn=function(a,b,c){var d=new Fb(O,O);for(a=a.i;a.next();)Xg(this,a.value,b,d,c);if(null!==b){c=b.U;a=!1;null!==b.Ya.Yc&&(a=b.Ya.Yc.Qh);for(var e=new Xb(W),f=new Fb(W,W),g=d.i;g.next();){var h=g.value;if(h instanceof W){var k=h;a||null!==k.M&&null!==k.R||e.add(k)}else if(c instanceof Yf&&h instanceof V&&null!==h.data){var k=c,l=h,h=g.key,m=h.El();null!==m&&(m=d.ja(m),null!==m?(k.ug(l.data,k.$a(m.data)),k=b.Cf(l.data),h=h.xr(),null!==h&&null!==k&&f.add(h,k)):k.ug(l.data,void 0))}}0<e.count&&
b.My(e,!1);if(0<f.count)for(b=f.i;b.next();)d.add(b.key,b.value)}for(b=d.i;b.next();)b.value.sb();return d};
function Xg(a,b,c,d,e){if(null===b||e&&!b.canCopy())return null;if(d.contains(b))return d.ja(b);var f=null,g=b.data;if(null!==g&&null!==c){var h=c.U;b instanceof W?h instanceof Xf&&(g=h.QB(g),Ea(g)&&(h.qu(g),f=c.Cf(g))):(g=h.copyNodeData(g),Ea(g)&&(h.pl(g),f=c.Yg(g)))}else Yg(b),f=b.copy(),null!==c&&null!==f&&c.add(f);if(!(f instanceof O))return null;f.Ia=!1;f.ig=!1;d.add(b,f);if(b instanceof V){for(h=b.Gd;h.next();){g=h.value;if(g.M===b){var k=d.ja(g);null!==k&&(k.M=f)}g.R===b&&(k=d.ja(g),null!==
k&&(k.R=f))}if(b instanceof Wg&&f instanceof Wg)for(h=f,b=b.lc;b.next();)g=Xg(a,b.value,c,d,e),g instanceof W||null===g||(g.Ca=h)}else if(b instanceof W)for(h=b.M,null!==h&&(h=d.ja(h),null!==h&&(f.M=h)),h=b.R,null!==h&&(h=d.ja(h),null!==h&&(f.R=h)),b=b.If;b.next();)h=Xg(a,b.value,c,d,e),null!==h&&(h.ud=f);return f}
ec.prototype.copySelection=function(){var a=this.g;if(null!==a){for(var b=new Xb(O),a=a.selection.i;a.next();)Ug(b,a.value,!0,this.NE?Infinity:0,this.LE,function(a){return a.canCopy()});this.copyToClipboard(b)}};ec.prototype.canCopySelection=function(){var a=this.g;return null!==a&&a.Ti&&a.Ax&&0!==a.selection.count?!0:!1};ec.prototype.cutSelection=function(){this.copySelection();this.deleteSelection()};
ec.prototype.canCutSelection=function(){var a=this.g;return null!==a&&!a.Ta&&!a.Je&&a.Ti&&a.ql&&a.Ax&&0!==a.selection.count?!0:!1};ec.prototype.copyToClipboard=function(a){var b=this.g;if(null!==b){var c=null;if(null===a)Rg=null,Sg="";else{var c=b.U,d=!1,e=!1,f=null;try{if(c instanceof Yf){var g=c,d=g.zl;g.zl=this.PB}c instanceof Xf&&(g=c,e=g.yl,g.yl=this.OB);f=b.sn(a,null,!0)}finally{c instanceof Yf&&(c.zl=d),c instanceof Xf&&(c.yl=e),c=new N(O),c.ld(f),Rg=c,Sg=b.U.$j}}b.ma("ClipboardChanged",c)}};
ec.prototype.pasteFromClipboard=function(){var a=new Xb(O),b=Rg;if(null===b)return a;var c=this.g;if(null===c||Sg!==c.U.$j)return a;var d=c.U,e=!1,f=!1,g=null;try{if(d instanceof Yf){var h=d,e=h.zl;h.zl=this.PB}d instanceof Xf&&(h=d,f=h.yl,h.yl=this.OB);g=c.sn(b,c,!1)}finally{for(d instanceof Yf&&(d.zl=e),d instanceof Xf&&(d.yl=f),b=g.i;b.next();)c=b.value,d=b.key,c.location.w()||(d.location.w()?c.location=d.location:!c.position.w()&&d.position.w()&&(c.position=d.position)),a.add(c)}return a};
ec.prototype.pasteSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b)try{b.Gb="wait";b.Bb("Paste");b.ma("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&Zg(b);for(var d=c.i;d.next();)d.value.Ia=!0;b.ma("ChangedSelection");if(null!==a){var e=b.computePartsBounds(b.selection);if(e){var f=b.Ya.Yc;null===f&&(f=new $g,f.fc(b));var g=f.computeEffectiveCollection(b.selection);f.moveParts(g,new z(a.x-e.ra,a.y-e.Ba),!1)}}b.ma("ClipboardPasted",c)}finally{b.od("Paste"),b.Gb=
""}};ec.prototype.canPasteSelection=function(){var a=this.g;return null===a||a.Ta||a.Je||!a.kn||!a.Ax||null===Rg||Sg!==a.U.$j?!1:!0};ec.prototype.undo=function(){var a=this.g;null!==a&&a.V.undo()};ec.prototype.canUndo=function(){var a=this.g;return null===a||a.Ta||a.Je?!1:a.AB&&a.V.canUndo()};ec.prototype.redo=function(){var a=this.g;null!==a&&a.V.redo()};ec.prototype.canRedo=function(){var a=this.g;return null===a||a.Ta||a.Je?!1:a.AB&&a.V.canRedo()};
ec.prototype.decreaseZoom=function(a){void 0===a&&(a=1/this.Iv);ua(a,ec,"decreaseZoom:factor");var b=this.g;null!==b&&b.mn===ah&&(a*=b.scale,a<b.kg||a>b.jg||(b.scale=a))};ec.prototype.canDecreaseZoom=function(a){void 0===a&&(a=1/this.Iv);ua(a,ec,"canDecreaseZoom:factor");var b=this.g;if(null===b||b.mn!==ah)return!1;a*=b.scale;return a<b.kg||a>b.jg?!1:b.zu};
ec.prototype.increaseZoom=function(a){void 0===a&&(a=this.Iv);ua(a,ec,"increaseZoom:factor");var b=this.g;null!==b&&b.mn===ah&&(a*=b.scale,a<b.kg||a>b.jg||(b.scale=a))};ec.prototype.canIncreaseZoom=function(a){void 0===a&&(a=this.Iv);ua(a,ec,"canIncreaseZoom:factor");var b=this.g;if(null===b||b.mn!==ah)return!1;a*=b.scale;return a<b.kg||a>b.jg?!1:b.zu};ec.prototype.resetZoom=function(a){void 0===a&&(a=this.Hu);ua(a,ec,"resetZoom:newscale");var b=this.g;null===b||a<b.kg||a>b.jg||(b.scale=a)};
ec.prototype.canResetZoom=function(a){void 0===a&&(a=this.Hu);ua(a,ec,"canResetZoom:newscale");var b=this.g;return null===b||a<b.kg||a>b.jg?!1:b.zu};ec.prototype.zoomToFit=function(){var a=this.g;if(null!==a){var b=a.scale,c=a.position;b!==this.sB||isNaN(this.Mw)?(this.Mw=b,this.mA=c.copy(),a.zoomToFit(),a.te(),this.sB=a.scale):(a.scale=this.Mw,a.position=this.mA)}};ec.prototype.canZoomToFit=function(){var a=this.g;return null===a?!1:a.zu};
ec.prototype.collapseTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Bb("Collapse Tree");var c=new N(V);if(null!==a&&a.rc)a.collapseTree(),c.add(a);else for(var d=b.selection.i;d.next();){var e=d.value;e instanceof V&&(a=e,a.rc&&(a.collapseTree(),c.add(a)))}b.ma("TreeCollapsed",c)}finally{b.od("Collapse Tree")}};
ec.prototype.canCollapseTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.Ta)return!1;if(null!==a){if(!a.rc)return!1;if(0<a.Qu().count)return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof V&&b.rc&&0<b.Qu().count)return!0;return!1};
ec.prototype.expandTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Bb("Expand Tree");var c=new N(V);if(null===a||a.rc)for(var d=b.selection.i;d.next();){var e=d.value;e instanceof V&&(a=e,a.rc||(a.expandTree(),c.add(a)))}else a.expandTree(),c.add(a);b.ma("TreeExpanded",c)}finally{b.od("Expand Tree")}};
ec.prototype.canExpandTree=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.Ta)return!1;if(null!==a){if(a.rc)return!1;if(0<a.Qu().count)return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof V&&!b.rc&&0<b.Qu().count)return!0;return!1};
ec.prototype.groupSelection=function(){var a=this.g;if(null!==a){var b=a.U;if(b instanceof Xf){var c=this.BB;if(null!==c){var d=null;try{a.Gb="wait";a.Bb("Group");a.ma("ChangingSelection");for(var e=new N(O),f=a.selection.i;f.next();){var g=f.value;g.Zc()&&g.canGroup()&&e.add(g)}for(var h=new N(O),k=e.i;k.next();){for(var l=k.value,f=!1,m=e.i;m.next();)if(l.$g(m.value)){f=!0;break}f||h.add(l)}if(0<h.count){var n=h.first().Ca;if(null!==n)for(;null!==n;){for(var e=!1,p=h.i;p.next();)if(!p.value.$g(n)){e=
!0;break}if(e)n=n.Ca;else break}if(c instanceof Wg)Yg(c),d=c.copy(),null!==d&&a.add(d);else if(b.hy(c)){var q=b.copyNodeData(c);Ea(q)&&(b.pl(q),d=a.Pu(q))}if(null!==d){null!==n&&this.isValidMember(n,d)&&(d.Ca=n);for(var s=h.i;s.next();){var t=s.value;this.isValidMember(d,t)&&(t.Ca=d)}a.select(d)}}a.ma("ChangedSelection");a.ma("SelectionGrouped",d)}finally{a.od("Group"),a.Gb=""}}}}};
ec.prototype.canGroupSelection=function(){var a=this.g;if(null===a||a.Ta||a.Je||!a.kn||!a.uu||!(a.U instanceof Xf)||null===this.BB)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Zc()&&b.canGroup())return!0}return!1};function bh(a){var b=ob();for(a=a.i;a.next();){var c=a.value;c instanceof W||b.push(c)}a=new Xb(O);for(var c=b.length,d=0;d<c;d++){for(var e=b[d],f=!0,g=0;g<c;g++)if(e.$g(b[g])){f=!1;break}f&&a.add(e)}pb(b);return a}
ec.prototype.isValidMember=function(a,b){if(null===b||a===b||b instanceof W)return!1;if(null!==a){if(a===b||a.$g(b))return!1;var c=a.qy;if(null!==c&&!c(a,b)||null===a.data&&null!==b.data||null!==a.data&&null===b.data)return!1}c=this.qy;return null!==c?c(a,b):!0};
ec.prototype.ungroupSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null!==b){var c=b.U;if(c instanceof Xf)try{b.Gb="wait";b.Bb("Ungroup");b.ma("ChangingSelection");var d=new N(Wg);if(null!==a)d.add(a);else for(var e=b.selection.i;e.next();){var f=e.value;f instanceof Wg&&(a=f,a.canUngroup()&&d.add(a))}if(0<d.count){b.Du();for(var g=d.i;g.next();){var h=g.value;h.expandSubGraph();var k=h.Ca,l=null!==k&&null!==k.data?c.$a(k.data):void 0,m=new N(O);m.ld(h.lc);for(var n=m.i;n.next();){var p=
n.value;p.Ia=!0;if(!(p instanceof W)){var q=p.data;null!==q?c.yv(q,l):p.Ca=k}}b.remove(h)}}b.ma("ChangedSelection");b.ma("SelectionUngrouped",d,m)}finally{b.od("Ungroup"),b.Gb=""}}};ec.prototype.canUngroupSelection=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.Ta||b.Je||!b.ql||!b.yu||!(b.U instanceof Xf))return!1;if(null!==a){if(a.canUngroup())return!0}else for(a=b.selection.i;a.next();)if(b=a.value,b instanceof Wg&&b.canUngroup())return!0;return!1};
ec.prototype.addTopLevelParts=function(a,b){for(var c=!0,d=bh(a).i;d.next();){var e=d.value;null!==e.Ca&&(!b||this.isValidMember(null,e)?e.Ca=null:c=!1)}return c};ec.prototype.collapseSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Bb("Collapse SubGraph");var c=new N(Wg);if(null!==a&&a.td)a.collapseSubGraph(),c.add(a);else for(var d=b.selection.i;d.next();){var e=d.value;e instanceof Wg&&(a=e,a.td&&(a.collapseSubGraph(),c.add(a)))}b.ma("SubGraphCollapsed",c)}finally{b.od("Collapse SubGraph")}};
ec.prototype.canCollapseSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.Ta)return!1;if(null!==a)return a.td?!0:!1;for(a=b.selection.i;a.next();)if(b=a.value,b instanceof Wg&&b.td)return!0;return!1};
ec.prototype.expandSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return!1;try{b.Bb("Expand SubGraph");var c=new N(Wg);if(null===a||a.td)for(var d=b.selection.i;d.next();){var e=d.value;e instanceof Wg&&(a=e,a.td||(a.expandSubGraph(),c.add(a)))}else a.expandSubGraph(),c.add(a);b.ma("SubGraphExpanded",c)}finally{b.od("Expand SubGraph")}};
ec.prototype.canExpandSubGraph=function(a){void 0===a&&(a=null);var b=this.g;if(null===b||b.Ta)return!1;if(null!==a)return a.td?!1:!0;for(a=b.selection.i;a.next();)if(b=a.value,b instanceof Wg&&!b.td)return!0;return!1};
ec.prototype.editTextBlock=function(a){void 0===a&&(a=null);null!==a&&ra(a,Zb,ec,"editTextBlock");var b=this.g;if(null!==b){var c=b.Ya.Zy;if(null!==c){if(null===a){a=null;for(var d=b.selection.i;d.next();){var e=d.value;if(e.canEdit()){a=e;break}}if(null===a)return;a=a.sr(function(a){return a instanceof Zb&&a.Ox})}null!==a&&(c.vg=a,b.Ha=c)}}};
ec.prototype.canEditTextBlock=function(a){void 0===a&&(a=null);null!==a&&ra(a,Zb,ec,"canEditTextBlock");var b=this.g;if(null===b||b.Ta||b.Je||!b.xu||null===b.Ya.Zy)return!1;if(null!==a){if(a=a.J,null!==a&&a.canEdit())return!0}else for(b=b.selection.i;b.next();)if(a=b.value,a.canEdit()&&(a=a.sr(function(a){return a instanceof Zb&&a.Ox}),null!==a))return!0;return!1};
ec.prototype.showContextMenu=function(a){var b=this.g;if(null!==b){var c=b.Ya.Hx;if(null!==c&&(void 0===a&&(a=0<b.selection.count?b.selection.first():b),a=c.findObjectWithContextMenu(a),null!==a)){var d=new Ff,e=null;a instanceof U?e=a.Ra(Dd):b.GF||(e=b.Va,e=new z(e.x+e.width/2,e.y+e.height/2));null!==e&&(d.ve=b.CD(e),d.S=e,b.C=d);b.Ha=c;ch(c,!1,a)}}};
ec.prototype.canShowContextMenu=function(a){var b=this.g;if(null===b)return!1;var c=b.Ya.Hx;if(null===c)return!1;void 0===a&&(a=0<b.selection.count?b.selection.first():b);return null===c.findObjectWithContextMenu(a)?!1:!0};G(ec,{LE:"copiesConnectedLinks"},function(){return this.wz},function(a){w(a,"boolean",ec,"copiesConnectedLinks");this.wz=a});G(ec,{NE:"copiesTree"},function(){return this.Az},function(a){w(a,"boolean",ec,"copiesTree");this.Az=a});
G(ec,{WE:"deletesTree"},function(){return this.Kz},function(a){w(a,"boolean",ec,"deletesTree");this.Kz=a});G(ec,{PB:"copiesParentKey"},function(){return this.zz},function(a){w(a,"boolean",ec,"copiesParentKey");this.zz=a});G(ec,{OB:"copiesGroupKey"},function(){return this.yz},function(a){w(a,"boolean",ec,"copiesGroupKey");this.yz=a});
G(ec,{BB:"archetypeGroupData"},function(){return this.Sv},function(a){null!==a&&ra(a,Object,ec,"archetypeGroupData");var b=this.g;null!==b&&(b=b.U,b instanceof Xf&&(a instanceof Wg||b.hy(a)||v("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a)));this.Sv=a});G(ec,{qy:"memberValidation"},function(){return this.Jj},function(a){null!==a&&w(a,"function",ec,"memberValidation");this.Jj=a});
G(ec,{Hu:"defaultScale"},function(){return this.Iz},function(a){ua(a,ec,"defaultScale");0<a||v("defaultScale must be larger than zero, not: "+a);this.Iz=a});G(ec,{Iv:"zoomFactor"},function(){return this.rB},function(a){ua(a,ec,"zoomFactor");1<a||v("zoomFactor must be larger than 1.0, not: "+a);this.rB=a});function kg(){0<arguments.length&&Aa(kg);sb(this);this.N=null;this.zb="";this.de=!0;this.Zz=!1;this.nB=null;this.ou=-1}vb("Tool",kg);kg.prototype.fc=function(a){this.N=a};
kg.prototype.toString=function(){return""!==this.name?this.name+" Tool":xa(Object.getPrototypeOf(this))};kg.prototype.updateAdornments=function(){};kg.prototype.canStart=function(){return this.isEnabled};kg.prototype.doStart=function(){};kg.prototype.doActivate=function(){this.ca=!0};kg.prototype.doDeactivate=function(){this.ca=!1};kg.prototype.doStop=function(){};kg.prototype.doCancel=function(){this.stopTool()};
kg.prototype.stopTool=function(){var a=this.g;null!==a&&a.Ha===this&&(a.Ha=null,a.Gb="")};kg.prototype.doMouseDown=function(){!this.ca&&this.canStart()&&this.doActivate()};kg.prototype.doMouseMove=function(){};kg.prototype.doMouseUp=function(){this.stopTool()};kg.prototype.doMouseWheel=function(){};kg.prototype.canStartMultiTouch=function(){return!0};
kg.prototype.standardPinchZoomStart=function(){var a=this.g;if(null!==a){var b=a.C.event,c=null,d=null;if(void 0!==b.targetTouches){if(2>b.targetTouches.length)return;c=b.targetTouches[0];d=b.targetTouches[1]}else if(null!==a.Te[0])c=a.Te[0],d=a.Te[1];else return;this.doCancel();if(a.Am){a.yw=!0;a.zA=a.scale;var e=a.eb,f=a.cb,g=a.Oa.getBoundingClientRect(),h=c.clientX-e/g.width*g.left,k=c.clientY-f/g.height*g.top,c=d,d=c.clientX-e/g.width*g.left-h,f=c.clientY-f/g.height*g.top-k,f=Math.sqrt(d*d+f*
f);a.WA=f;b.preventDefault();b.cancelBubble=!0}else dh(a)}};
kg.prototype.standardPinchZoomMove=function(){var a=this.g;if(null!==a){var b=a.C.event;this.doCancel();dh(a);var c=null,d=null;if(void 0!==b.targetTouches){if(2>b.targetTouches.length)return;c=b.targetTouches[0];d=b.targetTouches[1]}else if(null!==a.Te[0])c=a.Te[0],d=a.Te[1];else return;if(a.Am&&a.yw){var e=a.eb,f=a.cb,g=a.Oa.getBoundingClientRect(),h=c,c=h.clientX-e/g.width*g.left,k=h.clientY-f/g.height*g.top,h=d,d=h.clientX-e/g.width*g.left,f=h.clientY-f/g.height*g.top,g=d-c,e=f-k,g=Math.sqrt(g*
g+e*e)/a.WA,c=new z((Math.min(d,c)+Math.max(d,c))/2,(Math.min(f,k)+Math.max(f,k))/2),k=a.zA*g,d=a.ib;k!==a.scale&&d.canResetZoom(k)&&(f=a.Ul,a.Ul=c,d.resetZoom(k),a.Ul=f);b.preventDefault();b.cancelBubble=!0}}};kg.prototype.doKeyDown=function(){var a=this.g;null!==a&&"Esc"===a.C.key&&this.doCancel()};kg.prototype.doKeyUp=function(){};kg.prototype.startTransaction=kg.prototype.Bb=function(a){void 0===a&&(a=this.name);this.Oe=null;var b=this.g;return null===b?!1:b.Bb(a)};
kg.prototype.stopTransaction=kg.prototype.dj=function(){var a=this.g;return null===a?!1:null===this.Oe?a.Yn():a.od(this.Oe)};
kg.prototype.standardMouseSelect=function(){var a=this.g;if(null!==a&&a.De){var b=a.C,c=a.wr(b.S,!1);if(null!==c)if(fa?b.Ur:b.control){a.ma("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Ca;null!==b&&(b.Ia=!b.Ia);a.ma("ChangedSelection")}else if(b.shift){if(!c.Ia){a.ma("ChangingSelection");for(b=c;null!==b&&!b.canSelect();)b=b.Ca;null!==b&&(b.Ia=!0);a.ma("ChangedSelection")}}else{if(!c.Ia){for(b=c;null!==b&&!b.canSelect();)b=b.Ca;null!==b&&a.select(b)}}else!b.left||(fa?b.Ur:b.control)||
b.shift||a.Du()}};kg.prototype.standardMouseClick=function(a,b){void 0===a&&(a=null);void 0===b&&(b=function(a){return!a.layer.bc});var c=this.g;if(null!==c){var d=c.C,e=c.Cd(d.S,a,b);d.Kd=e;eh(e,d,c)}};
function eh(a,b,c){var d=0;b.left?d=1===b.ke?1:2===b.ke?2:1:b.right&&1===b.ke&&(d=3);var e="";if(null!==a){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.ma(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.ma(e)}if(null!==a)for(b.qc=!1;null!==a;){c=null;switch(d){case 1:c=a.click;break;case 2:c=a.qr?a.qr:a.click;break;case 3:c=
a.Gx}if(null!==c&&(c(b,a),b.qc))break;a=a.I}else{a=null;switch(d){case 1:a=c.click;break;case 2:a=c.qr?c.qr:c.click;break;case 3:a=c.Gx}null!==a&&a(b)}}
kg.prototype.standardMouseOver=function(){var a=this.g;if(null!==a){var b=a.C;if(null!==b.g&&!0!==a.rb.Fc){var c=a.Ma;a.Ma=!0;var d=a.Cd(b.S,null,null);b.Kd=d;var e=!1;if(d!==a.hm){var f=a.hm,g=f;a.hm=d;this.doCurrentObjectChanged(f,d);for(b.qc=!1;null!==f;){var h=f.HC;if(null!==h){if(d===f)break;if(null!==d&&d.nk(f))break;h(b,f,d);e=!0;if(b.qc)break}f=f.I}f=g;for(b.qc=!1;null!==d;){h=d.GC;if(null!==h){if(f===d)break;if(null!==f&&f.nk(d))break;h(b,d,f);e=!0;if(b.qc)break}d=d.I}d=a.hm}if(null!==d){f=
d;for(h="";null!==f;){h=f.cursor;if(""!==h)break;f=f.I}a.Gb=h;b.qc=!1;for(f=d;null!==f;){h=f.vy;if(null!==h&&(h(b,f),e=!0,b.qc))break;f=f.I}}else a.Gb="",h=a.vy,null!==h&&(h(b),e=!0);e&&a.vd();a.Ma=c}}};kg.prototype.doCurrentObjectChanged=function(){};
kg.prototype.standardMouseWheel=function(){var a=this.g;if(null!==a){var b=a.C,c=b.bk;if(0!==c&&a.Wc.w()){var d=a.ib,e=a.Ya.Wr;if((e===fh&&!b.shift||e===gh&&b.control)&&(0<c?d.canIncreaseZoom():d.canDecreaseZoom()))e=a.Ul,a.Ul=b.ve,0<c?d.increaseZoom():d.decreaseZoom(),a.Ul=e,b.bubbles=!1;else if(e===fh&&b.shift||e===gh&&!b.control){d=a.position.copy();e=0<c?c:-c;if(!b.shift&&a.je){var f=a.ks,e=e/40*f;0<c?a.scroll("pixel","up",e):a.scroll("pixel","down",e)}else b.shift&&a.ie&&(f=a.js,e=e/40*f,0<c?
a.scroll("pixel","left",e):a.scroll("pixel","right",e));a.position.A(d)||(b.bubbles=!1)}}}};kg.prototype.standardWaitAfter=function(a){w(a,"number",kg,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.ou=ma(function(){b.doWaitAfter()},a)};kg.prototype.cancelWaitAfter=function(){-1!==this.ou&&window.clearTimeout(this.ou);this.ou=-1};kg.prototype.doWaitAfter=function(){};
kg.prototype.findToolHandleAt=function(a,b){var c=this.g;if(null===c)return null;c=c.Cd(a,null,function(a){a=a.J;return null===a?!1:null!==a.Xb});if(null===c)return null;var d=c.J;return null===d||d.jc!==b?null:c};kg.prototype.isBeyondDragSize=function(a,b){var c=this.g;if(null===c)return!1;void 0===a&&(a=c.Yb.ve);void 0===b&&(b=c.C.ve);var d=c.Ya.aF,e=d.width,d=d.height;c.Yb.qk&&(e+=6,d+=6);return Math.abs(b.x-a.x)>e||Math.abs(b.y-a.y)>d};H(kg,{g:"diagram"},function(){return this.N});
G(kg,{name:"name"},function(){return this.zb},function(a){w(a,"string",kg,"name");this.zb=a});G(kg,{isEnabled:"isEnabled"},function(){return this.de},function(a){w(a,"boolean",kg,"isEnabled");this.de=a});G(kg,{ca:"isActive"},function(){return this.Zz},function(a){w(a,"boolean",kg,"isActive");this.Zz=a});G(kg,{Oe:"transactionResult"},function(){return this.nB},function(a){null!==a&&w(a,"string",kg,"transactionResult");this.nB=a});
function $g(){0<arguments.length&&Aa($g);kg.call(this);this.name="Dragging";this.xz=this.cA=!0;this.gp=this.Qz=!1;this.gA=!0;this.zw=(new Za(NaN,NaN)).freeze();this.Aw=ud;this.Bw=(new z(NaN,NaN)).freeze();this.Pz=!1;this.Nz=this.vz=this.Oz=this.Dz=this.Ch=null;this.Po=this.eA=!1;this.bn=new z(NaN,NaN);this.au=new z;this.du=!1;this.Zt=this.bA=!0;this.rm=100;this.hi=[];this.aE=(new Xb(O)).freeze()}yb($g,kg);vb("DraggingTool",$g);
G($g,{tC:"isCopyEnabled"},function(){return this.cA},function(a){w(a,"boolean",$g,"isCopyEnabled");this.cA=a});G($g,{ME:"copiesEffectiveCollection"},function(){return this.xz},function(a){w(a,"boolean",$g,"copiesEffectiveCollection");this.xz=a});G($g,{bF:"dragsTree"},function(){return this.Qz},function(a){w(a,"boolean",$g,"dragsTree");this.Qz=a});G($g,{Zu:"isGridSnapEnabled"},function(){return this.gp},function(a){w(a,"boolean",$g,"isGridSnapEnabled");this.gp=a});
G($g,{CF:"isComplexRoutingRealtime"},function(){return this.bA},function(a){w(a,"boolean",$g,"isComplexRoutingRealtime");this.bA=a});G($g,{EF:"isGridSnapRealtime"},function(){return this.gA},function(a){w(a,"boolean",$g,"isGridSnapRealtime");this.gA=a});G($g,{lC:"gridSnapCellSize"},function(){return this.zw},function(a){ra(a,Za,$g,"gridSnapCellSize");this.zw.A(a)||(this.zw=a=a.O())});
G($g,{oF:"gridSnapCellSpot"},function(){return this.Aw},function(a){ra(a,R,$g,"gridSnapCellSpot");this.Aw.A(a)||(this.Aw=a=a.O())});G($g,{pF:"gridSnapOrigin"},function(){return this.Bw},function(a){ra(a,z,$g,"gridSnapOrigin");this.Bw.A(a)||(this.Bw=a=a.O())});G($g,{Qh:"dragsLink"},function(){return this.Pz},function(a){w(a,"boolean",$g,"dragsLink");this.Pz=a});G($g,{or:"currentPart"},function(){return this.Dz},function(a){null!==a&&ra(a,O,$g,"currentPart");this.Dz=a});
G($g,{Qb:"copiedParts"},function(){return this.vz},function(a){this.vz=a});G($g,{Ib:"draggedParts"},function(){return this.Oz},function(a){this.Oz=a});H($g,{SH:"draggingParts"},function(){return null!==this.Qb?this.Qb.Yh():null!==this.Ib?this.Ib.Yh():this.aE});G($g,{pc:"draggedLink"},function(){return this.Nz},function(a){null!==a&&ra(a,W,$g,"draggedLink");this.Nz=a});G($g,{Yu:"isDragOutStarted"},function(){return this.eA},function(a){this.eA=a});
G($g,{cj:"startPoint"},function(){return this.au},function(a){ra(a,z,$g,"startPoint");this.au.A(a)||(this.au=a=a.O())});G($g,{SB:"delay"},function(){return this.rm},function(a){w(a,"number",$g,"delay");this.rm=a});$g.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.Wj&&!a.Ti&&!a.tu||!a.De)return!1;var b=a.C;return!b.left||a.Ha!==this&&(!this.isBeyondDragSize()||b.qk&&b.timestamp-a.Yb.timestamp<this.rm)?!1:null!==this.findDraggablePart()};
$g.prototype.findDraggablePart=function(){var a=this.g;if(null===a)return null;a=a.wr(a.Yb.S,!1);if(null===a)return null;for(;null!==a&&!a.canSelect();)a=a.Ca;return null!==a&&(a.canMove()||a.canCopy())?a:null};$g.prototype.standardMouseSelect=function(){var a=this.g;if(null!==a&&a.De){var b=a.wr(a.Yb.S,!1);if(null!==b){for(;null!==b&&!b.canSelect();)b=b.Ca;this.or=b;this.or.Ia||(a.ma("ChangingSelection"),b=a.C,(fa?b.Ur:b.control)||b.shift||Zg(a),this.or.Ia=!0,a.ma("ChangedSelection"))}}};
$g.prototype.doActivate=function(){var a=this.g;if(null!==a){this.standardMouseSelect();var b=this.or;null!==b&&(b.canMove()||b.canCopy())&&(this.ca=!0,this.bn.set(a.position),oh(this,a.selection),this.hi.length=0,this.Ib=this.computeEffectiveCollection(a.selection),a.ps=!0,ph(this,this.Ib),this.Bb("Drag"),this.cj=a.Yb.S,a.Yd=!0,a.tu&&(this.Yu=!0,this.Po=!1,qh=this,rh=this.g,this.doSimulatedDragOut()))}};
function oh(a,b){if(a.Qh){var c=a.g;null!==c&&c.rl&&(c.U instanceof Xf&&1===b.count&&b.first()instanceof W?(a.pc=b.first(),a.pc.canRelinkFrom()&&a.pc.canRelinkTo()&&a.pc.kr(),a.Ch=c.Ya.QC,null===a.Ch&&(a.Ch=new sh,a.Ch.fc(c))):(a.pc=null,a.Ch=null))}}
$g.prototype.computeEffectiveCollection=function(a){var b=null!==this.g&&this.g.Ha===this,c=new Fb(O);if(null===a)return c;for(var d=a.i;d.next();)th(this,c,d.value,b);if(null!==this.pc&&this.Qh)return c;for(d=a.i;d.next();)a=d.value,a instanceof W&&(b=a.M,null===b||c.contains(b)?(b=a.R,null===b||c.contains(b)||c.remove(a)):c.remove(a));return c};function uh(a){return void 0===a?new vh(Q.ej):new vh(a.copy())}
function th(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof V){b.add(c,uh(c.location));if(c instanceof Wg)for(var e=c.lc;e.next();)th(a,b,e.value,d);for(e=c.Gd;e.next();){var f=e.value;if(!b.contains(f)){var g=f.M,h=f.R;null!==g&&b.contains(g)&&null!==h&&b.contains(h)&&th(a,b,f,d)}}if(a.bF)for(c=c.cC();c.next();)th(a,b,c.value,d)}else if(c instanceof W)for(f=c,b.add(f,uh()),e=f.If;e.next();)th(a,b,e.value,d);else c instanceof Vg||b.add(c,uh(c.location))}
$g.prototype.doDeactivate=function(){this.ca=!1;var a=this.g;null!==a&&wh(a);xh(this);yh(this,this.Ib);this.Ib=null;this.Po=this.Yu=!1;if(0<zh.count){for(var b=zh.length,c=0;c<b;c++){var d=zh.Y(c);Ah(d);Bh(d);xh(d);null!==d.g&&wh(d.g)}zh.clear()}Ah(this);this.bn.k(NaN,NaN);qh=rh=null;Bh(this);a.Yd=!1;a.Gb="";a.ps=!1;this.dj()};function xh(a){var b=a.g;if(null!==b){var c=b.Ma;b.Ma=!0;Ch(a,b.C,null);b.Ma=c}a.hi.length=0}
function Dh(){var a=qh;Bh(a);Eh(a);var b=a.g;null!==b&&a.bn.w()&&(b.position=a.bn);null!==b&&wh(b)}$g.prototype.doCancel=function(){Bh(this);Eh(this);var a=this.g;null!==a&&this.bn.w()&&(a.position=this.bn);this.stopTool()};function ph(a,b){if(null!==b){a.du=!0;for(var c=b.i;c.next();){var d=c.key;d instanceof W&&(d.ho=!0)}}}function yh(a,b){if(null!==b){for(var c=b.i;c.next();){var d=c.key;d instanceof W&&(d.ho=!1,d.mk&&Fh(d)&&d.Ab())}a.du=!1}}
$g.prototype.doKeyDown=function(){var a=this.g;null!==a&&(a=a.C,null!==a&&this.ca&&("Esc"===a.key?this.doCancel():this.doMouseMove()))};$g.prototype.doKeyUp=function(){var a=this.g;null!==a&&null!==a.C&&this.ca&&this.doMouseMove()};function Gh(a,b){for(var c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=a.i;g.next();){var h=g.value;if(h.Zc()&&h.sa()){var k=h.location,h=k.x,k=k.y;isNaN(h)||isNaN(k)||(h<c&&(c=h),k<d&&(d=k),h>e&&(e=h),k>f&&(f=k))}}Infinity===c?b.k(0,0,0,0):b.k(c,d,e-c,f-d)}
function Ph(a,b){if(null===a.Qb){var c=a.g;if(!(null===c||b&&(c.Ta||c.Je))&&null!==a.Ib){var d=c.V;d.isEnabled&&d.uC?null!==d.Nh&&0<d.Nh.gg.count&&(c.V.Yn(),c.Bb("Drag")):Eh(a);c.Ma=!b;c.Yl=!b;a.cj=c.Yb.S;d=a.ME?a.Ib.Yh():c.selection;d=c.sn(d,c,!0);for(c=d.i;c.next();)c.value.location=c.key.location;c=bb();Gh(d,c);fb(c);for(var c=new Fb(O),e=a.Ib.i;e.next();){var f=e.key;f.Zc()&&f.canCopy()&&(f=d.ja(f),null!==f&&(f.Ee(),c.add(f,uh(f.location))))}for(d=d.i;d.next();)e=d.value,e instanceof W&&e.canCopy()&&
c.add(e,uh());a.Qb=c;oh(a,c.Yh());null!==a.pc&&(c=a.pc,d=c.Pl,c.sk(a.cj.x-(d.x+d.width/2),a.cj.y-(d.y+d.height/2)))}}}function Bh(a){var b=a.g;if(null!==b){if(null!==a.Qb&&(b.My(a.Qb.Yh(),!1),a.Qb=null,null!==a.Ib))for(var c=a.Ib.i;c.next();)c.key instanceof W&&(c.value.point=new z(0,0));b.Ma=!1;b.Yl=!1;a.cj=b.Yb.S}}function Ah(a){if(null!==a.pc){if(a.Qh&&null!==a.Ch){var b=a.Ch;b.g.remove(b.Ld);b.g.remove(b.Md)}a.pc=null;a.Ch=null}}
function Qh(a,b,c){var d=a.g;if(null!==d){var e=a.cj,f=Va();f.assign(d.C.S);a.moveParts(b,f.rs(e),c);A(f)}}
$g.prototype.moveParts=function(a,b,c){if(null!==a&&(ra(a,Fb,$g,"moveParts:parts"),0!==a.count)){var d=Va(),e=Va();e.assign(b);isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);var f=this.du;f||ph(this,a);for(var g=new N(Rh),h=new N(Hc),k=a.i;k.next();){var l=k.key;if(l.Zc()){var m=Sh(this,l,a);if(null!==m)g.add(new Rh(l,k.value,m));else if(!c||l.canMove()){m=k.value.point;d.assign(m);var n=Va(),p=this.computeMove(l,d.add(e),a,n);l.location=p;A(n);k.value.pD=n.rs(m)}}else k.key instanceof W&&h.add(k.gb)}for(c=
g.i;c.next();)g=c.value,m=g.info.point,d.assign(m),g.dc.location=d.add(g.qF.pD);m=Va();c=Va();for(h=h.i;h.next();)if(n=h.value,g=n.key,g instanceof W)if(g.ho)k=g.M,l=g.R,null!==this.pc&&this.Qh?(n=n.value.point,a.add(g,uh(e)),k=b.x-n.x,l=b.y-n.y,g.sk(k,l)):(null!==k&&(m.assign(k.location),p=a.ja(k),null!==p&&m.rs(p.point)),null!==l&&(c.assign(l.location),p=a.ja(l),null!==p&&c.rs(p.point)),null!==k&&null!==l?m.Wd(c)?(n=n.value.point,k=d,k.assign(m),k.rs(n),a.add(g,uh(m)),g.sk(k.x,k.y)):(g.ho=!1,g.Ab()):
(n=n.value.point,a.add(g,uh(null!==k?m:null!==l?c:b)),k=e.x-n.x,l=e.y-n.y,g.sk(k,l)));else if(null===g.M||null===g.R)n=n.value.point,a.add(g,uh(b)),k=e.x-n.x,l=e.y-n.y,g.sk(k,l);A(d);A(e);A(m);A(c);f||yh(this,a)}};function Sh(a,b,c){b=b.Ca;if(null!==b){a=Sh(a,b,c);if(null!==a)return a;a=c.ja(b);if(null!==a)return a}return null}
function Eh(a){if(null!==a.Ib){for(var b=a.g,c=a.Ib.i;c.next();){var d=c.key;d.Zc()&&(d.location=c.value.point)}for(c=a.Ib.i;c.next();)if(d=c.key,d instanceof W&&d.ho){var e=c.value.point;a.Ib.add(d,uh());d.sk(-e.x,-e.y)}b.te()}}
$g.prototype.computeMove=function(a,b,c,d){void 0===d&&(d=new z);d.assign(b);if(null===a)return d;void 0===c&&(c=null);var e=b;if(this.Zu&&(this.EF||null===c||this.g.C.up)&&(e=Va(),c=e,c.assign(b),null!==a)){var f=this.g;if(null!==f){var g=f.Dr,h=this.lC,f=h.width,h=h.height,k=this.pF,l=k.x,k=k.y,m=this.oF;if(null!==g){var n=g.Su;isNaN(f)&&(f=n.width);isNaN(h)&&(h=n.height);g=g.kC;isNaN(l)&&(l=g.x);isNaN(k)&&(k=g.y)}g=Wa(0,0);g.ns(0,0,f,h,m);Q.ur(b.x,b.y,l+g.x,k+g.y,f,h,c);A(g)}}c=null!==a.WB?a.WB(a,
b,e):e;h=a.aG;f=h.x;isNaN(f)&&(f=a.location.x);h=h.y;isNaN(h)&&(h=a.location.y);g=a.WF;l=g.x;isNaN(l)&&(l=a.location.x);g=g.y;isNaN(g)&&(g=a.location.y);d.k(Math.max(f,Math.min(c.x,l)),Math.max(h,Math.min(c.y,g)));e!==b&&A(e);return d};function Th(a,b){if(null===b)return!0;var c=b.J;return null===c||c instanceof Vg||c.layer.bc||a.Ib&&a.Ib.contains(c)||a.Qb&&a.Qb.contains(c)?!0:!1}
function Uh(a,b,c,d){var e=a.g;if(null!==e){a.Qh&&(null!==a.pc&&(a.pc.M=null,a.pc.R=null),Vh(a,!1));var f=!1;!1===a.Zt&&(f=e.Ma,e.Ma=!0);var g=Wh(e,b,null,function(b){return!Th(a,b)}),h=e.C;h.Kd=g;var k=e.Ma;e.Ma=!0;var l=Ch(a,h,g);if(a.ca||null!==qh){if(null===g){var m=e.eG;null!==m&&(m(h),l=!0)}if(a.ca||null!==qh)if(a.doDragOver(b,g),a.ca||null!==qh)e.Ma=k,l&&e.te(),!1===a.Zt&&(e.Ma=f),(e.ie||e.je)&&(c||d)&&Xh(e,h.ve)}}}
function Ch(a,b,c){var d=!1,e=a.hi.length,f=0<e?a.hi[0]:null;if(c===f)return!1;b.qc=!1;for(var g=0;g<e;g++){var h=a.hi[g],k=h.dG;if(null!==k&&(k(b,h,c),d=!0,b.qc))break}a.hi.length=0;if(!a.ca&&null===qh||null===c)return d;for(b.qc=!1;null!==c;)a.hi.push(c),c=Yh(c);e=a.hi.length;for(g=0;g<e&&(h=a.hi[g],k=h.cG,null===k||(k(b,h,f),d=!0,!b.qc));g++);return d}function Yh(a){var b=a.I;return null!==b?b:a instanceof O&&!(a instanceof Wg)&&(a=a.Ca,null!==a&&a.tF)?a:null}
function Zh(a,b,c){var d=a.Ch;if(null===d)return null;var e=a.g.Dl(b,d.NC,function(a){return d.findValidLinkablePort(a,c)});a=Va();for(var f=Infinity,g=null,e=e.i;e.next();){var h=e.value;if(null!==h.J){var k=h.Ra(Dd,a),k=b.Wi(k);k<f&&(g=h,f=k)}}A(a);return g}
function Vh(a,b){var c=a.pc;if(null!==c&&!(2>c.Z)){var d=a.g;if(null!==d&&!d.Ta&&(d=a.Ch,null!==d)){var e=null,f=null;null===c.M&&(e=Zh(a,c.j(0),!1),null!==e&&(f=e.J));var g=null,h=null;null===c.R&&(g=Zh(a,c.j(c.Z-1),!0),null!==g&&(h=g.J));var k=d.isValidLink(f,e,h,g);b?(c.lm=c.j(0).copy(),c.pm=c.j(c.Z-1).copy(),c.ho=!1,c.M=f,null!==e&&(c.Ef=e.bd),c.R=h,null!==g&&(c.wg=g.bd)):k?$h(d,f,e,h,g):$h(d,null,null,null,null)}}}$g.prototype.doDragOver=function(){};
function ai(a,b){var c=a.g;if(null!==c){a.Qh&&Vh(a,!0);xh(a);var d=Wh(c,b,null,function(b){return!Th(a,b)}),e=c.C;e.Kd=d;if(null!==d){e.qc=!1;for(var f=d;null!==f;){var g=f.sy;if(null!==g&&(g(e,f),e.qc))break;f=Yh(f)}}else g=c.sy,null!==g&&g(e);if(a.ca||null!==qh)if(a.doDropOnto(b,d),a.ca||null!==qh)for(d=c.selection.i;d.next();)e=d.value,e instanceof V&&bi(c,e.Q)}}$g.prototype.doDropOnto=function(){};
$g.prototype.doMouseMove=function(){if(this.ca){var a=this.g;if(null!==a&&null!==this.or&&null!==this.Ib){var b=!1,c=!1;this.mayCopy()?(b=!0,a.Gb="copy",Ph(this,!1),ph(this,this.Qb),Qh(this,this.Qb,!1),yh(this,this.Qb)):this.mayMove()?(c=!0,a.Gb="default",Bh(this),Qh(this,this.Ib,!0)):this.mayDragOut()?(a.Gb="no-drop",Ph(this,!1),Qh(this,this.Qb,!1)):Bh(this);Uh(this,a.C.S,c,b)}}};
$g.prototype.doMouseUp=function(){if(this.ca){var a=this.g;if(null!==a){var b=!1,c=this.mayCopy();c&&null!==this.Qb?(Bh(this),Ph(this,!0),ph(this,this.Qb),Qh(this,this.Qb,!1),yh(this,this.Qb),null!==this.Qb&&a.jD(this.Qb.Yh())):(b=!0,Bh(this),this.mayMove()&&(Qh(this,this.Ib,!0),this.Zt=!1,Uh(this,a.C.S,!0,!1),this.Zt=!0));this.Po=!0;ai(this,a.C.S);if(this.ca){this.Qb=null;if(b&&null!==this.Ib)for(b=this.Ib.i;b.next();){var d=b.key;d instanceof V&&(d=d.Ca,null===d||null===d.placeholder||this.Ib.contains(d)||
d.MB&&d.H())}a.Rb();yh(this,this.Ib);this.Oe=c?"Copy":"Move";a.ma(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};$g.prototype.mayCopy=function(){if(!this.tC)return!1;var a=this.g;if(null===a||a.Ta||a.Je||!a.kn||!a.Ti||(fa?!a.C.alt:!a.C.control))return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Zc()&&b.canCopy())return!0}return null!==this.pc&&this.Qh&&this.pc.canCopy()?!0:!1};
$g.prototype.mayDragOut=function(){if(!this.tC)return!1;var a=this.g;if(null===a||!a.tu||!a.Ti||a.Wj)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Zc()&&b.canCopy())return!0}return null!==this.pc&&this.Qh&&this.pc.canCopy()?!0:!1};$g.prototype.mayMove=function(){var a=this.g;if(null===a||a.Ta||!a.Wj)return!1;for(a=a.selection.i;a.next();){var b=a.value;if(b.Zc()&&b.canMove())return!0}return null!==this.pc&&this.Qh&&this.pc.canMove()?!0:!1};var zh=new N($g),qh=null,rh=null;
$g.prototype.mayDragIn=function(){var a=this.g;if(null===a||!a.zB||a.Ta||a.Je||!a.kn)return!1;var b=qh;return null===b||b.g.U.$j!==a.U.$j?!1:!0};$g.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var a=this.g;a.rb.Wh();ci(a);a=qh;null!==a&&(a.g.Gb="copy")}};$g.prototype.doSimulatedDragLeave=function(){var a=qh;null!==a&&a.doSimulatedDragOut();this.doCancel()};
$g.prototype.doSimulatedDragOver=function(){var a=this.g;if(null!==a){var b=qh;null!==b&&null!==b.Ib&&this.mayDragIn()&&(a.Gb="copy",di(this,b.Ib.Yh(),!1),Qh(this,this.Qb,!1),Uh(this,a.C.S,!1,!0))}};
$g.prototype.doSimulatedDrop=function(){var a=this.g;if(null!==a){var b=qh;null!==b&&(b.Po=!0,Bh(this),this.mayDragIn()&&(this.Bb("Drop"),di(this,b.Ib.Yh(),!0),Qh(this,this.Qb,!1),null!==this.Qb&&a.jD(this.Qb.Yh()),this.Oe="ExternalCopy",ai(this,a.C.S),a.Rb(),this.Qb=null,a.focus(),a.ma("ExternalObjectsDropped",a.selection),this.dj()))}};
function di(a,b,c){if(null===a.Qb){var d=a.g;if(null!==d&&!d.Ta&&!d.Je){d.Ma=!c;d.Yl=!c;a.cj=d.C.S;d=d.sn(b,d,!0);c=bb();Gh(b,c);var e=c.x+c.width/2,f=c.y+c.height/2;fb(c);var g=a.au;c=new Fb(O);var h=Va();for(b=b.i;b.next();){var k=b.value;if(k.Zc()&&k.canCopy()){var l=k.location,k=d.ja(k);h.k(g.x-(e-l.x),g.y-(f-l.y));k.location=h;k.Ee();c.add(k,uh(h))}}A(h);for(d=d.i;d.next();)e=d.value,e instanceof W&&e.canCopy()&&c.add(e,uh());a.Qb=c;oh(a,c.Yh());null!==a.pc&&(c=a.pc,d=c.Pl,c.sk(a.cj.x-(d.x+d.width/
2),a.cj.y-(d.y+d.height/2)))}}}$g.prototype.doSimulatedDragOut=function(){var a=this.g;null!==a&&(this.mayCopy()||this.mayMove()?a.Gb="":a.Gb="no-drop")};function vh(a){this.point=a;this.pD=Q.ej}vb("DraggingInfo",vh);function Rh(a,b,c){this.dc=a;this.info=b;this.qF=c}
function ei(){0<arguments.length&&Aa(ei);kg.call(this);this.KA=100;this.kA=!1;var a=new W,b=new X;b.Hf=!0;b.stroke="blue";a.add(b);b=new X;b.io="Standard";b.fill="blue";b.stroke="blue";a.add(b);a.Le="Tool";this.gB=a;a=new V;b=new X;b.bd="";b.jb="Rectangle";b.fill=null;b.stroke="magenta";b.Na=2;b.ka=Q.Nv;a.add(b);a.wk=!1;a.Le="Tool";this.eB=a;this.fB=b;a=new V;b=new X;b.bd="";b.jb="Rectangle";b.fill=null;b.stroke="magenta";b.Na=2;b.ka=Q.Nv;a.add(b);a.wk=!1;a.Le="Tool";this.hB=a;this.iB=b;this.GA=this.FA=
this.BA=this.AA=this.CA=null;this.fA=!0;this.lE=new Fb(U,"boolean");this.LA=this.Gj=this.aB=null}yb(ei,kg);vb("LinkingBaseTool",ei);ei.prototype.doStop=function(){var a=this.g;null!==a&&wh(a);this.rg=this.qg=this.pg=this.og=this.Sb=null;this.Gv.clear();this.ff=null};G(ei,{NC:"portGravity"},function(){return this.KA},function(a){w(a,"number",ei,"portGravity");0<=a&&(this.KA=a)});
G(ei,{Gn:"isUnconnectedLinkValid"},function(){return this.kA},function(a){w(a,"boolean",ei,"isUnconnectedLinkValid");this.kA=a});G(ei,{Rf:"temporaryLink"},function(){return this.gB},function(a){ra(a,W,ei,"temporaryLink");this.gB=a});G(ei,{Ld:"temporaryFromNode"},function(){return this.eB},function(a){ra(a,V,ei,"temporaryFromNode");this.eB=a});G(ei,{Rl:"temporaryFromPort"},function(){return this.fB},function(a){ra(a,U,ei,"temporaryFromPort");this.fB=a});
G(ei,{Md:"temporaryToNode"},function(){return this.hB},function(a){ra(a,V,ei,"temporaryToNode");this.hB=a});G(ei,{Sl:"temporaryToPort"},function(){return this.iB},function(a){ra(a,U,ei,"temporaryToPort");this.iB=a});G(ei,{Sb:"originalLink"},function(){return this.CA},function(a){null!==a&&ra(a,W,ei,"originalLink");this.CA=a});G(ei,{og:"originalFromNode"},function(){return this.AA},function(a){null!==a&&ra(a,V,ei,"originalFromNode");this.AA=a});
G(ei,{pg:"originalFromPort"},function(){return this.BA},function(a){null!==a&&ra(a,U,ei,"originalFromPort");this.BA=a});G(ei,{qg:"originalToNode"},function(){return this.FA},function(a){null!==a&&ra(a,V,ei,"originalToNode");this.FA=a});G(ei,{rg:"originalToPort"},function(){return this.GA},function(a){null!==a&&ra(a,U,ei,"originalToPort");this.GA=a});G(ei,{rd:"isForwards"},function(){return this.fA},function(a){w(a,"boolean",ei,"isForwards");this.fA=a});H(ei,{Gv:"validPortsCache"},function(){return this.lE});
G(ei,{ff:"targetPort"},function(){return this.aB},function(a){null!==a&&ra(a,U,ei,"targetPort");this.aB=a});ei.prototype.copyPortProperties=function(a,b,c,d,e){if(null!==a&&null!==b&&null!==c&&null!==d){d.ka=b.Q.size;e?(d.ab=b.ab,d.Bk=b.Bk):(d.Za=b.Za,d.fk=b.fk);c.qe=Dd;var f=Va();c.location=b.Ra(Dd,f);A(f);d.angle=b.gk();null!==this.pv&&this.pv(a,b,c,d,e)}};
ei.prototype.setNoTargetPortProperties=function(a,b,c){null!==b&&(b.ka=Q.Nv,b.Za=td,b.ab=td);null!==a&&(a.location=this.g.C.S);null!==this.pv&&this.pv(null,null,a,b,c)};ei.prototype.doMouseDown=function(){this.ca&&this.doMouseMove()};
ei.prototype.doMouseMove=function(){if(this.ca){var a=this.g;if(null!==a){this.ff=this.findTargetPort(this.rd);if(null!==this.ff){var b=this.ff.J;if(b instanceof V){this.rd?this.copyPortProperties(b,this.ff,this.Md,this.Sl,!0):this.copyPortProperties(b,this.ff,this.Ld,this.Rl,!1);return}}this.rd?this.setNoTargetPortProperties(this.Md,this.Sl,!0):this.setNoTargetPortProperties(this.Ld,this.Rl,!1);(a.ie||a.je)&&Xh(a,a.C.ve)}}};
ei.prototype.findValidLinkablePort=function(a,b){if(null===a)return null;var c=a.J;if(!(c instanceof V))return null;for(;null!==a;){var d=b?a.vD:a.eC;if(!0===d&&(null!==a.bd||a instanceof V)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(!1===d)break;a=a.I}return null};
ei.prototype.findTargetPort=function(a){var b=this.g,c=b.C.S,d=this.NC;0>=d&&(d=.1);for(var e=this,f=b.Dl(c,d,function(b){return e.findValidLinkablePort(b,a)},null,!0),d=Infinity,b=null,f=f.i;f.next();){var g=f.value,h=g.J;if(h instanceof V){var k=g.Ra(Dd,Va()),l=c.x-k.x,m=c.y-k.y;A(k);k=l*l+m*m;k<d&&(l=this.Gv.ja(g),null!==l?l&&(b=g,d=k):a&&this.isValidLink(this.og,this.pg,h,g)||!a&&this.isValidLink(h,g,this.qg,this.rg)?(this.Gv.add(g,!0),b=g,d=k):this.Gv.add(g,!1))}}return null!==b&&(c=b.J,c instanceof
V&&(null===c.layer||c.layer.gr))?b:null};ei.prototype.isValidFrom=function(a,b){if(null===a||null===b)return this.Gn;if(this.g.Ha===this&&(null!==a.layer&&!a.layer.gr||!0!==b.eC))return!1;var c=b.iF;if(Infinity>c){if(null!==this.Sb&&a===this.og&&b===this.pg)return!0;var d=b.bd;null===d&&(d="");if(a.Ou(d).count>=c)return!1}return!0};
ei.prototype.isValidTo=function(a,b){if(null===a||null===b)return this.Gn;if(this.g.Ha===this&&(null!==a.layer&&!a.layer.gr||!0!==b.vD))return!1;var c=b.YG;if(Infinity>c){if(null!==this.Sb&&a===this.qg&&b===this.rg)return!0;var d=b.bd;null===d&&(d="");if(a.Df(d).count>=c)return!1}return!0};ei.prototype.isInSameNode=function(a,b){if(null===a||null===b)return!1;if(a===b)return!0;var c=a.J,d=b.J;return null!==c&&c===d};
ei.prototype.isLinked=function(a,b){if(null===a||null===b)return!1;var c=a.J;if(!(c instanceof V))return!1;var d=a.bd;null===d&&(d="");var e=b.J;if(!(e instanceof V))return!1;var f=b.bd;null===f&&(f="");for(e=e.Df(f);e.next();)if(f=e.value,f.M===c&&f.Ef===d)return!0;return!1};
ei.prototype.isValidLink=function(a,b,c,d){if(!this.isValidFrom(a,b)||!this.isValidTo(c,d)||!(null===b||null===d||(b.hF&&d.XG||!this.isInSameNode(b,d))&&(b.gF&&d.WG||!this.isLinked(b,d)))||null!==this.Sb&&(null!==a&&this.isLabelDependentOnLink(a,this.Sb)||null!==c&&this.isLabelDependentOnLink(c,this.Sb))||null!==a&&null!==c&&(null===a.data&&null!==c.data||null!==a.data&&null===c.data)||!this.isValidCycle(a,c,this.Sb))return!1;if(null!==a){var e=a.iv;if(null!==e&&!e(a,b,c,d,this.Sb))return!1}if(null!==
c&&(e=c.iv,null!==e&&!e(a,b,c,d,this.Sb)))return!1;e=this.iv;return null!==e?e(a,b,c,d,this.Sb):!0};ei.prototype.isLabelDependentOnLink=function(a,b){if(null===a)return!1;var c=a.ud;if(null===c)return!1;if(c===b)return!0;var d=new Xb(V);d.add(a);return fi(this,c,b,d)};function fi(a,b,c,d){if(b===c)return!0;var e=b.M;if(null!==e&&e.Ie&&(d.add(e),fi(a,e.ud,c,d)))return!0;b=b.R;return null!==b&&b.Ie&&(d.add(b),fi(a,b.ud,c,d))?!0:!1}
ei.prototype.isValidCycle=function(a,b,c){void 0===c&&(c=null);if(null===a||null===b)return this.Gn;var d=this.g.cH;if(d!==gi){if(d===hi){if(null!==c&&!c.cc)return!0;for(d=b.Gd;d.next();){var e=d.value;if(e!==c&&e.cc&&e.R===b)return!1}return!ii(this,a,b,c,!0)}if(d===ji){if(null!==c&&!c.cc)return!0;for(d=a.Gd;d.next();)if(e=d.value,e!==c&&e.cc&&e.M===a)return!1;return!ii(this,a,b,c,!0)}if(d===ki)return a===b?a=!0:(d=new Xb(V),d.add(b),a=li(this,d,a,b,c)),!a;if(d===mi)return!ii(this,a,b,c,!1);if(d===
ni)return a===b?a=!0:(d=new Xb(V),d.add(b),a=oi(this,d,a,b,c)),!a}return!0};function ii(a,b,c,d,e){if(b===c)return!0;if(null===b||null===c)return!1;for(var f=b.Gd;f.next();){var g=f.value;if(g!==d&&(!e||g.cc)&&g.R===b&&(g=g.M,g!==b&&ii(a,g,c,d,e)))return!0}return!1}function li(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var f=c.Gd;f.next();){var g=f.value;if(g!==e&&g.R===c&&(g=g.M,g!==c&&li(a,b,g,d,e)))return!0}return!1}
function oi(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var f=c.Gd;f.next();){var g=f.value;if(g!==e){var h=g.M,g=g.R,h=h===c?g:h;if(h!==c&&oi(a,b,h,d,e))return!0}}return!1}G(ei,{iv:"linkValidation"},function(){return this.Gj},function(a){null!==a&&w(a,"function",ei,"linkValidation");this.Gj=a});G(ei,{pv:"portTargeted"},function(){return this.LA},function(a){null!==a&&w(a,"function",ei,"portTargeted");this.LA=a});
function hc(){0<arguments.length&&Aa(hc);ei.call(this);this.name="Linking";this.Uv={};this.Tv=null;this.aa=pi;this.kx=this.XA=null}yb(hc,ei);vb("LinkingTool",hc);var pi;hc.Either=pi=I(hc,"Either",0);var qi;hc.ForwardsOnly=qi=I(hc,"ForwardsOnly",0);var ri;hc.BackwardsOnly=ri=I(hc,"BackwardsOnly",0);G(hc,{vE:"archetypeLinkData"},function(){return this.Uv},function(a){null!==a&&ra(a,Object,hc,"archetypeLinkData");a instanceof U&&ra(a,W,hc,"archetypeLinkData");this.Uv=a});
G(hc,{CB:"archetypeLabelNodeData"},function(){return this.Tv},function(a){null!==a&&ra(a,Object,hc,"archetypeLabelNodeData");a instanceof U&&ra(a,V,hc,"archetypeLabelNodeData");this.Tv=a});G(hc,{direction:"direction"},function(){return this.aa},function(a){va(a,hc,hc,"direction");this.aa=a});G(hc,{tD:"startObject"},function(){return this.XA},function(a){null!==a&&ra(a,U,hc,"startObject");this.XA=a});H(hc,{Dv:"startPort"},function(){return this.kx});
hc.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.Ta||a.Je||!a.gr)return!1;var b=a.U;return(b instanceof Xf||b instanceof Yf)&&a.C.left&&(a.Ha===this||this.isBeyondDragSize())?null!==this.findLinkablePort():!1};
hc.prototype.findLinkablePort=function(){var a=this.g;if(null===a)return null;var b=this.tD;null===b&&(b=a.Cd(a.Yb.S,null,null));if(null===b||!(b.J instanceof V))return null;a=this.direction;if(a===pi||a===qi){var c=this.findValidLinkablePort(b,!1);if(null!==c)return this.rd=!0,c}if(a===pi||a===ri)if(c=this.findValidLinkablePort(b,!0),null!==c)return this.rd=!1,c;return null};
hc.prototype.doActivate=function(){var a=this.g;if(null!==a&&(null===this.Dv&&(this.kx=this.findLinkablePort()),null!==this.Dv)){this.Bb(this.name);a.Yd=!0;a.Gb="pointer";if(this.rd){this.pg=this.Dv;var b=this.pg.J;b instanceof V&&(this.og=b);this.copyPortProperties(this.og,this.pg,this.Ld,this.Rl,!1)}else this.rg=this.Dv,b=this.rg.J,b instanceof V&&(this.qg=b),this.copyPortProperties(this.qg,this.rg,this.Md,this.Sl,!0);a.add(this.Ld);a.add(this.Md);null!==this.Rf&&(null!==this.Ld&&(this.Rf.M=this.Ld),
null!==this.Md&&(this.Rf.R=this.Md),this.Rf.Ab(),a.add(this.Rf));this.ca=!0}};hc.prototype.doDeactivate=function(){this.ca=!1;var a=this.g;null!==a&&(a.remove(this.Rf),a.remove(this.Ld),a.remove(this.Md),a.Yd=!1,a.Gb="",this.dj())};hc.prototype.doStop=function(){ei.prototype.doStop.call(this);this.tD=this.kx=null};
hc.prototype.doMouseUp=function(){if(this.ca){var a=this.g;if(null===a)return;var b=this.Oe=null,c=null,d=null,e=null,f=this.ff=this.findTargetPort(this.rd);if(null!==f){var g=f.J;g instanceof V&&(this.rd?(null!==this.og&&(b=this.og,c=this.pg),d=g,e=f):(b=g,c=f,null!==this.qg&&(d=this.qg,e=this.rg)))}else this.rd?null!==this.og&&this.Gn&&(b=this.og,c=this.pg):null!==this.qg&&this.Gn&&(d=this.qg,e=this.rg);if(null!==b||null!==d)b=this.insertLink(b,c,d,e),null!==b?(null===f&&(this.rd?b.pm=a.C.S.copy():
b.lm=a.C.S.copy()),a.De&&a.select(b),this.Oe=this.name,a.ma("LinkDrawn",b)):a.U.IB()}this.stopTool()};
hc.prototype.insertLink=function(a,b,c,d){var e=this.g;if(null===e)return null;var f=e.U;if(f instanceof Yf){var g=a;b=c;e.Kc||(g=c,b=a);if(null!==g&&null!==b)return f.ug(b.data,f.$a(g.data)),b.xr()}else if(f instanceof Xf)if(g="",null!==a&&(null===b&&(b=a),g=b.bd,null===g&&(g="")),b="",null!==c&&(null===d&&(d=c),b=d.bd,null===b&&(b="")),d=this.vE,d instanceof W){if(Yg(d),f=d.copy(),null!==f)return f.M=a,f.Ef=g,f.R=c,f.wg=b,e.add(f),a=this.CB,a instanceof V&&(Yg(a),a=a.copy(),null!==a&&(a.ud=f,e.add(a))),
f}else if(null!==d&&(d=f.QB(d),Ea(d)))return null!==a&&f.xv(d,f.$a(a.data)),f.Ry(d,g),null!==c&&f.zv(d,f.$a(c.data)),f.Vy(d,b),f.qu(d),a=this.CB,null===a||a instanceof V||(a=f.copyNodeData(a),Ea(a)&&(f.pl(a),a=f.$a(a),void 0!==a&&f.zx(d,a))),f=e.Cf(d);return null};
function sh(){0<arguments.length&&Aa(sh);ei.call(this);this.name="Relinking";var a=new X;a.jb="Diamond";a.ka=Q.Kv;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.ef=0;this.Uz=a;a=new X;a.jb="Diamond";a.ka=Q.Kv;a.fill="lightblue";a.stroke="dodgerblue";a.cursor="pointer";a.ef=-1;this.jB=a;this.Db=null;this.DA=new D}yb(sh,ei);vb("RelinkingTool",sh);
sh.prototype.updateAdornments=function(a){if(null!==a&&a instanceof W){var b="RelinkFrom",c=null;if(a.Ia&&!this.g.Ta){var d=a.ls;null!==d&&a.canRelinkFrom()&&a.Q.w()&&a.sa()&&d.Q.w()&&d.rk()&&(c=a.wn(b),null===c&&(c=this.makeAdornment(d,!1),null!==c&&(c.jc=b),a.Tj(b,c)))}null===c&&a.vk(b);b="RelinkTo";c=null;a.Ia&&!this.g.Ta&&(d=a.ls,null!==d&&a.canRelinkTo()&&a.Q.w()&&a.sa()&&d.Q.w()&&d.rk()&&(c=a.wn(b),null===c&&(c=this.makeAdornment(d,!0),null!==c&&(c.jc=b),a.Tj(b,c))));null===c&&a.vk(b)}};
sh.prototype.makeAdornment=function(a,b){var c=new Vg;c.type=si;var d=b?this.VG:this.fF;null!==d&&c.add(d.copy());c.Xb=a;return c};G(sh,{fF:"fromHandleArchetype"},function(){return this.Uz},function(a){null!==a&&ra(a,U,sh,"fromHandleArchetype");this.Uz=a});G(sh,{VG:"toHandleArchetype"},function(){return this.jB},function(a){null!==a&&ra(a,U,sh,"toHandleArchetype");this.jB=a});H(sh,{handle:"handle"},function(){return this.Db});
sh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.Ta||a.Je||!a.rl)return!1;var b=a.U;if(!(b instanceof Xf||b instanceof Yf)||!a.C.left)return!1;b=this.findToolHandleAt(a.Yb.S,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.Yb.S,"RelinkTo"));return null!==b};
sh.prototype.doActivate=function(){var a=this.g;if(null!==a){if(null===this.Sb){var b=this.findToolHandleAt(a.Yb.S,"RelinkFrom");null===b&&(b=this.findToolHandleAt(a.Yb.S,"RelinkTo"));if(null===b)return;var c=b.J;if(!(c instanceof Vg&&c.Wg instanceof W))return;this.Db=b;this.rd=null===c||"RelinkTo"===c.jc;this.Sb=c.Wg}this.Bb(this.name);a.Yd=!0;a.Gb="pointer";this.pg=this.Sb.Ic;this.og=this.Sb.M;this.rg=this.Sb.xd;this.qg=this.Sb.R;this.DA.set(this.Sb.Q);null!==this.Sb&&0<this.Sb.Z&&(null===this.Sb.M&&
(null!==this.Rl&&(this.Rl.ka=Q.no),null!==this.Ld&&(this.Ld.location=this.Sb.j(0))),null===this.Sb.R&&(null!==this.Sl&&(this.Sl.ka=Q.no),null!==this.Md&&(this.Md.location=this.Sb.j(this.Sb.Z-1))));this.copyPortProperties(this.og,this.pg,this.Ld,this.Rl,!1);this.copyPortProperties(this.qg,this.rg,this.Md,this.Sl,!0);a.add(this.Ld);a.add(this.Md);null!==this.Rf&&(null!==this.Ld&&(this.Rf.M=this.Ld),null!==this.Md&&(this.Rf.R=this.Md),this.copyLinkProperties(this.Sb,this.Rf),this.Rf.Ab(),a.add(this.Rf));
this.ca=!0}};sh.prototype.copyLinkProperties=function(a,b){if(null!==a&&null!==b){b.er=a.er;b.Kx=a.Kx;var c=a.me;if(c===ti||c===Di)c=Ei;b.me=c;b.Gu=a.Gu;b.sv=a.sv;b.eo=a.eo;b.Za=a.Za;b.fk=a.fk;b.Br=a.Br;b.Cr=a.Cr;b.ab=a.ab;b.Bk=a.Bk;b.ss=a.ss;b.us=a.us}};sh.prototype.doDeactivate=function(){this.ca=!1;var a=this.g;null!==a&&(a.remove(this.Rf),a.remove(this.Ld),a.remove(this.Md),a.Yd=!1,a.Gb="",this.dj())};sh.prototype.doStop=function(){ei.prototype.doStop.call(this);this.Db=null};
sh.prototype.doMouseUp=function(){if(this.ca){var a=this.g;if(null===a)return;this.Oe=null;var b=this.og,c=this.pg,d=this.qg,e=this.rg,f=this.Sb;this.ff=this.findTargetPort(this.rd);if(null!==this.ff){var g=this.ff.J;g instanceof V&&(this.rd?(d=g,e=this.ff):(b=g,c=this.ff))}else this.Gn?this.rd?e=d=null:c=b=null:f=null;null!==f&&(this.reconnectLink(f,this.rd?d:b,this.rd?e:c,this.rd),null===this.ff&&(this.rd?f.pm=a.C.S.copy():f.lm=a.C.S.copy(),f.Ab()),a.De&&(f.Ia=!0),this.Oe=this.name,a.ma("LinkRelinked",
f,this.rd?this.rg:this.pg));Fi(this.Sb,this.DA)}this.stopTool()};sh.prototype.reconnectLink=function(a,b,c,d){if(null===this.g)return!1;c=null!==c&&null!==c.bd?c.bd:"";d?(a.R=b,a.wg=c):(a.M=b,a.Ef=c);return!0};function $h(a,b,c,d,e){null!==b?(a.copyPortProperties(b,c,a.Ld,a.Rl,!1),a.g.add(a.Ld)):a.g.remove(a.Ld);null!==d?(a.copyPortProperties(d,e,a.Md,a.Sl,!0),a.g.add(a.Md)):a.g.remove(a.Md)}
function Gi(){0<arguments.length&&Aa(Gi);kg.call(this);this.name="LinkReshaping";var a=new X;a.jb="Rectangle";a.ka=Q.lo;a.fill="lightblue";a.stroke="dodgerblue";this.yj=a;a=new X;a.jb="Diamond";a.ka=Q.lo;a.fill="lightblue";a.stroke="dodgerblue";this.qA=a;this.MA=3;this.Rv=this.Db=null;this.EA=new z;this.Xw=null}yb(Gi,kg);vb("LinkReshapingTool",Gi);var Hi;Gi.None=Hi=I(Gi,"None",0);var Ii;Gi.Horizontal=Ii=I(Gi,"Horizontal",1);var Ji;Gi.Vertical=Ji=I(Gi,"Vertical",2);var Ki;Gi.All=Ki=I(Gi,"All",3);
function Li(a){return a&&a.NA?a.NA:Hi}function Mi(a,b){ra(a,U,Gi,"setReshapingBehavior:obj");va(b,Gi,Gi,"setReshapingBehavior:behavior");a.NA=b}Gi.prototype.updateAdornments=function(a){if(null!==a&&a instanceof W){if(a.Ia&&!this.g.Ta){var b=a.path;if(null!==b&&a.canReshape()&&a.Q.w()&&a.sa()&&b.Q.w()&&b.rk()){var c=a.wn(this.name);if(null===c||c.fE!==a.Z||c.nE!==a.fs)c=this.makeAdornment(b),null!==c&&(c.fE=a.Z,c.nE=a.fs,a.Tj(this.name,c));if(null!==c){c.location=a.position;return}}}a.vk(this.name)}};
Gi.prototype.makeAdornment=function(a){var b=a.J,c=b.Z,d=b.Jb,e=null;if(null!==b.points&&1<c){e=new Vg;e.type=si;var c=b.yr,f=b.ev,g=d?1:0;if(b.fs&&b.me!==Ni)for(var h=c+g;h<f-g;h++){var k=this.makeResegmentHandle(a,h);null!==k&&(k.ef=h,k.uv=.5,e.add(k))}for(h=c+1;h<f;h++)if(k=this.makeHandle(a,h),null!==k){k.ef=h;if(h!==c)if(h===c+1&&d){var g=b.j(c),l=b.j(c+1);Q.u(g.x,l.x)&&Q.u(g.y,l.y)&&(l=b.j(c-1));Q.u(g.x,l.x)?(Mi(k,Ji),k.cursor="n-resize"):Q.u(g.y,l.y)&&(Mi(k,Ii),k.cursor="w-resize")}else h===
f-1&&d?(g=b.j(f-1),l=b.j(f),Q.u(g.x,l.x)&&Q.u(g.y,l.y)&&(g=b.j(f+1)),Q.u(g.x,l.x)?(Mi(k,Ji),k.cursor="n-resize"):Q.u(g.y,l.y)&&(Mi(k,Ii),k.cursor="w-resize")):h!==f&&(Mi(k,Ki),k.cursor="move");e.add(k)}e.jc=this.name;e.Xb=a}return e};Gi.prototype.makeHandle=function(){var a=this.Er;return null===a?null:a.copy()};G(Gi,{Er:"handleArchetype"},function(){return this.yj},function(a){null!==a&&ra(a,U,Gi,"handleArchetype");this.yj=a});
Gi.prototype.makeResegmentHandle=function(){var a=this.$F;return null===a?null:a.copy()};G(Gi,{$F:"midHandleArchetype"},function(){return this.qA},function(a){null!==a&&ra(a,U,Gi,"midHandleArchetype");this.qA=a});H(Gi,{handle:"handle"},function(){return this.Db});H(Gi,{fr:"adornedLink"},function(){return this.Rv});Gi.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.Ta&&a.vu&&a.C.left?null!==this.findToolHandleAt(a.Yb.S,this.name):!1};
Gi.prototype.doActivate=function(){var a=this.g;if(null!==a&&(this.Db=this.findToolHandleAt(a.Yb.S,this.name),null!==this.Db)){var b=this.Db.J.Wg;if(b instanceof W){this.Rv=b;a.Yd=!0;this.Bb(this.name);if(b.fs&&.5===this.Db.uv){var c=b.points.copy(),d=this.Db.Ra(Dd);c.pd(this.Db.ef+1,d);b.Jb&&c.pd(this.Db.ef+1,d);b.points=c;b.qd();this.Db=this.findToolHandleAt(a.Yb.S,this.name)}this.EA=b.j(this.Db.ef);this.Xw=b.points.copy();this.ca=!0}}};
Gi.prototype.doDeactivate=function(){this.dj();this.Rv=this.Db=null;var a=this.g;null!==a&&(a.Yd=!1);this.ca=!1};Gi.prototype.doCancel=function(){var a=this.fr;null!==a&&(a.points=this.Xw);this.stopTool()};Gi.prototype.doMouseMove=function(){var a=this.g;this.ca&&null!==a&&(a=this.computeReshape(a.C.S),this.reshape(a))};
Gi.prototype.doMouseUp=function(){var a=this.g;if(this.ca&&null!==a){var b=this.computeReshape(a.C.S);this.reshape(b);b=this.fr;if(null!==b&&b.fs){var c=this.handle.ef,d=b.j(c-1),e=b.j(c),f=b.j(c+1);if(b.Jb){if(c>b.yr+1&&c<b.ev-1){var g=b.j(c-2);if(Math.abs(d.x-e.x)<this.sg&&Math.abs(d.y-e.y)<this.sg&&(Oi(this,g,d,e,f,!0)||Oi(this,g,d,e,f,!1))){var h=b.points.copy();Oi(this,g,d,e,f,!0)?(h.Pf(c-2,new z(g.x,(f.y+g.y)/2)),h.Pf(c+1,new z(f.x,(f.y+g.y)/2))):(h.Pf(c-2,new z((f.x+g.x)/2,g.y)),h.Pf(c+1,new z((f.x+
g.x)/2,f.y)));h.Cc(c);h.Cc(c-1);b.points=h;b.qd()}else g=b.j(c+2),Math.abs(e.x-f.x)<this.sg&&Math.abs(e.y-f.y)<this.sg&&(Oi(this,d,e,f,g,!0)||Oi(this,d,e,f,g,!1))&&(h=b.points.copy(),Oi(this,d,e,f,g,!0)?(h.Pf(c-1,new z(d.x,(d.y+g.y)/2)),h.Pf(c+2,new z(g.x,(d.y+g.y)/2))):(h.Pf(c-1,new z((d.x+g.x)/2,d.y)),h.Pf(c+2,new z((d.x+g.x)/2,g.y))),h.Cc(c+1),h.Cc(c),b.points=h,b.qd())}}else g=Va(),Q.Kl(d.x,d.y,f.x,f.y,e.x,e.y,g)&&g.Wi(e)<this.sg*this.sg&&(h=b.points.copy(),h.Cc(c),b.points=h,b.qd()),A(g)}a.Rb();
this.Oe=this.name;a.ma("LinkReshaped",this.fr)}this.stopTool()};function Oi(a,b,c,d,e,f){return f?Math.abs(b.y-c.y)<a.sg&&Math.abs(c.y-d.y)<a.sg&&Math.abs(d.y-e.y)<a.sg:Math.abs(b.x-c.x)<a.sg&&Math.abs(c.x-d.x)<a.sg&&Math.abs(d.x-e.x)<a.sg}G(Gi,{sg:"resegmentingDistance"},function(){return this.MA},function(a){w(a,"number",Gi,"resegmentingDistance");this.MA=a});
Gi.prototype.reshape=function(a){var b=this.fr;b.yk();var c=this.handle.ef,d=Li(this.handle);if(b.Jb)if(c===b.yr+1)c=b.yr+1,d===Ji?(b.L(c,b.j(c-1).x,a.y),b.L(c+1,b.j(c+2).x,a.y)):d===Ii&&(b.L(c,a.x,b.j(c-1).y),b.L(c+1,a.x,b.j(c+2).y));else if(c===b.ev-1)c=b.ev-1,d===Ji?(b.L(c-1,b.j(c-2).x,a.y),b.L(c,b.j(c+1).x,a.y)):d===Ii&&(b.L(c-1,a.x,b.j(c-2).y),b.L(c,a.x,b.j(c+1).y));else{var d=c,e=b.j(d),f=b.j(d-1),g=b.j(d+1);Q.u(f.x,e.x)&&Q.u(e.y,g.y)?(Q.u(f.x,b.j(d-2).x)&&!Q.u(f.y,b.j(d-2).y)?(b.n(d,a.x,f.y),
c++,d++):b.L(d-1,a.x,f.y),Q.u(g.y,b.j(d+2).y)&&!Q.u(g.x,b.j(d+2).x)?b.n(d+1,g.x,a.y):b.L(d+1,g.x,a.y)):Q.u(f.y,e.y)&&Q.u(e.x,g.x)?(Q.u(f.y,b.j(d-2).y)&&!Q.u(f.x,b.j(d-2).x)?(b.n(d,f.x,a.y),c++,d++):b.L(d-1,f.x,a.y),Q.u(g.x,b.j(d+2).x)&&!Q.u(g.y,b.j(d+2).y)?b.n(d+1,a.x,g.y):b.L(d+1,a.x,g.y)):Q.u(f.x,e.x)&&Q.u(e.x,g.x)?(Q.u(f.x,b.j(d-2).x)&&!Q.u(f.y,b.j(d-2).y)?(b.n(d,a.x,f.y),c++,d++):b.L(d-1,a.x,f.y),Q.u(g.x,b.j(d+2).x)&&!Q.u(g.y,b.j(d+2).y)?b.n(d+1,a.x,g.y):b.L(d+1,a.x,g.y)):Q.u(f.y,e.y)&&Q.u(e.y,
g.y)&&(Q.u(f.y,b.j(d-2).y)&&!Q.u(f.x,b.j(d-2).x)?(b.n(d,f.x,a.y),c++,d++):b.L(d-1,f.x,a.y),Q.u(g.y,b.j(d+2).y)&&!Q.u(g.x,b.j(d+2).x)?b.n(d+1,g.x,a.y):b.L(d+1,g.x,a.y));b.L(c,a.x,a.y)}else b.L(c,a.x,a.y),1===c&&b.computeSpot(!0).Fd()&&(e=b.M,f=b.Ic,null===e||e.sa()||(e=e.findVisibleNode(),e!==b.M&&(f=e.ek(""))),d=f.Ra(Dd,Va()),e=b.getLinkPointFromPoint(e,f,d,a,!0,Va()),b.L(0,e.x,e.y),A(d),A(e)),c===b.Z-2&&b.computeSpot(!1).Fd()&&(c=b.R,e=b.xd,null===c||c.sa()||(c=c.findVisibleNode(),c!==b.R&&(e=c.ek(""))),
d=e.Ra(Dd,Va()),e=b.getLinkPointFromPoint(c,e,d,a,!1,Va()),b.L(b.Z-1,e.x,e.y),A(d),A(e));b.Lh()};Gi.prototype.computeReshape=function(a){var b=this.fr,c=this.handle.ef;switch(Li(this.handle)){case Ki:return a;case Ji:return b=b.j(c),new z(b.x,a.y);case Ii:return b=b.j(c),new z(a.x,b.y);default:case Hi:return b.j(c)}};H(Gi,{FI:"originalPoint"},function(){return this.EA});H(Gi,{GI:"originalPoints"},function(){return this.Xw});
function Pi(){0<arguments.length&&Aa(Pi);kg.call(this);this.name="Resizing";this.xi=(new Za(1,1)).freeze();this.vi=(new Za(9999,9999)).freeze();this.ci=(new Za(NaN,NaN)).freeze();this.gp=!1;this.mb=null;var a=new X;a.Si=Dd;a.jb="Rectangle";a.ka=Q.lo;a.fill="lightblue";a.stroke="dodgerblue";a.Na=1;a.cursor="pointer";this.yj=a;this.Db=null;this.Ot=new Za;this.Ww=new z;this.ww=new Za(0,0);this.vw=new Za(Infinity,Infinity);this.uw=new Za(1,1);this.xA=!0}yb(Pi,kg);vb("ResizingTool",Pi);
Pi.prototype.updateAdornments=function(a){if(!(null===a||a instanceof W)){if(a.Ia&&!this.g.Ta){var b=a.$C;if(null!==b&&a.canResize()&&a.Q.w()&&a.sa()&&b.Q.w()&&b.rk()){var c=a.wn(this.name);null===c&&(c=this.makeAdornment(b));if(null!==c){var d=b.gk();c.angle=d;var e=b.Ra(c.qe,Va()),f=b.Rh();c.location=e;A(e);e=c.placeholder;if(null!==e){var b=b.ta,g=Ya();g.k(b.width*f,b.height*f);e.ka=g;$a(g)}Qi(this,c,d);a.Tj(this.name,c);return}}}a.vk(this.name)}};
Pi.prototype.makeAdornment=function(a){var b=null,b=a.J.ZC;if(null===b){b=new Vg;b.type=Ri;b.qe=Dd;var c=new Si;c.Hf=!0;b.add(c);b.add(this.makeHandle(a,ud));b.add(this.makeHandle(a,wd));b.add(this.makeHandle(a,Hd));b.add(this.makeHandle(a,Fd));b.add(this.makeHandle(a,fe));b.add(this.makeHandle(a,he));b.add(this.makeHandle(a,ie));b.add(this.makeHandle(a,ge))}else if(Yg(b),b=b.copy(),null===b)return null;b.jc=this.name;b.Xb=a;return b};
Pi.prototype.makeHandle=function(a,b){var c=this.Er;if(null===c)return null;c=c.copy();c.alignment=b;return c};
function Qi(a,b,c){if(null!==b)if(!b.alignment.kc()&&""!==b.cursor)a:{a=b.alignment;a.Fd()&&(a=Dd);if(0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else if(1<=a.y)c+=90;else break a;0>c?c+=360:360<=c&&(c-=360);b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}else if(b instanceof L)for(b=b.elements;b.next();)Qi(a,
b.value,c)}G(Pi,{Er:"handleArchetype"},function(){return this.yj},function(a){null!==a&&ra(a,U,Pi,"handleArchetype");this.yj=a});H(Pi,{handle:"handle"},function(){return this.Db});G(Pi,{Xb:"adornedObject"},function(){return this.mb},function(a){null!==a&&ra(a,U,Pi,"adornedObject");this.mb=a});Pi.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.Ta&&a.hr&&a.C.left?null!==this.findToolHandleAt(a.Yb.S,this.name)?!0:!1:!1};
Pi.prototype.doActivate=function(){var a=this.g;null!==a&&(this.Db=this.findToolHandleAt(a.Yb.S,this.name),null!==this.Db&&(this.mb=this.Db.J.Xb,this.Ww.set(this.mb.J.location),this.Ot.set(this.mb.ka),this.uw=this.computeCellSize(),this.ww=this.computeMinSize(),this.vw=this.computeMaxSize(),a.Yd=!0,this.xA=a.rb.isEnabled,a.rb.isEnabled=!1,this.Bb(this.name),this.ca=!0))};Pi.prototype.doDeactivate=function(){var a=this.g;null!==a&&(this.dj(),this.mb=this.Db=null,this.ca=a.Yd=!1,a.rb.isEnabled=this.xA)};
Pi.prototype.doCancel=function(){this.mb.ka=this.Ot;this.mb.J.location=this.Ww;this.stopTool()};Pi.prototype.doMouseMove=function(){var a=this.g;if(this.ca&&null!==a){var b=this.ww,c=this.vw,d=this.uw,e=this.mb.iC(a.C.S,Va()),f=Ti;this.mb instanceof X&&(f=Ui(this.mb));b=this.computeResize(e,this.Db.alignment,b,c,d,!(f===Vi||f===Wi||a.C.shift));this.resize(b);a.te();A(e)}};
Pi.prototype.doMouseUp=function(){var a=this.g;if(this.ca&&null!==a){var b=this.ww,c=this.vw,d=this.uw,e=this.mb.iC(a.C.S,Va()),f=Ti;this.mb instanceof X&&(f=Ui(this.mb));b=this.computeResize(e,this.Db.alignment,b,c,d,!(f===Vi||f===Wi||a.C.shift));this.resize(b);A(e);a.Rb();this.Oe=this.name;a.ma("PartResized",this.mb,this.Ot)}this.stopTool()};
Pi.prototype.resize=function(a){if(null!==this.g){var b=this.Xb,c=b.J,d=b.gk(),e=b.Rh(),f=Math.PI*d/180,g=Math.cos(f),f=Math.sin(f),h=0<d&&180>d?1:0,k=90<d&&270>d?1:0,d=180<d&&360>d?1:0,l=b.ta.width,m=b.ta.height;b.ka=a.size;var n=c.position.copy();c.Ee();l=b.ta.width-l;m=b.ta.height-m;if(0!==l||0!==m)0!==l&&(n.x+=e*((a.x+l*k)*g-(a.y+m*h)*f)),0!==m&&(n.y+=e*((a.x+l*d)*f+(a.y+m*k)*g)),c.move(n)}};
Pi.prototype.computeResize=function(a,b,c,d,e,f){b.Fd()&&(b=Dd);var g=this.Xb.ta,h=g.x,k=g.y,l=g.x+g.width,m=g.y+g.height,n=1;if(!f){var n=g.width,p=g.height;0>=n&&(n=1);0>=p&&(p=1);n=p/n}p=Va();Q.ur(a.x,a.y,h,k,e.width,e.height,p);a=g.copy();0>=b.x?0>=b.y?(a.x=Math.max(p.x,l-d.width),a.x=Math.min(a.x,l-c.width),a.width=Math.max(l-a.x,c.width),a.y=Math.max(p.y,m-d.height),a.y=Math.min(a.y,m-c.height),a.height=Math.max(m-a.y,c.height),f||(b=a.height/a.width,n<b?(a.height=n*a.width,a.y=m-a.height):
(a.width=a.height/n,a.x=l-a.width))):1<=b.y?(a.x=Math.max(p.x,l-d.width),a.x=Math.min(a.x,l-c.width),a.width=Math.max(l-a.x,c.width),a.height=Math.max(Math.min(p.y-k,d.height),c.height),f||(b=a.height/a.width,n<b?a.height=n*a.width:(a.width=a.height/n,a.x=l-a.width))):(a.x=Math.max(p.x,l-d.width),a.x=Math.min(a.x,l-c.width),a.width=l-a.x,f||(a.height=n*a.width,a.y=k+.5*(m-k-a.height))):1<=b.x?0>=b.y?(a.width=Math.max(Math.min(p.x-h,d.width),c.width),a.y=Math.max(p.y,m-d.height),a.y=Math.min(a.y,m-
c.height),a.height=Math.max(m-a.y,c.height),f||(b=a.height/a.width,n<b?(a.height=n*a.width,a.y=m-a.height):a.width=a.height/n)):1<=b.y?(a.width=Math.max(Math.min(p.x-h,d.width),c.width),a.height=Math.max(Math.min(p.y-k,d.height),c.height),f||(b=a.height/a.width,n<b?a.height=n*a.width:a.width=a.height/n)):(a.width=Math.max(Math.min(p.x-h,d.width),c.width),f||(a.height=n*a.width,a.y=k+.5*(m-k-a.height))):0>=b.y?(a.y=Math.max(p.y,m-d.height),a.y=Math.min(a.y,m-c.height),a.height=m-a.y,f||(a.width=a.height/
n,a.x=h+.5*(l-h-a.width))):1<=b.y&&(a.height=Math.max(Math.min(p.y-k,d.height),c.height),f||(a.width=a.height/n,a.x=h+.5*(l-h-a.width)));A(p);return a};Pi.prototype.computeMinSize=function(){var a=this.Xb.Jf.copy(),b=this.Jf;!isNaN(b.width)&&b.width>a.width&&(a.width=b.width);!isNaN(b.height)&&b.height>a.height&&(a.height=b.height);return a};
Pi.prototype.computeMaxSize=function(){var a=this.Xb.se.copy(),b=this.se;!isNaN(b.width)&&b.width<a.width&&(a.width=b.width);!isNaN(b.height)&&b.height<a.height&&(a.height=b.height);return a};
Pi.prototype.computeCellSize=function(){var a=new Za(NaN,NaN),b=this.Xb.J;if(null!==b){var c=b.uG;!isNaN(c.width)&&0<c.width&&(a.width=c.width);!isNaN(c.height)&&0<c.height&&(a.height=c.height)}c=this.pn;isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width);isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height);b=this.g;(isNaN(a.width)||isNaN(a.height))&&b&&(c=b.Ya.Yc,null!==c&&c.Zu&&(c=c.lC,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&
0<c.height&&(a.height=c.height)),b=b.Dr,null!==b&&b.visible&&this.Zu&&(c=b.Su,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height)));if(isNaN(a.width)||0===a.width||Infinity===a.width)a.width=1;if(isNaN(a.height)||0===a.height||Infinity===a.height)a.height=1;return a};
G(Pi,{Jf:"minSize"},function(){return this.xi},function(a){ra(a,Za,Pi,"minSize");if(!this.xi.A(a)){var b=a.width;isNaN(b)&&(b=0);a=a.height;isNaN(a)&&(a=0);this.xi.k(b,a)}});G(Pi,{se:"maxSize"},function(){return this.vi},function(a){ra(a,Za,Pi,"maxSize");if(!this.vi.A(a)){var b=a.width;isNaN(b)&&(b=Infinity);a=a.height;isNaN(a)&&(a=Infinity);this.vi.k(b,a)}});G(Pi,{pn:"cellSize"},function(){return this.ci},function(a){ra(a,Za,Pi,"cellSize");this.ci.A(a)||this.ci.assign(a)});
G(Pi,{Zu:"isGridSnapEnabled"},function(){return this.gp},function(a){w(a,"boolean",Pi,"isGridSnapEnabled");this.gp=a});H(Pi,{DI:"originalDesiredSize"},function(){return this.Ot});H(Pi,{EI:"originalLocation"},function(){return this.Ww});function Xi(){0<arguments.length&&Aa(Xi);kg.call(this);this.name="Rotating";this.UA=45;this.TA=2;this.mb=null;var a=new X;a.jb="Ellipse";a.ka=Q.Kv;a.fill="lightblue";a.stroke="dodgerblue";a.Na=1;a.cursor="pointer";this.yj=a;this.Db=null;this.Nt=0;this.OA=new z}
yb(Xi,kg);vb("RotatingTool",Xi);
Xi.prototype.updateAdornments=function(a){if(!(null===a||a instanceof W)){if(a.Ia&&!this.g.Ta){var b=a.cD;if(null!==b&&a.canRotate()&&a.Q.w()&&a.sa()&&b.Q.w()&&b.rk()){var c=a.wn(this.name);null===c&&(c=this.makeAdornment(b));if(null!==c){c.angle=b.gk();var d=null,e=null;b===a||b===a.Kb?(d=a.Kb,e=a.qe):(d=b,e=Dd);for(var f=d.ta,e=Wa(f.width*e.x+e.offsetX,f.height*e.y+e.offsetY);null!==d&&d!==b;)d.transform.Ka(e),d=d.I;var d=e.y,f=Math.max(e.x-b.ta.width,0),g=Va();c.location=b.Ra(new R(1,0,50+f,d),
g);A(g);A(e);a.Tj(this.name,c);return}}}a.vk(this.name)}};Xi.prototype.makeAdornment=function(a){var b=null,b=a.J.xG;if(null===b){b=new Vg;b.type=Yi;b.qe=Dd;var c=this.Er;null!==c&&b.add(c.copy())}else if(Yg(b),b=b.copy(),null===b)return null;b.jc=this.name;b.Xb=a;return b};G(Xi,{Er:"handleArchetype"},function(){return this.yj},function(a){null!==a&&ra(a,U,Xi,"handleArchetype");this.yj=a});H(Xi,{handle:"handle"},function(){return this.Db});
G(Xi,{Xb:"adornedObject"},function(){return this.mb},function(a){null!==a&&ra(a,U,Xi,"adornedObject");this.mb=a});Xi.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null!==a&&!a.Ta&&a.wu&&a.C.left?null!==this.findToolHandleAt(a.Yb.S,this.name)?!0:!1:!1};
Xi.prototype.doActivate=function(){var a=this.g;if(null!==a&&(this.Db=this.findToolHandleAt(a.Yb.S,this.name),null!==this.Db)){this.mb=this.Db.J.Xb;var b=this.mb.J,c=b.Kb;this.OA=this.mb===b||this.mb===c?c.Ra(b.qe):this.mb.Ra(Dd);this.Nt=this.mb.angle;a.Yd=!0;a.Nx=!0;this.Bb(this.name);this.ca=!0}};Xi.prototype.doDeactivate=function(){var a=this.g;null!==a&&(this.dj(),this.mb=this.Db=null,this.ca=a.Yd=!1)};Xi.prototype.doCancel=function(){var a=this.g;null!==a&&(a.Nx=!1);this.rotate(this.Nt);this.stopTool()};
Xi.prototype.doMouseMove=function(){var a=this.g;this.ca&&null!==a&&(a=this.computeRotate(a.C.S),this.rotate(a))};Xi.prototype.doMouseUp=function(){var a=this.g;if(this.ca&&null!==a){a.Nx=!1;var b=this.computeRotate(a.C.S);this.rotate(b);a.Rb();this.Oe=this.name;a.ma("PartRotated",this.mb,this.Nt)}this.stopTool()};Xi.prototype.rotate=function(a){null!==this.mb&&(this.mb.angle=a)};
Xi.prototype.computeRotate=function(a){a=this.OA.Ph(a);var b=this.mb.I;null!==b&&(a-=b.gk(),360<=a?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.MG),180),c=Math.min(Math.abs(this.LG),b/2);!this.g.C.shift&&0<b&&0<c&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));360<=a?a-=360:0>a&&(a+=360);return a};G(Xi,{MG:"snapAngleMultiple"},function(){return this.UA},function(a){w(a,"number",Xi,"snapAngleMultiple");this.UA=a});
G(Xi,{LG:"snapAngleEpsilon"},function(){return this.TA},function(a){w(a,"number",Xi,"snapAngleEpsilon");this.TA=a});H(Xi,{CI:"originalAngle"},function(){return this.Nt});function Zi(){0<arguments.length&&Aa(Zi);kg.call(this);this.name="ClickSelecting"}yb(Zi,kg);vb("ClickSelectingTool",Zi);Zi.prototype.canStart=function(){return!this.isEnabled||null===this.g||this.isBeyondDragSize()?!1:!0};Zi.prototype.doMouseUp=function(){this.ca&&(this.standardMouseSelect(),this.standardMouseClick());this.stopTool()};
function $i(){0<arguments.length&&Aa($i);kg.call(this);this.name="Action";this.Xl=null}yb($i,kg);vb("ActionTool",$i);$i.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a)return!1;var b=a.C,c=a.Cd(b.S,function(a){for(;null!==a.I&&!a.by;)a=a.I;return a},function(a){return a.by});return null!==c?(this.Xl=c,a.hm=a.Cd(b.S,null,null),!0):!1};
$i.prototype.doMouseDown=function(){if(this.ca){var a=this.g.C,b=this.Xl;null!==b&&(a.Kd=b,null!==b.uB&&b.uB(a,b))}else this.canStart()&&this.doActivate()};$i.prototype.doMouseMove=function(){if(this.ca){var a=this.g.C,b=this.Xl;null!==b&&(a.Kd=b,null!==b.vB&&b.vB(a,b))}};$i.prototype.doMouseUp=function(){if(this.ca){var a=this.g,b=a.C,c=this.Xl;if(null===c)return;b.Kd=c;null!==c.wB&&c.wB(b,c);this.isBeyondDragSize()||eh(c,b,a)}this.stopTool()};
$i.prototype.doCancel=function(){var a=this.g;if(null!==a){var a=a.C,b=this.Xl;if(null===b)return;a.Kd=b;null!==b.tB&&b.tB(a,b)}this.stopTool()};$i.prototype.doStop=function(){this.Xl=null};function ic(){0<arguments.length&&Aa(ic);kg.call(this);this.name="ClickCreating";this.rj=null;this.dA=!0;this.Tz=new z(0,0)}yb(ic,kg);vb("ClickCreatingTool",ic);
ic.prototype.canStart=function(){if(!this.isEnabled||null===this.Cx)return!1;var a=this.g;if(null===a||a.Ta||a.Je||!a.kn||!a.C.left||this.isBeyondDragSize())return!1;if(this.DF){if(1===a.C.ke&&(this.Tz=a.C.ve.copy()),2!==a.C.ke||this.isBeyondDragSize(this.Tz))return!1}else if(1!==a.C.ke)return!1;return a.Ha!==this&&null!==a.wr(a.C.S,!0)?!1:!0};ic.prototype.doMouseUp=function(){var a=this.g;this.ca&&null!==a&&this.insertPart(a.C.S);this.stopTool()};
ic.prototype.insertPart=function(a){var b=this.g;if(null===b)return null;var c=this.Cx;if(null===c)return null;this.Bb(this.name);var d=null;c instanceof O?c.Zc()&&(Yg(c),d=c.copy(),null!==d&&b.add(d)):null!==c&&(c=b.U.copyNodeData(c),Ea(c)&&(b.U.pl(c),d=b.Yg(c)));null!==d&&(d.location=a,b.De&&b.select(d));b.Rb();this.Oe=this.name;b.ma("PartCreated",d);this.dj();return d};G(ic,{Cx:"archetypeNodeData"},function(){return this.rj},function(a){null!==a&&ra(a,Object,ic,"archetypeNodeData");this.rj=a});
G(ic,{DF:"isDoubleClick"},function(){return this.dA},function(a){w(a,"boolean",ic,"isDoubleClick");this.dA=a});function aj(a,b,c){this.text=a;this.KB=b;this.visible=c}function bj(){0<arguments.length&&Aa(bj);kg.call(this);this.name="ContextMenu";this.im=this.Bz=null;this.uA=new z;this.kw=this.qm=null;cj(this)}yb(bj,kg);vb("ContextMenuTool",bj);var dj=!1,ej=null,fj=null;
function cj(a){a.qm=new Vg;a.kB=function(){a.stopTool()};if(!1===dj){var b=oa("div"),c=oa("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";var d=oa("style");
window.document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);b.addEventListener("selectstart",
function(a){a.preventDefault();return!1},!1);c.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);window.document.body&&(window.document.body.appendChild(b),window.document.body.appendChild(c));fj=b;ej=c;dj=!0}}bj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null===a||this.isBeyondDragSize()||!a.C.right?!1:null!==this.qm&&a.C.qk||null!==this.findObjectWithContextMenu()?!0:!1};bj.prototype.doStart=function(){var a=this.g;null!==a&&this.uA.set(a.Yb.S)};
bj.prototype.doStop=function(){this.hideDefaultContextMenu();this.hideContextMenu();this.im=null};bj.prototype.findObjectWithContextMenu=function(a){void 0===a&&(a=null);var b=this.g;if(null===b)return null;var c=b.C,d=null;a instanceof M||(d=a instanceof U?a:b.Cd(c.S,null,function(a){return!a.layer.bc}));if(null!==d){for(a=d;null!==a;){c=a.contextMenu;if(null!==c)return a;a=a.I}if(null!==this.qm&&b.C.qk)return d.J}else if(c=b.contextMenu,null!==c)return b;return null};bj.prototype.doActivate=function(){};
bj.prototype.doMouseUp=function(){var a=this.g;null!==a&&(this.ca?null!==this.Xe&&(a=a.Cd(a.C.S,null,null),null!==a&&a.nk(this.Xe)&&this.standardMouseClick(null,null),this.stopTool()):this.canStart()&&ch(this,!0))};
function ch(a,b,c){void 0===c&&(c=null);a.ca=!0;b&&a.standardMouseSelect();a.standardMouseClick();a.im=null;null===c&&(c=a.findObjectWithContextMenu());null!==c?(b=c.contextMenu,null!==b?(a.im=c instanceof U?c:null,a.showContextMenu(b,a.im)):a.showDefaultContextMenu()):a.showDefaultContextMenu()}bj.prototype.doMouseMove=function(){this.ca&&this.standardMouseOver()};
bj.prototype.showContextMenu=function(a,b){ra(a,Vg,bj,"showContextMenu:contextmenu");null!==b&&ra(b,U,bj,"showContextMenu:obj");var c=this.g;if(null!==c){a!==this.Xe&&this.hideContextMenu();a.Le="Tool";a.wk=!1;a.scale=1/c.scale;a.jc=this.name;c.add(a);if(null!==b){var c=null,d=b.yn();null!==d&&(c=d.data);a.Xb=b;a.data=c}else a.data=c.U;a.Ee();this.positionContextMenu(a,b);this.Xe=a}};
bj.prototype.positionContextMenu=function(a){if(null===a.placeholder){var b=this.g;if(null!==b){var c=b.C.S.copy(),d=a.oa,e=b.Va;b.C.qk&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y+d.height>e.bottom&&(c.y-=d.height+5);c.y<e.y&&(c.y=e.y);a.position=c}}};bj.prototype.hideContextMenu=function(){var a=this.g;null!==a&&null!==this.Xe&&(this.Xe.data=null,this.Xe.Xb=null,a.remove(this.Xe),this.Xe=null,this.standardMouseOver())};
bj.prototype.initializeDefaultButtons=function(){if(null===this.g)return null;var a=new N(aj);a.add(new aj("Copy",function(a){a.ib.copySelection()},function(a){return a.ib.canCopySelection()}));a.add(new aj("Cut",function(a){a.ib.cutSelection()},function(a){return a.ib.canCutSelection()}));a.add(new aj("Delete",function(a){a.ib.deleteSelection()},function(a){return a.ib.canDeleteSelection()}));a.add(new aj("Paste",function(a){a.ib.pasteSelection(a.C.S)},function(a){return a.ib.canPasteSelection()}));
a.add(new aj("Select All",function(a){a.ib.selectAll()},function(a){return a.ib.canSelectAll()}));a.add(new aj("Undo",function(a){a.ib.undo()},function(a){return a.ib.canUndo()}));a.add(new aj("Redo",function(a){a.ib.redo()},function(a){return a.ib.canRedo()}));a.add(new aj("Zoom To Fit",function(a){a.ib.zoomToFit()},function(a){return a.ib.canZoomToFit()}));a.add(new aj("Reset Zoom",function(a){a.ib.resetZoom()},function(a){return a.ib.canResetZoom()}));a.add(new aj("Group Selection",function(a){a.ib.groupSelection()},
function(a){return a.ib.canGroupSelection()}));a.add(new aj("Ungroup Selection",function(a){a.ib.ungroupSelection()},function(a){return a.ib.canUngroupSelection()}));a.add(new aj("Edit Text",function(a){a.ib.editTextBlock()},function(a){return a.ib.canEditTextBlock()}));return a};
bj.prototype.showDefaultContextMenu=function(){var a=this.g;if(null!==a){null===this.kw&&(this.kw=this.initializeDefaultButtons());this.qm!==this.Xe&&this.hideContextMenu();fj.innerHTML="";ej.addEventListener("click",this.kB,!1);var b=this,c=oa("ul");c.className="defaultCXul";fj.appendChild(c);c.innerHTML="";for(var d=this.kw.i;d.next();){var e=d.value,f=e.text,g=e.visible;if("function"===typeof e.KB&&("function"!==typeof g||g(a))){g=oa("li");g.className="defaultCXli";var h=oa("a");h.className="defaultCXa";
h.href="#";h.WD=e.KB;h.addEventListener("click",function(c){this.WD(a);b.stopTool();c.preventDefault();return!1},!1);h.textContent=f;g.appendChild(h);c.appendChild(g)}}fj.style.display="block";ej.style.display="block";this.Xe=this.qm}};bj.prototype.hideDefaultContextMenu=function(){null!==this.Xe&&this.Xe===this.qm&&(fj.style.display="none",ej.style.display="none",ej.removeEventListener("click",this.kB,!1),this.Xe=null)};
G(bj,{Xe:"currentContextMenu"},function(){return this.Bz},function(a){null!==a&&ra(a,Vg,bj,"currentContextMenu");this.Bz=a});G(bj,{FH:"currentObject"},function(){return this.im},function(a){null!==a&&ra(a,U,bj,"currentObject");this.im=a});H(bj,{xI:"mouseDownPoint"},function(){return this.uA});
function gj(){0<arguments.length&&Aa(gj);kg.call(this);this.name="DragSelecting";this.rm=175;this.iA=!1;var a=new O;a.Le="Tool";a.wk=!1;var b=new X;b.name="SHAPE";b.jb="Rectangle";b.fill=null;b.stroke="magenta";a.add(b);this.Ek=a}yb(gj,kg);vb("DragSelectingTool",gj);gj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.De)return!1;var b=a.C;return!b.left||a.Ha!==this&&(!this.isBeyondDragSize()||b.timestamp-a.Yb.timestamp<this.SB||null!==a.wr(b.S,!0))?!1:!0};
gj.prototype.doActivate=function(){var a=this.g;null!==a&&(this.ca=!0,a.Yd=!0,a.Ma=!0,a.add(this.fg),this.doMouseMove())};gj.prototype.doDeactivate=function(){var a=this.g;null!==a&&(a.remove(this.fg),a.Ma=!1,this.ca=a.Yd=!1)};gj.prototype.doMouseMove=function(){if(null!==this.g&&this.ca&&null!==this.fg){var a=this.computeBoxBounds(),b=this.fg.Bd("SHAPE");null===b&&(b=this.fg.Ye());b.ka=a.size;this.fg.position=a.position}};
gj.prototype.doMouseUp=function(){if(this.ca){var a=this.g;a.remove(this.fg);try{a.Gb="wait",this.selectInRect(this.computeBoxBounds())}finally{a.Gb=""}}this.stopTool()};gj.prototype.computeBoxBounds=function(){var a=this.g;return null===a?new D(0,0,0,0):new D(a.Yb.S,a.C.S)};
gj.prototype.selectInRect=function(a){var b=this.g;if(null!==b){var c=b.C;b.ma("ChangingSelection");a=b.Yi(a,null,function(a){return a instanceof O?a.canSelect():!1},this.IF);if(fa?c.Ur:c.control)if(c.shift)for(a=a.i;a.next();)c=a.value,c.Ia&&(c.Ia=!1);else for(a=a.i;a.next();)c=a.value,c.Ia=!c.Ia;else{if(!c.shift){for(var c=new N(O),d=b.selection.i;d.next();){var e=d.value;a.contains(e)||c.add(e)}for(c=c.i;c.next();)c.value.Ia=!1}for(a=a.i;a.next();)c=a.value,c.Ia||(c.Ia=!0)}b.ma("ChangedSelection")}};
G(gj,{SB:"delay"},function(){return this.rm},function(a){w(a,"number",gj,"delay");this.rm=a});G(gj,{IF:"isPartialInclusion"},function(){return this.iA},function(a){w(a,"boolean",gj,"isPartialInclusion");this.iA=a});G(gj,{fg:"box"},function(){return this.Ek},function(a){null!==a&&ra(a,O,gj,"box");this.Ek=a});
function hj(){0<arguments.length&&Aa(hj);kg.call(this);this.name="Panning";this.Yw=new z;this.bi=!1;var a=this;this.ZA=function(){window.document.removeEventListener("scroll",a.ZA,!1);a.stopTool()}}yb(hj,kg);vb("PanningTool",hj);hj.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;return null===a||!a.ie&&!a.je||!a.C.left||a.Ha!==this&&!this.isBeyondDragSize()?!1:!0};
hj.prototype.doActivate=function(){var a=this.g;null!==a&&(this.bi?(a.C.bubbles=!0,window.document.addEventListener("scroll",this.ZA,!1)):(a.Gb="move",a.Yd=!0,this.Yw=a.position.copy()),this.ca=!0)};hj.prototype.doDeactivate=function(){var a=this.g;null!==a&&(a.Gb="",this.ca=a.Yd=!1)};hj.prototype.doCancel=function(){var a=this.g;null!==a&&(a.position=this.Yw,a.Yd=!1);this.stopTool()};hj.prototype.doMouseMove=function(){this.move()};hj.prototype.doMouseUp=function(){this.move();this.stopTool()};
hj.prototype.move=function(){var a=this.g;if(this.ca&&a)if(this.bi)a.C.bubbles=!0;else{var b=a.position,c=a.Yb.S,d=a.C.S,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.ie||(e=b.x);a.je||(c=b.y);a.position=new z(e,c)}};G(hj,{bubbles:"bubbles"},function(){return this.bi},function(a){w(a,"boolean",hj,"bubbles");this.bi=a});H(hj,{HI:"originalPosition"},function(){return this.Yw});
function ij(){0<arguments.length&&Aa(ij);kg.call(this);this.name="TextEditing";this.cB=null;this.Dw=0;this.Ez=this.qx=null;this.YA=jj;this.Qj=null;this.Fa=kj;this.Mj=null;this.rA=1;this.RA=!0;var a=oa("textarea");a.mz=!0;this.Jz=a;a.addEventListener("input",function(){var a=this.textEditingTool,c=a.cB;c.text=this.value;lj(c,a.Dw,Infinity);this.rows=c.PF},!1);a.addEventListener("keydown",function(a){var c=a.which,d=this.textEditingTool;if(null!==d)if(13===c)d.acceptText(mj);else{if(9===c)return d.acceptText(nj),
a.preventDefault(),!1;27===c&&(d.doCancel(),null!==d.g&&d.g.focus())}},!1);a.addEventListener("focus",function(){var a=this.textEditingTool;a.Fa===oj?a.Fa=pj:a.Fa===qj?a.Fa=rj:a.Fa===rj&&(a.Fa=pj);"function"===typeof this.select&&a.Qy&&this.select()},!1);a.addEventListener("blur",function(){"function"===typeof this.focus&&this.focus();var a=this.textEditingTool;"function"===typeof this.select&&a.Qy&&this.select()},!1)}vb("TextEditingTool",ij);yb(ij,kg);var sj;ij.LostFocus=sj=I(ij,"LostFocus",0);var tj;
ij.MouseDown=tj=I(ij,"MouseDown",1);var nj;ij.Tab=nj=I(ij,"Tab",2);var mj;ij.Enter=mj=I(ij,"Enter",3);ij.SingleClick=I(ij,"SingleClick",0);var jj;ij.SingleClickSelected=jj=I(ij,"SingleClickSelected",1);var kj=I(ij,"StateNone",0),oj=I(ij,"StateActive",1),pj=I(ij,"StateEditing",2),rj=I(ij,"StateEditing2",3),uj=I(ij,"StateValidating",4),qj=I(ij,"StateValidated",5);G(ij,{vg:"textBlock"},function(){return this.qx},function(a){null!==a&&ra(a,Zb,ij,"textBlock");this.qx=a});
G(ij,{Bf:"currentTextEditor"},function(){return this.Ez},function(a){this.Ez=a});G(ij,{TE:"defaultTextEditor"},function(){return this.Jz},function(a){ra(a,Element,ij,"defaultTextEditor");this.Jz=a});G(ij,{PG:"starting"},function(){return this.YA},function(a){va(a,ij,ij,"starting");this.YA=a});
ij.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||a.Ta||!a.C.left||this.isBeyondDragSize())return!1;a=a.Cd(a.C.S,null,function(a){return a instanceof Zb});if(null===a||!a.Ox||!a.J.canEdit())return!1;a=a.J;return null===a||this.PG===jj&&!a.Ia?!1:!0};ij.prototype.doStart=function(){this.ca||null===this.vg||this.doActivate()};
ij.prototype.doActivate=function(){if(!this.ca){var a=this.g;if(null!==a){var b=this.vg;null===b&&(b=a.Cd(a.C.S,function(a){return a instanceof Zb?a:null}));if(null!==b){this.vg=b;var c=b.J;if(null!==c){this.ca=!0;this.Fa=oj;var d=this.TE,e=!1;null!==b.uD&&(d=b.uD);null===d||d.mz||(e=!0);this.cB=this.vg.copy();a.CG(c.Q);if(d.mz){var f=b.Ra(Dd),g=a.position,h=a.scale,k=b.Rh()*h;k<this.FC&&(k=this.FC);this.Dw=b.ta.width;var c=this.Dw*k,l=b.ta.height*k,m=(f.x-g.x)*h,f=(f.y-g.y)*h;d.value=b.text;a.ck.style.font=
b.font;d.style.font="inherit";d.style.fontSize=100*k+"%";d.style.lineHeight="normal";d.style.width=c+6+"px";d.style.height=l+2+"px";d.style.left=(m-c/2|0)-1+"px";d.style.top=(f-l/2|0)-1+"px";d.style.textAlign=b.textAlign;d.style.margin="0";d.style.padding="1px";d.style.border="0";d.style.outline="none";d.style["white-space"]="pre-wrap";d.style.overflow="hidden"}a.ck.appendChild(d);d.style.position="absolute";d.style.zIndex=100;d.className="start";d.textEditingTool=this;d.$I=k;if(e&&"function"===typeof d.onActivate)d.onActivate();
this.Bf=d;"function"===typeof d.focus&&d.focus();"function"===typeof d.select&&this.Qy&&d.select()}}}}};ij.prototype.doCancel=function(){null!==this.Mj&&(this.Bf.style.border=this.Mj,this.Mj=null);this.stopTool()};ij.prototype.doMouseUp=function(){!this.ca&&this.canStart()&&this.doActivate()};ij.prototype.doMouseDown=function(){this.ca&&this.acceptText(tj)};
ij.prototype.acceptText=function(a){switch(a){case tj:if(this.Fa===qj||this.Fa===rj)"function"===typeof this.Bf.focus&&this.Bf.focus();else if(this.Fa===oj||this.Fa===pj)this.Fa=uj,vj(this);break;case sj:case mj:case nj:if(mj===a&&!0===this.qx.ky)break;if(this.Fa===oj||this.Fa===pj)this.Fa=uj,vj(this)}};
function vj(a){if(null!==a.vg&&null!==a.Bf){var b=a.vg,c=a.vg.text,d=a.Bf.value,e="",e="function"===typeof d?d():d;if(!a.isValidText(a.vg,c,e)){a.Fa=pj;null!==b.Px&&b.Px(a,c,e);null===a.Mj&&(a.Mj=a.Bf.style.border,a.Bf.style.border="3px solid red");"function"===typeof a.Bf.focus&&a.Bf.focus();return}a.Bb(a.name);a.Fa=qj;c!==e&&(a.vg.text=e);a.Oe=a.name;b=a.g;null!==b&&b.ma("TextEdited",a.vg,c);a.dj();a.stopTool();null!==b&&b.focus()}null!==a.Mj&&(a.Bf.style.border=a.Mj,a.Mj=null)}
ij.prototype.doDeactivate=function(){var a=this.g;if(null!==a){this.Fa=kj;this.vg=null;if(null!==this.Bf){var b=this.Bf;if("function"===typeof b.onDeactivate)b.onDeactivate();null!==b&&a.ck.removeChild(b)}this.ca=!1}};ij.prototype.isValidText=function(a,b,c){ra(a,Zb,ij,"isValidText:textblock");var d=this.$y;if(null!==d&&!d(a,b,c))return!1;d=a.$y;return null===d||d(a,b,c)?!0:!1};
G(ij,{$y:"textValidation"},function(){return this.Qj},function(a){null!==a&&w(a,"function",ij,"textValidation");this.Qj=a});G(ij,{FC:"minimumEditorScale"},function(){return this.rA},function(a){null!==a&&w(a,"number",ij,"minimumEditorScale");this.rA=a});G(ij,{Qy:"selectsTextOnActivate"},function(){return this.RA},function(a){null!==a&&w(a,"boolean",ij,"selectsTextOnActivate");this.RA=a});
function Tg(){kg.call(this);this.name="ToolManager";this.cE=new N(kg);this.dE=new N(kg);this.eE=new N(kg);this.Xz=this.Yz=1E3;this.Mz=(new Za(2,2)).va();this.Xs=this.iw=null;this.vA=gh;this.Vz=wj}yb(Tg,kg);vb("ToolManager",Tg);var gh;Tg.WheelScroll=gh=I(Tg,"WheelScroll",0);var fh;Tg.WheelZoom=fh=I(Tg,"WheelZoom",1);Tg.WheelNone=I(Tg,"WheelNone",2);var wj;Tg.GestureZoom=wj=I(Tg,"GestureZoom",3);var xj;Tg.GestureCancel=xj=I(Tg,"GestureCancel",4);var yj;Tg.GestureNone=yj=I(Tg,"GestureNone",5);
G(Tg,{Wr:"mouseWheelBehavior"},function(){return this.vA},function(a){va(a,Tg,Tg,"mouseWheelBehavior");this.vA=a});G(Tg,{An:"gestureBehavior"},function(){return this.Vz},function(a){va(a,Tg,Tg,"gestureBehavior");this.Vz=a});Tg.prototype.initializeStandardTools=function(){this.oE=new $i;this.QC=new sh;this.SF=new Gi;this.bD=new Pi;this.zG=new Xi;this.AC=new hc;this.Yc=new $g;this.$E=new gj;this.jG=new hj;this.Hx=new bj;this.Zy=new ij;this.CE=new ic;this.DE=new Zi};
Tg.prototype.doMouseDown=function(){var a=this.g;if(null!==a){var b=a.C;b.qk&&this.An===xj&&(b.bubbles=!1);if(b.Lr){if(this.An===yj){b.bubbles=!0;return}if(this.An===xj)return;if(a.Ha.canStartMultiTouch()){a.Ha.standardPinchZoomStart();return}}b=a.V;b.Dx&&0!==b.be&&Da("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.ue.length,c=0;c<b;c++){var d=this.ue.Y(c);null===d.g&&d.fc(this.g);if(d.canStart()){a.Ha=d;a.Ha===d&&(d.ca||d.doActivate(),d.doMouseDown());
return}}1===a.C.button&&(this.Wr===gh?this.Wr=fh:this.Wr===fh&&(this.Wr=gh));this.doActivate();this.standardWaitAfter(this.nC)}};
Tg.prototype.doMouseMove=function(){var a=this.g;if(null!==a){var b=a.C;if(b.Lr){if(this.An===yj){b.bubbles=!0;return}if(this.An===xj)return;if(a.Ha.canStartMultiTouch()){a.Ha.standardPinchZoomMove();return}}if(this.ca)for(var b=this.bf.length,c=0;c<b;c++){var d=this.bf.Y(c);null===d.g&&d.fc(this.g);if(d.canStart()){a.Ha=d;a.Ha===d&&(d.ca||d.doActivate(),d.doMouseMove());return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.ca?this.nC:this.uF)}};
Tg.prototype.doCurrentObjectChanged=function(a,b){var c=this.Zj;null===c||null!==b&&(b===c||b.nk(c))||this.hideToolTip()};Tg.prototype.doWaitAfter=function(){var a=this.g;null!==a&&a.Oa&&(this.doMouseHover(),this.ca||this.doToolTip())};Tg.prototype.doMouseHover=function(){var a=this.g;if(null!==a){var b=a.C;null===b.Kd&&(b.Kd=a.Cd(b.S,null,null));var c=b.Kd;if(null!==c)for(b.qc=!1;null!==c;){a=this.ca?c.ty:c.uy;if(null!==a&&(a(b,c),b.qc))break;c=c.I}else a=this.ca?a.ty:a.uy,null!==a&&a(b)}};
Tg.prototype.doToolTip=function(){var a=this.g;if(null!==a){var b=a.C;null===b.Kd&&(b.Kd=a.Cd(b.S,null,null));b=b.Kd;if(null!==b){if(b!==this.Zj&&!b.nk(this.Zj)){for(;null!==b;){a=b.bz;if(null!==a){this.showToolTip(a,b);return}b=b.I}this.hideToolTip()}}else a=a.bz,null!==a?this.showToolTip(a,null):this.hideToolTip()}};
Tg.prototype.showToolTip=function(a,b){ra(a,Vg,Tg,"showToolTip:tooltip");null!==b&&ra(b,U,Tg,"showToolTip:obj");var c=this.g;if(null!==c){a!==this.Zj&&this.hideToolTip();a.Le="Tool";a.wk=!1;a.scale=1/c.scale;c.add(a);if(null!==b&&b!==this.Xs){var c=null,d=b.yn();null!==d&&(c=d.data);a.Xb=b;a.data=c}else null===b&&(a.data=c.U);if(null===b||b!==this.Xs)a.Ee(),this.positionToolTip(a,b);this.iw=a;this.Xs=b}};
Tg.prototype.positionToolTip=function(a){if(null===a.placeholder){var b=this.g;if(null!==b){var c=b.C.S.copy(),d=a.oa,e=b.Va;b.C.qk&&(c.x-=d.width);c.x+d.width>e.right&&(c.x-=d.width+5);c.x<e.x&&(c.x=e.x);c.y=c.y+20+d.height>e.bottom?c.y-(d.height+5):c.y+20;c.y<e.y&&(c.y=e.y);a.position=c}}};Tg.prototype.hideToolTip=function(){if(null!==this.Zj){var a=this.g;null!==a&&(this.Zj.data=null,this.Zj.Xb=null,a.remove(this.Zj),this.Xs=this.iw=null)}};H(Tg,{Zj:"currentToolTip"},function(){return this.iw});
Tg.prototype.doMouseUp=function(){this.cancelWaitAfter();if(this.ca){var a=this.g;if(null===a)return;for(var b=this.cf.length,c=0;c<b;c++){var d=this.cf.Y(c);null===d.g&&d.fc(this.g);if(d.canStart()){a.Ha=d;a.Ha===d&&(d.ca||d.doActivate(),d.doMouseUp());return}}}this.doDeactivate()};Tg.prototype.doMouseWheel=function(){this.standardMouseWheel()};Tg.prototype.doKeyDown=function(){var a=this.g;null!==a&&a.ib.doKeyDown()};Tg.prototype.doKeyUp=function(){var a=this.g;null!==a&&a.ib.doKeyUp()};
Tg.prototype.doCancel=function(){null!==qh&&qh.doCancel();kg.prototype.doCancel.call(this)};Tg.prototype.findTool=function(a){w(a,"string",Tg,"findTool:name");for(var b=this.ue.length,c=0;c<b;c++){var d=this.ue.Y(c);if(d.name===a)return d}b=this.bf.length;for(c=0;c<b;c++)if(d=this.bf.Y(c),d.name===a)return d;b=this.cf.length;for(c=0;c<b;c++)if(d=this.cf.Y(c),d.name===a)return d;return null};
Tg.prototype.replaceTool=function(a,b){w(a,"string",Tg,"replaceTool:name");null!==b&&(ra(b,kg,Tg,"replaceTool:newtool"),b.g&&b.g!==this.g&&v("Cannot share tools between Diagrams: "+b.toString()),b.fc(this.g));for(var c=this.ue.length,d=0;d<c;d++){var e=this.ue.Y(d);if(e.name===a)return null!==b?this.ue.Pf(d,b):this.ue.Cc(d),e}c=this.bf.length;for(d=0;d<c;d++)if(e=this.bf.Y(d),e.name===a)return null!==b?this.bf.Pf(d,b):this.bf.Cc(d),e;c=this.cf.length;for(d=0;d<c;d++)if(e=this.cf.Y(d),e.name===a)return null!==
b?this.cf.Pf(d,b):this.cf.Cc(d),e;return null};function zj(a,b,c,d){w(b,"string",Tg,"replaceStandardTool:name");ra(d,N,Tg,"replaceStandardTool:list");null!==c&&(ra(c,kg,Tg,"replaceStandardTool:newtool"),c.g&&c.g!==a.g&&v("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.fc(a.g));a.findTool(b)?a.replaceTool(b,c):null!==c&&d.add(c)}H(Tg,{ue:"mouseDownTools"},function(){return this.cE});H(Tg,{bf:"mouseMoveTools"},function(){return this.dE});H(Tg,{cf:"mouseUpTools"},function(){return this.eE});
G(Tg,{uF:"hoverDelay"},function(){return this.Yz},function(a){w(a,"number",Tg,"hoverDelay");this.Yz=a});G(Tg,{nC:"holdDelay"},function(){return this.Xz},function(a){w(a,"number",Tg,"holdDelay");this.Xz=a});G(Tg,{aF:"dragSize"},function(){return this.Mz},function(a){ra(a,Za,Tg,"dragSize");this.Mz=a.O()});G(Tg,{oE:"actionTool"},function(){return this.findTool("Action")},function(a){zj(this,"Action",a,this.ue)});
G(Tg,{QC:"relinkingTool"},function(){return this.findTool("Relinking")},function(a){zj(this,"Relinking",a,this.ue)});G(Tg,{SF:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(a){zj(this,"LinkReshaping",a,this.ue)});G(Tg,{bD:"resizingTool"},function(){return this.findTool("Resizing")},function(a){zj(this,"Resizing",a,this.ue)});G(Tg,{zG:"rotatingTool"},function(){return this.findTool("Rotating")},function(a){zj(this,"Rotating",a,this.ue)});
G(Tg,{AC:"linkingTool"},function(){return this.findTool("Linking")},function(a){zj(this,"Linking",a,this.bf)});G(Tg,{Yc:"draggingTool"},function(){return this.findTool("Dragging")},function(a){zj(this,"Dragging",a,this.bf)});G(Tg,{$E:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(a){zj(this,"DragSelecting",a,this.bf)});G(Tg,{jG:"panningTool"},function(){return this.findTool("Panning")},function(a){zj(this,"Panning",a,this.bf)});
G(Tg,{Hx:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(a){zj(this,"ContextMenu",a,this.cf)});G(Tg,{Zy:"textEditingTool"},function(){return this.findTool("TextEditing")},function(a){zj(this,"TextEditing",a,this.cf)});G(Tg,{CE:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(a){zj(this,"ClickCreating",a,this.cf)});G(Tg,{DE:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(a){zj(this,"ClickSelecting",a,this.cf)});
function vg(){this.YD=Aj;this.Kk=this.Lk=this.N=null;this.oz=this.Fc=this.Hm=this.ni=!1;this.de=!0;this.Ws=this.Vs=this.Cz=null;this.gw=0;this.rw=600;this.gE=new z(0,0);this.qz=this.pz=this.oB=!1;this.Sm=new Fb(U,Bj)}vb("AnimationManager",vg);vg.prototype.fc=function(a){this.N=a};function Aj(a,b,c,d){a/=d/2;return 1>a?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}vg.prototype.prepareAnimation=vg.prototype.tk=function(){this.de&&(this.ni&&this.Wh(),this.Fc=!0,this.oz=!1)};
function Cj(a){a.de&&requestAnimationFrame(function(){!1===a.Fc||a.ni||(a.N.nl=1,Pj(a.N),a.Fc=!1,a.N.ma("AnimationStarting"),Qj(a))})}function Rj(a,b,c,d,e){if(a.Fc&&(!(b instanceof O)||b.qC)){var f=a.Sm;if(f.contains(b)){b=f.ja(b);a=b.start;var g=b.end;void 0===a[c]&&(a[c]=Sj(d));g[c]=Sj(e)}else a=new Sb,g=new Sb,a[c]=Sj(d),g[c]=Sj(e),f.add(b,new Bj(a,g))}}function Sj(a){return a instanceof z?a.copy():a instanceof Za?a.copy():a}
function Qj(a){var b;void 0===b&&(b=new Sb);var c=a.N;if(null!==c)if(0===a.Sm.count)a.ni=!1,Tj(c,!1),c.te();else{a.ni=!0;var d=b.UH||a.YD,e=b.AI||null,f=b.BI||null,g=b.duration||a.rw;b=a.gE;for(var h=a.Sm.i;h.next();){var k=h.value.start.position;k instanceof z&&(k.w()||k.assign(b))}a.Cz=d;a.Vs=e;a.Ws=f;a.gw=g;var l=a.XD=a.Sm;Uj(a);Vj(a,c,l,d,0,g,null!==a.Lk&&null!==a.Kk);ci(a.N);Wj(a);requestAnimationFrame(function(b){var e=b||+new Date,f=e+g;(function s(b){if(!1!==a.ni){b=b||+new Date;var h=b>f?
g:b-e;Uj(a);Vj(a,c,l,d,h,g,null!==a.Lk&&null!==a.Kk);a.Vs&&a.Vs();ci(c);Wj(a);b>f?Xj(a):requestAnimationFrame(s)}})(e)})}}var Yj={opacity:function(a,b,c,d,e,f){a.opacity=d(e,b,c-b,f)},position:function(a,b,c,d,e,f){e!==f?a.nD(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f)):a.position=new z(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f))},scale:function(a,b,c,d,e,f){a.scale=d(e,b,c-b,f)},visible:function(a,b,c,d,e,f){a.visible=e!==f?b:c}};
function Uj(a){if(!a.Hm){var b=a.N;a.oB=b.Ma;a.pz=b.Bv;a.qz=b.ps;b.Ma=!0;b.Bv=!0;b.ps=!0;a.Hm=!0}}function Wj(a){var b=a.N;b.Ma=a.oB;b.Bv=a.pz;b.ps=a.qz;a.Hm=!1}function Vj(a,b,c,d,e,f,g){for(c=c.i;c.next();){var h=c.key,k=c.value,l=k.start,k=k.end,m;for(m in k)if(void 0!==Yj[m])Yj[m](h,l[m],k[m],d,e,f)}g&&(g=a.Lk,a=a.Kk,m=a.y-g.y,a=d(e,g.x,a.x-g.x,f),d=d(e,g.y,m,f),e=b.ey,b.ey=!0,b.position=new z(a,d),b.ey=e)}
vg.prototype.stopAnimation=vg.prototype.Wh=function(){!0===this.Fc&&(this.Fc=!1,this.oz&&this.N.vd());this.ni&&this.de&&(Uj(this),Vj(this,this.N,this.XD,this.Cz,this.gw,this.gw,null!==this.Lk&&null!==this.Kk),Wj(this),Xj(this))};function Xj(a){a.ni=!1;a.Lk=null;a.Kk=null;a.Sm=new Fb(U,Bj);Uj(a);for(var b=a.N.links;b.next();){var c=b.value;null!==c.Xm&&(c.points=c.Xm,c.Xm=null)}b=a.N;Tj(b,!1);b.Rb();b.te();Zj(b);Wj(a);a.Ws&&a.Ws();a.Ws=null;a.Vs=null;b.ma("AnimationFinished");b.vd()}
function ak(a,b,c){var d=b.Q,e=c.Q,f=null;c instanceof Wg&&(f=c.placeholder);null!==f?(c=f.Ra(ud),c.x+=f.padding.left,c.y+=f.padding.top,Rj(a,b,"position",c,b.position)):Rj(a,b,"position",new z(e.x+e.width/2-d.width/2,e.y+e.height/2-d.height/2),b.position);Rj(a,b,"opacity",.01,b.opacity)}function bk(a,b,c){a.Fc&&(null===a.Lk&&b.w()&&null===a.Kk&&(a.Lk=b.copy()),a.Kk=c.copy())}G(vg,{isEnabled:"isEnabled"},function(){return this.de},function(a){w(a,"boolean",vg,"isEnabled");this.de=a});
G(vg,{duration:"duration"},function(){return this.rw},function(a){w(a,"number",vg,"duration");1>a&&za(a,">= 1",vg,"duration");this.rw=a});H(vg,{hg:"isAnimating"},function(){return this.ni});H(vg,{eI:"isTicking"},function(){return this.Hm});function Bj(a,b){this.start=a;this.end=b}
function jg(){0<arguments.length&&Aa(jg);sb(this);this.N=null;this.hb=new N(O);this.zb="";this.Se=1;this.Jw=!1;this.Oj=this.wx=this.oj=this.nj=this.mj=this.lj=this.jj=this.kj=this.ij=this.qj=this.hj=this.pj=this.gj=this.fj=!0;this.Ew=!1;this.Pt=[]}vb("Layer",jg);jg.prototype.fc=function(a){this.N=a};
jg.prototype.toString=function(a){void 0===a&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,f=0,g=0,h=this.hb.i;h.next();){var k=h.value;k instanceof Wg?e++:k instanceof V?d++:k instanceof W?f++:k instanceof Vg?g++:c++}h="";0<c&&(h+=c+" Parts ");0<d&&(h+=d+" Nodes ");0<e&&(h+=e+" Groups ");0<f&&(h+=f+" Links ");0<g&&(h+=g+" Adornments ");if(1<a)for(a=this.hb.i;a.next();)c=a.value,h+="\n    "+c.toString(),d=c.data,null!==d&&ub(d)&&(h+=" #"+ub(d)),c instanceof V?h+=" "+Sf(d):
c instanceof W&&(h+=" "+Sf(c.M)+" "+Sf(c.R));return b+" "+this.hb.count+": "+h};jg.prototype.findObjectAt=jg.prototype.Cd=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);if(!1===this.Oj)return null;var d=!1;this.g.Va.na(a)&&(d=!0);for(var e=Va(),f=this.hb.l,g=f.length;g--;){var h=f[g];if((!0!==d||!1!==ck(h))&&h.sa()&&(e.assign(a),Xc(e,h.Ve),h=h.Cd(e,b,c),null!==h&&(null!==b&&(h=b(h)),null!==h&&(null===c||c(h)))))return A(e),h}A(e);return null};
jg.prototype.findObjectsAt=jg.prototype.vr=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof N||d instanceof Xb||(d=new Xb(U));if(!1===this.Oj)return d;var e=!1;this.g.Va.na(a)&&(e=!0);for(var f=Va(),g=this.hb.l,h=g.length;h--;){var k=g[h];!0===e&&!1===ck(k)||!k.sa()||(f.assign(a),Xc(f,k.Ve),k.vr(f,b,c,d)&&(null!==b&&(k=b(k)),null===k||null!==c&&!c(k)||d.add(k)))}A(f);return d};
jg.prototype.findObjectsIn=jg.prototype.Yi=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof N||e instanceof Xb||(e=new Xb(U));if(!1===this.Oj)return e;var f=!1;this.g.Va.Vi(a)&&(f=!0);for(var g=this.hb.l,h=g.length;h--;){var k=g[h];(!0!==f||!1!==ck(k))&&k.sa()&&k.Yi(a,b,c,d,e)&&(null!==b&&(k=b(k)),null===k||null!==c&&!c(k)||e.add(k))}return e};
jg.prototype.Qx=function(a,b,c,d,e,f,g){if(!1===this.Oj)return e;for(var h=this.hb.l,k=h.length;k--;){var l=h[k];(!0!==g||!1!==ck(l))&&f(l)&&l.sa()&&l.Yi(a,b,c,d,e)&&(null!==b&&(l=b(l)),null===l||null!==c&&!c(l)||e.add(l))}return e};
jg.prototype.findObjectsNear=jg.prototype.Dl=function(a,b,c,d,e,f){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof N||e instanceof Xb)f=e;e=!0}f instanceof N||f instanceof Xb||(f=new Xb(U));if(!1===this.Oj)return f;var g=!1;this.g.Va.na(a)&&(g=!0);for(var h=Va(),k=Va(),l=this.hb.l,m=l.length;m--;){var n=l[m];!0===g&&!1===ck(n)||!n.sa()||(h.assign(a),Xc(h,n.Ve),k.k(a.x+b,a.y),Xc(k,n.Ve),n.Dl(h,k,c,d,e,f)&&(null!==c&&(n=c(n)),null===n||null!==d&&!d(n)||
f.add(n)))}A(h);A(k);return f};r=jg.prototype;r.Me=function(a,b){if(this.visible){var c;c=void 0===b?a.Va:b;for(var d=this.hb.l,e=d.length,f=0;f<e;f++){var g=d[f];g.oA=f;if(!(g instanceof W&&!1===g.wf)){if(g instanceof Vg){var h=g;if(null!==h.Wg)continue}if(hd(g.Q,c))for(g.Me(!0),dk(g),g=g.su;g.next();)h=g.value,lj(h,Infinity,Infinity),h.ac(),h.Me(!0);else g.Me(!1),null!==g.su&&0<g.su.count&&dk(g)}}}};
r.ne=function(a,b,c,d){if(this.visible&&(void 0===d&&(d=!0),d||!this.bc)){1!==this.Se&&(a.globalAlpha=this.Se);c=this.Pt;c.length=0;d=b.scale;for(var e=this.hb.l,f=e.length,g=0;g<f;g++){var h=e[g];if(ck(h)||ek(h)){if(h instanceof W){var k=h;k.Jb&&c.push(k);if(!1===k.wf)continue}k=h.Q;1<k.width*d||1<k.height*d?h.ne(a,b):fk(h,a)}}a.globalAlpha=1}};
function gk(a,b,c,d){if(a.visible){b.globalAlpha=a.Se;var e=a.Pt;e.length=0;var f=c.scale;a=a.hb.l;for(var g=a.length,h=d.length,k=0;k<g;k++){var l=a[k];if(ck(l)||ek(l)){if(l instanceof W){var m=l;m.Jb&&e.push(m);if(!1===m.wf)continue}var m=hk(l,l.Q),n;a:{n=m;for(var p=d,q=h,s=2/f,t=4/f,u=0;u<q;u++){var x=p[u];if(0!==x.width&&0!==x.height&&n.pC(x.x-s,x.y-s,x.width+t,x.height+t)){n=!0;break a}}n=!1}n&&(1<m.width*f||1<m.height*f?l.ne(b,c):fk(l,b))}}b.globalAlpha=1}}
r.h=function(a,b,c,d,e){var f=this.g;null!==f&&f.ec(If,a,this,b,c,d,e)};r.Dn=function(a,b,c){var d=this.hb;b.xt=this;if(a>=d.count)a=d.count;else if(d.Y(a)===b)return-1;d.pd(a,b);b.Fr(c);d=this.g;null!==d&&(c?d.ba():d.Dn(b));b instanceof Wg&&this.Cv(b);return a};r.pe=function(a,b,c){var d=this.hb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.Y(a)!==b&&(a=d.indexOf(b),0>a))return-1;b.Gr(c);d.Cc(a);d=this.g;null!==d&&(c?d.ba():d.pe(b));b.xt=null;return a};
r.Cv=function(a){for(;null!==a;){if(a.layer===this){var b=a;if(0!==b.lc.count){for(var c=-1,d=-1,e=this.hb.l,f=e.length,g=0;g<f;g++){var h=e[g];if(h===b&&(c=g,0<=d))break;if(0>d&&h.Ca===b&&(d=g,0<=c))break}!(0>d)&&d<c&&(e=this.hb,e.Cc(c),e.pd(d,b))}}a=a.Ca}};r.clear=function(){for(var a=this.hb.ae(),b=a.length,c=0;c<b;c++)a[c].Me(!1),this.pe(-1,a[c],!1)};H(jg,{bj:"parts"},function(){return this.hb.i});H(jg,{KI:"partsBackwards"},function(){return this.hb.Il});H(jg,{g:"diagram"},function(){return this.N});
G(jg,{name:"name"},function(){return this.zb},function(a){w(a,"string",jg,"name");var b=this.zb;if(b!==a){var c=this.g;if(null!==c)for(""===b&&v("Cannot rename default Layer to: "+a),c=c.fv;c.next();)c.value.name===a&&v("Layer.name is already present in this diagram: "+a);this.zb=a;this.h("name",b,a);for(a=this.hb.i;a.next();)a.value.Le=this.zb}});
G(jg,{opacity:"opacity"},function(){return this.Se},function(a){var b=this.Se;b!==a&&(w(a,"number",jg,"opacity"),(0>a||1<a)&&za(a,"0 <= value <= 1",jg,"opacity"),this.Se=a,this.h("opacity",b,a),a=this.g,null!==a&&a.ba())});G(jg,{bc:"isTemporary"},function(){return this.Jw},function(a){var b=this.Jw;b!==a&&(w(a,"boolean",jg,"isTemporary"),this.Jw=a,this.h("isTemporary",b,a))});
G(jg,{visible:"visible"},function(){return this.wx},function(a){var b=this.wx;if(b!==a){w(a,"boolean",jg,"visible");this.wx=a;this.h("visible",b,a);for(b=this.hb.i;b.next();)b.value.Zd(a);a=this.g;null!==a&&a.ba()}});G(jg,{Of:"pickable"},function(){return this.Oj},function(a){var b=this.Oj;b!==a&&(w(a,"boolean",jg,"pickable"),this.Oj=a,this.h("pickable",b,a))});G(jg,{rC:"isBoundsIncluded"},function(){return this.Ew},function(a){this.Ew!==a&&(this.Ew=a,null!==this.g&&this.g.Rb())});
G(jg,{Ti:"allowCopy"},function(){return this.fj},function(a){var b=this.fj;b!==a&&(w(a,"boolean",jg,"allowCopy"),this.fj=a,this.h("allowCopy",b,a))});G(jg,{ql:"allowDelete"},function(){return this.gj},function(a){var b=this.gj;b!==a&&(w(a,"boolean",jg,"allowDelete"),this.gj=a,this.h("allowDelete",b,a))});G(jg,{xu:"allowTextEdit"},function(){return this.pj},function(a){var b=this.pj;b!==a&&(w(a,"boolean",jg,"allowTextEdit"),this.pj=a,this.h("allowTextEdit",b,a))});
G(jg,{uu:"allowGroup"},function(){return this.hj},function(a){var b=this.hj;b!==a&&(w(a,"boolean",jg,"allowGroup"),this.hj=a,this.h("allowGroup",b,a))});G(jg,{yu:"allowUngroup"},function(){return this.qj},function(a){var b=this.qj;b!==a&&(w(a,"boolean",jg,"allowUngroup"),this.qj=a,this.h("allowUngroup",b,a))});G(jg,{gr:"allowLink"},function(){return this.ij},function(a){var b=this.ij;b!==a&&(w(a,"boolean",jg,"allowLink"),this.ij=a,this.h("allowLink",b,a))});
G(jg,{rl:"allowRelink"},function(){return this.kj},function(a){var b=this.kj;b!==a&&(w(a,"boolean",jg,"allowRelink"),this.kj=a,this.h("allowRelink",b,a))});G(jg,{Wj:"allowMove"},function(){return this.jj},function(a){var b=this.jj;b!==a&&(w(a,"boolean",jg,"allowMove"),this.jj=a,this.h("allowMove",b,a))});G(jg,{vu:"allowReshape"},function(){return this.lj},function(a){var b=this.lj;b!==a&&(w(a,"boolean",jg,"allowReshape"),this.lj=a,this.h("allowReshape",b,a))});
G(jg,{hr:"allowResize"},function(){return this.mj},function(a){var b=this.mj;b!==a&&(w(a,"boolean",jg,"allowResize"),this.mj=a,this.h("allowResize",b,a))});G(jg,{wu:"allowRotate"},function(){return this.nj},function(a){var b=this.nj;b!==a&&(w(a,"boolean",jg,"allowRotate"),this.nj=a,this.h("allowRotate",b,a))});G(jg,{De:"allowSelect"},function(){return this.oj},function(a){var b=this.oj;b!==a&&(w(a,"boolean",jg,"allowSelect"),this.oj=a,this.h("allowSelect",b,a))});
function M(a){function b(){window.document.removeEventListener("DOMContentLoaded",b,!1);ik(c)}1<arguments.length&&v("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");sb(this);jk=[];this.Ub=!0;this.gh=new vg;this.gh.fc(this);this.Tc=17;var c=this;null!==window.document.body?ik(this):window.document.addEventListener("DOMContentLoaded",b,!1);this.jA=!1;this.Eb=new N(jg);this.cb=this.eb=0;this.Ng=this.pb=this.Uf=this.Oa=null;this.YC();this.bp=null;this.XC();this.xa=
(new z(NaN,NaN)).freeze();this.Fb=1;this.pt=(new z(NaN,NaN)).freeze();this.qt=NaN;this.Ft=1E-4;this.Dt=100;this.kd=new ib;this.pu=(new z(NaN,NaN)).freeze();this.gt=(new D(NaN,NaN,NaN,NaN)).freeze();this.hx=(new qd(0,0,0,0)).freeze();this.ix=kk;this.ax=this.Zw=null;this.Ck=ah;this.gm=ee;this.Cj=ah;this.Cm=ee;this.rt=this.ot=ud;this.lf=new Xb(U);this.dd=!0;this.dp=!1;this.Jk=new Fb(W,D);this.sm=!0;this.UD=250;this.bm=-1;this.Ms=(new qd(16,16,16,16)).freeze();this.$s=this.Ue=!1;this.wm=!0;this.wj=new Ff;
this.ic=new Ff;this.tb=new Ff;this.di=null;this.fu=-1;this.eu=!1;this.nw=this.ow=null;lk(this);this.$p=new Xb(V);this.Rj=new Xb(Wg);this.Dp=new Xb(W);this.hb=new Xb(O);this.ut=!0;this.$z=!1;this.lu=gi;this.qi=10;this.hw=this.lw=this.tx=null;this.fw="";this.No="auto";this.lh=this.Gh=this.wh=this.It=this.xh=this.yh=this.zh=this.kh=this.ph=this.ih=null;this.Am=!0;this.Tw=!1;this.JA={};this.iq=0;this.Te=[null,null];this.Xv=null;this.vt=this.Yl=this.mw=this.jx=this.SA=this.Dh=!1;this.lA=!0;this.Gw=this.Pc=
!1;this.fd=null;var d=this;this.sA=function(a){if(a.U===d.U&&d.ya){d.ya=!1;try{var b=a.Uc;""===a.af&&b===If&&mk(d,a.object,a.propertyName)}finally{d.ya=!0}}};this.tA=function(a){nk(d,a)};this.qB=!0;this.Wf=-2;this.mh=new Fb(Object,O);this.uj=new Fb(Object,W);this.Rk=new Fb(Object,Array);this.Tm=new Fb("string",Array);this.IA=new N(ok);this.Ej=!1;this.gj=this.fj=this.Cs=this.de=!0;this.Es=this.Ds=!1;this.Js=this.Hs=this.oj=this.nj=this.mj=this.lj=this.jj=this.kj=this.ij=this.Gs=this.qj=this.hj=this.pj=
!0;this.Ok=this.hA=!1;this.Is=this.Fs=this.mt=this.lt=!0;this.Wt=this.Vt=16;this.bx=this.Ut=!1;this.gx=this.ex=this.Fi=this.Ei=null;this.ge=(new qd(5)).freeze();this.Yt=(new Xb(O)).freeze();this.Et=999999999;this.nt=(new Xb(O)).freeze();this.Dj=this.Mk=this.rh=!0;this.Aj=this.zj=!1;this.ed=null;this.Ks=!0;this.Ae=!1;this.Gc=null;this.zA=1;this.yw=!1;this.WA=0;this.pB=(new D(NaN,NaN,NaN,NaN)).freeze();this.at=(new D(NaN,NaN,NaN,NaN)).freeze();this.Zk=new Xb(pk);qk(this);this.zt=this.it=this.Kt=this.Gz=
this.Fz=this.Hz=this.ri=this.xj=this.Ah=null;rk(this);this.vc=null;this.ht=!1;this.hm=null;this.Ya=new Tg;this.Ya.initializeStandardTools();this.Ha=this.Mx=this.Ya;this.ib=new ec;this.U=new Xf;this.Dh=!0;this.vb=new lg;this.Dh=!1;this.Rz=this.qw=null;this.Ce=1;this.nl=null;this.Bj=new sk;void 0!==a&&tk(this,a);this.Tk=1;this.Uk=0;this.nA=new z;this.mB=500;this.Ls=new z;this.Jq=null;this.Ub=this.Kw=!1}vb("Diagram",M);
function rk(a){a.Ah=new Fb("string",O);var b=new V,c=new Zb;c.bind(new yg("text","",Sf));b.add(c);a.Hz=b;a.Ah.add("",b);b=new V;c=new Zb;c.stroke="brown";c.bind(new yg("text","",Sf));b.add(c);a.Ah.add("Comment",b);b=new V;b.wk=!1;b.FB=!1;c=new X;c.jb="Ellipse";c.fill="black";c.stroke=null;c.ka=(new Za(3,3)).va();b.add(c);a.Ah.add("LinkLabel",b);a.xj=new Fb("string",Wg);b=new Wg;b.Py="GROUPPANEL";b.type=uk;c=new Zb;c.font="bold 12pt sans-serif";c.bind(new yg("text","",Sf));b.add(c);c=new L(vk);c.name=
"GROUPPANEL";var d=new X;d.jb="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new Si;d.padding=(new qd(5,5,5,5)).va();c.add(d);b.add(c);a.Fz=b;a.xj.add("",b);a.ri=new Fb("string",W);b=new W;c=new X;c.Hf=!0;b.add(c);c=new X;c.io="Standard";c.fill="black";c.stroke=null;c.Na=0;b.add(c);a.Gz=b;a.ri.add("",b);b=new W;c=new X;c.Hf=!0;c.stroke="brown";b.add(c);a.ri.add("Comment",b);b=new Vg;b.type=vk;c=new X;c.fill=null;c.stroke="dodgerblue";c.Na=3;b.add(c);c=new Si;c.margin=(new qd(1.5,
1.5,1.5,1.5)).va();b.add(c);a.Kt=b;a.it=b;b=new Vg;b.type=si;c=new X;c.Hf=!0;c.fill=null;c.stroke="dodgerblue";c.Na=3;b.add(c);a.zt=b}
function ik(a){var b=oa("p");b.style.width="100%";b.style.height="200px";b.style.boxSizing="content-box";var c=oa("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.style.boxSizing="content-box";c.appendChild(b);window.document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;d===b&&(b=c.clientWidth);window.document.body.removeChild(c);a.Tc=d-b}
M.prototype.toString=function(a){void 0===a&&(a=0);var b="";this.id&&(b=this.id);this.ck&&this.ck.id&&(b=this.ck.id);b='Diagram "'+b+'"';if(0>=a)return b;for(var c=this.Eb.i;c.next();)b+="\n  "+c.value.toString(a-1);return b};M.prototype.checkProperties=function(){void 0===Ub?Ub=new Xb(Object):Ub.clear();Wb=new zc;Tb("",this);var a=Wb.toString();Wb=null;return a};
M.fromDiv=function(a){var b=a;"string"===typeof a&&(b=window.document.getElementById(a));return b instanceof HTMLDivElement&&b.N instanceof M?b.N:null};
G(M,{ck:"div"},function(){return this.pb},function(a){null!==a&&ra(a,HTMLDivElement,M,"div");if(this.pb!==a){jk=[];var b=this.pb;null!==b?(b.N=void 0,b.innerHTML="",null!==this.Oa&&(this.Oa.removeEventListener("touchstart",this.zD,!1),this.Oa.removeEventListener("touchmove",this.yD,!1),this.Oa.removeEventListener("touchend",this.xD,!1),this.Oa.Xc.N=null),b=this.Ya,null!==b&&(b.ue.each(function(a){a.cancelWaitAfter()}),b.bf.each(function(a){a.cancelWaitAfter()}),b.cf.each(function(a){a.cancelWaitAfter()})),
b.cancelWaitAfter(),this.Ha.doCancel(),this.Uf=this.Oa=null,window.removeEventListener("resize",this.JD,!1),window.removeEventListener("mousemove",this.On,!0),window.removeEventListener("mousedown",this.Nn,!0),window.removeEventListener("mouseup",this.Qn,!0),window.removeEventListener("mousewheel",this.lg,!0),window.removeEventListener("DOMMouseScroll",this.lg,!0),window.removeEventListener("mouseout",this.Pn,!0)):this.Ae=!1;this.pb=null;if(null!==a){if(b=a.N)b.ck=null;tk(this,a);this.Iy()}}});
function wk(a){var b=a.Oa;b.addEventListener("touchstart",a.zD,!1);b.addEventListener("touchmove",a.yD,!1);b.addEventListener("touchend",a.xD,!1);b.addEventListener("mousemove",a.On,!1);b.addEventListener("mousedown",a.Nn,!1);b.addEventListener("mouseup",a.Qn,!1);b.addEventListener("mousewheel",a.lg,!1);b.addEventListener("DOMMouseScroll",a.lg,!1);b.addEventListener("mouseout",a.Pn,!1);b.addEventListener("keydown",a.LF,!1);b.addEventListener("keyup",a.MF,!1);b.addEventListener("selectstart",function(a){a.preventDefault();
return!1},!1);b.addEventListener("contextmenu",function(a){a.preventDefault();return!1},!1);b.addEventListener("gesturechange",function(b){a.Ya.An===xj&&b.preventDefault()},!1);b.addEventListener("pointerdown",a.kG,!1);b.addEventListener("pointermove",a.mG,!1);b.addEventListener("pointerleave",a.lG,!1);window.addEventListener("resize",a.JD,!1)}function Tj(a,b){a.nl=null;b&&a.PC()}
M.prototype.computePixelRatio=function(){if(null!==this.nl)return this.nl;var a=this.Uf;return(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)};M.prototype.doMouseMove=function(){this.Ha.doMouseMove()};M.prototype.doMouseDown=function(){this.Ha.doMouseDown()};M.prototype.doMouseUp=function(){this.Ha.doMouseUp()};M.prototype.doMouseWheel=function(){this.Ha.doMouseWheel()};
M.prototype.doKeyDown=function(){this.Ha.doKeyDown()};M.prototype.doKeyUp=function(){this.Ha.doKeyUp()};function Pj(a){if(null!==a.Oa){var b=a.pb;if(0!==b.clientWidth&&0!==b.clientHeight){var c=a.Aj?a.Tc:0,d=a.zj?a.Tc:0,e=a.Ce;a.Ce=a.computePixelRatio();a.Ce!==e&&(a.dp=!0,a.vd());if(b.clientWidth!==a.eb+c||b.clientHeight!==a.cb+d)a.Mk=!0,a.dd=!0,b=a.vb,null!==b&&b.cv&&b.v(),a.Pc||a.vd()}}}M.prototype.focus=M.prototype.focus=function(){this.Oa&&this.Oa.focus()};
function xk(a,b,c){void 0===b&&(b=a.Uf);void 0===c&&(c=!0);c&&(b.As="");b.Wl="";b.Vl=""}function qk(a){var b=new jg;b.name="Background";a.cr(b);b=new jg;b.name="";a.cr(b);b=new jg;b.name="Foreground";a.cr(b);b=new jg;b.name="Adornment";b.bc=!0;a.cr(b);b=new jg;b.name="Tool";b.bc=!0;b.rC=!0;a.cr(b);b=new jg;b.name="Grid";b.De=!1;b.Of=!1;b.bc=!0;a.sE(b,a.tr("Background"))}
function yk(a){a.vc=new L(zk);a.vc.name="GRID";var b=new X;b.jb="LineH";b.stroke="lightgray";b.Na=.5;b.interval=1;a.vc.add(b);b=new X;b.jb="LineH";b.stroke="gray";b.Na=.5;b.interval=5;a.vc.add(b);b=new X;b.jb="LineH";b.stroke="gray";b.Na=1;b.interval=10;a.vc.add(b);b=new X;b.jb="LineV";b.stroke="lightgray";b.Na=.5;b.interval=1;a.vc.add(b);b=new X;b.jb="LineV";b.stroke="gray";b.Na=.5;b.interval=5;a.vc.add(b);b=new X;b.jb="LineV";b.stroke="gray";b.Na=1;b.interval=10;a.vc.add(b);b=new O;b.add(a.vc);
b.Le="Grid";b.iy=!1;b.qC=!1;b.Of=!1;b.oy="GRID";a.add(b);a.hb.remove(b);a.vc.visible=!1}
M.prototype.yA=function(){if(this.N.isEnabled){var a=this.N;if(a.bx&&null!==a.Oa){a.Ut=!0;var b=a.Wc,c=a.Va,d=b.width,e=c.width,f=b.height,g=c.height,h=b.right,k=c.right,l=b.bottom,m=c.bottom,n=b.x,p=c.x,b=b.y,c=c.y,q=a.scale;if(e<d||g<f){var s=Va();this.PA&&a.ie?(s.k(this.scrollLeft/q+n,a.position.y),a.position=s):this.QA&&a.je&&(s.k(a.position.x,this.scrollTop/q+b),a.position=s);A(s);a.Ut=!1;a.Mk=!1}else s=Va(),this.PA&&a.ie&&(n<p&&(a.position=new z(this.scrollLeft+n,a.position.y)),h>k&&(a.position=
new z(-(a.Ei.scrollWidth-a.eb)+this.scrollLeft-a.eb/q+a.Wc.right,a.position.y))),this.QA&&a.je&&(b<c&&(a.position=new z(a.position.x,this.scrollTop+b)),l>m&&(a.position=new z(a.position.x,-(a.Fi.scrollHeight-a.cb)+this.scrollTop-a.cb/q+a.Wc.bottom))),A(s),Ak(a),a.Ut=!1,a.Mk=!1,b=a.Wc,c=a.Va,h=b.right,k=c.right,l=b.bottom,m=c.bottom,n=b.x,p=c.x,b=b.y,c=c.y,e>=d&&n>=p&&h<=k&&(a.ex.style.width="1px"),g>=f&&b>=c&&l<=m&&(a.gx.style.height="1px")}}else Bk(this.N)};
M.prototype.Mt=function(){this.N.isEnabled?this.N.bx=!0:Bk(this.N)};M.prototype.computeBounds=M.prototype.zf=function(){0<this.lf.count&&Ck(this);return Dk(this)};function Dk(a){if(a.dC.w()){var b=a.dC.copy();b.ru(a.padding);return b}for(var c=!0,d=a.Eb.l,e=d.length,f=0;f<e;f++){var g=d[f];if(g.visible&&(!g.bc||g.rC))for(var g=g.hb.l,h=g.length,k=0;k<h;k++){var l=g[k];l.iy&&l.sa()&&(l=l.Q,l.w()&&(c?(c=!1,b=l.copy()):b.eh(l)))}}c&&(b=new D(0,0,0,0));b.ru(a.padding);return b}
M.prototype.computePartsBounds=function(a){var b=null;for(a=a.i;a.next();){var c=a.value;c instanceof W||(c.Ee(),null===b?b=c.Q.copy():b.eh(c.Q))}return null===b?new D(NaN,NaN,0,0):b};
function Ek(a,b){if((b||a.Ae)&&!a.Ub&&null!==a.Oa&&!a.rb.hg&&a.Wc.w()){a.Ub=!0;var c=a.Ck;b&&a.Cj!==ah&&(c=a.Cj);var d=c!==ah?Fk(a,c):a.scale,c=a.Va.copy(),e=a.eb/d,f=a.cb/d,g=null,h=a.rb;h.Fc&&(g=a.xa.copy());a.position.wa();var k=a.gm;b&&!k.Jc()&&a.Cm.Jc()&&(k=a.Cm);Gk(a,a.xa,a.Wc,e,f,k,b);a.position.freeze();null!==g&&bk(h,g,a.xa);a.scale=d;a.Ub=!1;d=a.Va;d.Wd(c)||a.$r(c,d)}}
function Fk(a,b){var c=a.ib.Hu;if(null===a.Oa)return c;a.rh&&Hk(a,a.zf());var d=a.Wc;if(!d.w())return c;var e=d.width,d=d.height,f=a.eb,g=a.cb,h=f/e,k=g/d;return b===Ik?(e=Math.min(k,h),e>c&&(e=c),e<a.kg&&(e=a.kg),e>a.jg&&(e=a.jg),e):b===Jk?(e=k>h?(g-a.Tc)/d:(f-a.Tc)/e,e>c&&(e=c),e<a.kg&&(e=a.kg),e>a.jg&&(e=a.jg),e):a.scale}M.prototype.zoomToFit=M.prototype.zoomToFit=function(){this.scale=Fk(this,Ik)};
M.prototype.zoomToRect=function(a,b){void 0===b&&(b=Ik);var c=a.width,d=a.height;if(!(0===c||0===d||isNaN(c)&&isNaN(d))){var e=1;if(b===Ik||b===Jk)if(isNaN(c))e=this.Va.height*this.scale/d;else if(isNaN(d))e=this.Va.width*this.scale/c;else var e=this.eb,f=this.cb,e=b===Jk?f/d>e/c?(f-(this.zj?this.Tc:0))/d:(e-(this.Aj?this.Tc:0))/c:Math.min(f/d,e/c);this.scale=e;this.position=new z(a.x,a.y)}};G(M,{ey:null},function(){return this.Ub},function(a){this.Ub=a});
M.prototype.alignDocument=function(a,b){this.rh&&Hk(this,this.zf());var c=this.Wc,d=this.Va,e=this.Ub;this.Ub=!0;this.position=new z(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.Ub=e;this.ba()};
function Gk(a,b,c,d,e,f,g){var h=b.x,k=b.y;if(g||a.fD===kk)f.Jc()&&(d>c.width&&(h=c.x+(f.x*c.width+f.offsetX)-(f.x*d-f.offsetX)),e>c.height&&(k=c.y+(f.y*c.height+f.offsetY)-(f.y*e-f.offsetY))),f=a.eD,g=d-c.width,d<c.width+f.left+f.right?(h=Math.min(h+d/2,c.right+Math.max(g,f.right)-d/2),h=Math.max(h,c.left-Math.max(g,f.left)+d/2),h-=d/2):h>c.left?h=c.left:h<c.right-d&&(h=c.right-d),d=e-c.height,e<c.height+f.top+f.bottom?(k=Math.min(k+e/2,c.bottom+Math.max(d,f.bottom)-e/2),k=Math.max(k,c.top-Math.max(d,
f.top)+e/2),k-=e/2):k>c.top?k=c.top:k<c.bottom-e&&(k=c.bottom-e);b.x=isFinite(h)?h:-a.padding.left;b.y=isFinite(k)?k:-a.padding.top;null!==a.OC&&(a=a.OC(a,b),b.x=a.x,b.y=a.y)}M.prototype.findPartAt=M.prototype.wr=function(a,b){var c=b?Wh(this,a,function(a){return a.J},function(a){return a.canSelect()}):Wh(this,a,function(a){return a.J});return c instanceof O?c:null};
M.prototype.findObjectAt=M.prototype.Cd=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);Ck(this);for(var d=this.Eb.Il;d.next();){var e=d.value;if(e.visible&&(e=e.Cd(a,b,c),null!==e))return e}return null};function Wh(a,b,c,d){void 0===c&&(c=null);void 0===d&&(d=null);Ck(a);for(a=a.Eb.Il;a.next();){var e=a.value;if(e.visible&&!e.bc&&(e=e.Cd(b,c,d),null!==e))return e}return null}
M.prototype.findObjectsAt=M.prototype.vr=function(a,b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);d instanceof N||d instanceof Xb||(d=new Xb(U));Ck(this);for(var e=this.Eb.Il;e.next();){var f=e.value;f.visible&&f.vr(a,b,c,d)}return d};M.prototype.findObjectsIn=M.prototype.Yi=function(a,b,c,d,e){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=!1);e instanceof N||e instanceof Xb||(e=new Xb(U));Ck(this);for(var f=this.Eb.Il;f.next();){var g=f.value;g.visible&&g.Yi(a,b,c,d,e)}return e};
M.prototype.Qx=function(a,b,c,d,e,f){var g=new Xb(U);Ck(this);for(var h=this.Eb.Il;h.next();){var k=h.value;k.visible&&k.Qx(a,b,c,d,g,e,f)}return g};M.prototype.findObjectsNear=M.prototype.Dl=function(a,b,c,d,e,f){void 0===c&&(c=null);void 0===d&&(d=null);void 0===e&&(e=!0);if(!1!==e&&!0!==e){if(e instanceof N||e instanceof Xb)f=e;e=!0}f instanceof N||f instanceof Xb||(f=new Xb(U));Ck(this);for(var g=this.Eb.Il;g.next();){var h=g.value;h.visible&&h.Dl(a,b,c,d,e,f)}return f};
function dh(a){-1!==a.fu&&(window.clearTimeout(a.fu),a.fu=-1)}function Kk(a,b){var c=b.copy();a.fu=ma(function(){c.button=2;a.C=c;a.eu=!0;a.doMouseUp()},850)}M.prototype.acceptEvent=function(a){var b=this.ic;this.ic=this.tb;this.tb=b;Lk(this,this,a,b,a instanceof MouseEvent);return b};
function Lk(a,b,c,d,e){d.g=b;e?Mk(a,c,d):(d.ve=b.tb.ve,d.S=b.tb.S);a=0;c.ctrlKey&&(a+=1);c.altKey&&(a+=2);c.shiftKey&&(a+=4);c.metaKey&&(a+=8);d.Bc=a;d.button=c.button;fa&&0===c.button&&c.ctrlKey&&(d.button=2);d.dk=!1;d.up=!1;d.ke=1;d.bk=0;d.qc=!1;d.bubbles=!1;d.event=c;d.timestamp=Date.now();d.Lr=!1;d.Qf=c.target.N?c.target.N:null;d.Kd=null}
function Nk(a,b,c,d,e){d.g=a;Mk(a,c,d);d.Bc=0;d.button=0;d.dk=!0;d.up=!1;d.ke=1;d.bk=0;d.qc=!1;d.bubbles=!0;d.event=b;d.timestamp=Date.now();d.Lr=e;d.Qf=b.target.N?b.target.N:null;d.Kd=null;a.wj=d.copy();qh=null}
function Ok(a,b,c,d,e){var f=null;d.g=a;if(null!==c){var f=window.document.elementFromPoint(c.clientX,c.clientY),g;f&&f.N?g=f.N:(c=b.changedTouches[0],g=a);Mk(a,c,d)}else null!==a.ic?(d.S=a.ic.S,d.ve=a.ic.ve,d.Qf=a.ic.Qf):null!==a.wj&&(d.S=a.wj.S,d.ve=a.wj.ve,d.Qf=a.wj.Qf);d.Bc=0;d.button=0;d.dk=!1;d.up=!1;d.ke=1;d.bk=0;d.qc=!1;d.bubbles=!1;d.event=b;d.timestamp=Date.now();d.Lr=e;d.Qf=g;d.Kd=null}
function Pk(a,b){if(a.bubbles)return!0;void 0!==b.stopPropagation&&b.stopPropagation();(void 0===b.touches||2>b.touches.length)&&b.preventDefault();b.cancelBubble=!0;return!1}
M.prototype.LF=function(a){if(!this.N.isEnabled)return!1;var b=this.N.tb;Lk(this.N,this.N,a,b,!1);b.key=String.fromCharCode(a.which);b.dk=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:case 61:case 107:b.key=
"Add";break;case 189:case 173:case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.N.doKeyDown();return 187!==a.which&&189!==a.which&&48!==a.which&&107!==a.which&&109!==a.which&&61!==a.which&&173!==a.which||!0!==a.ctrlKey?Pk(b,a):(a.cancelBubble=!0,a.preventDefault(),a.stopPropagation(),!1)};
M.prototype.MF=function(a){if(!this.N.isEnabled)return!1;var b=this.N.tb;Lk(this.N,this.N,a,b,!1);b.key=String.fromCharCode(a.which);b.up=!0;switch(a.which){case 8:b.key="Backspace";break;case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 93:a.preventDefault()}this.N.doKeyUp();
return Pk(b,a)};M.prototype.Yo=function(a){var b=this.Oa;if(null===b)return new z(0,0);var c=this.eb,d=this.cb,b=b.getBoundingClientRect(),c=a.clientX-c/b.width*b.left;a=a.clientY-d/b.height*b.top;return null!==this.kd?(a=new z(c,a),Xc(a,this.kd),a):new z(c,a)};function Mk(a,b,c){var d=a.Oa,e=a.eb,f=a.cb,g=0,h=0;null!==d&&(d=d.getBoundingClientRect(),g=b.clientX-e/d.width*d.left,h=b.clientY-f/d.height*d.top);c.ve.k(g,h);null!==a.kd?(b=Wa(g,h),a.kd.Zg(b),c.S.assign(b),A(b)):c.S.k(g,h)}
M.prototype.invalidateDocumentBounds=M.prototype.Rb=function(){this.rh||(this.rh=!0,this.vd(!0))};function Zj(a){a.Pc||Ck(a);a.rh&&Hk(a,a.zf());for(a=a.Zk.i;a.next();)Zj(a.value)}M.prototype.redraw=M.prototype.Iy=function(){this.Ub||this.Pc||(this.ba(),Qk(this),Ak(this),this.Rb(),this.te())};M.prototype.isUpdateRequested=function(){return this.Ue};
M.prototype.delayInitialization=M.prototype.UE=function(a){void 0===a&&(a=null);var b=this.rb,c=b.isEnabled;b.Wh();b.isEnabled=!1;ci(this);this.Ae=!1;b.isEnabled=c;null!==a&&ma(a,1)};M.prototype.requestUpdate=M.prototype.vd=function(a){void 0===a&&(a=!1);if(!0!==this.Ue&&!(this.Ub||!1===a&&this.Pc)){this.Ue=!0;var b=this;requestAnimationFrame(function(){b.Ue&&b.te()})}};M.prototype.maybeUpdate=M.prototype.te=function(){if(!this.wm||this.Ue)this.wm&&(this.wm=!1),ci(this)};
function Rk(a,b){a.Ub||!a.Mk||Bk(a)||(b&&Ck(a),Ek(a,!1))}
function ci(a){if(!a.Pc&&(a.Ue=!1,null!==a.pb)){a.Pc=!0;var b=a.gh,c=a.IA;if(!b.Hm&&0!==c.length){for(var d=c.l,e=d.length,f=0;f<e;f++){var g=d[f];Sk(g,!1);g.H()}c.clear()}d=c=!1;b.hg&&(d=!0,c=a.Ma,a.Ma=!0);b.Fc||Pj(a);Rk(a,!1);null!==a.vc&&(a.vc.visible&&!a.ht&&(Tk(a),a.ht=!0),!a.vc.visible&&a.ht&&(a.ht=!1));Ck(a);0!==a.Jk.count&&(Uk(a),Ck(a));e=!1;if(!a.Ae||a.Ks)a.Ae?Vk(a,!a.$s):(a.Bb("Initial Layout"),!1===b.isEnabled&&b.Wh(),Vk(a,!1)),e=!0;a.$s=!1;Ck(a);a.jx||b.hg||Zj(a);Rk(a,!0);e&&(a.Ae||(b=
a.Eb.l,a.Me(b,b.length,a),Wk(a),Tk(a)),a.ma("LayoutCompleted"));Ck(a);e&&!a.Ae&&(a.Ae=!0,a.od("Initial Layout"),a.Ma||a.V.clear(),ma(function(){a.ah=!1},1));a.ne();d&&(a.Ma=c);a.Pc=!1}}
function Wk(a){if(a.Cj!==ah)a.scale=Fk(a,a.Cj);else if(a.Ck!==ah)a.scale=Fk(a,a.Ck);else{var b=a.yF;isFinite(b)&&0<b&&(a.scale=b)}a.rh&&Hk(a,a.zf());b=a.xF;if(b.w())a.position=b;else{b=Va();b.ms(a.Wc,a.wF);var c=a.Va,c=db(0,0,c.width,c.height),d=Va();d.ms(c,a.zF);a.position=new z(b.x-d.x,b.y-d.y);fb(c);A(d);A(b);Ek(a,!0)}a.ma("InitialLayoutCompleted")}
function Ck(a){if((a.Pc||!a.rb.hg)&&0!==a.lf.count)for(var b=0;23>b;b++){var c=a.lf.i;if(null===c||0===a.lf.count)break;a.lf=new Xb(U);var d=a,e=a.lf;for(c.reset();c.next();){var f=c.value;!f.Zc()||f instanceof Wg||!f.sa()||(f.ok()?(lj(f,Infinity,Infinity),f.ac()):e.add(f))}for(c.reset();c.next();)f=c.value,f instanceof Wg&&f.sa()&&Xk(d,f);for(c.reset();c.next();)f=c.value,f instanceof W&&(d=f,d.sa()&&(d.ok()?(lj(d,Infinity,Infinity),d.ac(),d.Tr()):e.add(d)));for(c.reset();c.next();)d=c.value,d instanceof
Vg&&d.sa()&&(d.ok()?(lj(d,Infinity,Infinity),d.ac()):e.add(d))}}function Xk(a,b){for(var c=ob(),d=ob(),e=b.lc;e.next();){var f=e.value;f.sa()&&(f instanceof Wg?(Yk(f)||dl(f)||ml(f))&&Xk(a,f):f instanceof W?f.M==b||f.R==b?d.push(f):c.push(f):(lj(f,Infinity,Infinity),f.ac()))}for(var e=c.length,g=0;g<e;g++)f=c[g],lj(f,Infinity,Infinity),f.ac();pb(c);lj(b,Infinity,Infinity);b.ac();e=d.length;for(g=0;g<e;g++)f=d[g],lj(f,Infinity,Infinity),f.ac();pb(d)}
M.prototype.Me=function(a,b,c,d){var e=this.gh;if(this.Dj||e.hg)for(e=0;e<b;e++)a[e].Me(c,d)};
M.prototype.ne=function(a,b){void 0===a&&(a=this.Uf);void 0===b&&(b=null);null===this.pb&&v("No div specified");var c=this.Oa;null===c&&v("No canvas specified");if(this.gh.Fc)0===this.V.be&&this.vd(!0);else{nl(this);var d=a!==this.Uf,e=this.Eb.l,f=e.length,g=this;this.Me(e,f,g);if(d)xk(this,a),Ak(this);else if(!this.dd&&null===b)return;var h=this.xa,k=this.Fb,l=Math.round(h.x*k)/k,m=Math.round(h.y*k)/k,f=this.kd;f.reset();1!==k&&f.scale(k);0===h.x&&0===h.y||f.translate(-l,-m);h=this.Ce;ca?(c.width=
c.width,xk(this,a),a.scale(h,h)):(a.setTransform(1,0,0,1,0,0),a.scale(h,h),a.clearRect(0,0,this.eb,this.cb));a.miterLimit=9;a.setTransform(1,0,0,1,0,0);a.scale(h,h);a.transform(f.m11,f.m12,f.m21,f.m22,f.dx,f.dy);c=null!==b?function(c){var d=a,e=b;if(c.visible){d.globalAlpha=c.Se;var f=c.Pt;f.length=0;var h=g.scale;c=c.hb.l;for(var k=c.length,l=0;l<k;l++){var m=c[l];if((ck(m)||ek(m))&&!e.contains(m)){if(m instanceof W){var y=m;y.Jb&&f.push(y);if(!1===y.wf)continue}y=m.Q;1<y.width*h||1<y.height*h?m.ne(d,
g):fk(m,d)}}d.globalAlpha=1}}:function(b){b.ne(a,g)};ol(this,a);f=e.length;for(h=0;h<f;h++)c(e[h]);this.Bj?pl(this.Bj,this)&&this.Qv():this.Yo=function(){return new z(0,0)};d?(xk(this),Ak(this)):this.dd=this.Dj=!1}};
function ql(a,b,c,d,e){null===a.pb&&v("No div specified");var f=a.Oa;null===f&&v("No canvas specified");var g=a.Uf;if(a.dd){nl(a);var h=a.Ce;ca?(f.width=f.width,xk(a,g)):(g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,a.eb*h,a.cb*h));g.oC=!1;g.drawImage(a.qw.Xc,0<d?0:Math.round(-d),0<e?0:Math.round(-e));e=a.xa;var f=a.Fb,k=Math.round(e.x*f)/f,l=Math.round(e.y*f)/f;d=a.kd;d.reset();1!==f&&d.scale(f);0===e.x&&0===e.y||d.translate(-k,-l);g.save();g.beginPath();e=c.length;for(f=0;f<e;f++)k=c[f],0!==k.width&&
0!==k.height&&g.rect(Math.floor(k.x),Math.floor(k.y),Math.ceil(k.width),Math.ceil(k.height));g.clip();g.setTransform(1,0,0,1,0,0);g.scale(h,h);g.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);c=a.Eb.l;e=c.length;a.Me(c,e,a);ol(a,g);for(f=0;f<e;f++)gk(c[f],g,a,b);g.restore();xk(a);a.Bj?pl(a.Bj,a)&&a.Qv():a.Yo=function(){return new z(0,0)};a.Dj=!1;a.dd=!1;a.PC()}}
function rl(a,b,c,d,e,f,g,h,k,l){null===a.pb&&v("No div specified");null===a.Oa&&v("No canvas specified");void 0===g&&(g=null);void 0===h&&(h=null);void 0===k&&(k=!1);void 0===l&&(l=!1);nl(a);xk(a);Ak(a);a.Gw=!0;var m=new D(f.x,f.y,d.width/e,d.height/e),n=m.copy();n.ru(c);Tk(a,n);Ck(a);var n=a.Eb.l,p=n.length;a.Me(n,p,a,m);var q=a.Ce;b.setTransform(1,0,0,1,0,0);b.scale(q,q);b.clearRect(0,0,d.width,d.height);null!==h&&""!==h&&(b.fillStyle=h,b.fillRect(0,0,d.width,d.height));d=hb();d.reset();d.translate(c.left,
c.top);d.scale(e);0===f.x&&0===f.y||d.translate(-f.x,-f.y);b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);jb(d);ol(a,b);if(null!==g){var s=new Xb(U);c=g.i;for(c.reset();c.next();)e=c.value,!1===l&&"Grid"===e.layer.name||null===e||s.add(e);c=function(c){var d=k;if(c.visible&&(void 0===d&&(d=!0),d||!c.bc)){b.globalAlpha=c.Se;d=c.Pt;d.length=0;var e=a.scale;c=c.hb.l;for(var f=c.length,g=0;g<f;g++){var h=c[g];if((ck(h)||ek(h))&&s.contains(h)){if(h instanceof W){var l=h;l.Jb&&d.push(l);if(!1===l.wf)continue}l=
h.Q;1<l.width*e||1<l.height*e?h.ne(b,a):fk(h,b)}}b.globalAlpha=1}}}else if(!k&&l){var t=a.Dr.J,u=t.layer;c=function(c){c===u?t.ne(b,a):c.ne(b,a,m,k,l)}}else c=function(c){c.ne(b,a,m,k,l)};for(e=0;e<p;e++)c(n[e]);a.Gw=!1;a.Bj?pl(a.Bj,a)&&a.Qv():a.Yo=function(){return new z(0,0)};xk(a);Ak(a);a.Me(n,p,a);Tk(a)}M.prototype.getRenderingHint=M.prototype.Vx=function(a){return this.Ng[a]};M.prototype.setRenderingHint=M.prototype.IG=function(a,b){this.Ng[a]=b;this.Iy()};
M.prototype.resetRenderingHints=M.prototype.YC=function(){this.Ng=new Sb;this.Ng.drawShadows=!0;this.Ng.textGreeking=!0;this.Ng.viewportOptimizations=ga?!1:!0;this.Ng.temporaryPixelRatio=!0};function ol(a,b){var c=a.Ng;if(null!==c){if(void 0!==c.imageSmoothingEnabled){var d=!!c.imageSmoothingEnabled;b.oC=d;b.yI=d}c=c.defaultFont;void 0!==c&&null!==c&&(b.font=c,b.As=c)}}M.prototype.getInputOption=M.prototype.Tx=function(a){return this.bp[a]};M.prototype.setInputOption=function(a,b){this.bp[a]=b};
M.prototype.resetInputOptions=M.prototype.XC=function(){this.bp=new Sb;this.bp.extraTouchArea=10;this.bp.extraTouchThreshold=10};M.prototype.setProperties=function(a){Ib(this,a)};function Uk(a){if(0===a.V.be){for(var b=a.Jk.i;b.next();){var c=b.key,d=b.value;c.Dd();Fi(c,d)}a.Jk.clear()}}M.prototype.ba=function(a){void 0===a&&(a=null);if(null===a)this.dd=!0,this.vd();else{var b=this.Va;null!==a&&a.w()&&b.Gf(a)&&(this.dd=!0,this.vd())}for(b=this.Zk.i;b.next();)b.value.ba(a)};
M.prototype.$x=function(a,b){if(!0!==this.dd){this.dd=!0;var c=!0===this.Vx("temporaryPixelRatio");if(!0===this.Vx("viewportOptimizations")&&this.fD!==sl&&this.eD.Lu(0,0,0,0)&&b.width===a.width&&b.height===a.height){var d=this.scale,e=bb(),f=Math.max(a.x,b.x),g=Math.max(a.y,b.y),h=Math.min(a.x+a.width,b.x+b.width),k=Math.min(a.y+a.height,b.y+b.height);e.x=f;e.y=g;e.width=Math.max(0,h-f)*d;e.height=Math.max(0,k-g)*d;if(0<e.width&&0<e.height){if(!this.Pc&&(this.Ue=!1,null!==this.pb)){this.Pc=!0;Ck(this);
0!==this.Jk.count&&(Uk(this),Ck(this));this.Wc.w()||Hk(this,this.zf());var l=this.Oa;if(null!==l){var m=this.Ce,g=this.eb*m,h=this.cb*m,f=this.scale*m,d=Math.round(Math.round(b.x*f)-Math.round(a.x*f)),f=Math.round(Math.round(b.y*f)-Math.round(a.y*f)),k=this.qw,n=this.Rz;k.width!==g&&(k.width=g);k.height!==h&&(k.height=h);n.clearRect(0,0,g,h);var k=190*this.Ce,p=70*this.Ce,q=Math.max(d,0),s=Math.max(f,0),t=Math.floor(g-q),u=Math.floor(h-s);n.oC=!1;n.drawImage(l.Xc,q,s,t,u,0,0,t,u);pl(this.Bj,this)&&
n.clearRect(0,0,k,p);var l=ob(),n=ob(),u=Math.abs(d),t=Math.abs(f),x=0===q?0:g-u,q=Wa(x,0),u=Wa(u+x,h);n.push(new D(Math.min(q.x,u.x),Math.min(q.y,u.y),Math.abs(q.x-u.x),Math.abs(q.y-u.y)));var B=this.kd;B.reset();B.scale(m,m);1!==this.Fb&&B.scale(this.Fb);m=this.xa;(0!==m.x||0!==m.y)&&isFinite(m.x)&&isFinite(m.y)&&B.translate(-m.x,-m.y);Xc(q,B);Xc(u,B);l.push(new D(Math.min(q.x,u.x),Math.min(q.y,u.y),Math.abs(q.x-u.x),Math.abs(q.y-u.y)));x=0===s?0:h-t;q.k(0,x);u.k(g,t+x);n.push(new D(Math.min(q.x,
u.x),Math.min(q.y,u.y),Math.abs(q.x-u.x),Math.abs(q.y-u.y)));Xc(q,B);Xc(u,B);l.push(new D(Math.min(q.x,u.x),Math.min(q.y,u.y),Math.abs(q.x-u.x),Math.abs(q.y-u.y)));pl(this.Bj,this)&&(g=0<d?0:-d,h=0<f?0:-f,q.k(g,h),u.k(k+g,p+h),n.push(new D(Math.min(q.x,u.x),Math.min(q.y,u.y),Math.abs(q.x-u.x),Math.abs(q.y-u.y))),Xc(q,B),Xc(u,B),l.push(new D(Math.min(q.x,u.x),Math.min(q.y,u.y),Math.abs(q.x-u.x),Math.abs(q.y-u.y))));A(q);A(u);Rk(this,!1);ql(this,l,n,d,f);pb(l);pb(n);this.Pc=!1}}}else this.te();fb(e);
c&&(this.nl=1,this.te(),Tj(this,!0))}else c?(this.nl=1,this.te(),Tj(this,!0)):this.te();for(c=this.Zk.i;c.next();)c.value.$x()}};function Qk(a){!1===a.Mk&&(a.Mk=!0)}function Ak(a){!1===a.Dj&&(a.Dj=!0)}function nl(a){!1!==a.dp&&(a.dp=!1,tl(a,a.eb,a.cb))}function tl(a,b,c){var d=a.Oa,e=a.Ce,f=b*e,e=c*e;if(d.width!==f||d.height!==e)d.width=f,d.height=e,d.style.width=b+"px",d.style.height=c+"px",a.dd=!0,xk(a)}
function Bk(a){var b=a.Oa;if(null===b)return!0;var c=a.pb,d=a.eb,e=a.cb,f=a.pB.copy(),g=!1,h=a.Aj?a.Tc:0,k=a.zj?a.Tc:0,l=c.clientWidth||d+h,c=c.clientHeight||e+k;if(l!==d+h||c!==e+k)a.Aj=!1,a.zj=!1,k=h=0,a.eb=l,a.cb=c,g=a.dp=!0;a.Mk=!1;if(a.rb.hg)return g?(a.rb.Wh(),a.UE(),!1):!0;var m=a.Va,n=a.Wc,l=n.width,c=n.height,p=m.width,q=m.height,s=n.x,t=m.x,u=n.right,h=m.right+h,x=n.y,B=m.y,n=n.bottom,k=m.bottom+k,y=m="1px",C=a.scale;a.Xx&&a.ie&&(m=1,s+1<t&&(m=Math.max((t-s)*C+a.eb,m)),u>h+1&&(m=Math.max((u-
h)*C+a.eb,m)),p+1<l&&(m=Math.max((l-p)*C+a.eb,m)),m+="px");a.Yx&&a.je&&(y=1,x+1<B&&(y=Math.max((B-x)*C+a.cb,y)),n>k+1&&(y=Math.max((n-k)*C+a.cb,y)),q+1<c&&(y=Math.max((c-q)*C+a.cb,y)),y+="px");var K="1px"!==m,J="1px"!==y;if((!K||!J)&&K||J)J&&(h-=a.Tc),K&&(k-=a.Tc),a.Xx&&a.ie&&(m=1,s+1<t&&(m=Math.max((t-s)*C+a.eb,m)),u>h+1&&(m=Math.max((u-h)*C+a.eb,m)),p+1<l&&(m=Math.max((l-p)*C+a.eb,m)),m+="px"),a.Yx&&a.je&&(y=1,x+1<B&&(y=Math.max((B-x)*C+a.cb,y)),n>k+1&&(y=Math.max((n-k)*C+a.cb,y)),q+1<c&&(y=Math.max((c-
q)*C+a.cb,y)),y+="px"),K="1px"!==m,J="1px"!==y;if(a.Ut&&K===a.zj&&J===a.Aj)return d===a.eb&&e===a.cb||a.te(),!1;K!==a.zj&&(a.cb="1px"===m?a.cb+a.Tc:Math.max(a.cb-a.Tc,1),g=!0);a.zj=K;a.ex.style.width=m;J!==a.Aj&&(a.eb="1px"===y?a.eb+a.Tc:Math.max(a.eb-a.Tc,1),g=!0,a.jA&&(J?(b.style.left=a.Tc+"px",a.position=new z(a.xa.x+a.Tc/a.scale,a.xa.y)):(b.style.left="0px",a.position=new z(a.xa.x-a.Tc/a.scale,a.xa.y))));a.Aj=J;a.gx.style.height=y;a.Xx&&a.ie&&(p+1<l?a.Ei.scrollLeft=(a.position.x-s)*C:s+1<t?a.Ei.scrollLeft=
a.Ei.scrollWidth-a.Ei.clientWidth:u>h+1&&(a.Ei.scrollLeft=a.position.x*C));a.Yx&&a.je&&(q+1<c?a.Fi.scrollTop=(a.position.y-x)*C:x+1<B?a.Fi.scrollTop=a.Fi.scrollHeight-a.Fi.clientHeight:n>k+1&&(a.Fi.scrollTop=a.position.y*C));g&&(a.dp=!0);l=a.eb;c=a.cb;a.Fi.style.height=c+"px";a.Fi.style.width=l+(a.Aj?a.Tc:0)+"px";a.Ei.style.width=l+"px";a.Ei.style.height=c+(a.zj?a.Tc:0)+"px";a.bx=!1;return d!==l||e!==c||a.rb.Fc?(m=a.Va,a.$r(f,m,g),!1):!0}
M.prototype.add=M.prototype.add=function(a){ra(a,O,M,"add:part");var b=a.g;if(b!==this){null!==b&&v("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString());this.Yl&&(a.Fj="Tool");var c=a.Le,b=this.tr(c);null===b&&(b=this.tr(""));null===b&&v('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer');a.layer!==b&&(c=b.Dn(99999999,a,a.g===this),0<=c&&this.ec(Qf,"parts",b,null,a,null,c),b.bc||this.Rb(),a.v(ul),c=a.Mr,null!==c&&c(a,
null,b))}};
M.prototype.Dn=function(a){if(a instanceof V){if(this.$p.add(a),a instanceof Wg){var b=a.Ca;null===b?this.Rj.add(a):b.Qm.add(a);b=a.vb;null!==b&&(b.g=this)}}else a instanceof W?this.Dp.add(a):a instanceof Vg||this.hb.add(a);var c=this;vl(a,function(a){wl(c,a)});a.ub&&a.H();b=a.data;null!==b&&(a instanceof Vg||(a instanceof W?this.uj.add(b,a):this.mh.add(b,a)),vl(a,function(a){xl(c,a)}));!0!==dl(a)&&!0!==ml(a)||this.lf.add(a);yl(a,!0,this);zl(a)?(a.Q.w()&&this.ba(hk(a,a.Q)),this.Rb()):a.sa()&&a.Q.w()&&
this.ba(hk(a,a.Q));this.vd()};
M.prototype.pe=function(a){a.kr();if(a instanceof V){if(this.$p.remove(a),a instanceof Wg){var b=a.Ca;null===b?this.Rj.remove(a):b.Qm.remove(a);b=a.vb;null!==b&&(b.g=null)}}else a instanceof W?this.Dp.remove(a):a instanceof Vg||this.hb.remove(a);var c=this;vl(a,function(a){Al(c,a)});b=a.data;null!==b&&(a instanceof Vg||(a instanceof W?this.uj.remove(b):this.mh.remove(b)),vl(a,function(a){Bl(c,a)}));this.lf.remove(a);zl(a)?(a.Q.w()&&this.ba(hk(a,a.Q)),this.Rb()):a.sa()&&a.Q.w()&&this.ba(hk(a,a.Q));
this.vd()};M.prototype.remove=M.prototype.remove=function(a){ra(a,O,M,"remove:part");a.Ia=!1;a.ig=!1;var b=a.layer;if(null!==b&&b.g===this){a.v(Cl);a.Cl();var c=b.pe(-1,a,!1);0<=c&&this.ec(Rf,"parts",b,a,null,c,null);c=a.Mr;null!==c&&c(a,b,null)}};M.prototype.removeParts=M.prototype.My=function(a,b){if(Fa(a))for(var c=Ia(a),d=0;d<c;d++){var e=La(a,d);b&&!e.canDelete()||this.remove(e)}else for(e=new Xb(O),e.ld(a),c=e.i;c.next();)e=c.value,b&&!e.canDelete()||this.remove(e)};
M.prototype.copyParts=M.prototype.sn=function(a,b,c){return this.ib.sn(a,b,c)};M.prototype.moveParts=M.prototype.moveParts=function(a,b,c){ra(b,z,M,"moveParts:offset");var d=this.Ya;if(null!==d){d=d.Yc;null===d&&(d=new $g,d.fc(this));var e=new Fb(O,Object);if(null!==a)a=a.i;else{for(a=this.bj;a.next();)th(d,e,a.value,c);for(a=this.Mf;a.next();)th(d,e,a.value,c);a=this.links}for(;a.next();)th(d,e,a.value,c);d.moveParts(e,b,c)}};
function Dl(a,b,c){ra(b,jg,M,"addLayer:layer");null!==b.g&&b.g!==a&&v("Cannot share a Layer with another Diagram: "+b+" of "+b.g);null===c?null!==b.g&&v("Cannot add an existing Layer to this Diagram again: "+b):(ra(c,jg,M,"addLayer:existingLayer"),c.g!==a&&v("Existing Layer must be in this Diagram: "+c+" not in "+c.g),b===c&&v("Cannot move a Layer before or after itself: "+b));if(b.g!==a){b=b.name;a=a.Eb;c=a.count;for(var d=0;d<c;d++)a.Y(d).name===b&&v("Cannot add Layer with the name '"+b+"'; a Layer with the same name is already present in this Diagram.")}}
M.prototype.addLayer=M.prototype.cr=function(a){Dl(this,a,null);a.fc(this);var b=this.Eb,c=b.count-1;if(!a.bc)for(;0<=c&&b.Y(c).bc;)c--;b.pd(c+1,a);null!==this.fd&&this.ec(Qf,"layers",this,null,a,null,c+1);this.ba();this.Rb()};
M.prototype.addLayerBefore=M.prototype.sE=function(a,b){Dl(this,a,b);a.fc(this);var c=this.Eb,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.fd&&this.ec(Rf,"layers",this,a,null,d,null));for(var e=c.count,f=0;f<e;f++)if(c.Y(f)===b){c.pd(f,a);break}null!==this.fd&&this.ec(Qf,"layers",this,null,a,null,f);this.ba();0>d&&this.Rb()};
M.prototype.addLayerAfter=function(a,b){Dl(this,a,b);a.fc(this);var c=this.Eb,d=c.indexOf(a);0<=d&&(c.remove(a),null!==this.fd&&this.ec(Rf,"layers",this,a,null,d,null));for(var e=c.count,f=0;f<e;f++)if(c.Y(f)===b){c.pd(f+1,a);break}null!==this.fd&&this.ec(Qf,"layers",this,null,a,null,f+1);this.ba();0>d&&this.Rb()};
M.prototype.removeLayer=function(a){ra(a,jg,M,"removeLayer:layer");a.g!==this&&v("Cannot remove a Layer from another Diagram: "+a+" of "+a.g);if(""!==a.name){var b=this.Eb,c=b.indexOf(a);if(b.remove(a)){for(b=a.hb.copy().i;b.next();){var d=b.value,e=d.Le;d.Le=e!==a.name?e:""}null!==this.fd&&this.ec(Rf,"layers",this,a,null,c,null);this.ba();this.Rb()}}};M.prototype.findLayer=M.prototype.tr=function(a){for(var b=this.fv;b.next();){var c=b.value;if(c.name===a)return c}return null};
M.prototype.addChangedListener=M.prototype.xx=function(a){w(a,"function",M,"addChangedListener:listener");null===this.di&&(this.di=new N("function"));this.di.add(a)};M.prototype.removeChangedListener=M.prototype.Jy=function(a){w(a,"function",M,"removeChangedListener:listener");null!==this.di&&(this.di.remove(a),0===this.di.count&&(this.di=null))};
M.prototype.Cu=function(a){this.Ma||this.V.mC(a);a.Uc!==Pf&&(this.ah=!0);if(null!==this.di){var b=this.di,c=b.length;if(1===c)b=b.Y(0),b(a);else if(0!==c)for(var d=b.ae(),e=0;e<c;e++)b=d[e],b(a)}};M.prototype.raiseChangedEvent=M.prototype.ec=function(a,b,c,d,e,f,g){void 0===f&&(f=null);void 0===g&&(g=null);var h=new Hf;h.g=this;h.Uc=a;h.propertyName=b;h.object=c;h.oldValue=d;h.Nf=f;h.newValue=e;h.Lf=g;this.Cu(h)};M.prototype.raiseChanged=M.prototype.h=function(a,b,c,d,e){this.ec(If,a,this,b,c,d,e)};
H(M,{rb:"animationManager"},function(){return this.gh});H(M,{V:"undoManager"},function(){return this.fd.V});G(M,{Ma:"skipsUndoManager"},function(){return this.Dh},function(a){w(a,"boolean",M,"skipsUndoManager");this.Dh=a;this.fd.Dh=a});G(M,{Nx:"delaysLayout"},function(){return this.mw},function(a){this.mw=a});
M.prototype.ul=function(a,b){if(null!==a&&a.g===this){var c=a.Uc;if(c===If){var d=a.object,c=a.propertyName,e=a.ja(b);Hb(d,c,e);d instanceof U&&(d=d.J,null!==d&&d.qd());this.ah=!0}else if(c===Qf){e=a.object;c=a.Lf;d=a.newValue;if(e instanceof L)if("number"===typeof c&&d instanceof U){var f=e;b?f.pe(c):f.pd(c,d);d=e.J;null!==d&&d.qd()}else"number"===typeof c&&d instanceof ug&&(f=e,b?d.sd?f.WC(c):f.SC(c):(c=d.sd?f.Ac(d.index):f.zc(d.index),c.nr(d)));else e instanceof jg?(f=!0===a.Nf,"number"===typeof c&&
d instanceof O&&(b?(d.qd(),e.pe(f?c:-1,d,f)):e.Dn(c,d,f))):e instanceof M?"number"===typeof c&&d instanceof jg&&(e=d,b?this.Eb.Cc(c):(e.fc(this),this.Eb.pd(c,e))):v("unknown ChangedEvent.Insert object: "+a.toString());this.ah=!0}else c===Rf?(e=a.object,c=a.Nf,d=a.oldValue,e instanceof L?"number"===typeof c&&d instanceof U?(f=e,b?f.pd(c,d):f.pe(c)):"number"===typeof c&&d instanceof ug&&(f=e,b?(c=d.sd?f.Ac(d.index):f.zc(d.index),c.nr(d)):d.sd?f.WC(c):f.SC(c)):e instanceof jg?(f=!0===a.Lf,"number"===
typeof c&&d instanceof O&&(b?e.Dn(c,d,f):(d.qd(),e.pe(f?c:-1,d,f)))):e instanceof M?"number"===typeof c&&d instanceof jg&&(e=d,b?(e.fc(this),this.Eb.pd(c,e)):this.Eb.Cc(c)):v("unknown ChangedEvent.Remove object: "+a.toString()),this.ah=!0):c!==Pf&&v("unknown ChangedEvent: "+a.toString())}};M.prototype.startTransaction=M.prototype.Bb=function(a){return this.V.Bb(a)};M.prototype.commitTransaction=M.prototype.od=function(a){return this.V.od(a)};M.prototype.rollbackTransaction=M.prototype.Yn=function(){return this.V.Yn()};
M.prototype.updateAllTargetBindings=M.prototype.bH=function(a){void 0===a&&(a="");for(var b=this.bj;b.next();)b.value.sb(a);for(b=this.Mf;b.next();)b.value.sb(a);for(b=this.links;b.next();)b.value.sb(a)};M.prototype.updateAllRelationshipsFromData=function(){for(var a=this.bj;a.next();)a.value.updateRelationshipsFromData();for(a=this.Mf;a.next();)a.value.updateRelationshipsFromData();for(a=this.links;a.next();)a.value.updateRelationshipsFromData()};
function El(a,b,c){if(a.Ub||a.Pc)a.Fb=c;else if(a.Ub=!0,null===a.Oa)a.Fb=c;else{var d=a.Va.copy(),e=a.eb,f=a.cb;d.width=a.eb/b;d.height=a.cb/b;var g=a.Ul.copy();if(isNaN(g.x))switch(a.Fx){case Jd:g.x=0;break;case Kd:g.x=e-1;break;case Dd:g.x=e/2;break;case ee:case de:g.x=e/2}if(isNaN(g.y))switch(a.Fx){case Id:g.y=0;break;case Ld:g.y=f-1;break;case Dd:g.y=f/2;break;case ee:case de:g.y=f/2}null!==a.dD&&(c=a.dD(a,c));c<a.kg&&(c=a.kg);c>a.jg&&(c=a.jg);a.position=new z(a.xa.x+g.x/b-g.x/c,a.xa.y+g.y/b-
g.y/c);a.Ub=!1;a.Fb=c;a.$r(d,a.Va);Ek(a,!1);a.ba();Qk(a)}}M.prototype.$r=function(a,b,c){void 0===c&&(c=!1);c||Qk(this);Ak(this);var d=this.vb;null===d||!d.cv||c||a.width===b.width&&a.height===b.height||d.v();d=this.Ha;!0===this.Ok&&d instanceof Tg&&(this.C.S=this.ED(this.C.ve),d.doMouseMove());this.$x(a,b);Tk(this);this.ma("ViewportBoundsChanged",c?qb:null,a)};
function Tk(a,b){void 0===b&&(b=null);var c=a.vc;if(null!==c&&c.visible){for(var d=Ya(),e=1,f=1,g=c.la.l,h=g.length,k=0;k<h;k++){var l=g[k],m=l.interval;2>m||(Fl(l.jb)?f=f*m/Q.gC(f,m):e=e*m/Q.gC(e,m))}g=c.Su;d.k(f*g.width,e*g.height);g=f=k=h=0;if(null!==b)h=b.width,k=b.height,f=b.x,g=b.y;else{e=bb();f=a.Va;e.k(f.x,f.y,f.width,f.height);for(g=a.Zk.i;g.next();)f=g.value.Va,f.w()&&id(e,f.x,f.y,f.width,f.height);h=e.width;k=e.height;f=e.x;g=e.y;if(!e.w())return}c.width=h+2*d.width;c.height=k+2*d.height;
e=Va();Q.ur(f,g,0,0,d.width,d.height,e);e.offset(-d.width,-d.height);$a(d);c.J.location=e;A(e)}}M.prototype.clearSelection=M.prototype.Du=function(){var a=0<this.selection.count;a&&this.ma("ChangingSelection");Zg(this);a&&this.ma("ChangedSelection")};function Zg(a){a=a.selection;if(0<a.count){for(var b=a.ae(),c=b.length,d=0;d<c;d++)b[d].Ia=!1;a.wa();a.clear();a.freeze()}}
M.prototype.select=M.prototype.select=function(a){null!==a&&(ra(a,O,M,"select:part"),a.layer.g===this&&(!a.Ia||1<this.selection.count)&&(this.ma("ChangingSelection"),Zg(this),a.Ia=!0,this.ma("ChangedSelection")))};
M.prototype.selectCollection=M.prototype.jD=function(a){this.ma("ChangingSelection");Zg(this);if(Fa(a))for(var b=Ia(a),c=0;c<b;c++){var d=La(a,c);d instanceof O||v("Diagram.selectCollection given something that is not a Part: "+d);d.Ia=!0}else for(a=a.i;a.next();)d=a.value,d instanceof O||v("Diagram.selectCollection given something that is not a Part: "+d),d.Ia=!0;this.ma("ChangedSelection")};
M.prototype.clearHighlighteds=M.prototype.HB=function(){var a=this.Tu;if(0<a.count){for(var b=a.ae(),c=b.length,d=0;d<c;d++)b[d].ig=!1;a.wa();a.clear();a.freeze()}};M.prototype.highlight=function(a){null!==a&&a.layer.g===this&&(ra(a,O,M,"highlight:part"),!a.ig||1<this.Tu.count)&&(this.HB(),a.ig=!0)};
M.prototype.highlightCollection=function(a){this.HB();if(Fa(a))for(var b=Ia(a),c=0;c<b;c++){var d=La(a,c);d instanceof O||v("Diagram.highlightCollection given something that is not a Part: "+d);d.ig=!0}else for(a=a.i;a.next();)d=a.value,d instanceof O||v("Diagram.highlightCollection given something that is not a Part: "+d),d.ig=!0};
M.prototype.scroll=M.prototype.scroll=function(a,b,c){void 0===c&&(c=1);var d="up"===b||"down"===b,e=0;"pixel"===a?e=c:"line"===a?e=c*(d?this.ks:this.js):"page"===a?(a=d?this.Va.height:this.Va.width,a*=this.scale,0!==a&&(e=Math.max(a-(d?this.ks:this.js),0),e*=c)):v("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e/=this.scale;c=this.position.copy();"up"===b?c.y=this.position.y-e:"down"===b?c.y=this.position.y+e:"left"===b?c.x=this.position.x-e:"right"===b?c.x=this.position.x+e:v("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};M.prototype.scrollToRect=M.prototype.CG=function(a){var b=this.Va;b.Vi(a)||(a=a.Xj,a.x-=b.width/2,a.y-=b.height/2,this.position=a)};M.prototype.centerRect=function(a){var b=this.Va;a=a.Xj;a.x-=b.width/2;a.y-=b.height/2;this.position=a};M.prototype.transformDocToView=M.prototype.CD=function(a){var b=this.kd;b.reset();1!==this.Fb&&b.scale(this.Fb);var c=this.xa;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return a.copy().transform(this.kd)};
M.prototype.transformViewToDoc=M.prototype.ED=function(a){var b=this.kd;b.reset();1!==this.Fb&&b.scale(this.Fb);var c=this.xa;(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y);return Xc(a.copy(),this.kd)};var ah;M.None=ah=I(M,"None",0);var Ik;M.Uniform=Ik=I(M,"Uniform",1);var Jk;M.UniformToFill=Jk=I(M,"UniformToFill",2);var gi;M.CycleAll=gi=I(M,"CycleAll",10);var ki;M.CycleNotDirected=ki=I(M,"CycleNotDirected",11);var mi;
M.CycleNotDirectedFast=mi=I(M,"CycleNotDirectedFast",12);var ni;M.CycleNotUndirected=ni=I(M,"CycleNotUndirected",13);var hi;M.CycleDestinationTree=hi=I(M,"CycleDestinationTree",14);var ji;M.CycleSourceTree=ji=I(M,"CycleSourceTree",15);var kk;M.DocumentScroll=kk=I(M,"DocumentScroll",1);var sl;M.InfiniteScroll=sl=I(M,"InfiniteScroll",2);G(M,{cH:"validCycle"},function(){return this.lu},function(a){var b=this.lu;b!==a&&(va(a,M,M,"validCycle"),this.lu=a,this.h("validCycle",b,a))});
G(M,{hv:"linkSpacing"},function(){return this.qi},function(a){var b=this.qi;b!==a&&(ua(a,M,"linkSpacing"),0>a&&za(a,">= zero",M,"linkSpacing"),this.qi=a,this.h("linkSpacing",b,a))});H(M,{fv:"layers"},function(){return this.Eb.i});G(M,{Je:"isModelReadOnly"},function(){var a=this.fd;return null===a?!1:a.Ta},function(a){var b=this.fd;null!==b&&(b.Ta=a)});G(M,{Ta:"isReadOnly"},function(){return this.Ej},function(a){var b=this.Ej;b!==a&&(w(a,"boolean",M,"isReadOnly"),this.Ej=a,this.h("isReadOnly",b,a))});
G(M,{isEnabled:"isEnabled"},function(){return this.de},function(a){var b=this.de;b!==a&&(w(a,"boolean",M,"isEnabled"),this.de=a,this.h("isEnabled",b,a))});G(M,{Ax:"allowClipboard"},function(){return this.Cs},function(a){var b=this.Cs;b!==a&&(w(a,"boolean",M,"allowClipboard"),this.Cs=a,this.h("allowClipboard",b,a))});G(M,{Ti:"allowCopy"},function(){return this.fj},function(a){var b=this.fj;b!==a&&(w(a,"boolean",M,"allowCopy"),this.fj=a,this.h("allowCopy",b,a))});
G(M,{ql:"allowDelete"},function(){return this.gj},function(a){var b=this.gj;b!==a&&(w(a,"boolean",M,"allowDelete"),this.gj=a,this.h("allowDelete",b,a))});G(M,{tu:"allowDragOut"},function(){return this.Ds},function(a){var b=this.Ds;b!==a&&(w(a,"boolean",M,"allowDragOut"),this.Ds=a,this.h("allowDragOut",b,a))});G(M,{zB:"allowDrop"},function(){return this.Es},function(a){var b=this.Es;b!==a&&(w(a,"boolean",M,"allowDrop"),this.Es=a,this.h("allowDrop",b,a))});
G(M,{xu:"allowTextEdit"},function(){return this.pj},function(a){var b=this.pj;b!==a&&(w(a,"boolean",M,"allowTextEdit"),this.pj=a,this.h("allowTextEdit",b,a))});G(M,{uu:"allowGroup"},function(){return this.hj},function(a){var b=this.hj;b!==a&&(w(a,"boolean",M,"allowGroup"),this.hj=a,this.h("allowGroup",b,a))});G(M,{yu:"allowUngroup"},function(){return this.qj},function(a){var b=this.qj;b!==a&&(w(a,"boolean",M,"allowUngroup"),this.qj=a,this.h("allowUngroup",b,a))});
G(M,{kn:"allowInsert"},function(){return this.Gs},function(a){var b=this.Gs;b!==a&&(w(a,"boolean",M,"allowInsert"),this.Gs=a,this.h("allowInsert",b,a))});G(M,{gr:"allowLink"},function(){return this.ij},function(a){var b=this.ij;b!==a&&(w(a,"boolean",M,"allowLink"),this.ij=a,this.h("allowLink",b,a))});G(M,{rl:"allowRelink"},function(){return this.kj},function(a){var b=this.kj;b!==a&&(w(a,"boolean",M,"allowRelink"),this.kj=a,this.h("allowRelink",b,a))});
G(M,{Wj:"allowMove"},function(){return this.jj},function(a){var b=this.jj;b!==a&&(w(a,"boolean",M,"allowMove"),this.jj=a,this.h("allowMove",b,a))});G(M,{vu:"allowReshape"},function(){return this.lj},function(a){var b=this.lj;b!==a&&(w(a,"boolean",M,"allowReshape"),this.lj=a,this.h("allowReshape",b,a))});G(M,{hr:"allowResize"},function(){return this.mj},function(a){var b=this.mj;b!==a&&(w(a,"boolean",M,"allowResize"),this.mj=a,this.h("allowResize",b,a))});
G(M,{wu:"allowRotate"},function(){return this.nj},function(a){var b=this.nj;b!==a&&(w(a,"boolean",M,"allowRotate"),this.nj=a,this.h("allowRotate",b,a))});G(M,{De:"allowSelect"},function(){return this.oj},function(a){var b=this.oj;b!==a&&(w(a,"boolean",M,"allowSelect"),this.oj=a,this.h("allowSelect",b,a))});G(M,{AB:"allowUndo"},function(){return this.Hs},function(a){var b=this.Hs;b!==a&&(w(a,"boolean",M,"allowUndo"),this.Hs=a,this.h("allowUndo",b,a))});
G(M,{zu:"allowZoom"},function(){return this.Js},function(a){var b=this.Js;b!==a&&(w(a,"boolean",M,"allowZoom"),this.Js=a,this.h("allowZoom",b,a))});G(M,{Yx:"hasVerticalScrollbar"},function(){return this.mt},function(a){var b=this.mt;b!==a&&(w(a,"boolean",M,"hasVerticalScrollbar"),this.mt=a,Qk(this),this.ba(),this.h("hasVerticalScrollbar",b,a),Ek(this,!1))});
G(M,{Xx:"hasHorizontalScrollbar"},function(){return this.lt},function(a){var b=this.lt;b!==a&&(w(a,"boolean",M,"hasHorizontalScrollbar"),this.lt=a,Qk(this),this.ba(),this.h("hasHorizontalScrollbar",b,a),Ek(this,!1))});G(M,{ie:"allowHorizontalScroll"},function(){return this.Fs},function(a){var b=this.Fs;b!==a&&(w(a,"boolean",M,"allowHorizontalScroll"),this.Fs=a,this.h("allowHorizontalScroll",b,a),Ek(this,!1))});
G(M,{je:"allowVerticalScroll"},function(){return this.Is},function(a){var b=this.Is;b!==a&&(w(a,"boolean",M,"allowVerticalScroll"),this.Is=a,this.h("allowVerticalScroll",b,a),Ek(this,!1))});G(M,{js:"scrollHorizontalLineChange"},function(){return this.Vt},function(a){var b=this.Vt;b!==a&&(w(a,"number",M,"scrollHorizontalLineChange"),0>a&&za(a,">= 0",M,"scrollHorizontalLineChange"),this.Vt=a,this.h("scrollHorizontalLineChange",b,a))});
G(M,{ks:"scrollVerticalLineChange"},function(){return this.Wt},function(a){var b=this.Wt;b!==a&&(w(a,"number",M,"scrollVerticalLineChange"),0>a&&za(a,">= 0",M,"scrollVerticalLineChange"),this.Wt=a,this.h("scrollVerticalLineChange",b,a))});G(M,{C:"lastInput"},function(){return this.tb},function(a){this.tb=a});G(M,{Yb:"firstInput"},function(){return this.wj},function(a){this.wj=a});
G(M,{Gb:"currentCursor"},function(){return this.fw},function(a){""===a&&(a=this.No);this.fw!==a&&(w(a,"string",M,"currentCursor"),null!==this.Oa&&(this.fw=a,this.Oa.style.cursor=a,this.pb.style.cursor=a))});G(M,{JH:"defaultCursor"},function(){return this.No},function(a){""===a&&(a="auto");var b=this.No;b!==a&&(w(a,"string",M,"defaultCursor"),this.No=a,this.h("defaultCursor",b,a))});
G(M,{XH:"hasGestureZoom"},function(){return this.Am},function(a){var b=this.Am;b!==a&&(w(a,"boolean",M,"hasGestureZoom"),this.Am=a,this.h("hasGestureZoom",b,a))});G(M,{click:"click"},function(){return this.ih},function(a){var b=this.ih;b!==a&&(null!==a&&w(a,"function",M,"click"),this.ih=a,this.h("click",b,a))});G(M,{qr:"doubleClick"},function(){return this.ph},function(a){var b=this.ph;b!==a&&(null!==a&&w(a,"function",M,"doubleClick"),this.ph=a,this.h("doubleClick",b,a))});
G(M,{Gx:"contextClick"},function(){return this.kh},function(a){var b=this.kh;b!==a&&(null!==a&&w(a,"function",M,"contextClick"),this.kh=a,this.h("contextClick",b,a))});G(M,{vy:"mouseOver"},function(){return this.zh},function(a){var b=this.zh;b!==a&&(null!==a&&w(a,"function",M,"mouseOver"),this.zh=a,this.h("mouseOver",b,a))});G(M,{uy:"mouseHover"},function(){return this.yh},function(a){var b=this.yh;b!==a&&(null!==a&&w(a,"function",M,"mouseHover"),this.yh=a,this.h("mouseHover",b,a))});
G(M,{ty:"mouseHold"},function(){return this.xh},function(a){var b=this.xh;b!==a&&(null!==a&&w(a,"function",M,"mouseHold"),this.xh=a,this.h("mouseHold",b,a))});G(M,{eG:"mouseDragOver"},function(){return this.It},function(a){var b=this.It;b!==a&&(null!==a&&w(a,"function",M,"mouseDragOver"),this.It=a,this.h("mouseDragOver",b,a))});G(M,{sy:"mouseDrop"},function(){return this.wh},function(a){var b=this.wh;b!==a&&(null!==a&&w(a,"function",M,"mouseDrop"),this.wh=a,this.h("mouseDrop",b,a))});
G(M,{bz:"toolTip"},function(){return this.Gh},function(a){var b=this.Gh;b!==a&&(null!==a&&ra(a,Vg,M,"toolTip"),this.Gh=a,this.h("toolTip",b,a))});G(M,{contextMenu:"contextMenu"},function(){return this.lh},function(a){var b=this.lh;b!==a&&(null!==a&&ra(a,Vg,M,"contextMenu"),this.lh=a,this.h("contextMenu",b,a))});
G(M,{ib:"commandHandler"},function(){return this.Xv},function(a){var b=this.Xv;b!==a&&(ra(a,ec,M,"commandHandler"),null!==a.g&&v("Cannot share CommandHandlers between Diagrams: "+a.toString()),null!==b&&b.fc(null),this.Xv=a,a.fc(this))});G(M,{Ya:"toolManager"},function(){return this.tx},function(a){var b=this.tx;b!==a&&(ra(a,Tg,M,"toolManager"),null!==a.g&&v("Cannot share ToolManagers between Diagrams: "+a.toString()),null!==b&&b.fc(null),this.tx=a,a.fc(this))});
G(M,{Mx:"defaultTool"},function(){return this.lw},function(a){var b=this.lw;b!==a&&(ra(a,kg,M,"defaultTool"),this.lw=a,this.Ha===b&&(this.Ha=a))});G(M,{Ha:"currentTool"},function(){return this.hw},function(a){var b=this.hw;if(null!==b)for(b.ca&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop(),b=this.Zk.i;b.next();)b.value.ba();null===a&&(a=this.Mx);null!==a&&(ra(a,kg,M,"currentTool"),this.hw=a,a.fc(this),a.doStart())});H(M,{selection:"selection"},function(){return this.Yt});
G(M,{XF:"maxSelectionCount"},function(){return this.Et},function(a){var b=this.Et;if(b!==a)if(w(a,"number",M,"maxSelectionCount"),0<=a&&!isNaN(a)){if(this.Et=a,this.h("maxSelectionCount",b,a),!this.V.Ua&&(a=this.selection.count-a,0<a)){this.ma("ChangingSelection");for(var b=this.selection.ae(),c=0;c<a;c++)b[c].Ia=!1;this.ma("ChangedSelection")}}else za(a,">= 0",M,"maxSelectionCount")});
G(M,{hG:"nodeSelectionAdornmentTemplate"},function(){return this.Kt},function(a){var b=this.Kt;b!==a&&(ra(a,Vg,M,"nodeSelectionAdornmentTemplate"),this.Kt=a,this.h("nodeSelectionAdornmentTemplate",b,a))});G(M,{rF:"groupSelectionAdornmentTemplate"},function(){return this.it},function(a){var b=this.it;b!==a&&(ra(a,Vg,M,"groupSelectionAdornmentTemplate"),this.it=a,this.h("groupSelectionAdornmentTemplate",b,a))});
G(M,{TF:"linkSelectionAdornmentTemplate"},function(){return this.zt},function(a){var b=this.zt;b!==a&&(ra(a,Vg,M,"linkSelectionAdornmentTemplate"),this.zt=a,this.h("linkSelectionAdornmentTemplate",b,a))});H(M,{Tu:"highlighteds"},function(){return this.nt});G(M,{ah:"isModified"},function(){var a=this.V;return a.isEnabled?null!==a.Nh?!0:this.Iw&&this.Wf!==a.Sh:this.Iw},function(a){if(this.Iw!==a){w(a,"boolean",M,"isModified");this.Iw=a;var b=this.V;!a&&b.isEnabled&&(this.Wf=b.Sh);a||Gl(this)}});
function Gl(a){var b=a.ah;a.qB!==b&&(a.qB=b,a.ma("Modified"))}
G(M,{U:"model"},function(){return this.fd},function(a){var b=this.fd;if(b!==a){ra(a,jc,M,"model");this.Ha.doCancel();null!==b&&b.V!==a.V&&b.V.uC&&v("Do not replace a Diagram.model while a transaction is in progress.");this.rb.Wh();this.Du();this.Ae=!1;this.wm=!0;this.Wf=-2;this.Ue=!1;var c=this.Pc;this.Pc=!0;this.rb.tk();null!==b&&(b.Jy(this.tA),b instanceof Xf&&Hl(this,b.$i),Hl(this,b.ng));this.fd=a;a.xx(this.sA);Il(this,a.ng);a instanceof Xf&&Jl(this,a.$i);a.Jy(this.sA);a.xx(this.tA);this.Pc=c;
this.Ub||this.ba();null!==b&&(a.V.isEnabled=b.V.isEnabled)}});G(M,{ya:null},function(){return this.lA},function(a){this.lA=a});
function nk(a,b){if(b.U===a.U){var c=b.Uc,d=b.propertyName;if(c===Pf&&"S"===d[0])if("StartingFirstTransaction"===d)c=a.Ya,c.ue.each(function(b){b.fc(a)}),c.bf.each(function(b){b.fc(a)}),c.cf.each(function(b){b.fc(a)}),a.Pc||a.Ae||(a.$s=!0,a.wm&&(a.Ue=!0),a.gh.tk());else if("StartingUndo"===d||"StartingRedo"===d){var e=a.rb;e.hg&&!a.Ma&&e.Wh();a.ma("ChangingSelection")}else"StartedTransaction"===d&&(e=a.rb,e.hg&&!a.Ma&&e.Wh(),a.vt&&e.tk());else if(a.ya){a.ya=!1;try{var f=b.af;if(""!==f)if(c===If){if("linkFromKey"===
f){var g=b.object,h=a.Cf(g);if(null!==h){var k=b.newValue,l=a.oe(k);h.M=l}}else if("linkToKey"===f)g=b.object,h=a.Cf(g),null!==h&&(k=b.newValue,l=a.oe(k),h.R=l);else if("linkFromPortId"===f){if(g=b.object,h=a.Cf(g),null!==h){var m=b.newValue;"string"===typeof m&&(h.Ef=m)}}else if("linkToPortId"===f)g=b.object,h=a.Cf(g),null!==h&&(m=b.newValue,"string"===typeof m&&(h.wg=m));else if("nodeGroupKey"===f){var g=b.object,n=a.Yg(g);if(null!==n){var p=b.newValue;if(void 0!==p){var q=a.oe(p);n.Ca=q instanceof
Wg?q:null}else n.Ca=null}}else if("linkLabelKeys"===f){if(g=b.object,h=a.Cf(g),null!==h){var s=b.oldValue,t=b.newValue;if(Fa(s))for(var u=Ia(s),x=0;x<u;x++){var B=La(s,x),l=a.oe(B);null!==l&&(l.ud=null)}if(Fa(t))for(u=Ia(t),x=0;x<u;x++)B=La(t,x),l=a.oe(B),null!==l&&(l.ud=h)}}else if("nodeParentKey"===f){var y=b.object,C=a.oe(b.newValue),K=a.Pu(y);if(null!==K){var J=K.xr();null!==J?null===C?a.remove(J):a.Kc?J.M=C:J.R=C:Kl(a,C,K)}}else if("parentLinkCategory"===f){var y=b.object,K=a.Pu(y),ba=b.newValue;
null!==K&&"string"===typeof ba&&(J=K.xr(),null!==J&&(J.jc=ba))}else if("nodeCategory"===f){var g=b.object,ja=a.Yg(g),ba=b.newValue;null!==ja&&"string"===typeof ba&&(ja.jc=ba)}else if("linkCategory"===f){var g=b.object,Y=a.Cf(g),ba=b.newValue;null!==Y&&"string"===typeof ba&&(Y.jc=ba)}else if("nodeDataArray"===f){var P=b.oldValue;Hl(a,P);var ha=b.newValue;Il(a,ha)}else"linkDataArray"===f&&(P=b.oldValue,Hl(a,P),ha=b.newValue,Jl(a,ha));a.ah=!0}else c===Qf?(ha=b.newValue,"nodeDataArray"===f&&Ea(ha)?Ll(a,
ha):"linkDataArray"===f&&Ea(ha)?Ml(a,ha):"linkLabelKeys"===f&&pg(ha)&&(h=a.Cf(b.object),l=a.oe(ha),null!==h&&null!==l&&(l.ud=h)),a.ah=!0):c===Rf?(P=b.oldValue,"nodeDataArray"===f&&Ea(P)?Nl(a,P):"linkDataArray"===f&&Ea(P)?Nl(a,P):"linkLabelKeys"===f&&pg(P)&&(l=a.oe(P),null!==l&&(l.ud=null)),a.ah=!0):c===Pf&&("SourceChanged"===f?mk(a,b.object,b.propertyName):"ModelDisplaced"===f&&a.uk());else if(c===If){var Ra=b.propertyName,g=b.object;if(g===a.U){if("nodeKeyProperty"===Ra||"nodeCategoryProperty"===
Ra||"linkFromKeyProperty"===Ra||"linkToKeyProperty"===Ra||"linkFromPortIdProperty"===Ra||"linkToPortIdProperty"===Ra||"linkLabelKeysProperty"===Ra||"nodeIsGroupProperty"===Ra||"nodeGroupKeyProperty"===Ra||"nodeParentKeyProperty"===Ra||"linkCategoryProperty"===Ra)a.V.Ua||a.uk()}else mk(a,g,Ra);a.ah=!0}else if(c===Qf||c===Rf)Ol(a,b),a.ah=!0;else if(c===Pf){if("FinishedUndo"===d||"FinishedRedo"===d)a.V.sh=!0,a.ma("ChangedSelection"),Ck(a),a.V.sh=!1;a.$s=!0;a.te();e=a.gh;e.Fc&&0===a.V.be&&Cj(e);"CommittedTransaction"===
d&&a.V.Lw&&(a.Wf=Math.min(a.Wf,a.V.Sh-1));Gl(a);a.Tw||"CommittedTransaction"!==d&&"FinishedUndo"!==d&&"FinishedRedo"!==d||(a.Tw=!0,ma(function(){a.Ha.standardMouseOver();a.Tw=!1},10))}}finally{a.ya=!0}}}}
function mk(a,b,c){if("string"===typeof c){var d=a.Yg(b);if(null!==d)d.sb(c),a.U instanceof Yf&&(d=a.Cf(b),null!==d&&d.sb(c));else{for(var d=null,e=a.Rk.i;e.next();){for(var f=e.value,g=0;g<f.length;g++){var h=f[g];null!==h.mf&&(h=h.mf.ja(b),null!==h&&(null===d&&(d=ob()),d.push(h)))}if(null!==d)break}if(null!==d){for(e=0;e<d.length;e++)d[e].sb(c);pb(d)}}b===a.U.Vr&&a.bH(c)}}G(M,{Bv:"skipsModelSourceBindings"},function(){return this.SA},function(a){this.SA=a});
G(M,{ps:null},function(){return this.jx},function(a){this.jx=a});function Ol(a,b){var c=b.Uc===Qf,d=c?b.Lf:b.Nf,e=c?b.newValue:b.oldValue,f=a.Rk.ja(b.object);if(Array.isArray(f))for(var g=0;g<f.length;g++){var h=f[g];if(c)Pl(h,e,d);else{var k=d;if(!(0>k)){var l=k;Ql(h)&&l++;h.pe(l);Rl(h,l,k)}}}}function xl(a,b){var c=b.th;if(Fa(c)){var d=a.Rk.ja(c);if(null===d)d=[],d.push(b),a.Rk.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function Bl(a,b){var c=b.th;if(Fa(c)){var d=a.Rk.ja(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Rk.remove(c);break}}}function wl(a,b){for(var c=b.la.l,d=c.length,e=0;e<d;e++){var f=c[e];f instanceof ok&&Sl(a,f)}}function Sl(a,b){var c=b.element;if(null!==c){var c=c.src,d=a.Tm.ja(c);if(null===d)d=[],d.push(b),a.Tm.add(c,d);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function Al(a,b){for(var c=b.la.l,d=c.length,e=0;e<d;e++){var f=c[e];f instanceof ok&&Tl(a,f)}}function Tl(a,b){var c=b.element;if(null!==c){var c=c.src,d=a.Tm.ja(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);0===d.length&&a.Tm.remove(c);break}}}
M.prototype.clear=M.prototype.clear=function(){var a=null;null!==this.vc&&(a=this.vc.J);this.U.clear();for(var b=this.Eb.length,c=0;c<b;c++)this.Eb.l[c].clear();this.lf.clear();this.Jk.clear();this.$p.clear();this.Rj.clear();this.Dp.clear();this.hb.clear();this.mh.clear();this.uj.clear();this.Rk.clear();this.Yt.wa();this.Yt.clear();this.Yt.freeze();this.nt.wa();this.nt.clear();this.nt.freeze();Rg=this.hm=null;Sg="";this.at=(new D(NaN,NaN,NaN,NaN)).freeze();null!==a&&(this.add(a),this.hb.remove(a));
this.ba()};
M.prototype.reset=M.prototype.reset=function(){this.Ub=!0;this.clear();this.Eb=new N(jg);this.YC();this.XC();this.xa=(new z(NaN,NaN)).freeze();this.Fb=1;this.pt=(new z(NaN,NaN)).freeze();this.qt=NaN;this.Ft=1E-4;this.Dt=100;this.pu=(new z(NaN,NaN)).freeze();this.gt=(new D(NaN,NaN,NaN,NaN)).freeze();this.Ck=ah;this.gm=ee;this.Cj=ah;this.Cm=ee;this.rt=this.ot=ud;this.Ms=(new qd(16,16,16,16)).freeze();this.ut=!0;this.lu=gi;this.No="auto";this.lh=this.Gh=this.wh=this.It=this.xh=this.yh=this.zh=this.kh=
this.ph=this.ih=null;this.Ej=!1;this.gj=this.fj=this.Cs=this.de=!0;this.Es=this.Ds=!1;this.Is=this.Fs=this.mt=this.lt=this.Js=this.Hs=this.oj=this.nj=this.mj=this.lj=this.jj=this.kj=this.ij=this.Gs=this.qj=this.hj=this.pj=!0;this.Wt=this.Vt=16;this.ge=(new qd(5)).freeze();this.Et=999999999;this.ed=null;rk(this);this.vc=null;this.Dh=!0;qk(this);this.vb=new lg;this.Dh=!1;this.U=new Xf;this.Ae=!1;this.wm=!0;this.Ub=this.Ue=!1;this.ba()};
M.prototype.rebuildParts=M.prototype.uk=function(){for(var a=this.zy.i;a.next();){var b=a.value,c=a.key;(!b.Zc()||b instanceof Wg)&&v('Invalid node template in Diagram.nodeTemplateMap: template for "'+c+'" must be a Node or a simple Part, not a Group or Link: '+b)}for(a=this.Wx.i;a.next();)b=a.value,c=a.key,b instanceof Wg||v('Invalid group template in Diagram.groupTemplateMap: template for "'+c+'" must be a Group, not a normal Node or Link: '+b);for(a=this.my.i;a.next();)b=a.value,c=a.key,b instanceof
W||v('Invalid link template in Diagram.linkTemplateMap: template for "'+c+'" must be a Link, not a normal Node or simple Part: '+b);a=ob();for(b=this.selection.i;b.next();)(c=b.value.data)&&a.push(c);for(var b=ob(),d=this.Tu.i;d.next();)(c=d.value.data)&&b.push(c);c=ob();for(d=this.Mf.i;d.next();){var e=d.value;null!==e.data&&(c.push(e.data),c.push(e.location))}for(d=this.links.i;d.next();)e=d.value,null!==e.data&&(c.push(e.data),c.push(e.location));for(d=this.bj.i;d.next();)e=d.value,null!==e.data&&
(c.push(e.data),c.push(e.location));d=this.U;d instanceof Xf&&Hl(this,d.$i);Hl(this,d.ng);Il(this,d.ng);d instanceof Xf&&Jl(this,d.$i);for(d=0;d<a.length;d++)e=this.Yg(a[d]),null!==e&&(e.Ia=!0);for(d=0;d<b.length;d++)e=this.Yg(b[d]),null!==e&&(e.ig=!0);for(d=0;d<c.length;d+=2)e=this.Yg(c[d]),null!==e&&(e.location=c[d+1]);pb(a);pb(b);pb(c)};
function Il(a,b){if(null!==b){for(var c=a.U,d=Ia(b),e=0;e<d;e++){var f=La(b,e);c.le(f)?Ll(a,f,!1):c instanceof Xf&&Ml(a,f)}if(c instanceof Xf||c instanceof Yf){for(e=0;e<d;e++)f=La(b,e),c.le(f)&&Ul(a,f);if(c instanceof Xf)for(c=a.links;c.next();)Vl(c.value)}Wl(a,!1)}}function Ll(a,b,c){if(void 0!==b&&null!==b&&!a.V.Ua&&!a.mh.contains(b)){void 0===c&&(c=!0);var d=a.Sx(b),e=Xl(a,b,d);null!==e&&(Yg(e),e=e.copy(),null!==e&&(e.hh=d,a.Yl&&(e.Fj="Tool"),a.add(e),e.data=b,c&&Ul(a,b)))}}M.prototype.Sx=function(a){return this.U.Sx(a)};
var Yl=!1,Zl=!1;function Xl(a,b,c){var d=!1,e=a.U;e instanceof Xf&&(d=e.hy(b));d?(b=a.Wx.ja(c),null===b&&(b=a.Wx.ja(""),null===b&&(Zl||(Zl=!0,Da('No Group template found for category "'+c+'"'),Da("  Using default group template")),b=a.Fz))):(b=a.zy.ja(c),null===b&&(b=a.zy.ja(""),null===b&&(Yl||(Yl=!0,Da('No Node template found for category "'+c+'"'),Da("  Using default node template")),b=a.Hz)));return b}
function Ul(a,b){var c=a.U;if(c instanceof Xf||c instanceof Yf){var d=c.$a(b);if(void 0!==d){var e=qg(c,d),f=a.Yg(b);if(null!==e&&null!==f){for(e=e.i;e.next();){var g=e.value;if(c instanceof Xf){var h=c;if(h.le(g)){if(f instanceof Wg&&h.Gl(g)===d){var k=f,g=a.Yg(g);null!==g&&(g.Ca=k)}}else{var l=a.Cf(g);if(null!==l&&f instanceof V&&(k=f,h.hk(g)===d&&(l.M=k),h.kk(g)===d&&(l.R=k),g=h.Zi(g),Fa(g)))for(h=0;h<Ia(g);h++)if(La(g,h)===d){k.ud=l;break}}}else c instanceof Yf&&(l=c,l.le(g)&&f instanceof V&&
(k=f,l.Hl(g)===d&&(g=a.Pu(g),Kl(a,k,g))))}sg(c,d)}c instanceof Xf?(c=c.Gl(b),void 0!==c&&(c=a.oe(c),c instanceof Wg&&(f.Ca=c))):c instanceof Yf&&(c=c.Hl(b),void 0!==c&&f instanceof V&&(k=f,f=a.oe(c),Kl(a,f,k)))}}}
function Kl(a,b,c){if(null!==b&&null!==c){var d=a.Ya.AC,e=b,f=c;if(a.Kc)for(b=f.Gd;b.next();){if(b.value.R===f)return}else for(e=c,f=b,b=e.Gd;b.next();)if(b.value.M===e)return;null!==d&&ii(d,e,f,null,!0)||(d=a.Ru(c.data),b=$l(a,d),null!==b&&(Yg(b),b=b.copy(),null!==b&&(b.hh=d,b.M=e,b.R=f,a.add(b),b.data=c.data)))}}function Jl(a,b){if(null!==b){for(var c=Ia(b),d=0;d<c;d++){var e=La(b,d);Ml(a,e)}Wl(a,!1)}}
function Ml(a,b){if(void 0!==b&&null!==b&&!a.V.Ua&&!a.uj.contains(b)){var c=a.Ru(b),d=$l(a,c);if(null!==d&&(Yg(d),d=d.copy(),null!==d)){d.hh=c;var c=a.U,e=c.kF(b);""!==e&&(d.Ef=e);e=c.hk(b);void 0!==e&&(e=a.oe(e),e instanceof V&&(d.M=e));e=c.nF(b);""!==e&&(d.wg=e);e=c.kk(b);void 0!==e&&(e=a.oe(e),e instanceof V&&(d.R=e));c=c.Zi(b);if(Fa(c))for(var e=Ia(c),f=0;f<e;f++){var g=La(c,f),g=a.oe(g);null!==g&&(g.ud=d)}a.add(d);d.data=b}}}
M.prototype.Ru=function(a){var b=this.U,c="";b instanceof Xf?c=b.Ru(a):b instanceof Yf&&(c=b.mF(a));return c};var am=!1;function $l(a,b){var c=a.my.ja(b);null===c&&(c=a.my.ja(""),null===c&&(am||(am=!0,Da('No Link template found for category "'+b+'"'),Da("  Using default link template")),c=a.Gz));return c}function Hl(a,b){for(var c=Ia(b),d=0;d<c;d++){var e=La(b,d);Nl(a,e)}}
function Nl(a,b){if(void 0!==b&&null!==b){var c=a.Yg(b);if(null!==c){c.Ia=!1;c.ig=!1;var d=c.layer;if(null!==d&&d.g===a){var e=a.U;if(e instanceof Xf&&c instanceof V){var f=c,g=e.$a(f.data);if(void 0!==g){for(var h=f.Gd;h.next();)rg(e,g,h.value.data);f.Ie&&(h=f.ud,null!==h&&rg(e,g,h.data));if(f instanceof Wg)for(f=f.lc;f.next();)h=f.value.data,e.le(h)&&rg(e,g,h)}}else if(e instanceof Yf&&c instanceof V){f=c;h=a.Cf(f.data);if(null!==h){h.Ia=!1;h.ig=!1;var k=h.layer;if(null!==k){var l=k.pe(-1,h,!1);
0<=l&&a.ec(Rf,"parts",k,h,null,l,null);l=h.Mr;null!==l&&l(h,k,null)}}h=a.Kc;for(f=f.Gd;f.next();)k=f.value,k=(h?k.R:k.M).data,e.le(k)&&rg(e,g,k)}e=d.pe(-1,c,!1);0<=e&&a.ec(Rf,"parts",d,c,null,e,null);e=c.Mr;null!==e&&e(c,d,null)}}}}M.prototype.findPartForKey=M.prototype.eF=function(a){if(null===a||void 0===a)return null;a=this.U.Fe(a);return null===a?null:this.mh.ja(a)};
M.prototype.findNodeForKey=M.prototype.oe=function(a){if(null===a||void 0===a)return null;a=this.U.Fe(a);if(null===a)return null;a=this.mh.ja(a);return a instanceof V?a:null};M.prototype.findPartForData=M.prototype.Yg=function(a){if(null===a)return null;var b=this.mh.ja(a);return null!==b?b:b=this.uj.ja(a)};M.prototype.findNodeForData=M.prototype.Pu=function(a){if(null===a)return null;a=this.mh.ja(a);return a instanceof V?a:null};
M.prototype.findLinkForData=M.prototype.Cf=function(a){return null===a?null:this.uj.ja(a)};M.prototype.findNodesByExample=function(a){for(var b=new Xb,c=this.$p.i;c.next();){var d=c.value,e=d.data;if(null!==e)for(var f=0;f<arguments.length;f++){var g=arguments[f];if(Ea(g)&&bm(this,e,g)){b.add(d);break}}}return b.i};
M.prototype.findLinksByExample=function(a){for(var b=new Xb,c=this.Dp.i;c.next();){var d=c.value,e=d.data;if(null!==e)for(var f=0;f<arguments.length;f++){var g=arguments[f];if(Ea(g)&&bm(this,e,g)){b.add(d);break}}}return b.i};function bm(a,b,c){for(var d in c){var e=b[d],f=c[d];if(Fa(f)){if(!Fa(e)||e.length>=f.length)return!1;for(var g=0;g<e.length;g++){var h=e[g],k=f[g];if(void 0!==k&&!cm(a,h,k))return!1}}else if(!cm(a,e,f))return!1}return!0}
function cm(a,b,c){if("function"===typeof c){if(!c(b))return!1}else if(c instanceof RegExp){if(!b||!c.test(b.toString()))return!1}else if(Ea(b)&&Ea(c)){if(!bm(a,b,c))return!1}else if(b!==c)return!1;return!0}G(M,{zI:"nodeTemplate"},function(){return this.Ah.ja("")},function(a){var b=this.Ah.ja("");b!==a&&(ra(a,O,M,"nodeTemplate"),this.Ah.add("",a),this.h("nodeTemplate",b,a),this.V.Ua||this.uk())});
G(M,{zy:"nodeTemplateMap"},function(){return this.Ah},function(a){var b=this.Ah;b!==a&&(ra(a,Fb,M,"nodeTemplateMap"),this.Ah=a,this.h("nodeTemplateMap",b,a),this.V.Ua||this.uk())});G(M,{WH:"groupTemplate"},function(){return this.xj.ja("")},function(a){var b=this.xj.ja("");b!==a&&(ra(a,Wg,M,"groupTemplate"),this.xj.add("",a),this.h("groupTemplate",b,a),this.V.Ua||this.uk())});
G(M,{Wx:"groupTemplateMap"},function(){return this.xj},function(a){var b=this.xj;b!==a&&(ra(a,Fb,M,"groupTemplateMap"),this.xj=a,this.h("groupTemplateMap",b,a),this.V.Ua||this.uk())});G(M,{nI:"linkTemplate"},function(){return this.ri.ja("")},function(a){var b=this.ri.ja("");b!==a&&(ra(a,W,M,"linkTemplate"),this.ri.add("",a),this.h("linkTemplate",b,a),this.V.Ua||this.uk())});
G(M,{my:"linkTemplateMap"},function(){return this.ri},function(a){var b=this.ri;b!==a&&(ra(a,Fb,M,"linkTemplateMap"),this.ri=a,this.h("linkTemplateMap",b,a),this.V.Ua||this.uk())});G(M,{GF:null},function(){return this.Ok},function(a){this.Ok=a});
G(M,{Yd:"isMouseCaptured"},function(){return this.hA},function(a){var b=this.Oa;null!==b&&(a?(this.C.bubbles=!1,b.removeEventListener("mousemove",this.On,!1),b.removeEventListener("mousedown",this.Nn,!1),b.removeEventListener("mouseup",this.Qn,!1),b.removeEventListener("mousewheel",this.lg,!1),b.removeEventListener("DOMMouseScroll",this.lg,!1),b.removeEventListener("mouseout",this.Pn,!1),window.addEventListener("mousemove",this.On,!0),window.addEventListener("mousedown",this.Nn,!0),window.addEventListener("mouseup",
this.Qn,!0),window.addEventListener("mousewheel",this.lg,!0),window.addEventListener("DOMMouseScroll",this.lg,!0),window.addEventListener("mouseout",this.Pn,!0),window.addEventListener("selectstart",this.preventDefault,!1)):(window.removeEventListener("mousemove",this.On,!0),window.removeEventListener("mousedown",this.Nn,!0),window.removeEventListener("mouseup",this.Qn,!0),window.removeEventListener("mousewheel",this.lg,!0),window.removeEventListener("DOMMouseScroll",this.lg,!0),window.removeEventListener("mouseout",
this.Pn,!0),window.removeEventListener("selectstart",this.preventDefault,!1),b.addEventListener("mousemove",this.On,!1),b.addEventListener("mousedown",this.Nn,!1),b.addEventListener("mouseup",this.Qn,!1),b.addEventListener("mousewheel",this.lg,!1),b.addEventListener("DOMMouseScroll",this.lg,!1),b.addEventListener("mouseout",this.Pn,!1)),this.hA=a)});
G(M,{position:"position"},function(){return this.xa},function(a){var b=this.xa;if(!b.A(a)){ra(a,z,M,"position");var c=this.Va.copy();a=a.copy();if(!this.Ub&&null!==this.Oa){this.Ub=!0;var d=this.scale;Gk(this,a,this.Wc,this.eb/d,this.cb/d,this.gm,!1);this.Ub=!1}this.xa=a.O();a=this.rb;a.Fc&&bk(a,b,this.xa);this.Ub||this.$r(c,this.Va)}});G(M,{xF:"initialPosition"},function(){return this.pt},function(a){this.pt.A(a)||(ra(a,z,M,"initialPosition"),this.pt=a.O())});
G(M,{yF:"initialScale"},function(){return this.qt},function(a){this.qt!==a&&(w(a,"number",M,"initialScale"),this.qt=a)});G(M,{Dr:"grid"},function(){null===this.vc&&yk(this);return this.vc},function(a){var b=this.vc;if(b!==a){null===b&&(yk(this),b=this.vc);ra(a,L,M,"grid");a.type!==zk&&v("Diagram.grid must be a Panel of type Panel.Grid");var c=b.I;null!==c&&c.remove(b);this.vc=a;a.name="GRID";null!==c&&c.add(a);Tk(this);this.ba();this.h("grid",b,a)}});
H(M,{Va:"viewportBounds"},function(){var a=this.pB;if(null===this.Oa)return a;var b=this.xa,c=this.Fb;a.k(b.x,b.y,Math.max(this.eb,0)/c,Math.max(this.cb,0)/c);return a});G(M,{dC:"fixedBounds"},function(){return this.gt},function(a){var b=this.gt;b.A(a)||(ra(a,D,M,"fixedBounds"),-Infinity!==a.width&&Infinity!==a.height&&-Infinity!==a.height||v("fixedBounds width/height must not be Infinity"),this.gt=a=a.O(),this.Rb(),this.h("fixedBounds",b,a))});
G(M,{eD:"scrollMargin"},function(){return this.hx},function(a){"number"===typeof a?a=new qd(a):ra(a,qd,M,"scrollMargin");var b=this.hx;b.A(a)||(this.hx=a=a.O(),this.Rb(),this.h("scrollMargin",b,a))});G(M,{fD:"scrollMode"},function(){return this.ix},function(a){var b=this.ix;b!==a&&(va(a,M,M,"scrollMode"),this.ix=a,a===kk&&Ek(this,!1),this.h("scrollMode",b,a))});
G(M,{OC:"positionComputation"},function(){return this.Zw},function(a){var b=this.Zw;b!==a&&(null!==a&&w(a,"function",M,"positionComputation"),this.Zw=a,Ek(this,!1),this.h("positionComputation",b,a))});G(M,{dD:"scaleComputation"},function(){return this.ax},function(a){var b=this.ax;b!==a&&(null!==a&&w(a,"function",M,"scaleComputation"),this.ax=a,El(this,this.scale,this.scale),this.h("scaleComputation",b,a))});H(M,{Wc:"documentBounds"},function(){return this.at});
function Hk(a,b){a.rh=!1;var c=a.at;c.A(b)||(b=b.O(),a.at=b,Ek(a,!1),a.ma("DocumentBoundsChanged",null,c.copy()),Qk(a))}G(M,{scale:"scale"},function(){return this.Fb},function(a){var b=this.Fb;ua(a,M,"scale");b!==a&&El(this,b,a)});G(M,{mn:"autoScale"},function(){return this.Ck},function(a){var b=this.Ck;b!==a&&(va(a,M,M,"autoScale"),this.Ck=a,this.h("autoScale",b,a),a!==ah&&Ek(this,!1))});
G(M,{ZH:"initialAutoScale"},function(){return this.Cj},function(a){var b=this.Cj;b!==a&&(va(a,M,M,"initialAutoScale"),this.Cj=a,this.h("initialAutoScale",b,a))});G(M,{zF:"initialViewportSpot"},function(){return this.rt},function(a){var b=this.rt;b!==a&&(ra(a,R,M,"initialViewportSpot"),a.Jc()||v("initialViewportSpot must be a real Spot: "+a),this.rt=a,this.h("initialViewportSpot",b,a))});
G(M,{wF:"initialDocumentSpot"},function(){return this.ot},function(a){var b=this.ot;b!==a&&(ra(a,R,M,"initialDocumentSpot"),a.Jc()||v("initialViewportSpot must be a real Spot: "+a),this.ot=a,this.h("initialDocumentSpot",b,a))});G(M,{kg:"minScale"},function(){return this.Ft},function(a){ua(a,M,"minScale");var b=this.Ft;b!==a&&(0<a?(this.Ft=a,this.h("minScale",b,a),a>this.scale&&(this.scale=a)):za(a,"> 0",M,"minScale"))});
G(M,{jg:"maxScale"},function(){return this.Dt},function(a){ua(a,M,"maxScale");var b=this.Dt;b!==a&&(0<a?(this.Dt=a,this.h("maxScale",b,a),a<this.scale&&(this.scale=a)):za(a,"> 0",M,"maxScale"))});G(M,{Ul:"zoomPoint"},function(){return this.pu},function(a){this.pu.A(a)||(ra(a,z,M,"zoomPoint"),this.pu=a=a.O())});G(M,{Fx:"contentAlignment"},function(){return this.gm},function(a){var b=this.gm;b.A(a)||(ra(a,R,M,"contentAlignment"),this.gm=a=a.O(),this.h("contentAlignment",b,a),Ek(this,!1))});
G(M,{$H:"initialContentAlignment"},function(){return this.Cm},function(a){var b=this.Cm;b.A(a)||(ra(a,R,M,"initialContentAlignment"),this.Cm=a=a.O(),this.h("initialContentAlignment",b,a))});G(M,{padding:"padding"},function(){return this.ge},function(a){"number"===typeof a?a=new qd(a):ra(a,qd,M,"padding");var b=this.ge;b.A(a)||(this.ge=a=a.O(),this.Rb(),this.h("padding",b,a))});H(M,{Mf:"nodes"},function(){return this.$p.i});H(M,{links:"links"},function(){return this.Dp.i});H(M,{bj:"parts"},function(){return this.hb.i});
M.prototype.findTopLevelGroups=function(){return this.Rj.i};G(M,{vb:"layout"},function(){return this.ed},function(a){var b=this.ed;b!==a&&(ra(a,lg,M,"layout"),null!==b&&(b.g=null,b.group=null),this.ed=a,a.g=this,a.group=null,this.Ks=!0,this.h("layout",b,a),this.vd())});M.prototype.layoutDiagram=function(a){Ck(this);a&&Wl(this,!0);Vk(this,!1)};function Wl(a,b){for(var c=a.Rj.i;c.next();)dm(a,c.value,b);null!==a.vb&&(b?a.vb.Ke=!1:a.vb.v())}
function dm(a,b,c){if(null!==b){for(var d=b.Qm.i;d.next();)dm(a,d.value,c);null!==b.vb&&(c?b.vb.Ke=!1:b.vb.v())}}function Vk(a,b){if(!a.mw){var c=a.vb,d=a.vt;a.vt=!0;var e=a.ya;a.ya=!0;try{a.Bb("Layout");for(var f=a.Rj.i;f.next();)em(a,f.value,b);c.Ke||b&&!c.wC||(c.doLayout(a),Ck(a),c.Ke=!0)}finally{a.od("Layout"),a.Ks=!c.Ke,a.vt=d,a.ya=e}}}
function em(a,b,c){if(null!==b){for(var d=b.Qm.i;d.next();)em(a,d.value,c);d=b.vb;null===d||d.Ke||c&&!d.wC||(b.Uw=!b.location.w(),d.doLayout(b),b.v(fm),d.Ke=!0,Xk(a,b))}}G(M,{Kc:"isTreePathToChildren"},function(){return this.ut},function(a){var b=this.ut;if(b!==a&&(w(a,"boolean",M,"isTreePathToChildren"),this.ut=a,this.h("isTreePathToChildren",b,a),!this.V.Ua))for(a=this.Mf;a.next();)gm(a.value)});
M.prototype.findTreeRoots=function(){for(var a=new N(V),b=this.Mf;b.next();){var c=b.value;c.bv&&null===c.xr()&&a.add(c)}return a.i};G(M,{Ed:null},function(){return this.$z},function(a){this.$z=a});
function lk(a){function b(a){var b=a.toLowerCase(),g=new N("function");c.add(a,g);c.add(b,g);d.add(a,a);d.add(b,a)}var c=new Fb("string",N),d=new Fb("string","string");b("AnimationStarting");b("AnimationFinished");b("BackgroundSingleClicked");b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("Modified");
b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");a.ow=c;a.nw=d}
function Pb(a,b){var c=a.nw.ja(b);return null!==c?c:a.nw.ja(b.toLowerCase())}function hm(a,b){var c=a.ow.ja(b);if(null!==c)return c;c=a.ow.ja(b.toLowerCase());if(null!==c)return c;v("Unknown DiagramEvent name: "+b);return null}M.prototype.addDiagramListener=M.prototype.yx=function(a,b){w(a,"string",M,"addDiagramListener:name");w(b,"function",M,"addDiagramListener:listener");var c=hm(this,a);null!==c&&c.add(b)};
M.prototype.removeDiagramListener=M.prototype.TC=function(a,b){w(a,"string",M,"removeDiagramListener:name");w(b,"function",M,"addDiagramListener:listener");var c=hm(this,a);null!==c&&c.remove(b)};M.prototype.raiseDiagramEvent=M.prototype.ma=function(a,b,c){var d=hm(this,a),e=new Gf;e.g=this;e.name=Pb(this,a);void 0!==b&&(e.Yy=b);void 0!==c&&(e.Cy=c);a=d.length;if(1===a)d=d.Y(0),d(e);else if(0!==a)for(b=d.ae(),c=0;c<a;c++)d=b[c],d(e);return e.cancel};
function bi(a,b){var c=!1;a.Va.Vi(b)&&(c=!0);c=a.Qx(b,function(a){return a.J},function(a){return a instanceof W},!0,function(a){return a instanceof W},c);if(0!==c.count)for(c=c.i;c.next();){var d=c.value;d.mk&&d.Ab()}}M.prototype.isUnoccupied=M.prototype.Hn=function(a,b){void 0===b&&(b=null);return im(this,!1,null,b).Hn(a.x,a.y,a.width,a.height)};
function im(a,b,c,d){null===a.Gc&&(a.Gc=new jm);if(a.Gc.Hr||a.Gc.group!==c||a.Gc.Wy!==d){if(null===c){b=a.rh?Dk(a):a.Wc.copy();b.Ze(100,100);a.Gc.initialize(b);b=bb();for(var e=a.Mf;e.next();){var f=e.value,g=f.layer;null!==g&&g.visible&&!g.bc&&km(a,f,d,b)}}else for(c.Q.w()||c.Ee(),b=c.Q.copy(),b.Ze(20,20),a.Gc.initialize(b),b=bb(),e=c.lc;e.next();)f=e.value,f instanceof V&&km(a,f,d,b);fb(b);a.Gc.group=c;a.Gc.Wy=d;a.Gc.Hr=!1}else b&&lm(a.Gc);return a.Gc}
function km(a,b,c,d){if(b!==c)if(b.sa()&&b.canAvoid()){c=b.getAvoidableRect(d);d=a.Gc.qn;b=a.Gc.on;for(var e=c.x+c.width,f=c.y+c.height,g=c.x;g<e;g+=d){for(var h=c.y;h<f;h+=b)mm(a.Gc,g,h);mm(a.Gc,g,f)}for(h=c.y;h<f;h+=b)mm(a.Gc,e,h);mm(a.Gc,e,f)}else if(b instanceof Wg)for(b=b.lc;b.next();)e=b.value,e instanceof V&&km(a,e,c,d)}function nm(a,b){null===a.Gc||a.Gc.Hr||null!==b&&!b.canAvoid()||(a.Gc.Hr=!0)}
M.prototype.simulatedMouseMove=M.prototype.Av=function(a,b,c){if(null!==qh){var d=qh.g;c instanceof M||(c=null);var e=rh;c!==e&&(null!==e&&e!==d&&null!==e.Ya.Yc&&(wh(e),qh.Yu=!1,e.Ya.Yc.doSimulatedDragLeave()),rh=c,null!==c&&c!==d&&null!==c.Ya.Yc&&(Dh(),e=c.Ya.Yc,zh.contains(e)||zh.add(e),c.Ya.Yc.doSimulatedDragEnter()));if(null===c||c===d||!c.zB||c.Ta||!c.kn)return!1;d=c.Ya.Yc;null!==d&&(null!==a?b=c.Yo(a):null===b&&(b=new z),c.tb.S=b,c.tb.dk=!1,c.tb.up=!1,d.doSimulatedDragOver());return!0}return!1};
M.prototype.simulatedMouseUp=M.prototype.qD=function(a,b,c,d){if(null!==qh){null===d&&(d=b);b=rh;var e=qh.g;if(d!==b){if(null!==b&&b!==e&&null!==b.Ya.Yc)return wh(b),qh.Yu=!1,b.Ya.Yc.doSimulatedDragLeave(),!1;rh=d;null!==d&&null!==d.Ya.Yc&&(Dh(),b=d.Ya.Yc,zh.contains(b)||zh.add(b),d.Ya.Yc.doSimulatedDragEnter())}if(null===d)return qh.doCancel(),!0;if(d!==this)return null!==a&&(c=d.Yo(a)),d.tb.S=c,d.tb.dk=!1,d.tb.up=!0,a=d.Ya.Yc,null!==a&&a.doSimulatedDrop(),a=qh,null!==a&&(d=a.mayCopy(),a.Oe=d?"Copy":
"Move",a.stopTool()),!0}return!1};G(M,{EB:"autoScrollRegion"},function(){return this.Ms},function(a){"number"===typeof a?a=new qd(a):ra(a,qd,M,"autoScrollRegion");var b=this.Ms;b.A(a)||(this.Ms=a=a.O(),this.Rb(),this.h("autoScrollRegion",b,a))});function Xh(a,b){a.Ls.assign(b);om(a,a.Ls).Wd(a.position)?wh(a):pm(a)}
function pm(a){-1===a.bm&&(a.bm=na(function(){if(-1!==a.bm){wh(a);var b=a.C.event;if(null!==b){var c=om(a,a.Ls);c.Wd(a.position)||(a.position=c,a.C.S=a.ED(a.Ls),a.Av(b,null,b.target.N)||a.doMouseMove(),a.rh=!0,Hk(a,a.zf()),a.dd=!0,a.te(),pm(a))}}},a.UD))}function wh(a){-1!==a.bm&&(window.clearInterval(a.bm),a.bm=-1)}
function om(a,b){var c=a.position,d=a.EB;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.Va,f=a.scale,e=db(0,0,e.width*f,e.height*f),g=Wa(0,0);if(b.x>=e.x&&b.x<e.x+d.left){var h=Math.max(a.js,1),h=h|0;g.x-=h;b.x<e.x+d.left/2&&(g.x-=h);b.x<e.x+d.left/4&&(g.x-=4*h)}else b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(h=Math.max(a.js,1),h|=0,g.x+=h,b.x>e.x+e.width-d.right/2&&(g.x+=h),b.x>e.x+e.width-d.right/4&&(g.x+=4*h));b.y>=e.y&&b.y<e.y+d.top?(h=Math.max(a.ks,1),h|=0,g.y-=h,b.y<e.y+d.top/
2&&(g.y-=h),b.y<e.y+d.top/4&&(g.y-=4*h)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(h=Math.max(a.ks,1),h|=0,g.y+=h,b.y>e.y+e.height-d.bottom/2&&(g.y+=h),b.y>e.y+e.height-d.bottom/4&&(g.y+=4*h));g.Wd(Q.ej)||(c=new z(c.x+g.x/f,c.y+g.y/f));fb(e);A(g);return c}M.prototype.makeSVG=M.prototype.makeSvg=function(a){void 0===a&&(a=new Sb);a.context="svg";a=qm(this,a);return null!==a?a.zk:null};
M.prototype.makeImage=function(a){void 0===a&&(a=new Sb);var b=(a.document||document).createElement("img");b.src=this.UF(a);return b};M.prototype.makeImageData=M.prototype.UF=function(a){void 0===a&&(a=new Sb);var b=qm(this,a);return null!==b?b.toDataURL(a.type,a.details):""};var rm=!1;
function qm(a,b){a.rb.Wh();a.te();if(null===a.Oa)return null;"object"!==typeof b&&v("properties argument must be an Object.");var c=!1,d=b.size||null,e=b.scale||null;void 0!==b.scale&&isNaN(b.scale)&&(e="NaN");var f=b.maxSize;void 0===b.maxSize&&(c=!0,f="svg"===b.context?new Za(Infinity,Infinity):new Za(2E3,2E3));var g=b.position||null,h=b.parts||null,k=void 0===b.padding?1:b.padding,l=b.background||null,m=b.omitTemporary;void 0===m&&(m=!0);var n=b.document||document,p=b.elementFinished||null,q=b.showTemporary;
void 0===q&&(q=!m);m=b.showGrid;void 0===m&&(m=q);null!==d&&isNaN(d.width)&&isNaN(d.height)&&(d=null);"number"===typeof k?k=new qd(k):k instanceof qd||(k=new qd(0));k.left=Math.max(k.left,0);k.right=Math.max(k.right,0);k.top=Math.max(k.top,0);k.bottom=Math.max(k.bottom,0);a.sm=!1;xk(a);var s=new Rb(null,n),t=s.getContext("2d"),u=s;if(!(d||e||h||g))return s.width=a.eb+Math.ceil(k.left+k.right),s.height=a.cb+Math.ceil(k.top+k.bottom),"svg"===b.context&&(t=u=new re(s.Xc,n,p),t instanceof re&&(a.sm=!0)),
rl(a,t,k,new Za(s.width,s.height),a.Fb,a.xa,h,l,q,m),a.sm=!0,u;var x=a.ib.Hu,B=new z(0,0),y=a.Wc.copy();y.TG(a.padding);if(q)for(var C=!0,C=a.Eb.l,K=C.length,J=0;J<K;J++){var ba=C[J];if(ba.visible&&ba.bc)for(var ja=ba.hb.l,ba=ja.length,Y=0;Y<ba;Y++){var P=ja[Y];P.iy&&P.sa()&&(P=P.Q,P.w()&&y.eh(P))}}B.x=y.x;B.y=y.y;if(null!==h){var ha,C=!0,ja=h.i;for(ja.reset();ja.next();)K=ja.value,K instanceof O&&(P=K,ba=P.layer,null!==ba&&!ba.visible||null!==ba&&!q&&ba.bc||!P.sa()||(P=P.Q,P.w()&&(C?(C=!1,ha=P.copy()):
ha.eh(P))));C&&(ha=new D(0,0,0,0));y.width=ha.width;y.height=ha.height;B.x=ha.x;B.y=ha.y}null!==g&&g.w()&&(B=g,e||(e=x));C=ja=0;null!==k&&(ja=k.left+k.right,C=k.top+k.bottom);J=K=0;null!==d&&(K=d.width,J=d.height,isFinite(K)&&(K=Math.max(0,K-ja)),isFinite(J)&&(J=Math.max(0,J-C)));ha=g=0;null!==d&&null!==e?("NaN"===e&&(e=x),d.w()?(g=K,ha=J):isNaN(J)?(g=K,ha=y.height*e):(g=y.width*e,ha=J)):null!==d?d.w()?(e=Math.min(K/y.width,J/y.height),g=K,ha=J):isNaN(J)?(e=K/y.width,g=K,ha=y.height*e):(e=J/y.height,
g=y.width*e,ha=J):null!==e?"NaN"===e&&f.w()?(e=Math.min((f.width-ja)/y.width,(f.height-C)/y.height),e>x?(e=x,g=y.width,ha=y.height):(g=f.width,ha=f.height)):(g=y.width*e,ha=y.height*e):(e=x,g=y.width,ha=y.height);null!==k?(g+=ja,ha+=C):k=new qd(0);null!==f&&(d=f.width,f=f.height,"svg"!==b.context&&c&&!rm&&(g>d||ha>f)&&(Da("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(g)+"x"+Math.ceil(ha)+" vs 2000x2000) Consider increasing the max size."),rm=!0),
isNaN(d)&&(d=2E3),isNaN(f)&&(f=2E3),isFinite(d)&&(g=Math.min(g,d)),isFinite(f)&&(ha=Math.min(ha,f)));s.width=Math.ceil(g);s.height=Math.ceil(ha);"svg"===b.context&&(t=u=new re(s.Xc,n,p),t instanceof re&&(a.sm=!0));rl(a,t,k,new Za(Math.ceil(g),Math.ceil(ha)),e,B,h,l,q,m);a.sm=!0;return u}M.inherit=function(a,b){w(a,"function",M,"inherit");w(b,"function",M,"inherit");b.Og&&v("Cannot inherit from "+xa(b));yb(a,b)};
function sk(){this.kE="63ad05bbe23a1786468a4c741b6d2";this.kE===this._tk?this.Fg=!0:sm(this,!1)}
function sm(a,b){var c="p",d=window[tc("76a715b2f73f148a")][tc("72ba13b5")];if(tc("77bb5bb2f32603de")===window[tc("76a715b2f73f148a")][tc("6aba19a7ec351488")])try{a.Fg=!window[tc("4da118b7ec2108")]([tc("5bb806bfea351a904a84515e1b6d38b6")])([tc("49bc19a1e6")])([tc("59bd04a1e6380fa5539b")])([tc("7bb8069ae7")]===tc("7da71ca0ad381e90"));if(!1===a.Fg)return;a.Fg=!window[tc("4da118b7ec2108")]([tc("5bb806bfea351a904a84515e1b6d38b6")])([tc("49bc19a1e6")])([tc("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([tc("7bb8069ae7")]===tc("7da71ca0ad381e90"));
if(!1===a.Fg)return}catch(e){}for(var f=d[tc("76ad18b4f73e")],g=d[tc("73a612b6fb191d")](tc("35e7"))+2;g<f;g++)c+=d[g];d=c[tc("73a612b6fb191d")](tc("7da71ca0ad381e90"));0>=d&&tc("7da71ca0ad381e90")!==tc("7da71ca0ad381e90")&&(d=c[tc("73a612b6fb191d")](tc("76a715b2ef3e149757")));a.Fg=!(0<d&&d<c[tc("73a612b6fb191d")](tc("35")));a.Fg&&(c=window.document[tc("79ba13b2f7333e8846865a7d00")]("div"),d=tc("02cncncn"),"."===d[0]&&(d=d[tc("69bd14a0f724128a44")](1)),c[tc("79a417a0f0181a8946")]=d,window.document[tc("78a712aa")]?
(window.document[tc("78a712aa")][tc("7bb806b6ed32388c4a875b")](c),d=window[tc("7dad0290ec3b0b91578e5b40007031bf")](c)[tc("7dad0283f1390b81519f4645156528bf")](tc("78a704b7e62456904c9b12701b6532a8")),window.document[tc("78a712aa")][tc("68ad1bbcf533388c4a875b")](c),d&&-1!==d.indexOf(tc("@COLOR1"))&&-1!==d.indexOf(tc("@COLOR2"))&&(a.Fg=!1)):(a.Fg=null,b&&(a.Fg=!1)))}function pl(a,b){b.Uf.setTransform(b.Ce,0,0,b.Ce,0,0);null===a.Fg&&sm(a,!0);return 0<a.Fg&&a!==a.iE?!0:!1}
sk.prototype.t=function(){this.iE=null};
function tk(a,b){void 0!==b&&null!==b||v("Diagram setup requires an argument DIV.");null!==a.pb&&v("Diagram has already completed setup.");"string"===typeof b?a.pb=window.document.getElementById(b):b instanceof HTMLDivElement?a.pb=b:v("No DIV or DIV id supplied: "+b);null===a.pb&&v("Invalid DIV id; could not get element with id: "+b);void 0!==a.pb.N&&v("Invalid div id; div already has a Diagram associated with it.");"static"===window.getComputedStyle(a.pb,null).position&&(a.pb.style.position="relative");
a.pb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)";a.pb.style["-ms-touch-action"]="none";a.pb.innerHTML="";a.pb.N=a;var c=new Rb(a);c.Xc.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";void 0!==c.style&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px","rtl"===window.getComputedStyle(a.pb,null).getPropertyValue("direction")&&(a.jA=!0),c.style.zIndex="2",c.style.bJ="none",c.style.webkitUserSelect="none",c.style.MozUserSelect=
"none");a.eb=a.pb.clientWidth||1;a.cb=a.pb.clientHeight||1;a.Oa=c;a.Uf=c.getContext("2d");var d=a.Uf;a.Ce=a.computePixelRatio();tl(a,a.eb,a.cb);a.Qv=d[tc("7eba17a4ca3b1a8346")][tc("78a118b7")](d,uc,4,4);a.pb.insertBefore(c.Xc,a.pb.firstChild);c=new Rb(null);c.width=1;c.height=1;a.qw=c;a.Rz=c.getContext("2d");var c=oa("div"),d=oa("div"),e=oa("div"),f=oa("div");c.style.position="absolute";c.style.overflow="auto";c.style.width=a.eb+"px";c.style.height=a.cb+"px";c.style.zIndex="1";d.style.position="absolute";
d.style.overflow="auto";d.style.width=a.eb+"px";d.style.height=a.cb+"px";d.style.zIndex="1";e.style.position="absolute";e.style.width="1px";e.style.height="1px";f.style.position="absolute";f.style.width="1px";f.style.height="1px";a.pb.appendChild(c);a.pb.appendChild(d);c.appendChild(e);d.appendChild(f);c.onscroll=a.yA;c.onmousedown=a.Mt;c.ontouchstart=a.Mt;c.N=a;c.PA=!0;d.onscroll=a.yA;d.onmousedown=a.Mt;d.ontouchstart=a.Mt;d.N=a;d.QA=!0;a.Ei=c;a.Fi=d;a.ex=e;a.gx=f;a.PC=ia(function(){a.nl=null;a.ba()},
300);a.JD=ia(function(){Pj(a)},250);a.preventDefault=function(a){a.preventDefault();return!1};a.On=function(b){if(a.isEnabled){a.Ok=!0;var c=a.ic;ca&&c.qk?(b.preventDefault(),b.simulated=!0,a.Jq=b):(a.ic=a.tb,a.tb=c,Lk(a,a,b,c,!0),a.Av(b,null,b.target.N)||(a.doMouseMove(),a.Ha.isBeyondDragSize()&&(dh(a),a.Tk=0)))}};a.Nn=function(b){if(a.isEnabled){a.Ok=!0;var c=a.ic;if(ca&&null!==a.Jq)a.Jq=b,b.preventDefault();else if(ca&&400>b.timeStamp-a.Uk)b.preventDefault();else if(a.ic=a.tb,a.tb=c,Lk(a,a,b,c,
!0),c.dk=!0,c.ke=b.detail,a.wj=c.copy(),!0===c.To.simulated)b.preventDefault(),b.simulated=!0;else if(qh=null,a.doMouseDown(),1===b.button)return b.preventDefault(),!1}};a.Qn=function(b){if(a.isEnabled){a.Ok=!0;var c=a.ic;if(ca){if(400>b.timeStamp-a.Uk){b.preventDefault();return}a.Uk=b.timeStamp}if(ca&&null!==a.Jq)a.Jq=null,b.preventDefault();else{a.ic=a.tb;a.tb=c;Lk(a,a,b,c,!0);c.up=!0;c.ke=b.detail;if(da||ea)b.timeStamp-a.Uk<a.mB&&!a.Ha.isBeyondDragSize()?a.Tk++:a.Tk=1,a.Uk=b.timeStamp,c.ke=a.Tk;
c.bubbles=b.bubbles;b.target.N&&(c.Qf=b.target.N);a.qD(b,null,new z,c.Qf)||(a.doMouseUp(),wh(a),Pk(c,b))}}};a.lg=function(b){if(a.isEnabled){var c=a.ic;a.ic=a.tb;a.tb=c;Lk(a,a,b,c,!0);c.bubbles=!0;c.bk=void 0!==b.wheelDelta?b.wheelDelta:-40*b.detail;a.doMouseWheel();Pk(c,b)}};a.Pn=function(){if(a.isEnabled){a.Ok=!1;var b=a.Ha;b.cancelWaitAfter();b instanceof Tg&&b.hideToolTip()}};a.zD=function(b){if(a.isEnabled){a.eu=!1;a.Kw=!0;var c=a.ic;a.ic=a.tb;a.tb=c;Nk(a,b,b.targetTouches[0],c,1<b.touches.length);
a.doMouseDown();2>b.touches.length&&Kk(a,c);Pk(c,b)}};a.yD=function(b){if(a.isEnabled){var c=a.ic;a.ic=a.tb;a.tb=c;var d=null;0<b.changedTouches.length?d=b.changedTouches[0]:0<b.targetTouches.length&&(d=b.targetTouches[0]);Ok(a,b,d,c,1<b.touches.length);(a.Ha.isBeyondDragSize()||1<b.touches.length)&&dh(a);a.Av(d?d:b,null,c.Qf)||(a.doMouseMove(),Pk(c,b))}};a.xD=function(b){if(a.isEnabled){dh(a);if(a.eu)return b.preventDefault(),!1;var c=a.ic;a.ic=a.tb;a.tb=c;if(1<b.touches.length)a.Am&&(a.yw=!1);else{var d=
null,e=null;0<b.changedTouches.length?e=b.changedTouches[0]:0<b.targetTouches.length&&(e=b.targetTouches[0]);c.g=a;c.ke=1;if(null!==e){var d=window.document.elementFromPoint(e.clientX,e.clientY),f,n;d&&d.N?(n=e,f=d.N):(n=b.changedTouches[0],f=a);Mk(f,n,c);f=e.screenX;n=e.screenY;var p=a.nA;b.timeStamp-a.Uk<a.mB&&!(25<Math.abs(p.x-f)||25<Math.abs(p.y-n))?a.Tk++:a.Tk=1;c.ke=a.Tk;a.Uk=b.timeStamp;a.nA.k(f,n)}c.Bc=0;c.button=0;c.dk=!1;c.up=!0;c.bk=0;c.qc=!1;c.bubbles=!1;c.event=b;c.timestamp=Date.now();
c.Qf=null===d?b.target.N:d.N?d.N:null;c.Kd=null;a.qD(e?e:b,null,new z,c.Qf)||(a.doMouseUp(),Pk(c,b),a.Kw=!1)}}};a.kG=function(b){if("touch"===b.pointerType){var c=a.JA;void 0===c[b.pointerId]&&(a.iq++,c[b.pointerId]=b);a.Te[0]=null;a.Te[1]=null;for(var d in c)if(null===a.Te[0])a.Te[0]=c[d];else if(null===a.Te[1]){a.Te[1]=c[d];break}a.isEnabled&&(a.eu=!1,c=a.ic,a.ic=a.tb,a.tb=c,Nk(a,b,b,c,1<a.iq),a.doMouseDown(),2>a.iq&&Kk(a,c),Pk(c,b))}};a.mG=function(b){if("touch"===b.pointerType&&!(2>a.iq)){var c=
a.Te;c[0].pointerId===b.pointerId&&(c[0]=b);c[1].pointerId===b.pointerId&&(c[1]=b);a.isEnabled&&(c=a.ic,a.ic=a.tb,a.tb=c,Ok(a,b,b,c,!0),dh(a),a.Av(b,null,c.Qf)||(a.doMouseMove(),Pk(c,b)))}};a.lG=function(b){if("touch"===b.pointerType){var c=a.JA;void 0!==c[b.pointerId]&&(a.iq--,delete c[b.pointerId],c=a.Te,null!==c[0]&&c[0].pointerId===b.pointerId&&(c[0]=null),null!==c[1]&&c[1].pointerId===b.pointerId&&(c[1]=null))}};xk(a);wk(a)}
function tm(a){1<arguments.length&&v("Palette constructor can only take one optional argument, the DIV HTML element or its id.");M.call(this,a);this.tu=!0;this.Wj=!1;this.Ta=!0;this.Fx=vd;this.vb=new um}yb(tm,M);vb("Palette",tm);
function pk(a){1<arguments.length&&v("Overview constructor can only take one optional argument, the DIV HTML element or its id.");M.call(this,a);this.gh.isEnabled=!1;this.Ub=!0;this.Bi=null;this.$D=this.dt=!0;this.IG("drawShadows",!1);var b=new O,c=new X;c.stroke="magenta";c.Na=2;c.fill="transparent";c.name="BOXSHAPE";b.wk=!0;b.Py="BOXSHAPE";b.oy="BOXSHAPE";b.aD="BOXSHAPE";b.cursor="move";b.add(c);this.Ek=b;c=new Vg;c.type=Ri;c.qe=Dd;var d=new Si;d.Hf=!0;c.add(d);d=new X;d.Si=Dd;d.jb="Rectangle";
d.ka=new Za(64,64);d.cursor="se-resize";d.alignment=Hd;c.add(d);b.ZC=c;this.ql=this.Ti=!1;this.De=this.hr=!0;this.EB=0;this.ox=oa("canvas");this.jE=this.ox.getContext("2d");this.Ya.Yc=new vm;this.Ya.bD=new wm;var e=this;this.click=function(){var a=e.Bi;if(null!==a){var b=a.Va,c=e.C.S;a.position=new z(c.x-b.width/2,c.y-b.height/2)}};this.LC=function(){xm(e)};this.KC=function(){null!==e.Bi&&(e.Rb(),e.ba())};this.mn=Ik;this.Ub=!1}yb(pk,M);vb("Overview",pk);
function ym(a){a.Ub||a.Pc||!1!==a.Ue||(a.Ue=!0,requestAnimationFrame(function(){if(a.Ue&&!a.Pc&&(a.Ue=!1,null!==a.pb)){a.Pc=!0;Ck(a);a.Wc.w()||Hk(a,a.zf());null===a.pb&&v("No div specified");null===a.Oa&&v("No canvas specified");if(a.dd){var b=a.Bi;if(null!==b&&!b.rb.hg&&!b.rb.Fc){var b=a.Uf,c=a.ox;b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,a.Oa.width,a.Oa.height);b.drawImage(c,0,0);c=a.kd;c.reset();1!==a.Fb&&c.scale(a.scale);0===a.position.x&&0===a.position.y||c.translate(-a.xa.x,-a.xa.y);b.setTransform(c.m11,
c.m12,c.m21,c.m22,c.dx,c.dy);for(var c=a.Eb.l,d=c.length,e=0;e<d;e++)c[e].ne(b,a);a.Dj=!1;a.dd=!1}}a.Pc=!1}}))}pk.prototype.computePixelRatio=function(){return 1};
pk.prototype.ne=function(){null===this.pb&&v("No div specified");null===this.Oa&&v("No canvas specified");if(this.dd){var a=this.Bi;if(null!==a&&!a.rb.hg&&!a.rb.Fc){if(!this.$D){var b=a.Ya.Yc;if(null!==b&&b.ca)return}nl(this);b=a.Dr;(null!==b&&b.visible&&isNaN(b.width)||isNaN(b.height))&&Tk(a);var c=this.Oa,b=this.Uf,d=this.ox,e=this.jE;d.width=c.width;d.height=c.height;b.As="";b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.Oa.width,this.Oa.height);d=this.kd;d.reset();1!==this.Fb&&d.scale(this.scale);
0===this.position.x&&0===this.position.y||d.translate(-this.xa.x,-this.xa.y);b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy);for(var d=this.dt,f=this.Va,g=a.Eb.l,h=g.length,a=0;a<h;a++){var k=g[a],l=b,m=f,n=d;void 0===n&&(n=!0);if(n||!k.bc)for(var n=this.scale,k=k.hb.l,p=k.length,q=0;q<p;q++){var s=k[q],t=s.Q;t.Gf(m)&&(1<t.width*n||1<t.height*n?s.ne(l,this):fk(s,l))}}e.drawImage(c.Xc,0,0);c=this.Eb.l;e=c.length;for(a=0;a<e;a++)c[a].ne(b,this);this.dd=this.Dj=!1}}};
G(pk,{By:"observed"},function(){return this.Bi},function(a){var b=this.Bi;null!==a&&ra(a,M,pk,"observed");a instanceof pk&&v("Overview.observed Diagram may not be an Overview itself: "+a);b!==a&&(null!==b&&(this.remove(this.fg),b.TC("ViewportBoundsChanged",this.LC),b.TC("DocumentBoundsChanged",this.KC),b.Zk.remove(this)),this.Bi=a,null!==a&&(a.yx("ViewportBoundsChanged",this.LC),a.yx("DocumentBoundsChanged",this.KC),a.Zk.add(this),this.add(this.fg),xm(this)),this.Rb(),this.h("observed",b,a))});
G(pk,{fg:"box"},function(){return this.Ek},function(a){var b=this.Ek;b!==a&&(this.Ek=a,this.remove(b),this.add(this.Ek),xm(this),this.h("box",b,a))});G(pk,{TH:"drawsTemporaryLayers"},function(){return this.dt},function(a){this.dt!==a&&(this.dt=a,this.Iy())});function xm(a){var b=a.fg;if(null!==b){var c=a.Bi;if(null!==c){a.dd=!0;var c=c.Va,d=b.ls,e=Ya();e.k(c.width,c.height);d.ka=e;$a(e);a=2/a.scale;d instanceof X&&(d.Na=a);b.location=new z(c.x-a/2,c.y-a/2)}}}
pk.prototype.zf=function(){var a=this.Bi;return null===a?Q.TD:a.Wc};pk.prototype.$x=function(){!0!==this.dd&&(this.dd=!0,ym(this))};pk.prototype.$r=function(a){this.Ub||(Ak(this),this.ba(),Qk(this),this.Rb(),xm(this),this.ma("ViewportBoundsChanged",null,a))};function vm(){$g.call(this);this.Lj=null}yb(vm,$g);
vm.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.g;if(null===a||!a.Wj||!a.De)return!1;var b=a.By;if(null===b)return!1;if(null===this.findDraggablePart()){var c=b.Va;this.Lj=new z(c.width/2,c.height/2);a=a.Yb.S;b.position=new z(a.x-this.Lj.x,a.y-this.Lj.y)}return!0};vm.prototype.doActivate=function(){this.Lj=null;$g.prototype.doActivate.call(this)};
vm.prototype.moveParts=function(){var a=this.g,b=a.By;if(null!==b){var c=a.fg;if(null!==c){if(null===this.Lj){var d=a.Yb.S,c=c.location;this.Lj=new z(d.x-c.x,d.y-c.y)}a=a.C.S;b.position=new z(a.x-this.Lj.x,a.y-this.Lj.y)}}};function wm(){Pi.call(this)}yb(wm,Pi);wm.prototype.resize=function(a){var b=this.g.By;if(null!==b){var c=b.Va.copy();b.position=a.position;(c.width!==a.width||c.height!==a.height)&&0<a.width&&0<a.height&&(b.scale=Math.min(c.width/a.width,c.height/a.height))}};
function $f(a){1<arguments.length&&v("Brush constructor can take at most one optional argument, the Brush type.");sb(this);this.qa=!1;void 0===a?(this.fa=bg,this.fm="black"):"string"===typeof a?(this.fa=bg,this.fm=a):(this.fa=a,this.fm="black");var b=this.fa;b===cg?(this.an=vd,this.um=Gd):this.um=b===dg?this.an=Dd:this.an=td;this.bu=0;this.et=NaN;this.Tf=this.Rt=this.Sf=null;this.Zv=this.$v=0}vb("Brush",$f);var bg;$f.Solid=bg=I($f,"Solid",0);var cg;$f.Linear=cg=I($f,"Linear",1);var dg;
$f.Radial=dg=I($f,"Radial",2);var zm;$f.Pattern=zm=I($f,"Pattern",4);$f.prototype.copy=function(){var a=new $f;a.fa=this.fa;a.fm=this.fm;a.an=this.an.O();a.um=this.um.O();a.bu=this.bu;a.et=this.et;null!==this.Sf&&(a.Sf=this.Sf.copy());a.Rt=this.Rt;return a};$f.prototype.va=function(){this.freeze();Object.freeze(this);return this};$f.prototype.freeze=function(){this.qa=!0;null!==this.Sf&&this.Sf.freeze();return this};
$f.prototype.wa=function(){Object.isFrozen(this)&&v("cannot thaw constant: "+this);this.qa=!1;null!==this.Sf&&this.Sf.wa();return this};$f.prototype.toString=function(){var a="Brush(";if(this.type===bg)a+=this.color;else if(a=this.type===cg?a+"Linear ":this.type===dg?a+"Radial ":this.type===zm?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,null!==this.lr)for(var b=this.lr.i;b.next();)a+=" "+b.key+":"+b.value;return a+")"};
$f.prototype.addColorStop=$f.prototype.addColorStop=function(a,b){pa(this);("number"!==typeof a||!isFinite(a)||1<a||0>a)&&za(a,"0 <= loc <= 1",$f,"addColorStop:loc");w(b,"string",$f,"addColorStop:color");null===this.Sf&&(this.Sf=new Fb("number","string"));this.Sf.add(a,b);this.fa===bg&&(this.type=cg);this.Tf=null};
G($f,{type:"type"},function(){return this.fa},function(a){pa(this,a);va(a,$f,$f,"type");this.fa=a;this.start.Fd()&&(a===cg?this.start=vd:a===dg&&(this.start=Dd));this.end.Fd()&&(a===cg?this.end=Gd:a===dg&&(this.end=Dd));this.Tf=null});G($f,{color:"color"},function(){return this.fm},function(a){pa(this,a);this.fm=a;this.Tf=null});G($f,{start:"start"},function(){return this.an},function(a){pa(this,a);ra(a,R,$f,"start");this.an=a.O();this.Tf=null});
G($f,{end:"end"},function(){return this.um},function(a){pa(this,a);ra(a,R,$f,"end");this.um=a.O();this.Tf=null});G($f,{qs:"startRadius"},function(){return this.bu},function(a){pa(this,a);ua(a,$f,"startRadius");0>a&&za(a,">= zero",$f,"startRadius");this.bu=a;this.Tf=null});G($f,{rr:"endRadius"},function(){return this.et},function(a){pa(this,a);ua(a,$f,"endRadius");0>a&&za(a,">= zero",$f,"endRadius");this.et=a;this.Tf=null});
G($f,{lr:"colorStops"},function(){return this.Sf},function(a){pa(this,a);this.Sf=a;this.Tf=null});G($f,{pattern:"pattern"},function(){return this.Rt},function(a){pa(this,a);this.Rt=a;this.Tf=null});
$f.randomColor=function(a,b){void 0===a&&(a=128);void 0===b&&(b=Math.max(a,255));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),e=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);2>d.length&&(d="0"+d);2>e.length&&(e="0"+e);2>c.length&&(c="0"+c);return"#"+d+e+c};var Am=oa("canvas").getContext("2d");
$f.isValidColor=function(a){if("black"===a)return!0;if(""===a)return!1;Am.fillStyle="#000000";var b=Am.fillStyle;Am.fillStyle=a;if(Am.fillStyle!==b)return!0;Am.fillStyle="#FFFFFF";b=Am.fillStyle;Am.fillStyle=a;return Am.fillStyle!==b};
function U(){sb(this);this.T=30723;this.Se=1;this.cg=null;this.zb="";this.Nb=this.ob=null;this.xa=(new z(NaN,NaN)).freeze();this.ye=(new Za(NaN,NaN)).freeze();this.xi=Q.no;this.vi=Q.SD;this.kd=new ib;this.$l=new ib;this.Hj=new ib;this.Fb=this.bt=1;this.am=0;this.Tg=Bm;this.Gp=Q.mo;this.mc=(new D(NaN,NaN,NaN,NaN)).freeze();this.Cb=(new D(NaN,NaN,NaN,NaN)).freeze();this.hc=(new D(0,0,NaN,NaN)).freeze();this.Sq=this.Uo=this.G=this.jq=this.kq=null;this.Tq=this.Vo=Infinity;this.to=this.Nd=ee;this.xq=0;
this.Di=1;this.Ao=0;this.fi=1;this.Bq=-Infinity;this.Aq=0;this.Cq=Q.ej;this.Dq=Ei;this.Ho="";this.gc=this.F=null;this.cm=-1;this.al=this.jh=this.Gk=this.$m=null}U.Og=!0;vb("GraphObject",U);
U.prototype.cloneProtected=function(a){a.T=this.T|6144;a.Se=this.Se;a.zb=this.zb;a.ob=this.ob;a.Nb=this.Nb;a.xa.assign(this.xa);a.ye.assign(this.ye);a.xi=this.xi.O();a.vi=this.vi.O();a.Hj=this.Hj.copy();a.Fb=this.Fb;a.am=this.am;a.Tg=this.Tg;a.Gp=this.Gp.O();a.mc.assign(this.mc);a.Cb.assign(this.Cb);a.hc.assign(this.hc);a.jq=this.jq;a.G=null!==this.G?this.G.copy():null;a.Uo=this.Uo;a.Vo=this.Vo;a.Sq=this.Sq;a.Tq=this.Tq;a.Nd=this.Nd.O();a.to=this.to.O();a.xq=this.xq;a.Di=this.Di;a.Ao=this.Ao;a.fi=
this.fi;a.Bq=this.Bq;a.Aq=this.Aq;a.Cq=this.Cq.O();a.Dq=this.Dq;a.Ho=this.Ho;a.F=null!==this.F?this.F.copy():null;a.gc=this.gc;a.cm=this.cm;if(null!==this.Gk){a.Gk=Ka(this.Gk);for(var b=0;b<this.Gk.length;b++){var c=this.Gk[b];a[c]=this[c]}}null!==this.jh&&(a.jh=this.jh.copy())};U.prototype.Xg=function(a){a.kq=null;a.al=null;a.H()};U.prototype.clone=function(){var a=new this.constructor;this.cloneProtected(a);return a};U.prototype.copy=function(){return this.clone()};
U.prototype.toString=function(){return xa(Object.getPrototypeOf(this))+"#"+ub(this)};var Ti;U.None=Ti=I(U,"None",0);var Bm;U.Default=Bm=I(U,"Default",0);var Cm;U.Vertical=Cm=I(U,"Vertical",4);var Dm;U.Horizontal=Dm=I(U,"Horizontal",5);var Ne;U.Fill=Ne=I(U,"Fill",3);var Vi;U.Uniform=Vi=I(U,"Uniform",1);var Wi;U.UniformToFill=Wi=I(U,"UniformToFill",2);function Em(a){a.F=new Fm}U.prototype.Xd=function(){var a=new Gm;a.mi=td;a.Oi=td;a.ki=10;a.Mi=10;a.ji=Hm;a.Li=Hm;a.li=0;a.Ni=0;this.G=a};
function Im(a,b,c,d,e,f,g){var h=.001,k=f.length;a.moveTo(b,c);d-=b;h=e-c;0===d&&(d=.001);e=h/d;for(var l=Math.sqrt(d*d+h*h),m=0,n=!0,p=0===g?!1:!0;.1<=l;){if(p){h=f[m++%k];for(h-=g;0>h;)h+=f[m++%k],n=!n;p=!1}else h=f[m++%k];h>l&&(h=l);var q=Math.sqrt(h*h/(1+e*e));0>d&&(q=-q);b+=q;c+=e*q;n?a.lineTo(b,c):a.moveTo(b,c);l-=h;n=!n}}U.prototype.raiseChangedEvent=U.prototype.ec=function(a,b,c,d,e,f,g){var h=this.J;null!==h&&(h.Ol(a,b,c,d,e,f,g),0!==(this.T&1024)&&c===this&&a===If&&Jm(this,h,b))};
function Jm(a,b,c){var d=a.yn();if(null!==d)for(var e=a.gc.i;e.next();){var f=e.value,g=null;if(null!==f.Ql){g=Bg(f,d,a);if(null===g)continue;f.Fv(a,g,c,null)}else if(f.ts){var h=b.g;null!==h&&f.Fv(a,h.U.Vr,c,h)}else{var k=d.data;if(null===k)continue;h=b.g;null!==h&&h.Bv||f.Fv(a,k,c,h)}null!==g&&(h=d.Nu(f.Ak),null!==h&&f.GD(h,g,c))}}U.prototype.Nu=function(a){return this.cm===a?this:null};U.prototype.raiseChanged=U.prototype.h=function(a,b,c){this.ec(If,a,this,b,c)};
function Km(a,b,c,d,e){var f=a.mc,g=a.Hj;g.reset();Lm(a,g,b,c,d,e);a.Hj=g;f.x=b;f.y=c;f.width=d;f.height=e;g.Kr()||g.DD(f)}function Mm(a,b,c,d){if(!1===a.Of)return!1;d.multiply(a.transform);return c?a.Gf(b,d):a.xl(b,d)}
U.prototype.bC=function(a,b,c){if(!1===this.Of)return!1;var d=this.ta;b=a.Wi(b);var e=!1;c&&(e=Yc(a.x,a.y,0,0,0,d.height)<b||Yc(a.x,a.y,0,d.height,d.width,d.height)<b||Yc(a.x,a.y,d.width,d.height,d.width,0)<b||Yc(a.x,a.y,d.width,0,0,0)<b);c||(e=Yc(a.x,a.y,0,0,0,d.height)<b&&Yc(a.x,a.y,0,d.height,d.width,d.height)<b&&Yc(a.x,a.y,d.width,d.height,d.width,0)<b&&Yc(a.x,a.y,d.width,0,0,0)<b);return e};U.prototype.gf=function(){return!0};
U.prototype.containsPoint=U.prototype.na=function(a){var b=Va();b.assign(a);this.transform.Ka(b);var c=this.Q;if(!c.w())return!1;var d=this.g;if(null!==d&&d.Kw){var e=d.Tx("extraTouchThreshold"),f=d.Tx("extraTouchArea"),g=f/2,h=this.ta,d=this.Rh()*d.scale,k=1/d;if(h.width*d<e&&h.height*d<e)return a=jd(c.x-g*k,c.y-g*k,c.width+f*k,c.height+f*k,b.x,b.y),A(b),a}if(this instanceof Vg||this instanceof X?jd(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.na(b)){if(this.jh&&!this.jh.na(b))return!1;if(null!==
this.Nb&&c.na(b)||null!==this.ob&&this.hc.na(a))return!0;A(b);return this.Ui(a)}A(b);return!1};U.prototype.Ui=function(a){var b=this.ta;return jd(0,0,b.width,b.height,a.x,a.y)};U.prototype.containsRect=U.prototype.Vi=function(a){if(0===this.angle)return this.Q.Vi(a);var b=this.ta,b=db(0,0,b.width,b.height),c=this.transform,d=!1,e=Wa(a.x,a.y);b.na(c.Zg(e))&&(e.k(a.x,a.bottom),b.na(c.Zg(e))&&(e.k(a.right,a.bottom),b.na(c.Zg(e))&&(e.k(a.right,a.y),b.na(c.Zg(e))&&(d=!0))));A(e);fb(b);return d};
U.prototype.containedInRect=U.prototype.xl=function(a,b){if(void 0===b)return a.Vi(this.Q);var c=this.ta,d=!1,e=Wa(0,0);a.na(b.Ka(e))&&(e.k(0,c.height),a.na(b.Ka(e))&&(e.k(c.width,c.height),a.na(b.Ka(e))&&(e.k(c.width,0),a.na(b.Ka(e))&&(d=!0))));return d};
U.prototype.intersectsRect=U.prototype.Gf=function(a,b){if(void 0===b&&(b=this.transform,0===this.angle))return a.Gf(this.Q);var c=this.ta,d=b,e=Wa(0,0),f=Wa(0,c.height),g=Wa(c.width,c.height),h=Wa(c.width,0),k=!1;if(a.na(d.Ka(e))||a.na(d.Ka(f))||a.na(d.Ka(g))||a.na(d.Ka(h)))k=!0;else{var c=db(0,0,c.width,c.height),l=Wa(a.x,a.y);c.na(d.Zg(l))?k=!0:(l.k(a.x,a.bottom),c.na(d.Zg(l))?k=!0:(l.k(a.right,a.bottom),c.na(d.Zg(l))?k=!0:(l.k(a.right,a.y),c.na(d.Zg(l))&&(k=!0))));A(l);fb(c);!k&&(Q.Vu(a,e,f)||
Q.Vu(a,f,g)||Q.Vu(a,g,h)||Q.Vu(a,h,e))&&(k=!0)}A(e);A(f);A(g);A(h);return k};U.prototype.getDocumentPoint=U.prototype.Ra=function(a,b){void 0===b&&(b=new z);a.Fd()&&v("getDocumentPoint:s Spot must be real: "+a.toString());var c=this.ta;b.k(a.x*c.width+a.offsetX,a.y*c.height+a.offsetY);this.Ve.Ka(b);return b};U.prototype.getDocumentAngle=U.prototype.gk=function(){var a=this.Ve,a=180/Math.PI*Math.atan2(a.m12,a.m11);0>a&&(a+=360);return a};
U.prototype.getDocumentScale=U.prototype.Rh=function(){if(0!==(this.T&4096)===!1)return this.bt;var a=this.Fb;return null!==this.I?a*this.I.Rh():a};U.prototype.getLocalPoint=U.prototype.iC=function(a,b){void 0===b&&(b=new z);b.assign(a);this.Ve.Zg(b);return b};U.prototype.getNearestIntersectionPoint=U.prototype.jk=function(a,b,c){return this.Bn(a.x,a.y,b.x,b.y,c)};r=U.prototype;
r.Bn=function(a,b,c,d,e){var f=this.transform,g=1/(f.m11*f.m22-f.m12*f.m21),h=f.m22*g,k=-f.m12*g,l=-f.m21*g,m=f.m11*g,n=g*(f.m21*f.dy-f.m22*f.dx),p=g*(f.m12*f.dx-f.m11*f.dy);if(null!==this.sl)return f=this.Q,Q.jk(f.left,f.top,f.right,f.bottom,a,b,c,d,e);g=a*h+b*l+n;a=a*k+b*m+p;b=c*h+d*l+n;c=c*k+d*m+p;e.k(0,0);d=this.ta;c=Q.jk(0,0,d.width,d.height,g,a,b,c,e);e.transform(f);return c};
function lj(a,b,c,d,e){if(!1!==Yk(a)){var f=a.margin,g=f.right+f.left,f=f.top+f.bottom;b=Math.max(b-g,0);c=Math.max(c-f,0);e=e||0;d=Math.max((d||0)-g,0);e=Math.max(e-f,0);var g=a.angle,f=0,f=a.ka,h=0;a.Na&&(h=a.Na);90===g||270===g?(b=isFinite(f.height)?f.height+h:b,c=isFinite(f.width)?f.width+h:c):(b=isFinite(f.width)?f.width+h:b,c=isFinite(f.height)?f.height+h:c);var f=d||0,h=e||0,k=a instanceof L;switch(Nm(a,!0)){case Ti:h=f=0;k&&(c=b=Infinity);break;case Ne:isFinite(b)&&b>d&&(f=b);isFinite(c)&&
c>e&&(h=c);break;case Dm:isFinite(b)&&b>d&&(f=b);h=0;k&&(c=Infinity);break;case Cm:isFinite(c)&&c>e&&(h=c),f=0,k&&(b=Infinity)}var k=a.se,l=a.Jf;f>k.width&&l.width<k.width&&(f=k.width);h>k.height&&l.height<k.height&&(h=k.height);d=Math.max(f/a.scale,l.width);e=Math.max(h/a.scale,l.height);k.width<d&&(d=Math.min(l.width,d));k.height<e&&(e=Math.min(l.height,e));b=Math.min(k.width,b);c=Math.min(k.height,c);b=Math.max(d,b);c=Math.max(e,c);if(90===g||270===g)f=b,b=c,c=f,f=d,d=e,e=f;a.mc.wa();a.Mn(b,c,
d,e);a.mc.freeze();a.mc.w()||v("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.mc.toString());Sk(a,!1)}}
r.ac=function(a,b,c,d,e){this.Xf();var f=bb();f.assign(this.Cb);this.Cb.wa();if(!1===dl(this)){var g=this.Cb;g.x=a;g.y=b;g.width=c;g.height=d}else this.Jh(a,b,c,d);this.Cb.freeze();this.jh=void 0===e?null:e;c=!1;void 0!==e?c=!0:null!==this.I&&(e=this.I.hc,d=this.oa,null!==this.sl&&(d=this.Cb),c=b+d.height,d=a+d.width,c=!(0<=a+.05&&d<=e.width+.05&&0<=b+.05&&c<=e.height+.05),this instanceof Zb&&(a=this.hc,this.Ct>a.height||this.oi.fe>a.width))&&(c=!0);this.T=c?this.T|256:this.T&-257;this.Cb.w()||v("Non-real actualBounds has been set. Object "+
this+", actualBounds: "+this.Cb.toString());this.lv(f,this.Cb);fb(f)};r.Jh=function(){};function Om(a,b,c,d,e){var f=a.Q;f.x=b;f.y=c;f.width=d;f.height=e;if(!a.ka.w()){f=a.mc;c=a.margin;b=c.right+c.left;var g=c.top+c.bottom;c=f.width+b;f=f.height+g;d+=b;e+=g;b=Nm(a,!0);c===d&&f===e&&(b=Ti);switch(b){case Ti:if(c>d||f>e)Sk(a,!0),lj(a,c>d?d:c,f>e?e:f);break;case Ne:Sk(a,!0);lj(a,d,e,0,0);break;case Dm:Sk(a,!0);lj(a,d,f,0,0);break;case Cm:Sk(a,!0),lj(a,c,e,0,0)}}}
r.lv=function(){Pm(this,!1);var a=this.J;null!==a&&null!==a.g&&(a.lk(),this.Lt(a),this.ba(),a=this.J,null!==a&&(a.ls!==this&&a.$C!==this&&a.cD!==this||Qm(a,!0)))};r.Lt=function(a){null!==this.bd&&Qm(a,!0)};
r.ne=function(a,b){if(this.visible){var c=this.opacity,d=1;if(1!==c){if(0===c)return;d=a.globalAlpha;a.globalAlpha=d*c}if(a instanceof re)a:{if(this.visible){var e=null,f=a.dv;if(this instanceof L&&(this.type===Rm||this.type===Sm))Tm(this,a,b);else{var g=this.Cb;if(0!==g.width&&0!==g.height&&!isNaN(g.x)&&!isNaN(g.y)){var h=this.transform,k=this.I;0!==(this.T&4096)===!0&&Um(this);var l=0!==(this.T&256),m=!1;this instanceof Zb&&Vm(this,a);if(l){m=k.gf()?k.ta:k.Q;if(this.jh)var n=this.jh,p=n.x,q=n.y,
s=n.width,n=n.height;else p=Math.max(g.x,m.x),q=Math.max(g.y,m.y),s=Math.min(g.right,m.right)-p,n=Math.min(g.bottom,m.bottom)-q;if(p>g.width+g.x||g.x>m.width+m.x||q>g.height+g.y||g.y>m.height+m.y)break a;m=!0;te(a,1,0,0,1,0,0);a.save();a.beginPath();a.rect(p,q,s,n);a.clip()}p=!1;if(this instanceof O&&(p=!0,!this.sa()))break a;q=!1;s=b.Ng;this.J&&s.drawShadows&&(q=this.J.pk);a.Oh.re=[1,0,0,1,0,0];null!==this.Nb&&(Wm(this,a,this.Nb,!0,!0),this.Nb instanceof $f&&this.Nb.type===dg?(a.beginPath(),a.rect(g.x,
g.y,g.width,g.height),Xm(a,this.Nb)):a.fillRect(g.x,g.y,g.width,g.height));p&&this.pk&&s.drawShadows&&(te(a,1,0,0,1,0,0),g=this.jl,a.shadowOffsetX=g.x,a.shadowOffsetY=g.y,a.shadowColor=this.il,a.shadowBlur=this.hl/b.scale,a.Ja());this instanceof L?te(a,h.m11,h.m12,h.m21,h.m22,h.dx,h.dy):a.Oh.re=[h.m11,h.m12,h.m21,h.m22,h.dx,h.dy];if(null!==this.ob){var n=this.ta,g=h=0,s=n.width,n=n.height,t=0;this instanceof X&&(n=this.za.Qa,h=n.x,g=n.y,s=n.width,n=n.height,t=this.eg);Wm(this,a,this.ob,!0,!1);this.ob instanceof
$f&&this.ob.type===dg?(a.beginPath(),a.rect(h-t/2,g-t/2,s+t,n+t),Xm(a,this.ob)):a.fillRect(h-t/2,g-t/2,s+t,n+t)}s=g=h=0;q&&(null!==this.ob||null!==this.Nb||null!==k&&0!==(k.T&512)||null!==k&&k.type===vk&&k.Ye()!==this)?(Ym(this,!0),h=a.shadowOffsetX,g=a.shadowOffsetY,s=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0):Ym(this,!1);this.Xi(a,b);q&&0!==(this.T&512)===!0&&(a.shadowOffsetX=h,a.shadowOffsetY=g,a.shadowBlur=s);p&&q&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);l&&
(a.restore(),m&&a.Ge.pop(),xk(b,a));this instanceof L&&(e=a.Ge.pop());p&&q&&a.Ge.pop();null!==a.XB&&(null===e&&(f===a.dv?(te(a,1,0,0,1,0,0),e=a.Ge.pop()):e=a.dv),a.XB(this,e))}}}}else{if(this instanceof L&&(this.type===Rm||this.type===Sm)){Tm(this,a,b);1!==c&&(a.globalAlpha=d);return}p=this.Cb;if(0!==p.width&&0!==p.height&&!isNaN(p.x)&&!isNaN(p.y)){e=this.transform;f=this.I;0!==(this.T&4096)===!0&&Um(this);k=0!==(this.T&256);this instanceof Zb&&Vm(this,a);if(k){l=f.gf()?f.ta:f.Q;this.jh?(g=this.jh,
m=g.x,q=g.y,h=g.width,g=g.height):(m=Math.max(p.x,l.x),q=Math.max(p.y,l.y),h=Math.min(p.right,l.right)-m,g=Math.min(p.bottom,l.bottom)-q);if(m>p.width+p.x||p.x>l.width+l.x||q>p.height+p.y||p.y>l.height+l.y){1!==c&&(a.globalAlpha=d);return}a.save();a.beginPath();a.rect(m,q,h,g);a.clip()}q=b.Ng;l=!1;if(this instanceof O){l=!0;if(!this.sa()){1!==c&&(a.globalAlpha=d);return}this.pk&&q.drawShadows&&(m=this.jl,a.shadowOffsetX=m.x*b.scale*b.Ce,a.shadowOffsetY=m.y*b.scale*b.Ce,a.shadowColor=this.il,a.shadowBlur=
this.hl)}m=!1;this.J&&q.drawShadows&&(m=this.J.pk);null!==this.Nb&&(Wm(this,a,this.Nb,!0,!0),this.Nb instanceof $f&&this.Nb.type===dg?(a.beginPath(),a.rect(p.x,p.y,p.width,p.height),Xm(a,this.Nb)):a.fillRect(p.x,p.y,p.width,p.height));e.Kr()||a.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);null!==this.ob&&(g=this.ta,q=p=0,h=g.width,g=g.height,s=0,this instanceof X&&(g=this.za.Qa,p=g.x,q=g.y,h=g.width,g=g.height,s=this.eg),Wm(this,a,this.ob,!0,!1),this.ob instanceof $f&&this.ob.type===dg?(a.beginPath(),
a.rect(p-s/2,q-s/2,h+s,g+s),Xm(a,this.ob)):a.fillRect(p-s/2,q-s/2,h+s,g+s));h=q=p=0;m&&(null!==this.ob||null!==this.Nb||null!==f&&0!==(f.T&512)||null!==f&&(f.type===vk||f.type===Ri)&&f.Ye()!==this)?(Ym(this,!0),p=a.shadowOffsetX,q=a.shadowOffsetY,h=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0):Ym(this,!1);this.Xi(a,b);m&&0!==(this.T&512)===!0&&(a.shadowOffsetX=p,a.shadowOffsetY=q,a.shadowBlur=h);l&&m&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);k?(a.restore(),this instanceof
L?xk(b,a,!0):xk(b,a,!1)):e.Kr()||(f=1/(e.m11*e.m22-e.m12*e.m21),a.transform(e.m22*f,-e.m12*f,-e.m21*f,e.m11*f,f*(e.m21*e.dy-e.m22*e.dx),f*(e.m12*e.dx-e.m11*e.dy)))}}1!==c&&(a.globalAlpha=d)}};
function Tm(a,b,c){var d=a.Cb;0===d.width||0===d.height||isNaN(d.x)||isNaN(d.y)||(null!==a.Nb&&(Wm(a,b,a.Nb,!0,!0),a.Nb instanceof $f&&a.Nb.type===dg?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),Xm(b,a.Nb)):b.fillRect(d.x,d.y,d.width,d.height)),null!==a.ob&&(Wm(a,b,a.ob,!0,!1),a.ob instanceof $f&&a.ob.type===dg?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),Xm(b,a.ob)):b.fillRect(d.x,d.y,d.width,d.height)),a.Xi(b,c))}r.Xi=function(){};
function Xm(a,b){if(b instanceof $f&&b.type===dg&&!(a instanceof re)){var c=b.$v,d=b.Zv;d>c?(a.scale(c/d,1),a.translate((d-c)/2,0)):c>d&&(a.scale(1,d/c),a.translate(0,(c-d)/2));a.Bs?a.clip():a.fill();d>c?(a.translate(-(d-c)/2,0),a.scale(1/(c/d),1)):c>d&&(a.translate(0,-(c-d)/2),a.scale(1,1/(d/c)))}else a.Bs?a.clip():a.fill()}function Zm(a){a.Bs||a.stroke()}
function Wm(a,b,c,d,e){if(null!==c){var f=1,g=1;if("string"===typeof c)d?b.Vl!==c&&(b.fillStyle=c,b.Vl=c):b.Wl!==c&&(b.strokeStyle=c,b.Wl=c);else if(c.type===bg)c=c.color,d?b.Vl!==c&&(b.fillStyle=c,b.Vl=c):b.Wl!==c&&(b.strokeStyle=c,b.Wl=c);else{var h,g=a.ta,f=g.width,g=g.height;if(e)var k=a.Q,f=k.width,g=k.height;var l=b instanceof CanvasRenderingContext2D;if(l&&(c.Tf&&c.type===zm||c.$v===f&&c.Zv===g))h=c.Tf;else{var m=k=0,n=0,p=0,q=0,s=0,s=q=0;e&&(k=a.Q,f=k.width,g=k.height,q=k.x,s=k.y);k=c.start.x*
f+c.start.offsetX;m=c.start.y*g+c.start.offsetY;n=c.end.x*f+c.end.offsetX;p=c.end.y*g+c.end.offsetY;k+=q;n+=q;m+=s;p+=s;c.type===cg?h=b.createLinearGradient(k,m,n,p):c.type===dg?(s=isNaN(c.rr)?Math.max(f,g)/2:c.rr,isNaN(c.qs)?(q=0,s=Math.max(f,g)/2):q=c.qs,h=b.createRadialGradient(k,m,q,n,p,s)):c.type===zm?h=b.createPattern(c.pattern,"repeat"):ta(c.type,"Brush type");if(c.type!==zm&&(a=c.lr,null!==a))for(a=a.i;a.next();)h.addColorStop(a.key,a.value);l&&(c.Tf=h,c.$v=f,c.Zv=g)}d?b.Vl!==h&&(b.fillStyle=
h,b.Vl=h):b.Wl!==h&&(b.strokeStyle=h,b.Wl=h)}}}U.prototype.isContainedBy=U.prototype.nk=function(a){if(a instanceof L)a:{if(this!==a&&null!==a)for(var b=this.I;null!==b;){if(b===a){a=!0;break a}b=b.I}a=!1}else a=!1;return a};U.prototype.isVisibleObject=U.prototype.rk=function(){if(!this.visible)return!1;var a=this.I;return null!==a?a.rk():!0};
function Um(a){if(0!==(a.T&2048)===!0){var b=a.kd;b.reset();if(!a.Cb.w()||!a.mc.w()){$m(a,!1);return}b.translate(a.Cb.x,a.Cb.y);b.translate(-a.oa.x,-a.oa.y);var c=a.ta;Lm(a,b,c.x,c.y,c.width,c.height);$m(a,!1);an(a,!0)}0!==(a.T&4096)===!0&&(b=a.I,null===b?(a.$l.set(a.kd),a.bt=a.scale,an(a,!1)):null!==b.Ve&&(c=a.$l,c.reset(),b.gf()?c.multiply(b.$l):null!==b.I&&c.multiply(b.I.$l),c.multiply(a.kd),a.bt=a.scale*b.bt,an(a,!1)))}
function Lm(a,b,c,d,e,f){1!==a.scale&&b.scale(a.scale);if(0!==a.angle){var g=Dd;a.qe&&a.qe.Jc()&&(g=a.qe);var h=Va();if(a instanceof O&&a.Kb!==a)for(c=a.Kb,d=c.ta,h.ns(d.x,d.y,d.width,d.height,g),c.Hj.Ka(h),h.offset(-c.oa.x,-c.oa.y),g=c.I;null!==g&&g!==a;)g.Hj.Ka(h),h.offset(-g.oa.x,-g.oa.y),g=g.I;else h.ns(c,d,e,f,g);b.rotate(a.angle,h.x,h.y);A(h)}}r=U.prototype;
r.H=function(a){void 0===a&&(a=!1);if(!0!==Yk(this)){Sk(this,!0);Pm(this,!0);var b=this.I;null!==b?a||b.H():(a=this.g,null!==a&&(a.lf.add(this),this instanceof V&&(a.V.Ua||this.He(),null!==this.ud&&bn(this.ud)),a.vd(!0)));if(this instanceof L){if(this.fa===vk||this.fa===si)a=this.Ye(),null!==a&&a.H(!0);a=this.la.l;for(var b=a.length,c=0;c<b;c++){var d=a[c];!0!==Yk(d)&&(d.ka.w()||(d instanceof Si||d instanceof L||d instanceof Zb||Nm(d,!1)!==Ti)&&d.H(!0))}}}};
r.En=function(){!1===Yk(this)&&(Sk(this,!0),Pm(this,!0))};function bn(a){if(!1===dl(a)){if(null!==a.I)a.I.H();else{var b=a.g;null!==b&&(b.lf.add(a),a instanceof V&&a.He(),b.vd())}Pm(a,!0)}}r.Xf=function(){0!==(this.T&2048)===!1&&($m(this,!0),an(this,!0))};r.Zx=function(){an(this,!0)};r.ba=function(){var a=this.J;null!==a&&a.ba()};
function Nm(a,b){var c=a.stretch,d=a.I;if(null!==d&&d.fa===cn)return dn(a,d.Ac(a.Tb),d.zc(a.column),b);if(null!==d&&d.fa===vk&&d.Ye()===a)return en(a,Ne,b);if(c===Bm){if(null!==d){if(d.fa===Ri&&d.Ye()===a)return en(a,Ne,b);c=d.Vc;return c===Bm?en(a,Ti,b):en(a,c,b)}return en(a,Ti,b)}return en(a,c,b)}
function dn(a,b,c,d){var e=a.stretch;if(e!==Bm)return en(a,e,d);var f=e=null;switch(b.stretch){case Cm:f=!0;break;case Ne:f=!0}switch(c.stretch){case Dm:e=!0;break;case Ne:e=!0}b=a.I.Vc;null===e&&(e=b===Dm||b===Ne);null===f&&(f=b===Cm||b===Ne);return!0===e&&!0===f?en(a,Ne,d):!0===e?en(a,Dm,d):!0===f?en(a,Cm,d):en(a,Ti,d)}
function en(a,b,c){if(c)return b;if(b===Ti)return Ti;c=a.ka;if(c.w())return Ti;a=a.angle;if(!isNaN(c.width))if(90!==a&&270!==a){if(b===Dm)return Ti;if(b===Ne)return Cm}else{if(b===Cm)return Ti;if(b===Ne)return Dm}if(!isNaN(c.height))if(90!==a&&270!==a){if(b===Cm)return Ti;if(b===Ne)return Dm}else{if(b===Dm)return Ti;if(b===Ne)return Cm}return b}G(U,{vv:"segmentOrientation"},function(){return this.Dq},function(a){var b=this.Dq;b!==a&&(this.Dq=a,this.H(),this.h("segmentOrientation",b,a))});
G(U,{ef:"segmentIndex"},function(){return this.Bq},function(a){a=Math.round(a);var b=this.Bq;b!==a&&(this.Bq=a,this.H(),this.h("segmentIndex",b,a))});G(U,{uv:"segmentFraction"},function(){return this.Aq},function(a){isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);var b=this.Aq;b!==a&&(this.Aq=a,this.H(),this.h("segmentFraction",b,a))});G(U,{iD:"segmentOffset"},function(){return this.Cq},function(a){var b=this.Cq;b.A(a)||(this.Cq=a=a.O(),this.H(),this.h("segmentOffset",b,a))});
G(U,{stretch:"stretch"},function(){return this.Tg},function(a){var b=this.Tg;b!==a&&(this.Tg=a,this.H(),this.h("stretch",b,a))});G(U,{name:"name"},function(){return this.zb},function(a){var b=this.zb;b!==a&&(this.zb=a,null!==this.J&&(this.J.Kj=null),this.h("name",b,a))});
G(U,{opacity:"opacity"},function(){return this.Se},function(a){var b=this.Se;b!==a&&(w(a,"number",U,"opacity"),(0>a||1<a)&&za(a,"0 <= value <= 1",U,"opacity"),this.Se=a,this.h("opacity",b,a),a=this.g,b=this.J,null!==a&&null!==b&&a.ba(hk(b,b.Q)))});G(U,{visible:"visible"},function(){return 0!==(this.T&1)},function(a){var b=0!==(this.T&1);b!==a&&(this.T^=1,this.h("visible",b,a),b=this.I,null!==b?b.H():this instanceof O&&(this.lk(),this.Zd(a)),this.ba(),fn(this))});
G(U,{Of:"pickable"},function(){return 0!==(this.T&2)},function(a){var b=0!==(this.T&2);b!==a&&(this.T^=2,this.h("pickable",b,a))});G(U,{gF:"fromLinkableDuplicates"},function(){return 0!==(this.T&4)},function(a){var b=0!==(this.T&4);b!==a&&(this.T^=4,this.h("fromLinkableDuplicates",b,a))});G(U,{hF:"fromLinkableSelfNode"},function(){return 0!==(this.T&8)},function(a){var b=0!==(this.T&8);b!==a&&(this.T^=8,this.h("fromLinkableSelfNode",b,a))});
G(U,{WG:"toLinkableDuplicates"},function(){return 0!==(this.T&16)},function(a){var b=0!==(this.T&16);b!==a&&(this.T^=16,this.h("toLinkableDuplicates",b,a))});G(U,{XG:"toLinkableSelfNode"},function(){return 0!==(this.T&32)},function(a){var b=0!==(this.T&32);b!==a&&(this.T^=32,this.h("toLinkableSelfNode",b,a))});G(U,{Hf:"isPanelMain"},function(){return 0!==(this.T&64)},function(a){var b=0!==(this.T&64);b!==a&&(this.T^=64,this.H(),this.h("isPanelMain",b,a))});
G(U,{by:"isActionable"},function(){return 0!==(this.T&128)},function(a){var b=0!==(this.T&128);b!==a&&(this.T^=128,this.h("isActionable",b,a))});G(U,{sl:"areaBackground"},function(){return this.Nb},function(a){var b=this.Nb;b!==a&&(a instanceof $f&&a.freeze(),this.Nb=a,this.ba(),this.h("areaBackground",b,a))});G(U,{background:"background"},function(){return this.ob},function(a){var b=this.ob;b!==a&&(a instanceof $f&&a.freeze(),this.ob=a,this.ba(),this.h("background",b,a))});
function Ym(a,b){a.T=b?a.T|512:a.T&-513}function gn(a,b){a.T=b?a.T|1024:a.T&-1025}function $m(a,b){a.T=b?a.T|2048:a.T&-2049}function an(a,b){a.T=b?a.T|4096:a.T&-4097}function Yk(a){return 0!==(a.T&8192)}function Sk(a,b){a.T=b?a.T|8192:a.T&-8193}function dl(a){return 0!==(a.T&16384)}function Pm(a,b){a.T=b?a.T|16384:a.T&-16385}H(U,{J:"part"},function(){if(this instanceof O)return this;if(this.al)return this.al;var a;for(a=this.I;a;){if(a instanceof O)return this.al=a;a=a.I}return null});
H(U,{I:"panel"},function(){return this.cg});U.prototype.xk=function(a){this.cg=a};H(U,{layer:"layer"},function(){var a=this.J;return null!==a?a.layer:null});H(U,{g:"diagram"},function(){var a=this.J;return null!==a?a.g:null},{configurable:!0});G(U,{position:"position"},function(){return this.xa},function(a){var b=this.xa;b.A(a)||(a=a.O(),this.Uy(a,b)&&this.h("position",b,a))});U.prototype.Uy=function(a){this.xa=a;bn(this);this.Xf();return!0};
U.prototype.nD=function(a,b){this.xa.k(a,b);hn(this,!0);this.Xf()};H(U,{Q:"actualBounds"},function(){return this.Cb});G(U,{scale:"scale"},function(){return this.Fb},function(a){var b=this.Fb;b!==a&&(0>=a&&v("GraphObject.scale must be greater than zero"),this.Fb=a,this.Xf(),this.H(),this.h("scale",b,a))});G(U,{angle:"angle"},function(){return this.am},function(a){var b=this.am;b!==a&&(a%=360,0>a&&(a+=360),b!==a&&(this.am=a,this.H(),this.Xf(),this.h("angle",b,a)))});
G(U,{ka:"desiredSize"},function(){return this.ye},function(a){var b=this.ye;b.A(a)||(this.ye=a=a.O(),this.H(),this instanceof X&&this.Dd(),this.h("desiredSize",b,a),a=this.J,null!==a&&0!==(this.T&1024)&&(Jm(this,a,"width"),Jm(this,a,"height")))});
G(U,{width:"width"},function(){return this.ye.width},function(a){if(this.ye.width!==a){var b=this.ye;this.ye=a=(new Za(a,this.ye.height)).freeze();this.H();this instanceof X&&this.Dd();this.h("desiredSize",b,a);b=this.J;null!==b&&0!==(this.T&1024)&&Jm(this,b,"width")}});
G(U,{height:"height"},function(){return this.ye.height},function(a){if(this.ye.height!==a){var b=this.ye;this.ye=a=(new Za(this.ye.width,a)).freeze();this.H();this instanceof X&&this.Dd();this.h("desiredSize",b,a);b=this.J;null!==b&&0!==(this.T&1024)&&Jm(this,b,"height")}});G(U,{Jf:"minSize"},function(){return this.xi},function(a){var b=this.xi;b.A(a)||(a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.xi=a,this.H(),this.h("minSize",b,a))});
G(U,{se:"maxSize"},function(){return this.vi},function(a){var b=this.vi;b.A(a)||(a=a.copy(),isNaN(a.width)&&(a.width=Infinity),isNaN(a.height)&&(a.height=Infinity),a.freeze(),this.vi=a,this.H(),this.h("maxSize",b,a))});H(U,{oa:"measuredBounds"},function(){return this.mc});H(U,{ta:"naturalBounds"},function(){return this.hc},{configurable:!0});
G(U,{margin:"margin"},function(){return this.Gp},function(a){"number"===typeof a&&(a=new qd(a));var b=this.Gp;b.A(a)||(this.Gp=a=a.O(),this.H(),this.h("margin",b,a))});H(U,{transform:null},function(){0!==(this.T&2048)===!0&&Um(this);return this.kd});H(U,{Ve:null},function(){0!==(this.T&4096)===!0&&Um(this);return this.$l});
G(U,{alignment:"alignment"},function(){return this.Nd},function(a){var b=this.Nd;b.A(a)||(a.Fd()&&!a.kc()&&v("alignment must be a real Spot or Spot.Default"),this.Nd=a=a.O(),bn(this),this.h("alignment",b,a))});G(U,{column:"column"},function(){return this.Ao},function(a){a=Math.round(a);var b=this.Ao;b!==a&&(0>a&&za(a,">= 0",U,"column"),this.Ao=a,this.H(),this.h("column",b,a))});
G(U,{FE:"columnSpan"},function(){return this.fi},function(a){a=Math.round(a);var b=this.fi;b!==a&&(1>a&&za(a,">= 1",U,"columnSpan"),this.fi=a,this.H(),this.h("columnSpan",b,a))});G(U,{Tb:"row"},function(){return this.xq},function(a){a=Math.round(a);var b=this.xq;b!==a&&(0>a&&za(a,">= 0",U,"row"),this.xq=a,this.H(),this.h("row",b,a))});
G(U,{rowSpan:"rowSpan"},function(){return this.Di},function(a){a=Math.round(a);var b=this.Di;b!==a&&(1>a&&za(a,">= 1",U,"rowSpan"),this.Di=a,this.H(),this.h("rowSpan",b,a))});G(U,{Si:"alignmentFocus"},function(){return this.to},function(a){var b=this.to;b.A(a)||(a.Fd()&&!a.kc()&&v("alignmentFocus must be a real Spot or Spot.Default"),this.to=a=a.O(),this.H(),this.h("alignmentFocus",b,a))});
G(U,{bd:"portId"},function(){return this.jq},function(a){var b=this.jq;if(b!==a){var c=this.J;null===c||c instanceof V||(v("portID being set on a Link: "+a),c=null);null!==b&&null!==c&&jn(c,this);this.jq=a;if(null!==a&&c){c.Hg=!0;null===c.hd&&kn(c);var d=this.bd;null!==d&&c.hd.add(d,this)}this.h("portId",b,a)}});function ln(a){var b={value:null};mn(a,b);return b.value}function mn(a,b){var c=a.I;return null===c||!mn(c,b)&&a.visible?(b.value=a,!1):!0}
function fn(a){var b=a.J;b instanceof V&&(a=a.g,null===a||a.V.Ua||b.He())}G(U,{ab:"toSpot"},function(){return null!==this.G?this.G.Oi:td},function(a){null===this.G&&this.Xd();var b=this.G.Oi;b.A(a)||(a=a.O(),this.G.Oi=a,this.h("toSpot",b,a),fn(this))});G(U,{Bk:"toEndSegmentLength"},function(){return null!==this.G?this.G.Mi:10},function(a){null===this.G&&this.Xd();var b=this.G.Mi;b!==a&&(0>a&&za(a,">= 0",U,"toEndSegmentLength"),this.G.Mi=a,this.h("toEndSegmentLength",b,a),fn(this))});
G(U,{ss:"toEndSegmentDirection"},function(){return null!==this.G?this.G.Li:Hm},function(a){null===this.G&&this.Xd();var b=this.G.Li;b!==a&&(this.G.Li=a,this.h("toEndSegmentDirection",b,a),fn(this))});G(U,{us:"toShortLength"},function(){return null!==this.G?this.G.Ni:0},function(a){null===this.G&&this.Xd();var b=this.G.Ni;b!==a&&(this.G.Ni=a,this.h("toShortLength",b,a),fn(this))});G(U,{vD:"toLinkable"},function(){return this.Sq},function(a){var b=this.Sq;b!==a&&(this.Sq=a,this.h("toLinkable",b,a))});
G(U,{YG:"toMaxLinks"},function(){return this.Tq},function(a){var b=this.Tq;b!==a&&(0>a&&za(a,">= 0",U,"toMaxLinks"),this.Tq=a,this.h("toMaxLinks",b,a))});G(U,{Za:"fromSpot"},function(){return null!==this.G?this.G.mi:td},function(a){null===this.G&&this.Xd();var b=this.G.mi;b.A(a)||(a=a.O(),this.G.mi=a,this.h("fromSpot",b,a),fn(this))});
G(U,{fk:"fromEndSegmentLength"},function(){return null!==this.G?this.G.ki:10},function(a){null===this.G&&this.Xd();var b=this.G.ki;b!==a&&(0>a&&za(a,">= 0",U,"fromEndSegmentLength"),this.G.ki=a,this.h("fromEndSegmentLength",b,a),fn(this))});G(U,{Br:"fromEndSegmentDirection"},function(){return null!==this.G?this.G.ji:Hm},function(a){null===this.G&&this.Xd();var b=this.G.ji;b!==a&&(this.G.ji=a,this.h("fromEndSegmentDirection",b,a),fn(this))});
G(U,{Cr:"fromShortLength"},function(){return null!==this.G?this.G.li:0},function(a){null===this.G&&this.Xd();var b=this.G.li;b!==a&&(this.G.li=a,this.h("fromShortLength",b,a),fn(this))});G(U,{eC:"fromLinkable"},function(){return this.Uo},function(a){var b=this.Uo;b!==a&&(this.Uo=a,this.h("fromLinkable",b,a))});G(U,{iF:"fromMaxLinks"},function(){return this.Vo},function(a){var b=this.Vo;b!==a&&(0>a&&za(a,">= 0",U,"fromMaxLinks"),this.Vo=a,this.h("fromMaxLinks",b,a))});
G(U,{cursor:"cursor"},function(){return this.Ho},function(a){var b=this.Ho;b!==a&&(w(a,"string",U,"cursor"),this.Ho=a,this.h("cursor",b,a))});G(U,{click:"click"},function(){return null!==this.F?this.F.ih:null},function(a){null===this.F&&Em(this);var b=this.F.ih;b!==a&&(null!==a&&w(a,"function",U,"click"),this.F.ih=a,this.h("click",b,a))});
G(U,{qr:"doubleClick"},function(){return null!==this.F?this.F.ph:null},function(a){null===this.F&&Em(this);var b=this.F.ph;b!==a&&(null!==a&&w(a,"function",U,"doubleClick"),this.F.ph=a,this.h("doubleClick",b,a))});G(U,{Gx:"contextClick"},function(){return null!==this.F?this.F.kh:null},function(a){null===this.F&&Em(this);var b=this.F.kh;b!==a&&(null!==a&&w(a,"function",U,"contextClick"),this.F.kh=a,this.h("contextClick",b,a))});
G(U,{GC:"mouseEnter"},function(){return null!==this.F?this.F.Rp:null},function(a){null===this.F&&Em(this);var b=this.F.Rp;b!==a&&(null!==a&&w(a,"function",U,"mouseEnter"),this.F.Rp=a,this.h("mouseEnter",b,a))});G(U,{HC:"mouseLeave"},function(){return null!==this.F?this.F.Sp:null},function(a){null===this.F&&Em(this);var b=this.F.Sp;b!==a&&(null!==a&&w(a,"function",U,"mouseLeave"),this.F.Sp=a,this.h("mouseLeave",b,a))});
G(U,{vy:"mouseOver"},function(){return null!==this.F?this.F.zh:null},function(a){null===this.F&&Em(this);var b=this.F.zh;b!==a&&(null!==a&&w(a,"function",U,"mouseOver"),this.F.zh=a,this.h("mouseOver",b,a))});G(U,{uy:"mouseHover"},function(){return null!==this.F?this.F.yh:null},function(a){null===this.F&&Em(this);var b=this.F.yh;b!==a&&(null!==a&&w(a,"function",U,"mouseHover"),this.F.yh=a,this.h("mouseHover",b,a))});
G(U,{ty:"mouseHold"},function(){return null!==this.F?this.F.xh:null},function(a){null===this.F&&Em(this);var b=this.F.xh;b!==a&&(null!==a&&w(a,"function",U,"mouseHold"),this.F.xh=a,this.h("mouseHold",b,a))});G(U,{cG:"mouseDragEnter"},function(){return null!==this.F?this.F.Pp:null},function(a){null===this.F&&Em(this);var b=this.F.Pp;b!==a&&(null!==a&&w(a,"function",U,"mouseDragEnter"),this.F.Pp=a,this.h("mouseDragEnter",b,a))});
G(U,{dG:"mouseDragLeave"},function(){return null!==this.F?this.F.Qp:null},function(a){null===this.F&&Em(this);var b=this.F.Qp;b!==a&&(null!==a&&w(a,"function",U,"mouseDragLeave"),this.F.Qp=a,this.h("mouseDragLeave",b,a))});G(U,{sy:"mouseDrop"},function(){return null!==this.F?this.F.wh:null},function(a){null===this.F&&Em(this);var b=this.F.wh;b!==a&&(null!==a&&w(a,"function",U,"mouseDrop"),this.F.wh=a,this.h("mouseDrop",b,a))});
G(U,{uB:"actionDown"},function(){return null!==this.F?this.F.po:null},function(a){null===this.F&&Em(this);var b=this.F.po;b!==a&&(null!==a&&w(a,"function",U,"actionDown"),this.F.po=a,this.h("actionDown",b,a))});G(U,{vB:"actionMove"},function(){return null!==this.F?this.F.qo:null},function(a){null===this.F&&Em(this);var b=this.F.qo;b!==a&&(null!==a&&w(a,"function",U,"actionMove"),this.F.qo=a,this.h("actionMove",b,a))});
G(U,{wB:"actionUp"},function(){return null!==this.F?this.F.ro:null},function(a){null===this.F&&Em(this);var b=this.F.ro;b!==a&&(null!==a&&w(a,"function",U,"actionUp"),this.F.ro=a,this.h("actionUp",b,a))});G(U,{tB:"actionCancel"},function(){return null!==this.F?this.F.oo:null},function(a){null===this.F&&Em(this);var b=this.F.oo;b!==a&&(null!==a&&w(a,"function",U,"actionCancel"),this.F.oo=a,this.h("actionCancel",b,a))});
G(U,{bz:"toolTip"},function(){return null!==this.F?this.F.Gh:null},function(a){null===this.F&&Em(this);var b=this.F.Gh;b!==a&&(null!==a&&ra(a,Vg,U,"toolTip"),this.F.Gh=a,this.h("toolTip",b,a))});G(U,{contextMenu:"contextMenu"},function(){return null!==this.F?this.F.lh:null},function(a){null===this.F&&Em(this);var b=this.F.lh;b!==a&&(null!==a&&ra(a,Vg,U,"contextMenu"),this.F.lh=a,this.h("contextMenu",b,a))});
U.prototype.bind=U.prototype.bind=function(a){a.uf=this;var b=this.yn();null!==b&&nn(b)&&v("Cannot add a Binding to a template that has already been copied: "+a);null===this.gc&&(this.gc=new N(yg));this.gc.add(a)};U.prototype.findTemplateBinder=U.prototype.yn=function(){for(var a=this instanceof L?this:this.I;null!==a;){if(null!==a.Dk)return a;a=a.I}return null};U.fromSvg=U.fromSVG=function(a){return on(a)};U.prototype.setProperties=function(a){Ib(this,a)};var pn;
U.make=pn=function(a,b){var c=arguments,d=null,e=null;if("function"===typeof a)e=a;else if("string"===typeof a){var f=qn.ja(a);"function"===typeof f?(c=Ka(arguments),d=f(c)):e=aa[a]}null===d&&(void 0===e&&(d=window.$,void 0!==d&&void 0!==d.noop&&v("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),v("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==e&&e.constructor||v("GraphObject.make requires a class function or class name, not: "+
a),d=new e);f=1;if(d instanceof M&&1<c.length){var g=d,e=c[1];if("string"===typeof e||e instanceof HTMLDivElement)tk(g,e),f++}for(;f<c.length;f++)e=c[f],void 0===e?v("Undefined value at argument "+f+" for object being constructed by GraphObject.make: "+d):rn(d,e);return d};
function rn(a,b){if("string"===typeof b)if(a instanceof Zb)a.text=b;else if(a instanceof X)a.jb=b;else if(a instanceof ok)a.source=b;else if(a instanceof L){var c=vc(L,b);null!==c?a.type=c:v("Unknown Panel type as an argument to GraphObject.make: "+b)}else a instanceof $f?(c=vc($f,b),null!==c?a.type=c:v("Unknown Brush type as an argument to GraphObject.make: "+b)):a instanceof Ke?(c=vc(Ke,b),null!==c?a.type=c:v("Unknown Geometry type as an argument to GraphObject.make: "+b)):a instanceof Cf?(c=vc(Cf,
b),null!==c?a.type=c:v("Unknown PathSegment type as an argument to GraphObject.make: "+b)):v("Unable to use a string as an argument to GraphObject.make: "+b);else if(b instanceof U)c=b,a instanceof L||v("A GraphObject can only be added to a Panel, not to: "+a),a.add(c);else if(b instanceof ug){var d=b,c=a,e;d.sd&&c.Ac?e=c.Ac(d.index):!d.sd&&c.zc?e=c.zc(d.index):v("A RowColumnDefinition can only be added to a Panel, not to: "+a);e.nr(d)}else if(b instanceof wa)a instanceof W&&b.Td===W?2===(b.value&
2)?a.sv=b:b===Ni||b===Di||b===ti?a.me=b:b===sn||b===tn||b===un?a.er=b:b!==vn&&b!==Ei&&v("Unknown Link enum value for a Link property: "+b):a instanceof L&&b.Td===L?a.type=b:a instanceof Zb&&b.Td===Zb?a.KD=b:a instanceof X&&(b===Ti||b===Vi||b===Wi||b===Bm)?a.hC=b:a instanceof ok&&(b===Ti||b===Vi||b===Wi)?a.vF=b:a instanceof U&&b.Td===W?(c=a,0===b.name.indexOf("Orient")?c.vv=b:v("Unknown Link enum value for GraphObject.segmentOrientation property: "+b)):a instanceof U&&b.Td===U?a.stretch=b:a instanceof
ug&&b.Td===ug?a.os=b:a instanceof M&&b.Td===M?a.mn=b:a instanceof $f&&b.Td===$f?a.type=b:a instanceof Ke&&b.Td===Ke?a.type=b:a instanceof Cf&&b.Td===Cf?a.type=b:a instanceof yg&&b.Td===yg?a.mode=b:a instanceof Hf&&b.Td===Hf?a.Uc=b:a instanceof Z&&b.Td===Z?0===b.name.indexOf("Alignment")?a.alignment=b:0===b.name.indexOf("Arrangement")?a.We=b:0===b.name.indexOf("Compaction")?a.compaction=b:0===b.name.indexOf("Path")?a.path=b:0===b.name.indexOf("Sorting")?a.sorting=b:0===b.name.indexOf("Style")?a.$G=
b:v("Unknown enum value: "+b):a instanceof wn&&b.Td===wn?0===b.name.indexOf("Aggressive")?a.uE=b:0===b.name.indexOf("Cycle")?a.QE=b:0===b.name.indexOf("Init")?a.AF=b:0===b.name.indexOf("Layer")?a.NF=b:v("Unknown enum value: "+b):a instanceof um&&b.Td===um?b===xn||b===yn||b===zn||b===Hn?a.sorting=b:b===In||b===Jn?a.We=b:b===Kn||b===Ln?a.alignment=b:v("Unknown enum value: "+b):a instanceof Mn&&b.Td===Mn?b===Nn||b===On||b===Pn||b===Qn||b===Rn?a.sorting=b:b===Sn||b===Tn||b===Un||b===Vn?a.direction=b:
b===Wn||b===Xn||b===Yn||b===Zn?a.We=b:b===$n||b===ao?a.jv=b:v("Unknown enum value: "+b):v("No property to set for this enum value: "+b);else if(b instanceof yg)a instanceof U?a.bind(b):a instanceof ug?a.bind(b):v("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+a);else if(b instanceof Me)a instanceof Ke?a.Xa.add(b):v("A PathFigure can only be added to a Geometry, not to: "+a);else if(b instanceof Cf)a instanceof Me?a.pa.add(b):v("A PathSegment can only be added to a PathFigure, not to: "+
a);else if(b instanceof lg)a instanceof M?a.vb=b:a instanceof Wg?a.vb=b:v("A Layout can only be assigned to a Diagram or a Group, not to: "+a);else if(Array.isArray(b))for(c=0;c<b.length;c++)rn(a,b[c]);else if("object"===typeof b&&null!==b)if(a instanceof $f){e=new Sb;for(c in b)d=parseFloat(c),isNaN(d)?e[c]=b[c]:a.addColorStop(d,b[c]);Ib(a,e)}else if(a instanceof ug){void 0!==b.row?(e=b.row,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&v("Must specify non-negative integer row for RowColumnDefinition "+
b),a.sd=!0,a.index=e):void 0!==b.column&&(e=b.column,(void 0===e||null===e||Infinity===e||isNaN(e)||0>e)&&v("Must specify non-negative integer column for RowColumnDefinition "+b),a.sd=!1,a.index=e);e=new Sb;for(c in b)"row"!==c&&"column"!==c&&(e[c]=b[c]);Ib(a,e)}else Ib(a,b);else v('Unknown initializer "'+b+'" for object being constructed by GraphObject.make: '+a)}var qn=new Fb("string","function");
U.getBuilders=function(){var a=new Fb("string","function"),b;for(b in qn)if(b!==b.toLowerCase()){var c=qn[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};var bo;U.defineBuilder=bo=function(a,b){w(a,"string",U,"defineBuilder:name");w(b,"function",U,"defineBuilder:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||v("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);qn.add(a,b)};
bo("Button",function(){var a=new $f(cg);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new $f(cg);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");a=pn(L,vk,{by:!0},{_buttonFillNormal:a,_buttonStrokeNormal:"gray",_buttonFillOver:b,_buttonStrokeOver:"blue"},pn(X,{name:"ButtonBorder",jb:"Rectangle",o:new R(0,0,2.761423749153968,2.761423749153968),p:new R(1,1,-2.761423749153968,-2.761423749153968),fill:a,stroke:"gray"}));a.GC=function(a,b){var e=b.Bd("ButtonBorder");if(e instanceof
X){var f=b._buttonFillOver;b._buttonFillNormal=e.fill;e.fill=f;f=b._buttonStrokeOver;b._buttonStrokeNormal=e.stroke;e.stroke=f}};a.HC=function(a,b){var e=b.Bd("ButtonBorder");e instanceof X&&(e.fill=b._buttonFillNormal,e.stroke=b._buttonStrokeNormal)};return a});
bo("TreeExpanderButton",function(){var a=pn("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},pn(X,{name:"ButtonIcon",jb:"MinusLine",ka:Q.lo},(new yg("figure","isTreeExpanded",function(a,c){var d=c.I;return a?d._treeExpandedFigure:d._treeCollapsedFigure})).kv()),{visible:!1},(new yg("visible","isTreeLeaf",function(a){return!a})).kv());a.click=function(a,c){var d=c.J;d instanceof Vg&&(d=d.Wg);if(d instanceof V){var e=d.g;if(null!==e){e=e.ib;if(d.rc){if(!e.canCollapseTree(d))return}else if(!e.canExpandTree(d))return;
a.qc=!0;d.rc?e.collapseTree(d):e.expandTree(d)}}};return a});
bo("SubGraphExpanderButton",function(){var a=pn("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},pn(X,{name:"ButtonIcon",jb:"MinusLine",ka:Q.lo},(new yg("figure","isSubGraphExpanded",function(a,c){var d=c.I;return a?d._subGraphExpandedFigure:d._subGraphCollapsedFigure})).kv()));a.click=function(a,c){var d=c.J;d instanceof Vg&&(d=d.Wg);if(d instanceof Wg){var e=d.g;if(null!==e){e=e.ib;if(d.td){if(!e.canCollapseSubGraph(d))return}else if(!e.canExpandSubGraph(d))return;a.qc=
!0;d.td?e.collapseSubGraph(d):e.expandSubGraph(d)}}};return a});bo("ContextMenuButton",function(){var a=pn("Button");a.stretch=Dm;var b=a.Bd("ButtonBorder");b instanceof X&&(b.jb="Rectangle",b.o=new R(0,0,2,3),b.p=new R(1,1,-2,-2));return a});
bo("PanelExpanderButton",function(a){var b="COLLAPSIBLE";"string"===typeof a[1]&&(b=a[1],a.splice(1,1));a=pn("Button",pn(X,"TriangleUp",{ka:new Za(6,4)},(new yg("figure","visible",function(a){return a?"TriangleUp":"TriangleDown"})).kv(b)));var c=a.Bd("ButtonBorder");c instanceof X&&(c.stroke=null,c.fill="transparent");a.click=function(a,c){var f=c.g;if(null!==f){var g=c.J.Bd(b);null!==g&&(f.Bb("Collapse/Expand Panel"),g.visible=!g.visible,f.od("Collapse/Expand Panel"))}};return a});
function Fm(){this.lh=this.Gh=this.oo=this.ro=this.qo=this.po=this.wh=this.Qp=this.Pp=this.xh=this.yh=this.zh=this.Sp=this.Rp=this.kh=this.ph=this.ih=null}Fm.prototype.copy=function(){var a=new Fm;a.ih=this.ih;a.ph=this.ph;a.kh=this.kh;a.Rp=this.Rp;a.Sp=this.Sp;a.zh=this.zh;a.yh=this.yh;a.xh=this.xh;a.Pp=this.Pp;a.Qp=this.Qp;a.wh=this.wh;a.po=this.po;a.qo=this.qo;a.ro=this.ro;a.oo=this.oo;a.Gh=this.Gh;a.lh=this.lh;return a};
function L(a){U.call(this);void 0===a?0===arguments.length?this.fa=Yi:v("invalid argument to Panel constructor: undefined"):(va(a,L,L,"type"),this.fa=a);this.la=new N(U);this.ge=Q.mo;this.Yf=!1;this.fa===zk&&(this.Yf=!0);this.ep=!1;this.Ko=ee;this.oh=Bm;this.fa===cn&&co(this);this.hn=Vi;this.Zo=(new Za(10,10)).freeze();this.$o=Q.ej;this.Dk=this.Ag=null;this.sp=NaN;this.nf=this.th=null;this.Jm="category";this.mf=null;this.Ih=new D(NaN,NaN,NaN,NaN);this.ml=null;this.Hg=!1;this.yq=null}yb(L,U);
L.Og=!0;vb("Panel",L);function co(a){a.gi=Q.mo;a.Dg=1;a.nh=null;a.Ik=null;a.Cg=1;a.Bg=null;a.Hk=null;a.Sc=[];a.Lc=[];a.fl=eo;a.Fk=eo;a.Hh=0;a.uh=0}
L.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.fa=this.fa;a.ge=this.ge.O();a.Yf=this.Yf;a.ep=this.ep;a.Ko=this.Ko.O();a.oh=this.oh;if(a.fa===cn){a.gi=this.gi.O();a.Dg=this.Dg;a.nh=this.nh;a.Ik=this.Ik;a.Cg=this.Cg;a.Bg=this.Bg;a.Hk=this.Hk;var b=[];if(0<this.Sc.length)for(var c=this.Sc,d=c.length,e=0;e<d;e++)if(void 0!==c[e]){var f=c[e].copy();f.xk(a);b[e]=f}a.Sc=b;b=[];if(0<this.Lc.length)for(c=this.Lc,d=c.length,e=0;e<d;e++)void 0!==c[e]&&(f=c[e].copy(),f.xk(a),
b[e]=f);a.Lc=b;a.fl=this.fl;a.Fk=this.Fk;a.Hh=this.Hh;a.uh=this.uh}a.hn=this.hn;a.Zo.assign(this.Zo);a.$o=this.$o.O();a.Ag=this.Ag;a.Dk=this.Dk;a.sp=this.sp;a.th=this.th;a.nf=this.nf;a.Jm=this.Jm;a.Ih.assign(this.Ih);a.Hg=this.Hg;null!==this.yq&&(a.yq=this.yq)};L.prototype.Xg=function(a){U.prototype.Xg.call(this,a);a.la=this.la;for(var b=a.la.l,c=b.length,d=0;d<c;d++)b[d].cg=a;a.ml=null};
L.prototype.copy=function(){var a=U.prototype.copy.call(this);if(null!==a){for(var b=this.la.l,c=b.length,d=0;d<c;d++){var e=b[d].copy(),f=a;e.xk(f);e.al=null;var g=f.la,h=g.count;g.pd(h,e);g=f.J;if(null!==g){g.Kj=null;null!==e.bd&&g instanceof V&&(g.Hg=!0);var k=f.g;null!==k&&k.V.Ua||g.ec(Qf,"elements",f,null,e,null,h)}}return a}return null};L.prototype.toString=function(){return"Panel("+this.type+")#"+ub(this)};var Yi;L.Position=Yi=I(L,"Position",0);L.Horizontal=I(L,"Horizontal",1);var uk;
L.Vertical=uk=I(L,"Vertical",2);var Ri;L.Spot=Ri=I(L,"Spot",3);var vk;L.Auto=vk=I(L,"Auto",4);var cn;L.Table=cn=I(L,"Table",5);L.Viewbox=I(L,"Viewbox",6);var Rm;L.TableRow=Rm=I(L,"TableRow",7);var Sm;L.TableColumn=Sm=I(L,"TableColumn",8);var si;L.Link=si=I(L,"Link",9);var zk;L.Grid=zk=I(L,"Grid",10);
G(L,{type:"type"},function(){return this.fa},function(a){var b=this.fa;b!==a&&(b!==Rm&&b!==Sm||v("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.fa=a,this.fa===zk?this.Yf=!0:this.fa===cn&&co(this),this.H(),this.h("type",b,a))});H(L,{elements:"elements"},function(){return this.la.i});H(L,{ta:"naturalBounds"},function(){return this.hc});
G(L,{padding:"padding"},function(){return this.ge},function(a){"number"===typeof a?(0>a&&za(a,">= 0",L,"padding"),a=new qd(a)):(ra(a,qd,L,"padding"),0>a.left&&za(a.left,">= 0",L,"padding:value.left"),0>a.right&&za(a.right,">= 0",L,"padding:value.right"),0>a.top&&za(a.top,">= 0",L,"padding:value.top"),0>a.bottom&&za(a.bottom,">= 0",L,"padding:value.bottom"));var b=this.ge;b.A(a)||(this.ge=a=a.O(),this.H(),this.h("padding",b,a))});
G(L,{ak:"defaultAlignment"},function(){return this.Ko},function(a){var b=this.Ko;b.A(a)||(this.Ko=a=a.O(),this.H(),this.h("defaultAlignment",b,a))});G(L,{Vc:"defaultStretch"},function(){return this.oh},function(a){var b=this.oh;b!==a&&(va(a,U,L,"defaultStretch"),this.oh=a,this.H(),this.h("defaultStretch",b,a))});
G(L,{PH:"defaultSeparatorPadding"},function(){return void 0===this.gi?Q.mo:this.gi},function(a){if(void 0!==this.gi){"number"===typeof a&&(a=new qd(a));var b=this.gi;b.A(a)||(this.gi=a=a.O(),this.h("defaultSeparatorPadding",b,a))}});G(L,{NH:"defaultRowSeparatorStroke"},function(){return void 0===this.nh?null:this.nh},function(a){var b=this.nh;b!==a&&(null===a||"string"===typeof a||a instanceof $f)&&(a instanceof $f&&a.freeze(),this.nh=a,this.h("defaultRowSeparatorStroke",b,a))});
G(L,{OH:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.Dg?1:this.Dg},function(a){if(void 0!==this.Dg){var b=this.Dg;b!==a&&isFinite(a)&&0<=a&&(this.Dg=a,this.h("defaultRowSeparatorStrokeWidth",b,a))}});
G(L,{MH:"defaultRowSeparatorDashArray"},function(){return void 0===this.Ik?null:this.Ik},function(a){if(void 0!==this.Ik){var b=this.Ik;if(b!==a){null===a||Array.isArray(a)||ta(a,"Array",L,"defaultRowSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v("defaultRowSeparatorDashArray:value "+f+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Ik=a;this.ba();this.h("defaultRowSeparatorDashArray",
b,a)}}});G(L,{HH:"defaultColumnSeparatorStroke"},function(){return void 0===this.Bg?null:this.Bg},function(a){if(void 0!==this.Bg){var b=this.Bg;b!==a&&(null===a||"string"===typeof a||a instanceof $f)&&(a instanceof $f&&a.freeze(),this.Bg=a,this.h("defaultColumnSeparatorStroke",b,a))}});
G(L,{IH:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.Cg?1:this.Cg},function(a){if(void 0!==this.Cg){var b=this.Cg;b!==a&&isFinite(a)&&0<=a&&(this.Cg=a,this.h("defaultColumnSeparatorStrokeWidth",b,a))}});
G(L,{GH:"defaultColumnSeparatorDashArray"},function(){return void 0===this.Hk?null:this.Hk},function(a){if(void 0!==this.Hk){var b=this.Hk;if(b!==a){null===a||Array.isArray(a)||ta(a,"Array",L,"defaultColumnSeparatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v("defaultColumnSeparatorDashArray:value "+f+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Hk=a;this.ba();this.h("defaultColumnSeparatorDashArray",
b,a)}}});G(L,{dJ:"viewboxStretch"},function(){return this.hn},function(a){var b=this.hn;b!==a&&(va(a,U,L,"viewboxStretch"),this.hn=a,this.h("viewboxStretch",b,a))});G(L,{Su:"gridCellSize"},function(){return this.Zo},function(a){var b=this.Zo;b.A(a)||(ra(a,Za,L,"gridCellSize"),a.w()&&0!==a.width&&0!==a.height||v("Invalid Panel.gridCellSize: "+a),this.Zo=a.O(),null!==this.g&&this===this.g.Dr&&Tk(this.g),this.ba(),this.h("gridCellSize",b,a))});
G(L,{kC:"gridOrigin"},function(){return this.$o},function(a){var b=this.$o;b.A(a)||(ra(a,z,L,"gridOrigin"),a.w()||v("Invalid Panel.gridOrigin: "+a),this.$o=a.O(),null!==this.g&&Tk(this.g),this.ba(),this.h("gridOrigin",b,a))});r=L.prototype;r.Lt=function(a){U.prototype.Lt.call(this,a);for(var b=this.la.l,c=b.length,d=0;d<c;d++)b[d].Lt(a)};
r.Xi=function(a,b){if(this.fa===zk){var c=this.Rh()*b.scale;0>=c&&(c=1);var d=this.Su,e=d.width,d=d.height,f=this.ta,g=f.width,f=f.height,h=Math.ceil(g/e),k=Math.ceil(f/d),l=this.kC;a.save();a.beginPath();a.rect(0,0,g,f);a.clip();for(var m=[],n=this.la.l,p=n.length,q=0;q<p;q++){var s=n[q],t=[];m.push(t);if(s.visible)for(var s=Fl(s.jb),u=q+1;u<p;u++){var x=n[u];x.visible&&Fl(x.jb)===s&&(x=x.interval,2<=x&&t.push(x))}}n=this.la.l;p=n.length;for(q=0;q<p;q++){var B=n[q];if(B.visible){var t=m[q],s=B.interval,
u=!1,y=!0,C=B.Xy;null!==C&&(u=!0,void 0!==a.setLineDash?(a.setLineDash(C),a.lineDashOffset=B.xc):void 0!==a.webkitLineDash?(a.webkitLineDash=C,a.webkitLineDashOffset=B.xc):void 0!==a.mozDash?(a.mozDash=C,a.mozDashOffset=B.xc):y=!1);if("LineV"===B.jb){a.lineWidth=B.Na;Wm(this,a,B.stroke,!1,!1);a.beginPath();for(var K=x=Math.floor(-l.x/e);K<=x+h;K++){var J=K*e+l.x;if(0<=J&&J<g&&fo(K,s,t)&&(u&&!y?Im(a,J,0,J,f,C,B.xc):(a.moveTo(J,0),a.lineTo(J,f)),2>e*s*c))break}a.stroke()}else if("LineH"===B.jb){a.lineWidth=
B.Na;Wm(this,a,B.stroke,!1,!1);a.beginPath();for(K=x=Math.floor(-l.y/d);K<=x+k&&!(J=K*d+l.y,0<=J&&J<=f&&fo(K,s,t)&&(u&&!y?Im(a,0,J,g,J,C,B.xc):(a.moveTo(0,J),a.lineTo(g,J)),2>d*s*c));K++);a.stroke()}else if("BarV"===B.jb)for(Wm(this,a,B.fill,!0,!1),B=B.width,isNaN(B)&&(B=e),K=x=Math.floor(-l.x/e);K<=x+h&&!(J=K*e+l.x,0<=J&&J<g&&fo(K,s,t)&&(a.fillRect(J,0,B,f),2>e*s*c));K++);else if("BarH"===B.jb)for(Wm(this,a,B.fill,!0,!1),B=B.height,isNaN(B)&&(B=d),K=x=Math.floor(-l.y/d);K<=x+k&&!(J=K*d+l.y,0<=J&&
J<=f&&fo(K,s,t)&&(a.fillRect(0,J,g,B),2>d*s*c));K++);u&&(void 0!==a.setLineDash?(a.setLineDash(qb),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=qb,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0))}}a.restore();xk(b,a,!1)}else{this.fa===cn&&(a.lineCap="butt",ho(this,a,!0,this.Sc,!0),ho(this,a,!1,this.Lc,!0),io(this,a,!0,this.Sc),io(this,a,!1,this.Lc),ho(this,a,!0,this.Sc,!1),ho(this,a,!1,this.Lc,!1));(c=this.sC)&&a.save();e=this.Ye();d=this.la.l;g=
d.length;for(f=0;f<g;f++)h=d[f],c&&h===e&&(a.Bs=!0),h.ne(a,b),c&&h===e&&(a.Bs=!1);c&&(a.restore(),xk(b,a,!1))}};
function io(a,b,c,d){for(var e=d.length,f=a.Q,g=c?a.Ac(0):a.zc(0),h=0;h<e;h++){var k=d[h];if(void 0!==k&&k!==g&&0!==k.Aa){var l=k.bo;isNaN(l)&&(l=c?a.Dg:a.Cg);var m=k.ao;null===m&&(m=c?a.nh:a.Bg);if(0!==l&&null!==m){Wm(a,b,m,!1,!1);var m=!1,n=!0,p=k.GG;null!==p&&(m=!0,void 0!==b.setLineDash?(b.setLineDash(p),b.lineDashOffset=a.xc):void 0!==b.webkitLineDash?(b.webkitLineDash=p,b.webkitLineDashOffset=a.xc):void 0!==b.mozDash?(b.mozDash=p,b.mozDashOffset=a.xc):n=!1);b.beginPath();var q=k.position+l;
c?q>f.height&&(l-=q-f.height):q>f.width&&(l-=q-f.width);k=k.position+l/2;b.lineWidth=l;q=a.padding;c?(k+=q.top,l=q.left,q=f.width-q.right,m&&!n?Im(b,l,k,q,k,p,0):(b.moveTo(l,k),b.lineTo(q,k))):(k+=q.left,l=q.top,q=f.height-q.bottom,m&&!n?Im(b,k,l,k,q,p,0):(b.moveTo(k,l),b.lineTo(k,q)));b.stroke();m&&(void 0!==b.setLineDash?(b.setLineDash(qb),b.lineDashOffset=0):void 0!==b.webkitLineDash?(b.webkitLineDash=qb,b.webkitLineDashOffset=0):void 0!==b.mozDash&&(b.mozDash=null,b.mozDashOffset=0))}}}}
function ho(a,b,c,d,e){for(var f=d.length,g=a.Q,h=0;h<f;h++){var k=d[h];if(void 0!==k&&null!==k.background&&k.Lx!==e&&0!==k.Aa){var l=c?g.height:g.width;if(!(k.position>l)){var m=k.Af(),n=k.bo;isNaN(n)&&(n=c?a.Dg:a.Cg);var p=k.ao;null===p&&(p=c?a.nh:a.Bg);null===p&&(n=0);m-=n;n=k.position+n;m+=k.Aa;n+m>l&&(m=l-n);0>=m||(l=a.padding,Wm(a,b,k.background,!0,!1),c?b.fillRect(l.left,n+l.top,g.width-(l.left+l.right),m):b.fillRect(n+l.left,l.top,m,g.height-(l.top+l.bottom)))}}}}
function fo(a,b,c){if(0!==a%b)return!1;b=c.length;for(var d=0;d<b;d++)if(0===a%c[d])return!1;return!0}function Fl(a){return"LineV"===a||"BarV"===a}
r.Bn=function(a,b,c,d,e){var f=this.gf(),g=this.transform,h=1/(g.m11*g.m22-g.m12*g.m21),k=g.m22*h,l=-g.m12*h,m=-g.m21*h,n=g.m11*h,p=h*(g.m21*g.dy-g.m22*g.dx),q=h*(g.m12*g.dx-g.m11*g.dy);if(null!==this.sl)return g=this.Q,Q.jk(g.left,g.top,g.right,g.bottom,a,b,c,d,e);if(null!==this.background)f=a*k+b*m+p,h=a*l+b*n+q,a=c*k+d*m+p,c=c*l+d*n+q,e.k(0,0),d=this.ta,c=Q.jk(0,0,d.width,d.height,f,h,a,c,e),e.transform(g);else{f||(k=1,m=l=0,n=1,q=p=0);h=a*k+b*m+p;a=a*l+b*n+q;k=c*k+d*m+p;d=c*l+d*n+q;e.k(k,d);l=
(k-h)*(k-h)+(d-a)*(d-a);c=!1;n=this.la.l;q=n.length;m=Va();for(p=0;p<q;p++)b=n[p],b.visible&&b.Bn(h,a,k,d,m)&&(c=!0,b=(h-m.x)*(h-m.x)+(a-m.y)*(a-m.y),b<l&&(l=b,e.set(m)));A(m);f&&e.transform(g)}return c};r.H=function(a){U.prototype.H.call(this,a);this.fa===vk&&(a=this.Ye(),null!==a&&a.H(!0));a=this.la.l;for(var b=a.length,c=0;c<b;c++){var d=a[c];!0!==Yk(d)&&(d.ka.w()||(d instanceof Si||d instanceof L||d instanceof Zb||Nm(d,!1)!==Ti)&&d.H(!0))}};
r.En=function(){if(!1===Yk(this)){Sk(this,!0);Pm(this,!0);for(var a=this.la.l,b=a.length,c=0;c<b;c++)a[c].En()}};r.Xf=function(){if(0!==(this.T&2048)===!1){$m(this,!0);an(this,!0);for(var a=this.la.l,b=a.length,c=0;c<b;c++)a[c].Zx()}};r.Zx=function(){an(this,!0);for(var a=this.la.l,b=a.length,c=0;c<b;c++)a[c].Zx()};
r.Mn=function(a,b,c,d){var e=this.Ih;e.width=0;e.height=0;var f=this.ka,g=this.Jf;void 0===c&&(c=g.width,d=g.height);c=Math.max(c,g.width);d=Math.max(d,g.height);var h=this.se;isNaN(f.width)||(a=Math.min(f.width,h.width));isNaN(f.height)||(b=Math.min(f.height,h.height));a=Math.max(c,a);b=Math.max(d,b);var k=this.padding;a=Math.max(a-k.left-k.right,0);b=Math.max(b-k.top-k.bottom,0);var l=this.la.l;if(0!==l.length){var m=this.fa.zb;switch(m){case "Position":var n=a,p=b,q=c,s=d,t=l.length;e.x=0;e.y=
0;e.width=0;for(var u=e.height=0;u<t;u++){var x=l[u];if(x.visible||x===this.Kb){var B=x.margin,y=B.right+B.left,C=B.top+B.bottom;lj(x,n,p,q,s);var K=x.oa,J=Math.max(K.width+y,0),ba=Math.max(K.height+C,0),ja=x.position.x,Y=x.position.y;isFinite(ja)||(ja=0);isFinite(Y)||(Y=0);if(x instanceof X){var P=x;if(P.gy)var ha=P.Na/2,ja=ja-ha,Y=Y-ha}id(e,ja,Y,J,ba)}}break;case "Vertical":for(var Ra=a,Ha=c,eb=l.length,ya=ob(),Pa=0;Pa<eb;Pa++){var Ca=l[Pa];if(Ca.visible||Ca===this.Kb){var Ic=Nm(Ca,!1);if(Ic!==
Ti&&Ic!==Cm)ya.push(Ca);else{var Qd=Ca.margin,Cg=Qd.right+Qd.left,Jc=Qd.top+Qd.bottom;lj(Ca,Ra,Infinity,Ha,0);var Jf=Ca.oa,Dg=Math.max(Jf.width+Cg,0),kb=Math.max(Jf.height+Jc,0);e.width=Math.max(e.width,Dg);e.height+=kb}}}var Bb=ya.length;if(0!==Bb){this.ka.width?Ra=Math.min(this.ka.width,this.se.width):0!==e.width&&(Ra=Math.min(e.width,this.se.width));for(Pa=0;Pa<Bb;Pa++)if(Ca=ya[Pa],Ca.visible||Ca===this.Kb)Qd=Ca.margin,Cg=Qd.right+Qd.left,Jc=Qd.top+Qd.bottom,lj(Ca,Ra,Infinity,Ha,0),Jf=Ca.oa,Dg=
Math.max(Jf.width+Cg,0),kb=Math.max(Jf.height+Jc,0),e.width=Math.max(e.width,Dg),e.height+=kb;pb(ya)}break;case "Horizontal":for(var Ja=b,Ma=d,Jb=l.length,fc=ob(),wb=0;wb<Jb;wb++){var Nc=l[wb];if(Nc.visible||Nc===this.Kb){var Re=Nm(Nc,!1);if(Re!==Ti&&Re!==Dm)fc.push(Nc);else{var Sc=Nc.margin,xe=Sc.right+Sc.left,Se=Sc.top+Sc.bottom;lj(Nc,Infinity,Ja,0,Ma);var Kf=Nc.oa,eg=Math.max(Kf.width+xe,0),ye=Math.max(Kf.height+Se,0);e.width+=eg;e.height=Math.max(e.height,ye)}}}var gc=fc.length;if(0!==gc){this.ka.height?
Ja=Math.min(this.ka.height,this.se.height):0!==e.height&&(Ja=Math.min(e.height,this.se.height));for(wb=0;wb<gc;wb++)if(Nc=fc[wb],Nc.visible||Nc===this.Kb)Sc=Nc.margin,xe=Sc.right+Sc.left,Se=Sc.top+Sc.bottom,lj(Nc,Infinity,Ja,0,Ma),Kf=Nc.oa,eg=Math.max(Kf.width+xe,0),ye=Math.max(Kf.height+Se,0),e.width+=eg,e.height=Math.max(e.height,ye);pb(fc)}break;case "Spot":a:{var mc=a,kd=b,Hh=c,nc=d,$b=l.length,Kc=this.Ye(),Kb=Kc.margin,kf=0,ze=0,hh=Kb.right+Kb.left,Eg=Kb.top+Kb.bottom;lj(Kc,mc,kd,Hh,nc);var ac=
Kc.oa,Rd=ac.width,Tc=ac.height,Yb=Math.max(Rd+hh,0),ld=Math.max(Tc+Eg,0);e.x=-Kb.left;e.y=-Kb.top;e.width=Yb;e.height=ld;for(var oc=0;oc<$b;oc++){var cb=l[oc];if(cb!==Kc&&(cb.visible||cb===this.Kb)){Kb=cb.margin;kf=Kb.right+Kb.left;ze=Kb.top+Kb.bottom;lj(cb,mc,kd,0,0);var ac=cb.oa,Yb=Math.max(ac.width+kf,0),ld=Math.max(ac.height+ze,0),Cb=cb.alignment;Cb.kc()&&(Cb=this.ak);Cb.Jc()||(Cb=Dd);var bc=cb.Si;bc.kc()&&(bc=Dd);id(e,Cb.x*Rd+Cb.offsetX-(bc.x*ac.width-bc.offsetX)-Kb.left,Cb.y*Tc+Cb.offsetY-(bc.y*
ac.height-bc.offsetY)-Kb.top,Yb,ld)}}var Lc=Kc.stretch;Lc===Bm&&(Lc=Nm(Kc,!1));switch(Lc){case Ti:break a;case Ne:if(!isFinite(mc)&&!isFinite(kd))break a;break;case Dm:if(!isFinite(mc))break a;break;case Cm:if(!isFinite(kd))break a}ac=Kc.oa;Rd=ac.width;Tc=ac.height;Yb=Math.max(Rd+hh,0);ld=Math.max(Tc+Eg,0);Kb=Kc.margin;e.x=-Kb.left;e.y=-Kb.top;e.width=Yb;e.height=ld;for(oc=0;oc<$b;oc++)cb=l[oc],cb===Kc||!cb.visible&&cb!==this.Kb||(Kb=cb.margin,kf=Kb.right+Kb.left,ze=Kb.top+Kb.bottom,ac=cb.oa,Yb=Math.max(ac.width+
kf,0),ld=Math.max(ac.height+ze,0),Cb=cb.alignment,Cb.kc()&&(Cb=this.ak),Cb.Jc()||(Cb=Dd),bc=cb.Si,bc.kc()&&(bc=Dd),id(e,Cb.x*Rd+Cb.offsetX-(bc.x*ac.width-bc.offsetX)-Kb.left,Cb.y*Tc+Cb.offsetY-(bc.y*ac.height-bc.offsetY)-Kb.top,Yb,ld))}break;case "Auto":var Ae=a,Be=b,fg=c,lf=d,gg=l.length,wc=this.Ye(),Ab=wc.margin,Uc=Ab.right+Ab.left,xd=Ab.top+Ab.bottom;lj(wc,Ae,Be,fg,lf);var Sd=wc.oa,xb=Math.max(Sd.width+Uc,0),Vb=Math.max(Sd.height+xd,0),Oc=jo(wc),Td=Oc.x*xb+Oc.offsetX,Ih=Oc.y*Vb+Oc.offsetY,Oc=ko(wc),
Jh=Oc.x*xb+Oc.offsetX,Kh=Oc.y*Vb+Oc.offsetY,Fg=Ae,md=Be;isFinite(Ae)&&(Fg=Math.abs(Td-Jh));isFinite(Be)&&(md=Math.abs(Ih-Kh));var yd=Ya();yd.k(0,0);for(var nd=0;nd<gg;nd++){var Lb=l[nd];if(Lb!==wc&&(Lb.visible||Lb===this.Kb)){var Ab=Lb.margin,Te=Ab.right+Ab.left,Mb=Ab.top+Ab.bottom;lj(Lb,Fg,md,0,0);Sd=Lb.oa;xb=Math.max(Sd.width+Te,0);Vb=Math.max(Sd.height+Mb,0);yd.k(Math.max(xb,yd.width),Math.max(Vb,yd.height))}}if(1===gg)e.width=xb,e.height=Vb,$a(yd);else{var dd=jo(wc),mf=ko(wc),cc=0,dc=0;mf.x!==
dd.x&&mf.y!==dd.y&&(cc=yd.width/Math.abs(mf.x-dd.x),dc=yd.height/Math.abs(mf.y-dd.y));$a(yd);var Ud=0;if(wc instanceof X){var zd=wc,Ud=zd.Na*zd.scale;Ui(zd)===Vi&&(cc=dc=Math.max(cc,dc))}var cc=cc+(Math.abs(dd.offsetX)+Math.abs(mf.offsetX)+Ud),dc=dc+(Math.abs(dd.offsetY)+Math.abs(mf.offsetY)+Ud),Ce=wc.stretch;Ce===Bm&&(Ce=Nm(wc,!1));switch(Ce){case Ti:lf=fg=0;break;case Ne:isFinite(Ae)&&(cc=Ae);isFinite(Be)&&(dc=Be);break;case Dm:isFinite(Ae)&&(cc=Ae);lf=0;break;case Cm:fg=0,isFinite(Be)&&(dc=Be)}wc instanceof
X&&!wc.ka.w()&&(zd=wc,zd.dg?zd.sj=null:zd.za=null);wc.En();lj(wc,cc,dc,fg,lf);e.width=wc.oa.width+Uc;e.height=wc.oa.height+xd}break;case "Table":for(var De=a,Lf=b,An=c,Dj=d,Sa=l.length,nf=ob(),Ee=ob(),la=0;la<Sa;la++){var qa=l[la],ih=qa instanceof L?qa:null;if(null===ih||ih.type!==Rm&&ih.type!==Sm||!qa.visible)nf.push(qa);else{Ee.push(qa);for(var Lh=ih.la.l,ui=Lh.length,Ad=0;Ad<ui;Ad++){var vi=Lh[Ad];ih.type===Rm?vi.Tb=qa.Tb:ih.type===Sm&&(vi.column=qa.column);nf.push(vi)}}}Sa=nf.length;0===Sa&&(this.Ac(0),
this.zc(0));for(var xc=[],la=0;la<Sa;la++)qa=nf[la],Sk(qa,!0),Pm(qa,!0),xc[qa.Tb]||(xc[qa.Tb]=[]),xc[qa.Tb][qa.column]||(xc[qa.Tb][qa.column]=[]),xc[qa.Tb][qa.column].push(qa);pb(nf);for(var Mh=ob(),Bd=ob(),Ue=ob(),od={count:0},Vd={count:0},ed=De,Wd=Lf,Gg=this.Sc,Sa=Gg.length,la=0;la<Sa;la++){var ka=Gg[la];void 0!==ka&&(ka.Aa=0)}Gg=this.Lc;Sa=Gg.length;for(la=0;la<Sa;la++)ka=Gg[la],void 0!==ka&&(ka.Aa=0);for(var Ve=xc.length,of=0,la=0;la<Ve;la++)xc[la]&&(of=Math.max(of,xc[la].length));for(var Zk=
Math.min(this.Hh,Ve-1),$k=Math.min(this.uh,of-1),fd=0,Ve=xc.length,la=Zk;la<Ve;la++)if(xc[la]){var of=xc[la].length,Db=this.Ac(la);Db.Aa=0;for(Ad=$k;Ad<of;Ad++)if(xc[la][Ad]){var Eb=this.zc(Ad);void 0===Mh[Ad]&&(Eb.Aa=0,Mh[Ad]=!0);for(var al=xc[la][Ad],Hg=al.length,jh=0;jh<Hg;jh++)if(qa=al[jh],qa.visible||qa===this.Kb){var kh=1<qa.Di||1<qa.fi;kh&&Bd.push(qa);var pc=qa.margin,Ig=pc.right+pc.left,Jg=pc.top+pc.bottom,Fe=dn(qa,Db,Eb,!1),We=qa.ka,Bn=!isNaN(We.height),wi=!isNaN(We.width)&&Bn;kh||Fe===Ti||
wi||(void 0===od[Ad]&&(od[Ad]=-1,od.count++),void 0===Vd[la]&&(Vd[la]=-1,Vd.count++),Ue.push(qa));lj(qa,Infinity,Infinity,0,0);var pf=qa.oa,Mf=Math.max(pf.width+Ig,0),le=Math.max(pf.height+Jg,0);1!==qa.Di||Fe!==Ti&&Fe!==Dm||(ka=this.Ac(la),fd=Math.max(le-ka.Aa,0),fd>Wd&&(fd=Wd),ka.Aa+=fd,Wd=Math.max(Wd-fd,0));1!==qa.fi||Fe!==Ti&&Fe!==Cm||(ka=this.zc(Ad),fd=Math.max(Mf-ka.Aa,0),fd>ed&&(fd=ed),ka.Aa+=fd,ed=Math.max(ed-fd,0));kh&&qa.En()}}}pb(Mh);for(var Vc=0,Ge=0,Sa=this.mr,la=0;la<Sa;la++)void 0!==
this.Lc[la]&&(Vc+=this.zc(la).bb);Sa=this.hs;for(la=0;la<Sa;la++)void 0!==this.Sc[la]&&(Ge+=this.Ac(la).bb);for(var ed=Math.max(De-Vc,0),bl=Wd=Math.max(Lf-Ge,0),cl=ed,Sa=Ue.length,la=0;la<Sa;la++){var qa=Ue[la],Db=this.Ac(qa.Tb),Eb=this.zc(qa.column),Ej=qa.oa,pc=qa.margin,Ig=pc.right+pc.left,Jg=pc.top+pc.bottom;od[qa.column]=0===Eb.Aa?Math.max(Ej.width+Ig,od[qa.column]):null;Vd[qa.Tb]=0===Db.Aa?Math.max(Ej.height+Jg,Vd[qa.Tb]):null}var Nh=0,gd=0;for(la in Vd)"count"!==la&&(Nh+=Vd[la]);for(la in od)"count"!==
la&&(gd+=od[la]);for(var Nb=Ya(),la=0;la<Sa;la++)if(qa=Ue[la],qa.visible||qa===this.Kb){var Db=this.Ac(qa.Tb),Eb=this.zc(qa.column),Xe=0;isFinite(Eb.width)?Xe=Eb.width:(Xe=isFinite(ed)&&null!==od[qa.column]?0===gd?Eb.Aa+ed:od[qa.column]/gd*cl:null!==od[qa.column]?ed:Eb.Aa||ed,Xe=Math.max(0,Xe-Eb.Af()));var pd=0;isFinite(Db.height)?pd=Db.height:(pd=isFinite(Wd)&&null!==Vd[qa.Tb]?0===Nh?Db.Aa+Wd:Vd[qa.Tb]/Nh*bl:null!==Vd[qa.Tb]?Wd:Db.Aa||Wd,pd=Math.max(0,pd-Db.Af()));Nb.k(Math.max(Eb.Uh,Math.min(Xe,
Eb.$e)),Math.max(Db.Uh,Math.min(pd,Db.$e)));Fe=dn(qa,Db,Eb,!1);switch(Fe){case Dm:Nb.height=Infinity;break;case Cm:Nb.width=Infinity}pc=qa.margin;Ig=pc.right+pc.left;Jg=pc.top+pc.bottom;qa.En();lj(qa,Nb.width,Nb.height,Eb.Uh,Db.Uh);pf=qa.oa;Mf=Math.max(pf.width+Ig,0);le=Math.max(pf.height+Jg,0);isFinite(ed)&&(Mf=Math.min(Mf,Nb.width));isFinite(Wd)&&(le=Math.min(le,Nb.height));var Oh=0,Oh=Db.Aa;Db.Aa=Math.max(Db.Aa,le);fd=Db.Aa-Oh;Wd=Math.max(Wd-fd,0);Oh=Eb.Aa;Eb.Aa=Math.max(Eb.Aa,Mf);fd=Eb.Aa-Oh;
ed=Math.max(ed-fd,0)}pb(Ue);for(var qf=Ya(),Sa=Bd.length,la=0;la<Sa;la++)if(qa=Bd[la],qa.visible||qa===this.Kb){Db=this.Ac(qa.Tb);Eb=this.zc(qa.column);Nb.k(Math.max(Eb.Uh,Math.min(De,Eb.$e)),Math.max(Db.Uh,Math.min(Lf,Db.$e)));Fe=dn(qa,Db,Eb,!1);switch(Fe){case Ne:0!==Eb.Aa&&(Nb.width=Math.min(Nb.width,Eb.Aa));0!==Db.Aa&&(Nb.height=Math.min(Nb.height,Db.Aa));break;case Dm:0!==Eb.Aa&&(Nb.width=Math.min(Nb.width,Eb.Aa));break;case Cm:0!==Db.Aa&&(Nb.height=Math.min(Nb.height,Db.Aa))}isFinite(Eb.width)&&
(Nb.width=Eb.width);isFinite(Db.height)&&(Nb.height=Db.height);qf.k(0,0);for(var qc=1;qc<qa.Di&&!(qa.Tb+qc>=this.hs);qc++)ka=this.Ac(qa.Tb+qc),qf.height+=Math.max(ka.Uh,isNaN(ka.he)?ka.$e:Math.min(ka.he,ka.$e));for(qc=1;qc<qa.fi&&!(qa.column+qc>=this.mr);qc++)ka=this.zc(qa.column+qc),qf.width+=Math.max(ka.Uh,isNaN(ka.he)?ka.$e:Math.min(ka.he,ka.$e));Nb.width+=qf.width;Nb.height+=qf.height;pc=qa.margin;Ig=pc.right+pc.left;Jg=pc.top+pc.bottom;lj(qa,Nb.width,Nb.height,An,Dj);for(var pf=qa.oa,Mf=Math.max(pf.width+
Ig,0),le=Math.max(pf.height+Jg,0),xi=0,qc=0;qc<qa.Di&&!(qa.Tb+qc>=this.hs);qc++)ka=this.Ac(qa.Tb+qc),xi+=ka.total||0;if(xi<le)for(var me=le-xi;0<me;){var ne=ka.bb||0;isNaN(ka.height)&&ka.$e>ne&&(ka.Aa=Math.min(ka.$e,ne+me),ka.bb!==ne&&(me-=ka.bb-ne));if(-1===ka.index-1)break;ka=this.Ac(ka.index-1)}for(var Kg=0,qc=0;qc<qa.fi&&!(qa.column+qc>=this.mr);qc++)ka=this.zc(qa.column+qc),Kg+=ka.total||0;if(Kg<Mf)for(me=Mf-Kg;0<me;){ne=ka.bb||0;isNaN(ka.width)&&ka.$e>ne&&(ka.Aa=Math.min(ka.$e,ne+me),ka.bb!==
ne&&(me-=ka.bb-ne));if(-1===ka.index-1)break;ka=this.zc(ka.index-1)}}pb(Bd);$a(qf);$a(Nb);for(var Lg=0,Nf=0,Fe=Nm(this,!0),oe=this.ka,Mg=this.se,Ye=Ge=Vc=0,Xd=0,Sa=this.mr,la=0;la<Sa;la++)void 0!==this.Lc[la]&&(ka=this.zc(la),isFinite(ka.width)?(Ye+=ka.width,Ye+=ka.Af()):lo(ka)===mo?(Ye+=ka.bb,Ye+=ka.Af()):0!==ka.bb&&(Vc+=ka.bb,Vc+=ka.Af()));var Lg=isFinite(oe.width)?Math.min(oe.width,Mg.width):Fe!==Ti&&isFinite(De)?De:Vc,Lg=Math.max(Lg,this.Jf.width),Lg=Math.max(Lg-Ye,0),yi=Math.max(Lg/Vc,1);isFinite(yi)||
(yi=1);for(la=0;la<Sa;la++)void 0!==this.Lc[la]&&(ka=this.zc(la),isFinite(ka.width)||lo(ka)===mo||(ka.Aa=ka.bb*yi),ka.position=e.width,0!==ka.bb&&(e.width+=ka.bb,e.width+=ka.Af()));Sa=this.hs;for(la=0;la<Sa;la++)void 0!==this.Sc[la]&&(ka=this.Ac(la),isFinite(ka.height)?(Xd+=ka.height,Xd+=ka.Af()):lo(ka)===mo?(Xd+=ka.bb,Xd+=ka.Af()):0!==ka.bb&&(Ge+=ka.bb,Ge+=ka.Af()));var Nf=isFinite(oe.height)?Math.min(oe.height,Mg.height):Fe!==Ti&&isFinite(Lf)?Lf:Ge,Nf=Math.max(Nf,this.Jf.height),Nf=Math.max(Nf-
Xd,0),Ng=Math.max(Nf/Ge,1);isFinite(Ng)||(Ng=1);for(la=0;la<Sa;la++)void 0!==this.Sc[la]&&(ka=this.Ac(la),isFinite(ka.height)||lo(ka)===mo||(ka.Aa=ka.bb*Ng),ka.position=e.height,0!==ka.bb&&(e.height+=ka.bb,e.height+=ka.Af()));Sa=Ee.length;for(la=0;la<Sa;la++){var yc=Ee[la];yc.type===Rm?(Xe=e.width,ka=this.Ac(yc.Tb),pd=ka.Aa):(ka=this.zc(yc.column),Xe=ka.Aa,pd=e.height);yc.mc.k(0,0,Xe,pd);Sk(yc,!1);xc[yc.Tb]||(xc[yc.Tb]=[]);xc[yc.Tb][yc.column]||(xc[yc.Tb][yc.column]=[]);xc[yc.Tb][yc.column].push(yc)}pb(Ee);
this.yq=xc;break;case "Viewbox":var lh=a,mh=b,hg=c,Fj=d;1<l.length&&v("Viewbox Panel cannot contain more than one GraphObject.");var rf=l[0];rf.Fb=1;rf.En();lj(rf,Infinity,Infinity,hg,Fj);var Gj=rf.oa,el=rf.margin,br=el.right+el.left,cr=el.top+el.bottom;if(isFinite(lh)||isFinite(mh)){var nt=rf.scale,fl=Gj.width,gl=Gj.height,dr=Math.max(lh-br,0),er=Math.max(mh-cr,0),Hj=1;this.hn===Vi?0!==fl&&0!==gl&&(Hj=Math.min(dr/fl,er/gl)):0!==fl&&0!==gl&&(Hj=Math.max(dr/fl,er/gl));0===Hj&&(Hj=1E-4);rf.Fb*=Hj;nt!==
rf.scale&&(Sk(rf,!0),lj(rf,Infinity,Infinity,hg,Fj))}Gj=rf.oa;e.width=isFinite(lh)?lh:Math.max(Gj.width+br,0);e.height=isFinite(mh)?mh:Math.max(Gj.height+cr,0);break;case "Link":var fr=l.length,nh=this instanceof Vg?this.Wg:this;if(nh instanceof W)if(0===fr){var hl=this.hc;ad(hl,0,0);var He=this.oa;He.k(0,0,0,0)}else{var il=this instanceof Vg?null:nh.path,Of=nh.Pl,sf=this.Ih;sf.assign(Of);sf.x=0;var zi=sf.y=0,Ij=nh.points,zi=void 0!==this.Z?this.Z:Ij.count;this.$f.k(Of.x,Of.y);this.ei.clear();null!==
il&&(no(il,Of.width,Of.height),He=il.oa,sf.eh(He),this.ei.add(He));for(var Ai=hb(),Jj=Va(),Og=Va(),Cn=0;Cn<fr;Cn++){var rc=l[Cn];if(rc!==il)if(rc.Hf&&rc instanceof X)no(rc,Of.width,Of.height),He=rc.oa,sf.eh(He),this.ei.add(He);else if(2>zi)lj(rc,Infinity,Infinity),He=rc.oa,sf.eh(He),this.ei.add(He);else{var Pg=rc.ef,hr=rc.uv,Dn=rc.Si;Dn.Fd()&&(Dn=Dd);var Kj=rc.vv,ot=rc.iD,Lj=0,Mj=0,jl=0;if(Pg<-zi||Pg>=zi){var ir=nh.EC,Nj=nh.DC;Kj!==Ei&&(jl=nh.computeAngle(rc,Kj,Nj),rc.angle=jl);Lj=ir.x-Of.x;Mj=ir.y-
Of.y}else{var ig,Bi;if(0<=Pg)ig=Ij.Y(Pg),Bi=Pg<zi-1?Ij.Y(Pg+1):ig;else{var En=zi+Pg;ig=Ij.Y(En);Bi=0<En?Ij.Y(En-1):ig}Nj=0<=Pg?ig.Ph(Bi):Bi.Ph(ig);Kj!==Ei&&(jl=nh.computeAngle(rc,Kj,Nj),rc.am=jl);Lj=ig.x+(Bi.x-ig.x)*hr-Of.x;Mj=ig.y+(Bi.y-ig.y)*hr-Of.y}lj(rc,Infinity,Infinity);var He=rc.oa,hl=rc.ta,Oj=0;rc instanceof X&&(Oj=rc.Na);var kl=hl.width+Oj,Fn=hl.height+Oj;Ai.reset();Ai.translate(-He.x,-He.y);Ai.scale(rc.scale,rc.scale);Ai.rotate(Kj===Ei?rc.angle:Nj,kl/2,Fn/2);var Ci=new D(0,0,kl,Fn);Jj.ms(Ci,
Dn);Ai.Ka(Jj);var pt=-Jj.x+Oj/2,qt=-Jj.y+Oj/2;Og.assign(ot);isNaN(Og.x)&&(Og.x=0<=Pg?kl/2+3:-(kl/2+3));isNaN(Og.y)&&(Og.y=-(Fn/2+3));Og.rotate(Nj);Lj+=Og.x;Mj+=Og.y;Ci.set(He);Ci.x=Lj+pt;Ci.y=Mj+qt;this.ei.add(Ci);sf.eh(Ci)}}if(this.Pd)for(var jr=this.If;jr.next();)lj(jr.value,Infinity,Infinity);this.Ih=sf;var Gn=this.$f;Gn.k(Gn.x+sf.x,Gn.y+sf.y);ad(e,sf.width||0,sf.height||0);jb(Ai);A(Jj);A(Og)}break;case "Grid":break;case "TableRow":case "TableColumn":v(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");
break;default:v("Unknown panel type: "+m)}}var tf=e.width,uf=e.height,ll=this.padding,rt=ll.top+ll.bottom,tf=tf+(ll.left+ll.right),uf=uf+rt;isFinite(f.width)&&(tf=f.width);isFinite(f.height)&&(uf=f.height);tf=Math.min(h.width,tf);uf=Math.min(h.height,uf);tf=Math.max(g.width,tf);uf=Math.max(g.height,uf);tf=Math.max(c,tf);uf=Math.max(d,uf);e.width=tf;e.height=uf;ad(this.hc,tf,uf);Km(this,0,0,tf,uf)};
L.prototype.findMainElement=L.prototype.Ye=function(){if(null===this.ml){var a=this.la.l,b=a.length;if(0===b)return null;for(var c=0;c<b;c++){var d=a[c];if(!0===d.Hf)return this.ml=d}this.ml=a[0]}return this.ml};
L.prototype.Jh=function(a,b,c,d){var e=this.Ih,f=this.la.l,g=db(0,0,0,0);if(0===f.length){var h=this.Q;h.x=a;h.y=b;h.width=c;h.height=d}else{if(!this.ka.w()){var k=Nm(this,!0),l=this.mc,m=l.width,n=l.height,p=this.margin,q=p.left+p.right,s=p.top+p.bottom;m===c&&n===d&&(k=Ti);switch(k){case Ti:if(m>c||n>d)this.H(),lj(this,m>c?c:m,n>d?d:n);break;case Ne:this.H(!0);lj(this,c+q,d+s,0,0);break;case Dm:this.H(!0);lj(this,c+q,n+s,0,0);break;case Cm:this.H(!0),lj(this,m+q,d+s,0,0)}}h=this.Q;h.x=a;h.y=b;h.width=
c;h.height=d;var t=this.fa.zb;switch(t){case "Position":for(var u=f.length,x=e.x-this.padding.left,B=e.y-this.padding.top,y=0;y<u;y++){var C=f[y],K=C.oa,J=C.margin,ba=C.position.x,ja=C.position.y;g.x=isNaN(ba)?-x:ba-x;g.y=isNaN(ja)?-B:ja-B;if(C instanceof X){var Y=C;if(Y.gy){var P=Y.Na/2;g.x-=P;g.y-=P}}g.x+=J.left;g.y+=J.top;g.width=K.width;g.height=K.height;C.visible&&C.ac(g.x,g.y,g.width,g.height)}break;case "Vertical":for(var ha=f.length,Ra=this.padding.left,Ha=this.padding.top,eb=0;eb<ha;eb++){var ya=
Ra,Pa=f[eb];if(Pa.visible){var Ca=Pa.oa,Ic=Pa.margin,Qd=Ic.left+Ic.right,Cg=Ra+this.padding.right,Jc=Ca.width,Jf=Nm(Pa,!1);if(isNaN(Pa.ka.width)&&Jf===Ne||Jf===Dm)Jc=Math.max(e.width-Qd-Cg,0);var Dg=Jc+Qd+Cg,kb=Pa.alignment;kb.kc()&&(kb=this.ak);kb.Jc()||(kb=Dd);Pa.ac(ya+kb.offsetX+Ic.left+(e.width*kb.x-Dg*kb.x),Ha+kb.offsetY+Ic.top,Jc,Ca.height);Ha+=Ca.height+Ic.bottom+Ic.top}}break;case "Horizontal":for(var Bb=f.length,Ja=this.padding.top,Ma=this.padding.left,Jb=0;Jb<Bb;Jb++){var fc=Ja,wb=f[Jb];
if(wb.visible){var Nc=wb.oa,Re=wb.margin,Sc=Re.top+Re.bottom,xe=Ja+this.padding.bottom,Se=Nc.height,Kf=Nm(wb,!1);if(isNaN(wb.ka.height)&&Kf===Ne||Kf===Cm)Se=Math.max(e.height-Sc-xe,0);var eg=Se+Sc+xe,ye=wb.alignment;ye.kc()&&(ye=this.ak);ye.Jc()||(ye=Dd);wb.ac(Ma+ye.offsetX+Re.left,fc+ye.offsetY+Re.top+(e.height*ye.y-eg*ye.y),Nc.width,Se);Ma+=Nc.width+Re.left+Re.right}}break;case "Spot":var gc=f.length,mc=this.Ye(),kd=mc.oa,Hh=kd.width,nc=kd.height,$b=this.padding,Kc=$b.left,Kb=$b.top;g.x=Kc-e.x;
g.y=Kb-e.y;mc.ac(g.x,g.y,Hh,nc);for(var kf=0;kf<gc;kf++){var ze=f[kf];if(ze!==mc){var hh=ze.oa,Eg=hh.width,ac=hh.height,Rd=ze.alignment;Rd.kc()&&(Rd=this.ak);Rd.Jc()||(Rd=Dd);var Tc=ze.Si;Tc.kc()&&(Tc=Dd);g.x=Rd.x*Hh+Rd.offsetX-(Tc.x*Eg-Tc.offsetX);g.y=Rd.y*nc+Rd.offsetY-(Tc.y*ac-Tc.offsetY);g.x-=e.x;g.y-=e.y;ze.visible&&ze.ac(Kc+g.x,Kb+g.y,Eg,ac)}}break;case "Auto":var Yb=f.length,ld=this.Ye(),oc=ld.oa,cb=bb();cb.k(0,0,1,1);var Cb=ld.margin,bc=Cb.left,Lc=Cb.top,Ae=this.padding,Be=Ae.left,fg=Ae.top;
g.x=bc;g.y=Lc;g.width=oc.width;g.height=oc.height;ld.ac(Be+g.x,fg+g.y,g.width,g.height);var lf=jo(ld),gg=ko(ld),wc=0+lf.y*oc.height+lf.offsetY,Ab=0+gg.x*oc.width+gg.offsetX,Uc=0+gg.y*oc.height+gg.offsetY;cb.x=0+lf.x*oc.width+lf.offsetX;cb.y=wc;id(cb,Ab,Uc,0,0);cb.x+=bc+Be;cb.y+=Lc+fg;for(var xd=0;xd<Yb;xd++){var Sd=f[xd];if(Sd!==ld){var xb=Sd.oa,Cb=Sd.margin,Vb=Math.max(xb.width+Cb.right+Cb.left,0),Oc=Math.max(xb.height+Cb.top+Cb.bottom,0),Td=Sd.alignment;Td.kc()&&(Td=this.ak);Td.Jc()||(Td=Dd);g.x=
cb.width*Td.x+Td.offsetX-Vb*Td.x+Cb.left+cb.x;g.y=cb.height*Td.y+Td.offsetY-Oc*Td.y+Cb.top+cb.y;g.width=cb.width;g.height=cb.height;Sd.visible&&(jd(cb.x,cb.y,cb.width,cb.height,g.x,g.y,xb.width,xb.height)?Sd.ac(g.x,g.y,xb.width,xb.height):Sd.ac(g.x,g.y,xb.width,xb.height,new D(cb.x,cb.y,cb.width,cb.height)))}}fb(cb);break;case "Table":for(var Ih=f.length,Jh=this.padding,Kh=Jh.left,Fg=Jh.top,md=this.yq,yd=0,nd=0,Lb=md.length,Te=0,Mb=0;Mb<Lb;Mb++)md[Mb]&&(Te=Math.max(Te,md[Mb].length));for(var dd=Math.min(this.Hh,
Lb-1);dd!==Lb&&(void 0===this.Sc[dd]||0===this.Sc[dd].bb);)dd++;for(var dd=Math.min(dd,Lb-1),mf=-this.Sc[dd].xa,cc=Math.min(this.uh,Te-1);cc!==Te&&(void 0===this.Lc[cc]||0===this.Lc[cc].bb);)cc++;for(var cc=Math.min(cc,Te-1),dc=-this.Lc[cc].xa,Ud=Ya(),Mb=0;Mb<Lb;Mb++)if(md[Mb])for(var Te=md[Mb].length,zd=this.Ac(Mb),nd=zd.xa+mf+Fg+zd.LB(),Ce=0;Ce<Te;Ce++)if(md[Mb][Ce])for(var De=this.zc(Ce),yd=De.xa+dc+Kh+De.LB(),Lf=md[Mb][Ce],An=Lf.length,Dj=0;Dj<An;Dj++){var Sa=Lf[Dj],nf=Sa.oa,Ee=Sa instanceof L?
Sa:null;if(null===Ee||Ee.type!==Rm&&Ee.type!==Sm){Ud.k(0,0);for(var la=1;la<Sa.rowSpan&&!(Mb+la>=this.hs);la++){var qa=this.Ac(Mb+la);Ud.height+=qa.total}for(la=1;la<Sa.FE&&!(Ce+la>=this.mr);la++){var ih=this.zc(Ce+la);Ud.width+=ih.total}var Lh=De.bb+Ud.width,ui=zd.bb+Ud.height;g.x=yd;g.y=nd;g.width=Lh;g.height=ui;var Ad=yd,vi=nd,xc=Lh,Mh=ui;yd+Lh>e.width&&(xc=Math.max(e.width-yd,0));nd+ui>e.height&&(Mh=Math.max(e.height-nd,0));var Bd=Sa.alignment,Ue=0,od=0,Vd=0,ed=0;if(Bd.kc()){Bd=this.ak;Bd.Jc()||
(Bd=Dd);var Ue=Bd.x,od=Bd.y,Vd=Bd.offsetX,ed=Bd.offsetY,Wd=De.alignment,Gg=zd.alignment;Wd.Jc()&&(Ue=Wd.x,Vd=Wd.offsetX);Gg.Jc()&&(od=Gg.y,ed=Gg.offsetY)}else Ue=Bd.x,od=Bd.y,Vd=Bd.offsetX,ed=Bd.offsetY;if(isNaN(Ue)||isNaN(od))od=Ue=.5,ed=Vd=0;var ka=nf.width,Ve=nf.height,of=Sa.margin,Zk=of.left+of.right,$k=of.top+of.bottom,fd=dn(Sa,zd,De,!1);!isNaN(Sa.ka.width)||fd!==Ne&&fd!==Dm||(ka=Math.max(Lh-Zk,0));!isNaN(Sa.ka.height)||fd!==Ne&&fd!==Cm||(Ve=Math.max(ui-$k,0));var Db=Sa.se,Eb=Sa.Jf,ka=Math.min(Db.width,
ka),Ve=Math.min(Db.height,Ve),ka=Math.max(Eb.width,ka),Ve=Math.max(Eb.height,Ve),al=Ve+$k;g.x+=g.width*Ue-(ka+Zk)*Ue+Vd+of.left;g.y+=g.height*od-al*od+ed+of.top;Sa.visible&&(jd(Ad,vi,xc,Mh,g.x,g.y,nf.width,nf.height)?Sa.ac(g.x,g.y,ka,Ve):Sa.ac(g.x,g.y,ka,Ve,new D(Ad,vi,xc,Mh)))}else{Sa.Xf();Sa.Cb.wa();var Hg=Sa.Cb;Hg.x=Ee.type===Rm?Kh:yd;Hg.y=Ee.type===Sm?Fg:nd;Hg.width=nf.width;Hg.height=nf.height;Sa.Cb.freeze();Pm(Sa,!1)}}$a(Ud);for(Mb=0;Mb<Ih;Mb++)Sa=f[Mb],Ee=Sa instanceof L?Sa:null,null===Ee||
Ee.type!==Rm&&Ee.type!==Sm||(Hg=Sa.Cb,Sa.hc.wa(),Sa.hc.k(0,0,Hg.width,Hg.height),Sa.hc.freeze());break;case "Viewbox":var jh=f[0],kh=jh.oa,pc=jh.margin,Ig=pc.top+pc.bottom,Jg=Math.max(kh.width+(pc.right+pc.left),0),Fe=Math.max(kh.height+Ig,0),We=jh.alignment;We.kc()&&(We=this.ak);We.Jc()||(We=Dd);g.x=e.width*We.x-Jg*We.x+We.offsetX;g.y=e.height*We.y-Fe*We.y+We.offsetY;g.width=kh.width;g.height=kh.height;jh.ac(g.x,g.y,g.width,g.height);break;case "Link":var Bn=f.length,wi=this instanceof Vg?this.Wg:
this;if(wi instanceof W){var pf=this instanceof Vg?null:wi.path,Mf=this.ei.l,le=0;if(null!==pf&&le<this.ei.count){var Vc=Mf[le];le++;pf.ac(Vc.x-this.Ih.x,Vc.y-this.Ih.y,Vc.width,Vc.height)}for(var Ge=0;Ge<Bn;Ge++){var bl=f[Ge];bl!==pf&&le<this.ei.count&&(Vc=Mf[le],le++,bl.ac(Vc.x-this.Ih.x,Vc.y-this.Ih.y,Vc.width,Vc.height))}var cl=wi.points,Ej=cl.count;if(2<=Ej&&this.Pd)for(var Nh=this.If;Nh.next();){var gd=Nh.value,Nb=Ej,Xe=cl,pd=gd.ef,Oh=gd.uv,qf=gd.Si;qf.Fd()&&(qf=Dd);var qc=gd.vv,xi=gd.iD,me=
0,ne=0,Kg=0;if(pd<-Nb||pd>=Nb){var Lg=this.EC,Nf=this.DC;qc!==Ei&&(Kg=this.computeAngle(gd,qc,Nf),gd.angle=Kg);me=Lg.x;ne=Lg.y}else{var oe=void 0,Mg=void 0;if(0<=pd)oe=Xe.l[pd],Mg=pd<Nb-1?Xe.l[pd+1]:oe;else var Ye=Nb+pd,oe=Xe.l[Ye],Mg=0<Ye?Xe.l[Ye-1]:oe;Nf=0<=pd?oe.Ph(Mg):Mg.Ph(oe);qc!==Ei&&(Kg=this.computeAngle(gd,qc,Nf),gd.angle=Kg);me=oe.x+(Mg.x-oe.x)*Oh;ne=oe.y+(Mg.y-oe.y)*Oh}var Xd=hb();Xd.reset();Xd.scale(gd.scale,gd.scale);Xd.rotate(gd.angle,0,0);var yi=gd.ta,Ng=db(0,0,yi.width,yi.height),
yc=Va();yc.ms(Ng,qf);Xd.Ka(yc);var lh=-yc.x,mh=-yc.y,hg=xi.copy();isNaN(hg.x)&&(hg.x=0<=pd?yc.x+3:-(yc.x+3));isNaN(hg.y)&&(hg.y=-(yc.y+3));hg.rotate(Nf);me+=hg.x;ne+=hg.y;Xd.DD(Ng);var lh=lh+Ng.x,mh=mh+Ng.y,Fj=Wa(me+lh,ne+mh);gd.move(Fj);A(Fj);A(yc);fb(Ng);jb(Xd)}this instanceof Vg?this.Tr():wi.Tr()}break;case "Grid":break;case "TableRow":case "TableColumn":v(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:v("Unknown panel type: "+
t)}fb(g)}};L.prototype.Ui=function(a){var b=this.ta;if(jd(0,0,b.width,b.height,a.x,a.y)){for(var b=this.la.l,c=b.length,d=Wa(0,0);c--;){var e=b[c];if(e.visible||e===this.Kb)if(Xc(d.set(a),e.transform),e.na(d))return A(d),!0}A(d);return null===this.ob&&null===this.Nb?!1:!0}return!1};L.prototype.Nu=function(a){if(this.cm===a)return this;for(var b=this.la.l,c=b.length,d=0;d<c;d++){var e=b[d].Nu(a);if(null!==e)return e}return null};
function oo(a,b,c){c(a,b);if(b instanceof L){b=b.la.l;for(var d=b.length,e=0;e<d;e++)oo(a,b[e],c)}}function vl(a,b){po(a,a,b)}function po(a,b,c){c(b);b=b.la.l;for(var d=b.length,e=0;e<d;e++){var f=b[e];f instanceof L&&po(a,f,c)}}L.prototype.walkVisualTree=function(a){qo(this,this,a)};function qo(a,b,c){c(b);if(b instanceof L){b=b.la.l;for(var d=b.length,e=0;e<d;e++)qo(a,b[e],c)}}L.prototype.findInVisualTree=L.prototype.sr=function(a){return ro(this,this,a)};
function ro(a,b,c){if(c(b))return b;if(b instanceof L){b=b.la.l;for(var d=b.length,e=0;e<d;e++){var f=ro(a,b[e],c);if(null!==f)return f}}return null}L.prototype.findObject=L.prototype.Bd=function(a){if(this.name===a)return this;for(var b=this.la.l,c=b.length,d=0;d<c;d++){var e=b[d];if(e.name===a)return e;if(e instanceof L)if(null===e.th&&null===e.nf){if(e=e.Bd(a),null!==e)return e}else if(Ql(e)&&(e=e.la.first(),null!==e&&(e=e.Bd(a),null!==e)))return e}return null};
function so(a){a=a.la.l;for(var b=a.length,c=0,d=0;d<b;d++){var e=a[d];if(e instanceof L)c=Math.max(c,so(e));else if(e instanceof X){a:{if(!e.dg)switch(e.vm){case "None":case "Square":case "Ellipse":case "Circle":case "LineH":case "LineV":case "FramedRectangle":case "RoundedRectangle":case "Line1":case "Line2":case "Border":case "Cube1":case "Cube2":case "Junction":case "Cylinder1":case "Cylinder2":case "Cylinder3":case "Cylinder4":case "PlusLine":case "XLine":case "ThinCross":case "ThickCross":e=
0;break a}e=e.eg/2*e.ll*e.Rh()}c=Math.max(c,e)}}return c}r=L.prototype;r.gf=function(){return!(this.type===Rm||this.type===Sm)};
r.Cd=function(a,b,c){if(!1===this.Of)return null;void 0===b&&(b=null);void 0===c&&(c=null);if(dl(this))return null;var d=this.ta,e=1/this.Rh(),f=this.gf(),g=f?a:Xc(Wa(a.x,a.y),this.transform),h=this.g,k=10,l=5;null!==h&&(k=h.Tx("extraTouchArea"),l=k/2);if(jd(-(l*e),-(l*e),d.width+k*e,d.height+k*e,g.x,g.y)){if(!this.Yf){var e=this.la.l,m=e.length,h=Va(),l=(k=this.sC)?this.Ye():null;if(k&&(l.gf()?Xc(h.set(a),l.transform):h.set(a),!l.na(h)))return A(h),f||A(g),null;for(;m--;){var n=e[m];if(n.visible||
n===this.Kb)if(n.gf()?Xc(h.set(a),n.transform):h.set(a),!k||n!==l){var p=null;n instanceof L?p=n.Cd(h,b,c):!0===n.Of&&n.na(h)&&(p=n);if(null!==p&&(null!==b&&(p=b(p)),null!==p&&(null===c||c(p))))return A(h),f||A(g),p}}A(h)}if(null===this.background&&null===this.sl)return f||A(g),null;a=jd(0,0,d.width,d.height,g.x,g.y)?this:null;f||A(g);return a}f||A(g);return null};
r.vr=function(a,b,c,d){if(!1===this.Of)return!1;void 0===b&&(b=null);void 0===c&&(c=null);d instanceof N||d instanceof Xb||(d=new N(U));var e=this.ta,f=this.gf(),g=f?a:Xc(Wa(a.x,a.y),this.transform);if(jd(0,0,e.width,e.height,g.x,g.y)){if(!this.Yf){for(var e=this.la.l,h=e.length,k=Va();h--;){var l=e[h];if(l.visible||l===this.Kb){l.gf()?Xc(k.set(a),l.transform):k.set(a);var m=l,l=l instanceof L?l:null;(null!==l?l.vr(k,b,c,d):m.na(k))&&!1!==m.Of&&(null!==b&&(m=b(m)),null===m||null!==c&&!c(m)||d.add(m))}}A(k)}f||
A(g);return null!==this.background||null!==this.sl}f||A(g);return!1};
r.Yi=function(a,b,c,d,e,f){if(!1===this.Of)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var g=f;void 0===f&&(g=hb(),g.reset());g.multiply(this.transform);if(this.xl(a,g))return to(this,b,c,e),void 0===f&&jb(g),!0;if(this.Gf(a,g)){if(!this.Yf)for(var h=this.la.l,k=h.length;k--;){var l=h[k];if(l.visible||l===this.Kb){var m=l.Q,n=this.ta;if(!(m.x>n.width||m.y>n.height||0>m.x+m.width||0>m.y+m.height)){m=l;l=l instanceof L?l:null;n=hb();n.set(g);if(null!==l?l.Yi(a,b,c,d,e,n):Mm(m,a,d,n))null!==b&&
(m=b(m)),null===m||null!==c&&!c(m)||e.add(m);jb(n)}}}void 0===f&&jb(g);return d}void 0===f&&jb(g);return!1};function to(a,b,c,d){for(var e=a.la.l,f=e.length;f--;){var g=e[f];if(g.visible){var h=g.Q,k=a.ta;h.x>k.width||h.y>k.height||0>h.x+h.width||0>h.y+h.height||(g instanceof L&&to(g,b,c,d),null!==b&&(g=b(g)),null===g||null!==c&&!c(g)||d.add(g))}}}
r.Dl=function(a,b,c,d,e,f){if(!1===this.Of)return!1;void 0===c&&(c=null);void 0===d&&(d=null);var g=this.ta,h=this.gf(),k=h?a:Xc(Wa(a.x,a.y),this.transform),l=h?b:Xc(Wa(b.x,b.y),this.transform),m=k.Wi(l),n=0<k.x&&k.x<g.width&&0<k.y&&k.y<g.height||Yc(k.x,k.y,0,0,0,g.height)<m||Yc(k.x,k.y,0,g.height,g.width,g.height)<m||Yc(k.x,k.y,g.width,g.height,g.width,0)<m||Yc(k.x,k.y,g.width,0,0,0)<m,g=0<k.x&&k.x<g.width&&0<k.y&&k.y<g.height&&Yc(k.x,k.y,0,0,0,g.height)<m&&Yc(k.x,k.y,0,g.height,g.width,g.height)<
m&&Yc(k.x,k.y,g.width,g.height,g.width,0)<m&&Yc(k.x,k.y,g.width,0,0,0)<m;h||(A(k),A(l));if(n){if(!this.Yf){h=Va();k=Va();l=this.la.l;for(m=l.length;m--;){var p=l[m];if(p.visible||p===this.Kb){var q=p.Q,s=this.ta;q.x>s.width||q.y>s.height||0>q.x+q.width||0>q.y+q.height||(p.gf()?(q=p.transform,Xc(h.set(a),q),Xc(k.set(b),q)):(h.set(a),k.set(b)),q=p,p=p instanceof L?p:null,null!==p?!p.Dl(h,k,c,d,e,f):!q.bC(h,k,e))||(null!==c&&(q=c(q)),null===q||null!==d&&!d(q)||f.add(q))}}A(h);A(k)}return e?n:g}return!1};
function jo(a){var b=a.o;if(void 0===b||b===ee)b=null;null===b&&a instanceof X&&(a=a.za,null!==a&&(b=a.o));null===b&&(b=ud);return b}function ko(a){var b=a.p;if(void 0===b||b===ee)b=null;null===b&&a instanceof X&&(a=a.za,null!==a&&(b=a.p));null===b&&(b=Hd);return b}L.prototype.add=L.prototype.add=function(a){ra(a,U,L,"add:element");this.pd(this.la.count,a)};L.prototype.elt=L.prototype.Y=function(a){return this.la.Y(a)};
L.prototype.insertAt=L.prototype.pd=function(a,b){b instanceof O&&v("Cannot add a Part to a Panel: "+b);if(this===b||this.nk(b))this===b&&v("Cannot make a Panel contain itself: "+this.toString()),v("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString());var c=b.I;null!==c&&c!==this&&v("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+
this.toString());this.fa!==zk||b instanceof X||v("Can only add Shapes to a Grid Panel, not: "+b);b.xk(this);b.al=null;if(null!==this.xC){var d=b.data;null!==d&&"object"===typeof d&&(null===this.mf&&(this.mf=new Fb(Object,L)),this.mf.add(d,b))}var e=this.la,d=-1;if(c===this){for(var f=-1,g=this.la.l,h=g.length,k=0;k<h;k++)if(g[k]===b){f=k;break}if(-1!==f){if(f===a||f+1>=e.count&&a>=e.count)return;e.Cc(f);d=f}else v("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}if(0>
a||a>e.count)a=e.count;e.pd(a,b);this.H();b.H();null!==b.bd?this.Hg=!0:b instanceof L&&!0===b.Hg&&(this.Hg=!0);c=this.J;null!==c&&(c.Kj=null,c.ui=NaN,this.Hg&&c instanceof V&&(c.Hg=!0),c.Hg&&(c.hd=null),e=this.g,null!==e&&e.V.Ua||(-1!==d&&c.ec(Rf,"elements",this,b,null,d,null),c.ec(Qf,"elements",this,null,b,null,a)))};L.prototype.remove=L.prototype.remove=function(a){ra(a,U,L,"remove:element");for(var b=this.la.l,c=b.length,d=-1,e=0;e<c;e++)if(b[e]===a){d=e;break}-1!==d&&this.pe(d)};
L.prototype.removeAt=L.prototype.Cc=function(a){0<=a&&this.pe(a)};L.prototype.pe=function(a){var b=this.la,c=b.Y(a);c.al=null;c.xk(null);if(null!==this.mf){var d=c.data;"object"===typeof d&&this.mf.remove(d)}b.Cc(a);Sk(this,!1);this.H();this.ml===c&&(this.ml=null);b=this.J;null!==b&&(b.Kj=null,b.ui=NaN,d=this.g,null!==d&&d.V.Ua||b.ec(Rf,"elements",this,c,null,a,null))};H(L,{hs:"rowCount"},function(){return void 0===this.Sc?0:this.Sc.length});
L.prototype.getRowDefinition=L.prototype.Ac=function(a){0>a&&za(a,">= 0",L,"getRowDefinition:idx");a=Math.round(a);var b=this.Sc;if(void 0===b[a]){var c=new ug;c.xk(this);c.sd=!0;c.index=a;b[a]=c}return b[a]};L.prototype.removeRowDefinition=L.prototype.WC=function(a){0>a&&za(a,">= 0",L,"removeRowDefinition:idx");a=Math.round(a);var b=this.Sc;this.ec(Rf,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.H()};H(L,{mr:"columnCount"},function(){return void 0===this.Lc?0:this.Lc.length});
L.prototype.getColumnDefinition=L.prototype.zc=function(a){0>a&&za(a,">= 0",L,"getColumnDefinition:idx");a=Math.round(a);var b=this.Lc;if(void 0===b[a]){var c=new ug;c.xk(this);c.sd=!1;c.index=a;b[a]=c}return b[a]};L.prototype.removeColumnDefinition=L.prototype.SC=function(a){0>a&&za(a,">= 0",L,"removeColumnDefinition:idx");a=Math.round(a);var b=this.Lc;this.ec(Rf,"coldefs",this,b[a],null,a,null);b[a]&&delete b[a];this.H()};
G(L,{BG:"rowSizing"},function(){return void 0===this.fl?eo:this.fl},function(a){if(void 0!==this.fl){var b=this.fl;b!==a&&(a!==eo&&a!==mo&&v("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.fl=a,this.H(),this.h("rowSizing",b,a))}});
G(L,{EE:"columnSizing"},function(){return void 0===this.Fk?eo:this.Fk},function(a){if(void 0!==this.Fk){var b=this.Fk;b!==a&&(a!==eo&&a!==mo&&v("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Fk=a,this.H(),this.h("columnSizing",b,a))}});
G(L,{aJ:"topIndex"},function(){return void 0===this.Hh?0:this.Hh},function(a){if(void 0!==this.Hh){var b=this.Hh;b!==a&&((!isFinite(a)||0>a)&&v("topIndex must be greater than zero and a real number. Was "+a),this.Hh=a,this.H(),this.h("topIndex",b,a))}});
G(L,{lI:"leftIndex"},function(){return void 0===this.uh?0:this.uh},function(a){if(void 0!==this.uh){var b=this.uh;b!==a&&((!isFinite(a)||0>a)&&v("leftIndex must be greater than zero and a real number. Was "+a),this.uh=a,this.H(),this.h("leftIndex",b,a))}});L.prototype.findRowForLocalY=function(a){if(0>a)return-1;if(this.type!==cn)return NaN;for(var b=0,c=this.Sc,d=c.length,e=this.Hh;e<d;e++){var f=c[e];if(void 0!==f&&(b+=f.total,a<b))return e}return-1};
L.prototype.findColumnForLocalX=function(a){if(0>a)return-1;if(this.type!==cn)return NaN;for(var b=0,c=this.Lc,d=c.length,e=this.uh;e<d;e++){var f=c[e];if(void 0!==f&&(b+=f.total,a<b))return e}return-1};
G(L,{data:"data"},function(){return this.Ag},function(a){var b=this.Ag;if(b!==a){var c=this instanceof O&&!(this instanceof Vg);c&&w(a,"object",L,"data");Yg(this);this.Ag=a;var d=this.g;null!==d&&(c?this instanceof W?(null!==b&&d.uj.remove(b),null!==a&&d.uj.add(a,this)):(null!==b&&d.mh.remove(b),null!==a&&d.mh.add(a,this)):(c=this.I,null!==c&&null!==c.mf&&(null!==b&&c.mf.remove(b),null!==a&&c.mf.add(a,this))));this.h("data",b,a);null!==d&&d.V.Ua||null!==a&&this.sb()}});
G(L,{JF:"itemIndex"},function(){return this.sp},function(a){var b=this.sp;b!==a&&(this.sp=a,this.h("itemIndex",b,a))});function nn(a){a=a.Dk;return null!==a&&a.qa}
function Yg(a){var b=a.Dk;if(null===b)null!==a.data&&v("Template cannot have .data be non-null: "+a),a.Dk=b=new N(yg);else if(b.qa)return;var c=new N(U);oo(a,a,function(a,d){var e=d.gc;if(null!==e)for(gn(d,!1),e=e.i;e.next();){var f=e.value;f.mode===Ag&&gn(d,!0);if(null!==f.Ql){var g=Bg(f,a,d);null!==g&&(c.add(g),null===g.$m&&(g.$m=new N(yg)),g.$m.add(f))}b.add(f)}if(d instanceof L&&d.type===cn){if(0<d.Sc.length)for(e=d.Sc,f=e.length,g=0;g<f;g++){var h=e[g];if(void 0!==h&&null!==h.gc)for(var k=h.gc.i;k.next();){var u=
k.value;u.uf=h;u.mx=2;u.gu=h.index;b.add(u)}}if(0<d.Lc.length)for(e=d.Lc,f=e.length,g=0;g<f;g++)if(h=e[g],void 0!==h&&null!==h.gc)for(k=h.gc.i;k.next();)u=k.value,u.uf=h,u.mx=1,u.gu=h.index,b.add(u)}});for(var d=c.i;d.next();){var e=d.value;if(null!==e.$m){gn(e,!0);for(var f=e.$m.i;f.next();){var g=f.value;null===e.gc&&(e.gc=new N(yg));e.gc.add(g)}}e.$m=null}for(d=b.i;d.next();)if(e=d.value,f=e.uf,null!==f){e.uf=null;var h=e.Ev,k=h.indexOf(".");0<k&&f instanceof L&&(g=h.substring(0,k),h=h.substr(k+
1),k=f.Bd(g),null!==k?(f=k,e.Ev=h):Da('Warning: unable to find GraphObject named "'+g+'" for Binding: '+e.toString()));f instanceof ug?(e.Ak=ub(f.I),f.I.cm=e.Ak):(e.Ak=ub(f),f.cm=e.Ak)}b.freeze();a instanceof O&&a.Zc()&&(lj(a,Infinity,Infinity),a.ac())}
L.prototype.updateTargetBindings=L.prototype.sb=function(a){var b=this.Dk;if(null!==b)for(void 0===a&&(a=""),b=b.i;b.next();){var c=b.value,d=c.sD;if(""===a||""===d||d===a)if(d=c.Ev,null!==c.KE||""!==d){var d=this.data,e=c.Ql;if(null!==e)d=""===e?this:"."===e?this:".."===e?this:this.Bd(e);else{var f=this.g;null!==f&&c.ts&&(d=f.U.Vr)}if(null!==d){var f=this,g=c.Ak;if(-1!==g){if(f=this.Nu(g),null===f)continue}else null!==c.uf&&(f=c.uf);"."===e?d=f:".."===e&&(d=f.I);e=c.mx;if(0!==e){if(!(f instanceof
L))continue;g=f;1===e?f=g.zc(c.gu):2===e&&(f=g.Ac(c.gu))}void 0!==f&&c.GD(f,d)}}}};G(L,{xC:"itemArray"},function(){return this.th},function(a){var b=this.th;if(b!==a){var c=this.g;null!==c&&null!==b&&Bl(c,this);this.th=a;null!==c&&null!==a&&xl(c,this);this.h("itemArray",b,a);null!==c&&c.V.Ua||this.Hy()}});function Ql(a){return a.type===Ri||a.type===vk||a.type===si||a.type===cn&&0<a.la.length&&(a=a.la.Y(0),a.Hf&&a instanceof L&&(a.type===Rm||a.type===Sm))?!0:!1}
L.prototype.rebuildItemElements=L.prototype.Hy=function(){var a=0;for(Ql(this)&&(a=1);this.la.length>a;)this.pe(a);a=this.xC;if(null!==a)for(var b=Ia(a),c=0;c<b;c++)Pl(this,La(a,c),c)};function Pl(a,b,c){if(!(void 0===b||null===b||0>c)){var d=a.getCategoryForItemData(b,c),d=a.findTemplateForItemData(b,c,d);if(null!==d){Yg(d);d=d.copy();"object"===typeof b&&(null===a.mf&&(a.mf=new Fb(Object,L)),a.mf.add(b,d));var e=c;Ql(a)&&e++;a.pd(e,d);Rl(a,e,c);d.data=b}}}
function Rl(a,b,c){for(a=a.la;b<a.length;){var d=a.Y(b);if(d instanceof L){var e=b,f=c;d.type===Rm?d.Tb=e:d.type===Sm&&(d.column=e);d.JF=f}b++;c++}}function ek(a){a=a.la.l;for(var b=a.length,c=0;c<b;c++){var d=a[c];if(d instanceof uo||d instanceof L&&ek(d))return!0}return!1}
G(L,{iI:"itemTemplate"},function(){return null===this.nf?null:this.nf.ja("")},function(a){if(null===this.nf){if(null===a)return;this.nf=new Fb("string",L)}var b=this.nf.ja("");b!==a&&(ra(a,L,L,"itemTemplate"),(a instanceof O||a.Hf)&&v("itemTemplate must not be a Part or be Panel.isPanelMain: "+a),this.nf.add("",a),this.h("itemTemplate",b,a),a=this.g,null!==a&&a.V.Ua||this.Hy())});
G(L,{KF:"itemTemplateMap"},function(){return this.nf},function(a){var b=this.nf;if(b!==a){ra(a,Fb,L,"itemTemplateMap");for(var c=a.i;c.next();){var d=c.value;(d instanceof O||d.Hf)&&v("Template in itemTemplateMap must not be a Part or be Panel.isPanelMain: "+d)}this.nf=a;this.h("itemTemplateMap",b,a);a=this.g;null!==a&&a.V.Ua||this.Hy()}});
G(L,{hI:"itemCategoryProperty"},function(){return this.Jm},function(a){var b=this.Jm;b!==a&&("string"!==typeof a&&"function"!==typeof a&&ta(a,"string or function",L,"itemCategoryProperty"),this.Jm=a,this.h("itemCategoryProperty",b,a))});
L.prototype.getCategoryForItemData=function(a){if(null===a)return"";var b=this.Jm,c="";if("function"===typeof b)c=b(a);else if("string"===typeof b&&"object"===typeof a){if(""===b)return"";c=Gb(a,b)}else return"";if(void 0===c)return"";if("string"===typeof c)return c;v("Panel.getCategoryForItemData found a non-string category for "+a+": "+c);return""};var vo=!1,wo=null;
L.prototype.findTemplateForItemData=function(a,b,c){a=this.KF;b=null;null!==a&&(b=a.ja(c));null===b&&(vo||(vo=!0,Da('No item template Panel found for category "'+c+'" on '+this),Da("  Using default item template."),c=new L,a=new Zb,a.bind(new yg("text","",Sf)),c.add(a),wo=c),b=wo);return b};G(L,{aI:"isAtomic"},function(){return this.Yf},function(a){var b=this.Yf;b!==a&&(w(a,"boolean",L,"isAtomic"),this.Yf=a,this.h("isAtomic",b,a))});
G(L,{sC:"isClipping"},function(){return this.ep},function(a){var b=this.ep;b!==a&&(w(a,"boolean",L,"isClipping"),this.ep=a,this.h("isClipping",b,a))});function ug(){sb(this);this.cg=null;this.tt=!0;this.Oc=0;this.he=NaN;this.yi=0;this.wi=Infinity;this.Nd=ee;this.xa=this.bb=0;this.gc=null;this.Kq=xo;this.Tg=Bm;this.Hq=this.Gi=null;this.Iq=NaN;this.ob=this.Pg=null;this.Go=!1}vb("RowColumnDefinition",ug);
ug.prototype.copy=function(){var a=new ug;a.tt=this.tt;a.Oc=this.Oc;a.he=this.he;a.yi=this.yi;a.wi=this.wi;a.Nd=this.Nd;a.bb=this.bb;a.xa=this.xa;a.Tg=this.Tg;a.Kq=this.Kq;a.Gi=null===this.Gi?null:this.Gi.O();a.Hq=this.Hq;a.Iq=this.Iq;a.Pg=null;null!==this.Pg&&(a.Pg=Ka(this.Pg));a.ob=this.ob;a.Go=this.Go;a.gc=this.gc;return a};
ug.prototype.nr=function(a){ra(a,ug,ug,"copyFrom:pd");a.sd?this.height=a.height:this.width=a.width;this.Uh=a.Uh;this.$e=a.$e;this.alignment=a.alignment;this.stretch=a.stretch;this.os=a.os;this.Gi=null===a.Gi?null:a.Gi.O();this.ao=a.ao;this.bo=a.bo;this.Pg=null;a.Pg&&(this.Pg=Ka(a.Pg));this.background=a.background;this.Lx=a.Lx;this.gc=a.gc};ug.prototype.toString=function(){return"RowColumnDefinition "+(this.sd?"(Row ":"(Column ")+this.index+") #"+ub(this)};var xo;ug.Default=xo=I(ug,"Default",0);var mo;
ug.None=mo=I(ug,"None",1);var eo;ug.ProportionalExtra=eo=I(ug,"ProportionalExtra",2);ug.prototype.xk=function(a){this.cg=a};ug.prototype.computeEffectiveSpacingTop=ug.prototype.LB=function(){var a=0;if(0!==this.index){var b=this.cg,c=this.ao;null===c&&null!==b&&(c=this.sd?b.nh:b.Bg);null!==c&&(a=this.bo,isNaN(a)&&(a=null!==b?this.sd?b.Dg:b.Cg:0))}b=this.kD;if(null===b)if(b=this.cg,null!==b)b=b.gi;else return a;return a+(this.sd?b.top:b.left)};
ug.prototype.computeEffectiveSpacing=ug.prototype.Af=function(){var a=0;if(0!==this.index){var b=this.cg,c=this.ao;null===c&&null!==b&&(c=this.sd?b.nh:b.Bg);null!==c&&(a=this.bo,isNaN(a)&&(a=null!==b?this.sd?b.Dg:b.Cg:0))}b=this.kD;if(null===b)if(b=this.cg,null!==b)b=b.gi;else return a;return a+(this.sd?b.top+b.bottom:b.left+b.right)};
ug.prototype.oc=function(a,b,c,d,e){var f=this.cg;if(null!==f&&(f.ec(If,a,this,b,c,d,e),null!==this.gc&&(b=f.yn(),null!==b&&(b=b.data,null!==b))))for(c=this.gc.i;c.next();)c.value.Fv(this,b,a,null)};H(ug,{I:"panel"},function(){return this.cg});G(ug,{sd:"isRow"},function(){return this.tt},function(a){this.tt=a});G(ug,{index:"index"},function(){return this.Oc},function(a){this.Oc=a});
G(ug,{height:"height"},function(){return this.he},function(a){var b=this.he;b!==a&&(0>a&&za(a,">= 0",ug,"height"),this.he=a,this.Aa=this.bb,null!==this.I&&this.I.H(),this.oc("height",b,a))});G(ug,{width:"width"},function(){return this.he},function(a){var b=this.he;b!==a&&(0>a&&za(a,">= 0",ug,"width"),this.he=a,this.Aa=this.bb,null!==this.I&&this.I.H(),this.oc("width",b,a))});
G(ug,{Uh:"minimum"},function(){return this.yi},function(a){var b=this.yi;b!==a&&((0>a||!isFinite(a))&&za(a,">= 0",ug,"minimum"),this.yi=a,this.Aa=this.bb,null!==this.I&&this.I.H(),this.oc("minimum",b,a))});G(ug,{$e:"maximum"},function(){return this.wi},function(a){var b=this.wi;b!==a&&(0>a&&za(a,">= 0",ug,"maximum"),this.wi=a,this.Aa=this.bb,null!==this.I&&this.I.H(),this.oc("maximum",b,a))});
G(ug,{alignment:"alignment"},function(){return this.Nd},function(a){var b=this.Nd;b.A(a)||(this.Nd=a.O(),null!==this.I&&this.I.H(),this.oc("alignment",b,a))});G(ug,{stretch:"stretch"},function(){return this.Tg},function(a){var b=this.Tg;b!==a&&(this.Tg=a,null!==this.I&&this.I.H(),this.oc("stretch",b,a))});
G(ug,{kD:"separatorPadding"},function(){return this.Gi},function(a){"number"===typeof a&&(a=new qd(a));var b=this.Gi;null!==a&&null!==b&&b.A(a)||(null!==a&&(a=a.O()),this.Gi=a,null!==this.I&&this.I.H(),this.oc("separatorPadding",b,a))});G(ug,{ao:"separatorStroke"},function(){return this.Hq},function(a){var b=this.Hq;b!==a&&(null===a||"string"===typeof a||a instanceof $f)&&(a instanceof $f&&a.freeze(),this.Hq=a,null!==this.I&&this.I.H(),this.oc("separatorStroke",b,a))});
G(ug,{bo:"separatorStrokeWidth"},function(){return this.Iq},function(a){var b=this.Iq;b!==a&&(this.Iq=a,null!==this.I&&this.I.H(),this.oc("separatorStrokeWidth",b,a))});
G(ug,{GG:"separatorDashArray"},function(){return this.Pg},function(a){var b=this.Pg;if(b!==a){null===a||Array.isArray(a)||ta(a,"Array",ug,"separatorDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v("separatorDashArray:value "+f+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.Pg=a;null!==this.I&&this.I.ba();this.oc("separatorDashArray",b,a)}});
G(ug,{background:"background"},function(){return this.ob},function(a){var b=this.ob;b!==a&&(null===a||"string"===typeof a||a instanceof $f)&&(a instanceof $f&&a.freeze(),this.ob=a,null!==this.I&&this.I.ba(),this.oc("background",b,a))});G(ug,{Lx:"coversSeparators"},function(){return this.Go},function(a){var b=this.Go;b!==a&&(w(a,"boolean",ug,"coversSeparators"),this.Go=a,null!==this.I&&this.I.ba(),this.oc("coversSeparators",b,a))});
G(ug,{os:"sizing"},function(){return this.Kq},function(a){var b=this.Kq;b!==a&&(this.Kq=a,null!==this.I&&this.I.H(),this.oc("sizing",b,a))});function lo(a){if(a.os===xo){var b=a.cg;return a.sd?b.BG:b.EE}return a.os}G(ug,{Aa:"actual"},function(){return this.bb},function(a){this.bb=isNaN(this.he)?Math.max(Math.min(this.wi,a),this.yi):Math.max(Math.min(this.wi,this.he),this.yi)});
G(ug,{total:"total"},function(){return this.bb+this.Af()},function(a){this.bb=isNaN(this.he)?Math.max(Math.min(this.wi,a),this.yi):Math.max(Math.min(this.wi,this.he),this.yi);this.bb=Math.max(0,this.bb-this.Af())});G(ug,{position:"position"},function(){return this.xa},function(a){this.xa=a});
ug.prototype.bind=ug.prototype.bind=function(a){a.uf=this;var b=this.I;null!==b&&(b=b.yn(),null!==b&&nn(b)&&v("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a));null===this.gc&&(this.gc=new N(yg));this.gc.add(a)};
function X(){U.call(this);this.za=null;this.vm="None";this.dg=!1;this.Xo=Bm;this.sj=null;this.$b=this.Dc="black";this.eg=1;this.cn="butt";this.dn="miter";this.ll=10;this.kl=null;this.xc=0;this.Fh=this.Eh=ee;this.eq=this.dq=NaN;this.fp=!1;this.lp=!0;this.hq=null;this.ym=this.en="None";this.cp=1}yb(X,U);vb("Shape",X);
X.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.za=this.za;a.vm=this.vm;a.dg=this.dg;a.Xo=this.Xo;a.sj=this.sj;a.Dc=this.Dc;a.$b=this.$b;a.eg=this.eg;a.cn=this.cn;a.dn=this.dn;a.ll=this.ll;a.kl=null;null!==this.kl&&(a.kl=Ka(this.kl));a.xc=this.xc;a.Eh=this.Eh.O();a.Fh=this.Fh.O();a.dq=this.dq;a.eq=this.eq;a.fp=this.fp;a.lp=this.lp;a.hq=this.hq;a.en=this.en;a.ym=this.ym;a.cp=this.cp};
X.prototype.toString=function(){return"Shape("+("None"!==this.jb?this.jb:"None"!==this.io?this.io:this.Rx)+")#"+ub(this)};
function yo(a,b,c,d){var e=.001,f=d.oa,g=f.width,f=f.height,h=0,k=0,l=0,m=0,e=c.length;if(!(4>e)){for(var h=c[0],k=c[1],n=0,p=0,q=0,s=l=0,t=p=0,u=ob(),x=2;x<e;x+=2)l=c[x],m=c[x+1],n=l-h,p=m-k,0===n&&(n=.001),q=p/n,s=Math.atan2(p,n),p=Math.sqrt(n*n+p*p),h=[],h[0]=n,h[1]=s,h[2]=q,h[3]=p,u.push(h),t+=p,h=l,k=m;h=c[0];k=c[1];c=0;for(var e=g,m=g/2,x=0===m?!1:!0,p=0,l=u[p],n=l[0],s=l[1],q=l[2],l=l[3],B=0;.1<=t;){0===B&&(x?(e=g,c++,e-=m,t-=m,x=!1):(e=g,c++),0===e&&(e=1));if(e>t){pb(u);return}e>l?(B=e-l,
e=l):B=0;var y=Math.sqrt(e*e/(1+q*q));0>n&&(y=-y);h+=y;k+=q*y;a.translate(h,k);a.rotate(s);a.translate(-(g/2),-(f/2));0===B&&d.Xi(a,b);a.translate(g/2,f/2);a.rotate(-s);a.translate(-h,-k);t-=e;l-=e;if(0!==B){p++;if(p===u.length){pb(u);return}l=u[p];n=l[0];s=l[1];q=l[2];l=l[3];e=B}}pb(u)}}
X.prototype.Xi=function(a,b){if(null!==this.$b||null!==this.Dc){null!==this.Dc&&Wm(this,a,this.Dc,!0,!1);null!==this.$b&&Wm(this,a,this.$b,!1,!1);var c=this.eg;if(0===c){var d=this.J;d instanceof Vg&&d.type===si&&d.Xb instanceof X&&(c=d.Xb.Na)}a.lineWidth=c;a.lineJoin=this.dn;a.lineCap=this.cn;a.miterLimit=this.ll;var e=!1;this.J&&b.Ng.drawShadows&&(e=this.J.pk);var f=!0;null!==this.$b&&null===this.Dc&&(f=!1);var d=!1,g=!0,h=this.Xy;null!==h&&(d=!0,void 0!==a.setLineDash?(a.setLineDash(h),a.lineDashOffset=
this.xc):void 0!==a.webkitLineDash?(a.webkitLineDash=h,a.webkitLineDashOffset=this.xc):void 0!==a.mozDash?(a.mozDash=h,a.mozDashOffset=this.xc):g=!1);var k=this.za;if(null!==k){if(k.fa===Oe)a.beginPath(),d&&!g?Im(a,k.Pb,k.Wb,k.Wa,k.fb,h,this.xc):(a.moveTo(k.Pb,k.Wb),a.lineTo(k.Wa,k.fb)),null!==this.Dc&&Xm(a,this.Dc),0!==c&&null!==this.$b&&Zm(a);else if(k.fa===Pe){var l=k.Pb,m=k.Wb,n=k.Wa,p=k.fb,k=Math.min(l,n),q=Math.min(m,p),l=Math.abs(n-l),m=Math.abs(p-m);null!==this.Dc&&(a.beginPath(),a.rect(k,
q,l,m),Xm(a,this.Dc));if(null!==this.$b){var s=n=0,t=0;f&&e&&(n=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0);d&&!g?(g=ob(),g.push(k),g.push(q),g.push(k+l),g.push(q),g.push(k+l),g.push(q+m),g.push(k),g.push(q+m),g.push(k),g.push(q),a.beginPath(),zo(a,g,h,this.xc),Zm(a),pb(g)):0!==c&&(a.beginPath(),a.rect(k,q,l,m),Zm(a));f&&e&&(a.shadowOffsetX=n,a.shadowOffsetY=s,a.shadowBlur=t)}}else if(k.fa===Qe)l=k.Pb,m=k.Wb,n=k.Wa,p=k.fb,k=Math.abs(n-l)/2,
q=Math.abs(p-m)/2,l=Math.min(l,n)+k,m=Math.min(m,p)+q,a.beginPath(),a.moveTo(l,m-q),a.bezierCurveTo(l+Q.ia*k,m-q,l+k,m-Q.ia*q,l+k,m),a.bezierCurveTo(l+k,m+Q.ia*q,l+Q.ia*k,m+q,l,m+q),a.bezierCurveTo(l-Q.ia*k,m+q,l-k,m+Q.ia*q,l-k,m),a.bezierCurveTo(l-k,m-Q.ia*q,l-Q.ia*k,m-q,l,m-q),a.closePath(),null!==this.Dc&&Xm(a,this.Dc),d&&!g&&(g=ob(),Q.Sd(l,m-q,l+Q.ia*k,m-q,l+k,m-Q.ia*q,l+k,m,.5,g),Q.Sd(l+k,m,l+k,m+Q.ia*q,l+Q.ia*k,m+q,l,m+q,.5,g),Q.Sd(l,m+q,l-Q.ia*k,m+q,l-k,m+Q.ia*q,l-k,m,.5,g),Q.Sd(l-k,m,l-k,
m-Q.ia*q,l-Q.ia*k,m-q,l,m-q,.5,g),a.beginPath(),zo(a,g,h,this.xc),pb(g)),0!==c&&null!==this.$b&&(t=s=n=0,f&&e&&(n=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),Zm(a),f&&e&&(a.shadowOffsetX=n,a.shadowOffsetY=s,a.shadowBlur=t));else if(k.fa===Le){q=k.ii;m=q.length;for(p=0;p<m;p++){l=q.l[p];a.beginPath();a.moveTo(l.da,l.ea);for(var n=l.pa.l,s=n.length,u=null,t=0;t<s;t++){var x=n[t];switch(x.fa){case vf:a.moveTo(x.q,x.s);break;case $e:a.lineTo(x.q,
x.s);break;case wf:a.bezierCurveTo(x.wc,x.Rd,x.sf,x.tf,x.Wa,x.fb);break;case xf:a.quadraticCurveTo(x.wc,x.Rd,x.Wa,x.fb);break;case yf:if(x.radiusX===x.radiusY)u=Math.PI/180,a.arc(x.wc,x.Rd,x.radiusX,x.bh*u,(x.bh+x.Xh)*u,0>x.Xh);else for(var u=Af(x,l),B=u.length,y=0;y<B;y++){var C=u[y];0===y&&a.lineTo(C[0],C[1]);a.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7])}break;case zf:y=B=0;null!==u&&u.type===yf?(u=Af(u,l),u=u[u.length-1]||null,null!==u&&(B=u[6],y=u[7])):(B=null!==u?u.q:l.da,y=null!==u?u.s:l.ea);
u=Bf(x,l,B,y);B=u.length;for(y=0;y<B;y++)C=u[y],a.bezierCurveTo(C[2],C[3],C[4],C[5],C[6],C[7]);break;default:v("Segment not of valid type")}x.Jg&&a.closePath();u=x}e?(t=s=n=0,l.Gm?(!0===l.Nk&&null!==this.Dc?(Xm(a,this.Dc),f=!0):f=!1,0!==c&&null!==this.$b&&(f&&(n=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),d&&!g||Zm(a),f&&(a.shadowOffsetX=n,a.shadowOffsetY=s,a.shadowBlur=t))):(f&&(n=a.shadowOffsetX,s=a.shadowOffsetY,t=a.shadowBlur,a.shadowOffsetX=
0,a.shadowOffsetY=0,a.shadowBlur=0),!0===l.Nk&&null!==this.Dc&&Xm(a,this.Dc),0!==c&&null!==this.$b&&(d&&!g||Zm(a)),f&&(a.shadowOffsetX=n,a.shadowOffsetY=s,a.shadowBlur=t))):(!0===l.Nk&&null!==this.Dc&&Xm(a,this.Dc),0===c||null===this.$b||d&&!g||Zm(a))}if(d&&!g)for(c=f,f=k.ii,g=f.length,k=0;k<g;k++){q=f.l[k];a.beginPath();m=ob();m.push(q.da);m.push(q.ea);p=q.da;l=q.ea;n=p;s=l;t=q.pa.l;x=t.length;for(u=0;u<x;u++){B=t[u];switch(B.fa){case vf:zo(a,m,h,this.xc);m.length=0;m.push(B.q);m.push(B.s);p=B.q;
l=B.s;n=p;s=l;break;case $e:m.push(B.q);m.push(B.s);p=B.q;l=B.s;break;case wf:Q.Sd(p,l,B.wc,B.Rd,B.sf,B.tf,B.Wa,B.fb,.5,m);p=B.q;l=B.s;break;case xf:Q.Vn(p,l,B.wc,B.Rd,B.Wa,B.fb,.5,m);p=B.q;l=B.s;break;case yf:for(var y=Af(B,q),C=y.length,K=0;K<C;K++){var J=y[K];Q.Sd(p,l,J[2],J[3],J[4],J[5],J[6],J[7],.5,m);p=J[6];l=J[7]}break;case zf:y=Bf(B,q,p,l);C=y.length;for(K=0;K<C;K++)J=y[K],Q.Sd(p,l,J[2],J[3],J[4],J[5],J[6],J[7],.5,m),p=J[6],l=J[7];break;default:v("Segment not of valid type")}B.Jg&&(m.push(n),
m.push(s),zo(a,m,h,this.xc))}zo(a,m,h,this.xc);pb(m);null!==this.$b&&(p=m=q=0,c&&e&&(q=a.shadowOffsetX,m=a.shadowOffsetY,p=a.shadowBlur,a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),Zm(a),c&&e&&(a.shadowOffsetX=q,a.shadowOffsetY=m,a.shadowBlur=p))}}d&&(void 0!==a.setLineDash?(a.setLineDash(qb),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=qb,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0));if(null!==this.MC){d=this.MC;lj(d,Infinity,Infinity);
h=d.oa;d.ac(0,0,h.width,h.height);a.save();h=this.yc.Xa.first();a.beginPath();c=ob();c.push(h.da);c.push(h.ea);e=h.da;f=h.ea;g=e;k=f;q=h.pa.l;m=q.length;for(p=0;p<m;p++){l=q[p];switch(l.fa){case vf:yo(a,b,c,d);c.length=0;c.push(l.q);c.push(l.s);e=l.q;f=l.s;g=e;k=f;break;case $e:c.push(l.q);c.push(l.s);e=l.q;f=l.s;break;case wf:Q.Sd(e,f,l.wc,l.Rd,l.sf,l.tf,l.Wa,l.fb,.5,c);e=l.q;f=l.s;break;case xf:Q.Vn(e,f,l.wc,l.Rd,l.Wa,l.fb,.5,c);e=l.q;f=l.s;break;case yf:n=Af(l,h);s=n.length;for(t=0;t<s;t++)x=n[t],
Q.Sd(e,f,x[2],x[3],x[4],x[5],x[6],x[7],.5,c),e=x[6],f=x[7];break;case zf:n=Bf(l,h,e,f);s=n.length;for(t=0;t<s;t++)x=n[t],Q.Sd(e,f,x[2],x[3],x[4],x[5],x[6],x[7],.5,c),e=x[6],f=x[7];break;default:v("Segment not of valid type")}l.Jg&&(c.push(g),c.push(k),yo(a,b,c,d))}yo(a,b,c,d);pb(c);a.restore()}}}};
function zo(a,b,c,d){var e=.001,f=c.length,g=0,h=0,k=0,l=0,e=b.length;if(!(4>e))if(g=b[0],h=b[1],4===e)Im(a,g,h,b[2],b[3],c,d);else{a.moveTo(g,h);for(var m=0,n=0,p=0,q=n=k=0,s=ob(),t=2;t<e;t+=2)k=b[t],l=b[t+1],m=k-g,n=l-h,0===m&&(m=.001),p=n/m,n=Math.sqrt(m*m+n*n),g=[],g[0]=m,g[1]=p,g[2]=n,s.push(g),q+=n,g=k,h=l;g=b[0];h=b[1];b=0;for(var l=!0,e=c[b%f],t=0!==d,n=0,k=s[n],m=k[0],p=k[1],k=k[2],u=0;.1<=q;){0===u&&(e=c[b%f],b++,t&&(d%=e,e-=d,t=!1));e>q&&(e=q);e>k?(u=e-k,e=k):u=0;var x=Math.sqrt(e*e/(1+
p*p));0>m&&(x=-x);g+=x;h+=p*x;l?a.lineTo(g,h):a.moveTo(g,h);q-=e;k-=e;if(0!==u){n++;if(n===s.length){pb(s);return}k=s[n];m=k[0];p=k[1];k=k[2];e=u}else l=!l}pb(s)}}X.prototype.getDocumentPoint=X.prototype.Ra=function(a,b){void 0===b&&(b=new z);a.Fd()&&v("getDocumentPoint:s Spot must be real: "+a.toString());var c=this.ta,d=this.Na;b.k(a.x*(c.width+d)-d/2+c.x+a.offsetX,a.y*(c.height+d)-d/2+c.y+a.offsetY);this.Ve.Ka(b);return b};
X.prototype.Ui=function(a,b){var c=this.za;if(null===c||null===this.fill&&null===this.stroke)return!1;var d=c.Qa,e=this.Na/2;c.type!==Oe||b||(e+=2);var f=bb();f.assign(d);f.Ze(e+2,e+2);if(!f.na(a))return fb(f),!1;d=e+1E-4;if(c.type===Oe){if(null===this.stroke)return!1;d=(c.q-c.da)*(a.x-c.da)+(c.s-c.ea)*(a.y-c.ea);if(0>(c.da-c.q)*(a.x-c.q)+(c.ea-c.s)*(a.y-c.s)||0>d)return!1;fb(f);return Q.ad(c.da,c.ea,c.q,c.s,e,a.x,a.y)}if(c.type===Pe){var g=c.da,h=c.ea,k=c.q,l=c.s,c=Math.min(g,k),m=Math.min(h,l),
g=Math.abs(k-g),h=Math.abs(l-h);f.x=c;f.y=m;f.width=g;f.height=h;if(null===this.fill){f.Ze(-d,-d);if(f.na(a))return fb(f),!1;f.Ze(d,d)}null!==this.stroke&&f.Ze(e,e);e=f.na(a);fb(f);return e}if(c.type===Qe){g=c.da;h=c.ea;k=c.q;l=c.s;c=Math.min(g,k);m=Math.min(h,l);g=Math.abs(k-g);h=Math.abs(l-h);g/=2;h/=2;c=a.x-(c+g);m=a.y-(m+h);if(null===this.fill){g-=d;h-=d;if(0>=g||0>=h||1>=c*c/(g*g)+m*m/(h*h))return fb(f),!1;g+=d;h+=d}null!==this.stroke&&(g+=e,h+=e);fb(f);return 0>=g||0>=h?!1:1>=c*c/(g*g)+m*m/
(h*h)}if(c.type===Le)return fb(f),null===this.fill?Ef(c,a.x,a.y,e):c.na(a,e,1<this.Na,b);v("Unknown Geometry type");return!1};
X.prototype.Mn=function(a,b,c,d){var e=this.ka,f=this.eg;a=Math.max(a,0);b=Math.max(b,0);var g;if(this.dg)g=this.za.Qa;else{var h=this.jb,k=Q.Ov[h];if(void 0===k){var l=Q.Ff[h];"string"===typeof l&&(l=Q.Ff[l]);"function"===typeof l?(k=l(null,100,100),Q.Ov[h]=k):v("Unsupported Figure:"+h)}g=k.Qa}var h=g.width,k=g.height,l=g.width,m=g.height;switch(Nm(this,!0)){case Ti:d=c=0;break;case Ne:l=Math.max(a-f,0);m=Math.max(b-f,0);break;case Dm:l=Math.max(a-f,0);d=0;break;case Cm:c=0,m=Math.max(b-f,0)}isFinite(e.width)&&
(l=e.width);isFinite(e.height)&&(m=e.height);e=this.se;g=this.Jf;c=Math.max(c,g.width)-f;d=Math.max(d,g.height)-f;l=Math.min(e.width,l);m=Math.min(e.height,m);l=isFinite(l)?Math.max(c,l):Math.max(h,c);m=isFinite(m)?Math.max(d,m):Math.max(k,d);c=Ui(this);switch(c){case Ti:break;case Ne:h=l;k=m;break;case Vi:c=Math.min(l/h,m/k);isFinite(c)||(c=1);h*=c;k*=c;break;default:v(c+" is not a valid geometryStretch.")}if(this.dg){g=this.yc;d=h;e=k;c=g.copy();g=g.Qa;d/=g.width;e/=g.height;isFinite(d)||(d=1);
isFinite(e)||(e=1);if(1!==d||1!==e)switch(c.type){case Oe:case Pe:case Qe:c.da*=d;c.ea*=e;c.q*=d;c.s*=e;break;case Le:g=c.Xa.l;for(var n=g.length,p=0;p<n;p++){var q=g[p];q.da*=d;q.ea*=e;for(var q=q.pa.l,s=q.length,t=0;t<s;t++){var u=q[t];switch(u.type){case $e:case vf:u.q*=d;u.s*=e;break;case wf:u.kb*=d;u.wb*=e;u.Hd*=d;u.Jd*=e;u.q*=d;u.s*=e;break;case xf:u.kb*=d;u.wb*=e;u.q*=d;u.s*=e;break;case yf:u.ra*=d;u.Ba*=e;u.radiusX*=d;void 0!==u.radiusY&&(u.radiusY*=e);break;case zf:u.q*=d;u.s*=e;u.radiusX*=
d;u.radiusY*=e;break;default:v("Unknown Segment type: "+u.type)}}}}this.za=c}else if(null===this.za||this.za.Fm!==a-f||this.za.Em!==b-f)this.za=Q.makeGeometry(this,h,k);g=this.za.Qa;Infinity===a||Infinity===b?Km(this,g.x-f/2,g.y-f/2,0===a&&0===h?0:g.width+f,0===b&&0===k?0:g.height+f):Km(this,-(f/2),-(f/2),l+f,m+f)};
function no(a,b,c){if(!1!==Yk(a)){a.mc.wa();var d=a.eg;if(0===d){var e=a.J;e instanceof Vg&&e.type===si&&e.Xb instanceof X&&(d=e.Xb.Na)}d*=a.Fb;Km(a,-(d/2),-(d/2),b+d,c+d);b=a.mc;c=a.se;d=a.Jf;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.mc.freeze();a.mc.w()||v("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.mc.toString());Sk(a,!1)}}
function Ui(a){var b=a.hC;return a.dg?b===Bm?Ne:b:b===Bm?Q.Ov[a.jb].Vc:b}X.prototype.Jh=function(a,b,c,d){Om(this,a,b,c,d)};X.prototype.getNearestIntersectionPoint=X.prototype.jk=function(a,b,c){return this.Bn(a.x,a.y,b.x,b.y,c)};
X.prototype.Bn=function(a,b,c,d,e){var f=this.transform,g=1/(f.m11*f.m22-f.m12*f.m21),h=f.m22*g,k=-f.m12*g,l=-f.m21*g,m=f.m11*g,n=g*(f.m21*f.dy-f.m22*f.dx),p=g*(f.m12*f.dx-f.m11*f.dy),f=a*h+b*l+n,g=a*k+b*m+p,h=c*h+d*l+n,k=c*k+d*m+p,l=this.Na/2,n=this.za;null===n&&(lj(this,Infinity,Infinity),n=this.za);p=n.Qa;m=!1;if(n.type===Oe)if(1.5>=this.Na)m=Q.mg(n.Pb,n.Wb,n.Wa,n.fb,f,g,h,k,e);else{var q=0,s=0;n.Pb===n.Wa?(q=l,s=0):(b=(n.fb-n.Wb)/(n.Wa-n.Pb),s=l/Math.sqrt(1+b*b),q=s*b);d=ob();b=new z;Q.mg(n.Pb+
q,n.Wb+s,n.Wa+q,n.fb+s,f,g,h,k,b)&&d.push(b);b=new z;Q.mg(n.Pb-q,n.Wb-s,n.Wa-q,n.fb-s,f,g,h,k,b)&&d.push(b);b=new z;Q.mg(n.Pb+q,n.Wb+s,n.Pb-q,n.Wb-s,f,g,h,k,b)&&d.push(b);b=new z;Q.mg(n.Wa+q,n.fb+s,n.Wa-q,n.fb-s,f,g,h,k,b)&&d.push(b);b=d.length;if(0===b)return pb(d),!1;m=!0;s=Infinity;for(q=0;q<b;q++){var h=d[q],t=(h.x-f)*(h.x-f)+(h.y-g)*(h.y-g);t<s&&(s=t,e.x=h.x,e.y=h.y)}pb(d)}else if(n.type===Pe)b=p.x-l,m=Q.jk(b,p.y-l,p.x+p.width+l,p.y+p.height+l,f,g,h,k,e);else if(n.type===Qe)a:if(b=p.copy().Ze(l,
l),0===b.width)m=Q.mg(b.x,b.y,b.x,b.y+b.height,f,g,h,k,e);else if(0===b.height)m=Q.mg(b.x,b.y,b.x+b.width,b.y,f,g,h,k,e);else{a=b.width/2;var u=b.height/2;d=b.x+a;b=b.y+u;c=9999;f!==h&&(c=(g-k)/(f-h));if(9999>Math.abs(c)){m=g-b-c*(f-d);if(0>a*a*c*c+u*u-m*m){e.x=NaN;e.y=NaN;m=!1;break a}l=Math.sqrt(a*a*c*c+u*u-m*m);h=(-(a*a*c*m)+a*u*l)/(u*u+a*a*c*c)+d;a=(-(a*a*c*m)-a*u*l)/(u*u+a*a*c*c)+d;k=c*(h-d)+m+b;b=c*(a-d)+m+b;d=Math.abs((f-h)*(f-h))+Math.abs((g-k)*(g-k));g=Math.abs((f-a)*(f-a))+Math.abs((g-b)*
(g-b));d<g?(e.x=h,e.y=k):(e.x=a,e.y=b)}else{h=u*u;k=f-d;h-=h/(a*a)*k*k;if(0>h){e.x=NaN;e.y=NaN;m=!1;break a}l=Math.sqrt(h);k=b+l;b-=l;d=Math.abs(k-g);g=Math.abs(b-g);d<g?(e.x=f,e.y=k):(e.x=f,e.y=b)}m=!0}else if(n.type===Le){var x=0,B=0,y=t=0,p=Va(),q=h-f,s=k-g,s=q*q+s*s;e.x=h;e.y=k;for(q=0;q<n.Xa.count;q++)for(var C=n.Xa.l[q],K=C.pa,x=C.da,B=C.ea,J=x,ba=B,ja=0;ja<K.count;ja++){var Y=K.l[ja],P=Y.type,t=Y.q,y=Y.s,ha=!1;switch(P){case vf:J=t;ba=y;break;case $e:ha=Ao(x,B,t,y,f,g,h,k,p);break;case wf:var ha=
Y.kb,P=Y.wb,Ra=Y.Hd,Ha=Y.Jd,ha=Q.ir(x,B,ha,P,Ra,Ha,t,y,f,g,h,k,.5,p);break;case xf:ha=(x+2*Y.kb)/3;P=(B+2*Y.wb)/3;Ra=(2*Y.kb+t)/3;Ha=(2*Y.kb+t)/3;ha=Q.ir(x,B,ha,P,Ra,Ha,t,y,f,g,h,k,.5,p);break;case yf:case zf:y=Y.type===yf?Af(Y,C):Bf(Y,C,x,B);P=y.length;for(Ra=0;Ra<P;Ra++)u=y[Ra],0===Ra&&Ao(x,B,u[0],u[1],f,g,h,k,p)&&(t=Bo(f,g,p,s,e),t<s&&(s=t,m=!0)),Q.ir(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],f,g,h,k,.5,p)&&(t=Bo(f,g,p,s,e),t<s&&(s=t,m=!0));t=u[6];y=u[7];break;default:v("Unknown Segment type: "+
Y.type)}x=t;B=y;ha&&(t=Bo(f,g,p,s,e),t<s&&(s=t,m=!0));Y.Xu&&(t=J,y=ba,Ao(x,B,t,y,f,g,h,k,p)&&(t=Bo(f,g,p,s,e),t<s&&(s=t,m=!0)))}f=c-a;g=d-b;b=Math.sqrt(f*f+g*g);0!==b&&(f/=b,g/=b);e.x-=f*l;e.y-=g*l;A(p)}else v("Invalid Geometry type");if(!m)return!1;this.transform.Ka(e);return!0};function Bo(a,b,c,d,e){a=c.x-a;b=c.y-b;b=a*a+b*b;return b<d?(e.x=c.x,e.y=c.y,b):d}
function Ao(a,b,c,d,e,f,g,h,k){var l=!1,m=(e-g)*(b-d)-(f-h)*(a-c);if(0===m)return!1;k.x=((e*h-f*g)*(a-c)-(e-g)*(a*d-b*c))/m;k.y=((e*h-f*g)*(b-d)-(f-h)*(a*d-b*c))/m;(a>c?a-c:c-a)<(b>d?b-d:d-b)?(e=b<d?b:d,a=b<d?d:b,(k.y>e||Q.Sa(k.y,e))&&(k.y<a||Q.Sa(k.y,a))&&(l=!0)):(e=a<c?a:c,a=a<c?c:a,(k.x>e||Q.Sa(k.x,e))&&(k.x<a||Q.Sa(k.x,a))&&(l=!0));return l}
X.prototype.containedInRect=X.prototype.xl=function(a,b){if(void 0===b)return a.Vi(this.Q);var c=this.za;null===c&&(lj(this,Infinity,Infinity),c=this.za);var c=c.Qa,d=this.Na/2,e=!1,f=Va();f.k(c.x-d,c.y-d);a.na(b.Ka(f))&&(f.k(c.x-d,c.bottom+d),a.na(b.Ka(f))&&(f.k(c.right+d,c.bottom+d),a.na(b.Ka(f))&&(f.k(c.right+d,c.y-d),a.na(b.Ka(f))&&(e=!0))));A(f);return e};
X.prototype.intersectsRect=X.prototype.Gf=function(a,b){if(this.xl(a,b)||void 0===b&&(b=this.transform,a.Vi(this.Q)))return!0;var c=hb();c.set(b);c.ay();var d=a.left,e=a.right,f=a.top,g=a.bottom,h=Va();h.k(d,f);c.Ka(h);if(this.Ui(h,!0))return A(h),!0;h.k(e,f);c.Ka(h);if(this.Ui(h,!0))return A(h),!0;h.k(d,g);c.Ka(h);if(this.Ui(h,!0))return A(h),!0;h.k(e,g);c.Ka(h);if(this.Ui(h,!0))return A(h),!0;var k=Va(),l=Va();c.set(b);c.IC(this.transform);c.ay();k.x=e;k.y=f;k.transform(c);h.x=d;h.y=f;h.transform(c);
var m=!1;Co(this,h,k,l)?m=!0:(h.x=e,h.y=g,h.transform(c),Co(this,h,k,l)?m=!0:(k.x=d,k.y=g,k.transform(c),Co(this,h,k,l)?m=!0:(h.x=d,h.y=f,h.transform(c),Co(this,h,k,l)&&(m=!0))));A(h);jb(c);A(k);A(l);return m};function Co(a,b,c,d){if(!a.jk(b,c,d))return!1;a=b.x;b=b.y;var e=c.x;c=c.y;var f=d.x;d=d.y;if(a===e){var g=0;a=0;b<c?(g=b,a=c):(g=c,a=b);return d>=g&&d<=a}a<e?(g=a,a=e):g=e;return f>=g&&f<=a}
X.prototype.bC=function(a,b,c){function d(a,b){for(var c=a.length,d=0;d<c;d+=2)if(b.pr(a[d],a[d+1])>e)return!0;return!1}if(c&&null!==this.fill&&this.Ui(a,!0))return!0;var e=a.Wi(b);b=e;1.5<this.Na&&(e=this.Na/2+Math.sqrt(e),e*=e);var f=this.za;null===f&&(lj(this,Infinity,Infinity),f=this.za);if(!c){var g=f.Qa,h=g.x,k=g.y,l=g.x+g.width,g=g.y+g.height;if(Zc(a.x,a.y,h,k)<=e&&Zc(a.x,a.y,l,k)<=e&&Zc(a.x,a.y,h,g)<=e&&Zc(a.x,a.y,l,g)<=e)return!0}h=f.Pb;k=f.Wb;l=f.Wa;g=f.fb;if(f.type===Oe){if(c=Yc(a.x,a.y,
h,k,l,g),f=(h-l)*(a.x-l)+(k-g)*(a.y-g),c<=(0<=(l-h)*(a.x-h)+(g-k)*(a.y-k)&&0<=f?e:b))return!0}else{if(f.type===Pe)return b=!1,c&&(b=Yc(a.x,a.y,h,k,h,g)<=e||Yc(a.x,a.y,h,k,l,k)<=e||Yc(a.x,a.y,l,k,l,g)<=e||Yc(a.x,a.y,h,g,l,g)<=e),b;if(f.type===Qe){b=a.x-(h+l)/2;var f=a.y-(k+g)/2,m=Math.abs(l-h)/2,n=Math.abs(g-k)/2;if(0===m||0===n)return c=Yc(a.x,a.y,h,k,l,g),c<=e?!0:!1;if(c){if(a=Q.YE(m,n,b,f),a*a<=e)return!0}else return Zc(b,f,-m,0)>=e||Zc(b,f,0,-n)>=e||Zc(b,f,0,n)>=e||Zc(b,f,m,0)>=e?!1:!0}else if(f.type===
Le){g=f.Qa;h=g.x;k=g.y;l=g.x+g.width;g=g.y+g.height;if(a.x>l&&a.x<h&&a.y>g&&a.y<k&&Yc(a.x,a.y,h,k,h,g)>e&&Yc(a.x,a.y,h,k,l,k)>e&&Yc(a.x,a.y,l,g,h,g)>e&&Yc(a.x,a.y,l,g,l,k)>e)return!1;b=Math.sqrt(e);if(c){if(null===this.fill?Ef(f,a.x,a.y,b):f.na(a,b,!0))return!0}else{c=f.Xa;for(b=0;b<c.count;b++){h=c.l[b];m=h.da;n=h.ea;if(a.pr(m,n)>e)return!1;k=h.pa.l;l=k.length;for(g=0;g<l;g++){var p=k[g];switch(p.type){case vf:case $e:m=p.q;n=p.s;if(a.pr(m,n)>e)return!1;break;case wf:f=ob();Q.Sd(m,n,p.kb,p.wb,p.Hd,
p.Jd,p.q,p.s,.8,f);m=d(f,a);pb(f);if(m)return!1;m=p.q;n=p.s;if(a.pr(m,n)>e)return!1;break;case xf:f=ob();Q.Vn(m,n,p.kb,p.wb,p.q,p.s,.8,f);m=d(f,a);pb(f);if(m)return!1;m=p.q;n=p.s;if(a.pr(m,n)>e)return!1;break;case yf:case zf:var p=p.type===yf?Af(p,h):Bf(p,h,m,n),q=p.length,s=null,f=ob();for(b=0;b<q;b++)if(s=p[b],f.length=0,Q.Sd(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],.8,f),d(f,a))return pb(f),!1;pb(f);null!==s&&(m=s[6],n=s[7]);break;default:v("Unknown Segment type: "+p.type)}}}return!0}}}return!1};
G(X,{yc:"geometry"},function(){return this.sj?this.sj:this.za},function(a){var b=this.za;if(b!==a){this.sj=null!==a?this.za=a.freeze():this.za=null;var c=this.J;null!==c&&(c.ui=NaN);this.dg=!0;this.H();this.h("geometry",b,a);a=this.J;null!==a&&0!==(this.T&1024)&&Jm(this,a,"geometryString")}});
G(X,{jF:"geometryString"},function(){return null===this.yc?"":this.yc.toString()},function(a){var b=cf(a);a=b.normalize();this.yc=b;var b=Va(),c=this.position;c.w()?b.k(c.x-a.x,c.y-a.y):b.k(-a.x,-a.y);this.position=b;A(b)});G(X,{gy:"isGeometryPositioned"},function(){return this.fp},function(a){var b=this.fp;b!==a&&(this.fp=a,this.H(),this.h("isGeometryPositioned",b,a))});X.prototype.Dd=function(){this.dg?this.sj=null:this.za=null;this.H()};
G(X,{fill:"fill"},function(){return this.Dc},function(a){var b=this.Dc;b!==a&&(a instanceof $f&&a.freeze(),this.Dc=a,this.ba(),this.h("fill",b,a))});G(X,{stroke:"stroke"},function(){return this.$b},function(a){var b=this.$b;b!==a&&(a instanceof $f&&a.freeze(),this.$b=a,this.ba(),this.h("stroke",b,a))});
G(X,{Na:"strokeWidth"},function(){return this.eg},function(a){var b=this.eg;if(b!==a)if(0<=a){this.eg=a;this.H();var c=this.J;null!==c&&(c.ui=NaN);this.h("strokeWidth",b,a)}else za(a,"value >= 0",X,"strokeWidth:value")});G(X,{QG:"strokeCap"},function(){return this.cn},function(a){var b=this.cn;b!==a&&("string"!==typeof a||"butt"!==a&&"round"!==a&&"square"!==a?za(a,'"butt", "round", or "square"',X,"strokeCap"):(this.cn=a,this.ba(),this.h("strokeCap",b,a)))});
G(X,{VI:"strokeJoin"},function(){return this.dn},function(a){var b=this.dn;b!==a&&("string"!==typeof a||"miter"!==a&&"bevel"!==a&&"round"!==a?za(a,'"miter", "bevel", or "round"',X,"strokeJoin"):(this.dn=a,this.ba(),this.h("strokeJoin",b,a)))});G(X,{WI:"strokeMiterLimit"},function(){return this.ll},function(a){var b=this.ll;if(b!==a)if(0<a){this.ll=a;this.ba();var c=this.J;null!==c&&(c.ui=NaN);this.h("strokeMiterLimit",b,a)}else za(a,"value > 0",X,"strokeWidth:value")});
G(X,{Xy:"strokeDashArray"},function(){return this.kl},function(a){var b=this.kl;if(b!==a){null===a||Array.isArray(a)||ta(a,"Array",X,"strokeDashArray:value");if(null!==a){for(var c=a.length,d=0,e=0;e<c;e++){var f=a[e];"number"===typeof f&&0<=f&&isFinite(f)||v("strokeDashArray:value "+f+" must be a positive number or zero.");d+=f}if(0===d){if(null===b)return;a=null}}this.kl=a;this.ba();this.h("strokeDashArray",b,a)}});
G(X,{RG:"strokeDashOffset"},function(){return this.xc},function(a){var b=this.xc;b!==a&&0<=a&&(this.xc=a,this.ba(),this.h("strokeDashOffset",b,a))});G(X,{jb:"figure"},function(){return this.vm},function(a){var b=this.vm;if(b!==a){var c=Q.Ff[a];"function"===typeof c?c=a:(c=Q.Ff[a.toLowerCase()])||v("Unknown Shape.figure: "+a);b!==c&&(a=this.J,null!==a&&(a.ui=NaN),this.vm=c,this.dg=!1,this.Dd(),this.h("figure",b,c))}});
G(X,{io:"toArrow"},function(){return this.en},function(a){var b=this.en;!0===a?a="Standard":!1===a&&(a="");if(b!==a){var c=Q.GB(a);null===c?v("Unknown Shape.toArrow: "+a):b!==c&&(this.en=c,this.dg=!1,this.Dd(),Do(this),this.h("toArrow",b,c))}});G(X,{Rx:"fromArrow"},function(){return this.ym},function(a){var b=this.ym;!0===a?a="Standard":!1===a&&(a="");if(b!==a){var c=Q.GB(a);null===c?v("Unknown Shape.fromArrow: "+a):b!==c&&(this.ym=c,this.dg=!1,this.Dd(),Do(this),this.h("fromArrow",b,c))}});
function Do(a){var b=a.g;null!==b&&b.V.Ua||(a.vv=Eo,"None"!==a.en?(a.ef=-1,a.Si=he):"None"!==a.ym&&(a.ef=0,a.Si=new R(1-he.x,he.y)))}G(X,{o:"spot1"},function(){return this.Eh},function(a){ra(a,R,X,"spot1");var b=this.Eh;b.A(a)||(this.Eh=a=a.O(),this.H(),this.h("spot1",b,a))});G(X,{p:"spot2"},function(){return this.Fh},function(a){ra(a,R,X,"spot2");var b=this.Fh;b.A(a)||(this.Fh=a=a.O(),this.H(),this.h("spot2",b,a))});
G(X,{Zb:"parameter1"},function(){return this.dq},function(a){var b=this.dq;b!==a&&(this.dq=a,this.Dd(),this.h("parameter1",b,a))});G(X,{as:"parameter2"},function(){return this.eq},function(a){var b=this.eq;b!==a&&(this.eq=a,this.Dd(),this.h("parameter2",b,a))});H(X,{ta:"naturalBounds"},function(){if(null!==this.za)return this.hc.assign(this.za.Qa),this.hc;var a=this.ka;return new D(0,0,a.width,a.height)});
G(X,{cI:"isRectangular"},function(){return this.lp},function(a){var b=this.lp;b!==a&&(this.lp=a,this.H(),this.h("isRectangular",b,a))});G(X,{MC:"pathObject"},function(){return this.hq},function(a){var b=this.hq;b!==a&&(this.hq=a,this.ba(),this.h("pathObject",b,a))});G(X,{hC:"geometryStretch"},function(){return this.Xo},function(a){var b=this.Xo;b!==a&&(va(a,U,X,"geometryStretch"),this.Xo=a,this.h("geometryStretch",b,a))});
G(X,{interval:"interval"},function(){return this.cp},function(a){var b=this.cp;a=Math.floor(a);b!==a&&0<=a&&(this.cp=a,null!==this.g&&Tk(this.g),this.H(),this.h("interval",b,a))});X.getFigureGenerators=function(){var a=new Fb("string","function"),b;for(b in Q.Ff)if(b!==b.toLowerCase()){var c=Q.Ff[b];"function"===typeof c&&a.add(b,c)}a.freeze();return a};
X.defineFigureGenerator=function(a,b){w(a,"string",X,"defineFigureGenerator:name");"string"===typeof b?""!==b&&Q.Ff[b]||v("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+b):w(b,"function",X,"defineFigureGenerator:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||v("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);var d=Q.Ff;d[a]=b;d[c]=a};
X.getArrowheadGeometries=function(){var a=new Fb("string",Ke),b;for(b in Q.$h)if(b!==b.toLowerCase()){var c=Q.$h[b];c instanceof Ke&&a.add(b,c)}a.freeze();return a};
X.defineArrowheadGeometry=function(a,b){w(a,"string",X,"defineArrowheadGeometry:name");var c=null;"string"===typeof b?(w(b,"string",X,"defineArrowheadGeometry:pathstr"),c=cf(b,!1)):(ra(b,Ke,X,"defineArrowheadGeometry:pathstr"),c=b);var d=a.toLowerCase();""!==a&&"none"!==d&&a!==d||v("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+a);var e=Q.$h;e[a]=c;e[d]=a};
function Zb(){U.call(this);this.Ad="";this.$b="black";this.Vf="13px sans-serif";this.jd="start";this.ip=!0;this.Pk=this.Qk=!1;this.Nj=Fo;this.ol=Go;this.Ct=this.ee=0;this.xm=this.Ow=this.Pw=null;this.oi=new Ho;this.Ro=!1;this.ze=this.Qj=this.Rq=null;this.Ji=this.Ii=0;this.vh=Infinity}yb(Zb,U);vb("TextBlock",Zb);var Io=new Sb,Jo=0,Ko=new Sb,Lo=0,Mo="...",No="",Oo=oa("canvas").getContext("2d");Zb.getEllipsis=function(){return Mo};Zb.setEllipsis=function(a){Mo=a;Ko=new Sb;Lo=0};
Zb.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.Ad=this.Ad;a.$b=this.$b;a.Vf=this.Vf;a.jd=this.jd;a.ip=this.ip;a.Qk=this.Qk;a.Pk=this.Pk;a.ol=this.ol;a.Nj=this.Nj;a.ee=this.ee;a.Ct=this.Ct;a.Pw=this.Pw;a.Ow=this.Ow;a.xm=this.xm;a.oi.nr(this.oi);a.Ro=this.Ro;a.Rq=this.Rq;a.Qj=this.Qj;a.ze=this.ze;a.Ii=this.Ii;a.Ji=this.Ji;a.vh=this.vh};Zb.prototype.toString=function(){return 22<this.Ad.length?'TextBlock("'+this.Ad.substring(0,20)+'"...)':'TextBlock("'+this.Ad+'")'};
var Po;Zb.None=Po=I(Zb,"None",0);var Qo;Zb.WrapFit=Qo=I(Zb,"WrapFit",1);var Go;Zb.WrapDesiredSize=Go=I(Zb,"WrapDesiredSize",2);var Fo;Zb.OverflowClip=Fo=I(Zb,"OverflowClip",0);var Ro;Zb.OverflowEllipsis=Ro=I(Zb,"OverflowEllipsis",1);Zb.prototype.H=function(){U.prototype.H.call(this);this.Ow=this.Pw=null};G(Zb,{font:"font"},function(){return this.Vf},function(a){var b=this.Vf;b!==a&&(this.Vf=a,this.xm=null,this.H(),this.h("font",b,a))});
Zb.isValidFont=function(a){var b=Oo.font;if(a===b||"10px sans-serif"===a)return!0;Oo.font="10px sans-serif";var c;Oo.font=a;var d=Oo.font;if("10px sans-serif"!==d)return Oo.font=b,!0;Oo.font="19px serif";c=Oo.font;Oo.font=a;d=Oo.font;Oo.font=b;return d!==c};G(Zb,{text:"text"},function(){return this.Ad},function(a){var b=this.Ad;a=null!==a&&void 0!==a?a.toString():"";b!==a&&(this.Ad=a,this.H(),this.h("text",b,a))});
G(Zb,{textAlign:"textAlign"},function(){return this.jd},function(a){var b=this.jd;b!==a&&("start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.jd=a,this.ba(),this.h("textAlign",b,a)):za(a,'"start", "end", "left", "right", or "center"',Zb,"textAlign"))});H(Zb,{ta:"naturalBounds"},function(){if(!this.hc.w()){var a=So(this,this.Ad,this.oi,999999).width,b=To(this,a,this.oi),c=this.ka;isNaN(c.width)||(a=c.width);isNaN(c.height)||(b=c.height);ad(this.hc,a,b)}return this.hc});
G(Zb,{ky:"isMultiline"},function(){return this.ip},function(a){var b=this.ip;b!==a&&(this.ip=a,this.H(),this.h("isMultiline",b,a))});G(Zb,{gI:"isUnderline"},function(){return this.Qk},function(a){var b=this.Qk;b!==a&&(this.Qk=a,this.ba(),this.h("isUnderline",b,a))});G(Zb,{dI:"isStrikethrough"},function(){return this.Pk},function(a){var b=this.Pk;b!==a&&(this.Pk=a,this.ba(),this.h("isStrikethrough",b,a))});
G(Zb,{KD:"wrap"},function(){return this.ol},function(a){var b=this.ol;b!==a&&(this.ol=a,this.H(),this.h("wrap",b,a))});G(Zb,{overflow:"overflow"},function(){return this.Nj},function(a){var b=this.Nj;b!==a&&(this.Nj=a,this.H(),this.h("overflow",b,a))});G(Zb,{stroke:"stroke"},function(){return this.$b},function(a){var b=this.$b;b!==a&&(a instanceof $f&&a.freeze(),this.$b=a,this.ba(),this.h("stroke",b,a))});H(Zb,{PF:"lineCount"},function(){return this.ee});
G(Zb,{Ox:"editable"},function(){return this.Ro},function(a){var b=this.Ro;b!==a&&(this.Ro=a,this.h("editable",b,a))});G(Zb,{uD:"textEditor"},function(){return this.Rq},function(a){var b=this.Rq;b!==a&&(a instanceof HTMLElement||v("textEditor must be an HTMLElement"),this.Rq=a,this.h("textEditor",b,a))});G(Zb,{Px:"errorFunction"},function(){return this.ze},function(a){var b=this.ze;b!==a&&(null!==a&&w(a,"function",Zb,"errorFunction"),this.ze=a,this.h("errorFunction",b,a))});
function Vm(a,b){var c=a.Vf;null!==c&&b.As!==c&&(b.font=c,b.As=c)}
Zb.prototype.Xi=function(a,b){if(null!==this.$b&&0!==this.Ad.length&&null!==this.Vf){var c=this.ta.width,d=Uo(this);a.textAlign=this.jd;Wm(this,a,this.$b,!0,!1);(this.Qk||this.Pk)&&Wm(this,a,this.$b,!1,!1);var e=this.oi,f=0,g=!1,h=Wa(0,0);this.Ve.Ka(h);var k=Wa(0,d);this.Ve.Ka(k);var l=h.Wi(k);A(h);A(k);h=b.scale;8>l*h*h&&(g=!0);b.Uf!==a&&(g=!1);!1===b.Vx("textGreeking")&&(g=!1);for(var l=this.Ii,h=this.Ji,k=this.ee,m=0;m<k;m++){var n=e.we[m],p=e.Od[m];n>c&&(n=c);var f=f+l,q=p,p=a,s=f,t=c,u=d,x=0;
g?("start"===this.jd||"left"===this.jd?x=0:"end"===this.jd||"right"===this.jd?x=t-n:"center"===this.jd?x=(t-n)/2:v("textAlign must be start, end, left, right, or center"),p.fillRect(0+x,s+.25*u,n,1)):("start"===this.jd||"left"===this.jd?x=0:"end"===this.jd||"right"===this.jd?x=t:"center"===this.jd?x=t/2:v("textAlign must be start, end, left, right, or center"),p.fillText(q,0+x,s+u-.25*u),q=u/20|0,0===q&&(q=1),this.Qk&&("end"===this.jd||"right"===this.jd?x-=n:"center"===this.jd&&(x-=n/2),p.beginPath(),
p.lineWidth=q,p.moveTo(0+x,s+u-.2*u),p.lineTo(0+x+n,s+u-.2*u),p.stroke()),this.Pk&&(p.beginPath(),p.lineWidth=q,s=s+u-u/2.2|0,0!==q%2&&(s+=.5),p.moveTo(0,s),p.lineTo(0+n,s),p.stroke()));f+=d+h}}};
Zb.prototype.Mn=function(a,b,c,d){var e=this.oi;e.reset();var f=0,g=0;if(isNaN(this.ka.width)){f=this.Ad.replace(/\r\n/g,"\n").replace(/\r/g,"\n");if(0===f.length)f=0;else if(this.ky){for(var h=g=0,k=!1;!k;){var l=f.indexOf("\n",h);-1===l&&(l=f.length,k=!0);h=Vo(f.substr(h,l-h).replace(/^\s+|\s+$/g,""),this.Vf);h>g&&(g=h);h=l+1}f=g}else g=f.indexOf("\n",0),0<=g&&(f=f.substr(0,g)),f=h=Vo(f,this.Vf);f=Math.min(f,a/this.scale);f=Math.max(8,f)}else f=this.ka.width;null!==this.I&&(f=Math.min(f,this.I.se.width),
f=Math.max(f,this.I.Jf.width));g=To(this,f,e);l=g=isNaN(this.ka.height)?Math.min(g,b/this.scale):this.ka.height;if(0!==e.fe&&1!==e.Od.length&&this.Nj===Ro&&(b=this.Vf,k=this.Nj===Ro?Wo(b):0,h=this.Ii+this.Ji,h=Math.max(0,Uo(this)+h),l=Math.max(Math.floor(l/h)-1,0),!(l+1>=e.Od.length))){h=e.Od[l];for(a=Math.max(1,a-k);Vo(h,b)>a&&1<h.length;)h=h.substr(0,h.length-1);h+=Mo;a=Vo(h,b);e.Od[l]=h;e.Od=e.Od.slice(0,l+1);e.we[l]=a;e.we=e.we.slice(0,l+1);e.Qi=e.Od.length;e.fe=Math.max(e.fe,a)}if(this.KD===
Qo||isNaN(this.ka.width))f=e.fe,isNaN(this.ka.width)&&(f=Math.max(8,f));f=Math.max(c,f);g=Math.max(d,g);ad(this.hc,f,g);Km(this,0,0,f,g)};Zb.prototype.Jh=function(a,b,c,d){Om(this,a,b,c,d)};
function So(a,b,c,d){b=b.replace(/^\s+|\s+$/g,"");var e=0,f=0,g=0,h=a.Vf,f=a.Ii+a.Ji,k=Math.max(0,Uo(a)+f),g=a.Nj===Ro?Wo(h):0;if(a.ee>=a.vh)return new Za(0,k);if(a.ol===Po){c.Qi=1;f=Vo(b,h);if(0===g||f<=d)return c.fe=f,c.we.push(c.fe),c.Od.push(b),new Za(f,k);var l=Xo(b);b=b.substr(l.length);for(var m=Xo(b),f=Vo(l+m,h);0<m.length&&f<=d;)l+=m,b=b.substr(m.length),m=Xo(b),f=Vo((l+m).replace(/^\s+|\s+$/g,""),h);l+=m.replace(/^\s+|\s+$/g,"");for(d=Math.max(1,d-g);Vo(l,h)>d&&1<l.length;)l=l.substr(0,
l.length-1);l+=Mo;g=Vo(l,h);c.we.push(g);c.fe=g;c.Od.push(l);return new Za(g,k)}var n=0;0===b.length&&(n=1,c.we.push(0),c.Od.push(b));for(;0<b.length;){l=Xo(b);for(b=b.substr(l.length);Vo(l,h)>d;){m=1;f=Vo(l.substr(0,m),h);for(g=0;f<=d;)m++,g=f,f=Vo(l.substr(0,m),h);1===m?(c.we[a.ee+n]=f,e=Math.max(e,f)):(c.we[a.ee+n]=g,e=Math.max(e,g));m--;1>m&&(m=1);c.Od[a.ee+n]=l.substr(0,m);n++;l=l.substr(m);if(a.ee+n>a.vh)break}m=Xo(b);for(f=Vo(l+m,h);0<m.length&&f<=d;)l+=m,b=b.substr(m.length),m=Xo(b),f=Vo((l+
m).replace(/^\s+|\s+$/g,""),h);l=l.replace(/^\s+|\s+$/g,"");if(""!==l&&(0===m.length?(c.we.push(f),e=Math.max(e,f)):(g=Vo(l,h),c.we.push(g),e=Math.max(e,g)),c.Od.push(l),n++,a.ee+n>a.vh))break}c.Qi=Math.min(a.vh,n);c.fe=Math.max(c.fe,e);return new Za(c.fe,k*c.Qi)}function Xo(a){for(var b=a.length,c=0;c<b&&" "!==a.charAt(c);)c++;for(;c<b&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}function Vo(a,b){No!==b&&(No=Oo.font=b);return Oo.measureText(a).width}
function Uo(a){if(null!==a.xm)return a.xm;var b=a.Vf;No!==b&&(No=Oo.font=b);var c=0;void 0!==Io[b]&&5E3>Jo?c=Io[b]:(c=1.3*Oo.measureText("M").width,Io[b]=c,Jo++);return a.xm=c}function Wo(a){No!==a&&(No=Oo.font=a);var b=0;void 0!==Ko[a]&&5E3>Lo?b=Ko[a]:(b=Oo.measureText(Mo).width,Ko[a]=b,Lo++);return b}
function To(a,b,c){var d=a.Ad.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e=a.Ii+a.Ji,e=Math.max(0,Uo(a)+e);if(0===d.length)return c.fe=0,a.ee=1,e;if(!a.ky){var f=d.indexOf("\n",0);0<=f&&(d=d.substr(0,f))}for(var f=0,g=a.ee=0,h=-1,k=!1;!k;)h=d.indexOf("\n",g),-1===h&&(h=d.length,k=!0),g<=h&&(g=d.substr(g,h-g),a.ol!==Po?(c.Qi=0,g=So(a,g,c,b),f+=g.height,a.ee+=c.Qi):(So(a,g,c,b),f+=e,a.ee++),a.ee===a.vh&&(k=!0)),g=h+1;return a.Ct=f}
G(Zb,{$y:"textValidation"},function(){return this.Qj},function(a){var b=this.Qj;b!==a&&(null!==a&&w(a,"function",Zb,"textValidation"),this.Qj=a,this.h("textValidation",b,a))});G(Zb,{SI:"spacingAbove"},function(){return this.Ii},function(a){var b=this.Ii;b!==a&&(this.Ii=a,this.h("spacingAbove",b,a))});G(Zb,{TI:"spacingBelow"},function(){return this.Ji},function(a){var b=this.Ji;b!==a&&(this.Ji=a,this.h("spacingBelow",b,a))});
G(Zb,{tI:"maxLines"},function(){return this.vh},function(a){var b=this.vh;b!==a&&(a=Math.floor(a),0>=a&&za(a,"> 0",Zb,"maxLines"),this.vh=a,this.h("maxLines",b,a),this.H())});H(Zb,{uI:"metrics"},function(){return this.oi});function Ho(){this.fe=this.Qi=0;this.we=[];this.Od=[]}Ho.prototype.reset=function(){this.fe=this.Qi=0;this.we=[];this.Od=[]};Ho.prototype.nr=function(a){this.Qi=a.Qi;this.fe=a.fe;this.we=Ka(a.we);this.Od=Ka(a.Od)};H(Ho,{zH:"arrSize"},function(){return this.we});
H(Ho,{AH:"arrText"},function(){return this.Od});H(Ho,{sI:"maxLineWidth"},function(){return this.fe});function ok(){U.call(this);this.ce=null;this.Mq="";this.Hi=(new D(NaN,NaN,NaN,NaN)).freeze();this.Bm=Ne;this.Qq=this.Ki=this.ze=null;this.Fw=!1;this.Zm=null;this.wA=0}yb(ok,U);vb("Picture",ok);var Yo=new Sb,Zo=0,jk=[];
function $o(){var a=jk;if(0===a.length)for(var b=window.document.getElementsByTagName("canvas"),c=b.length,d=0;d<c;d++){var e=b[d];e.parentElement&&e.parentElement.N&&a.push(e.parentElement.N)}return a}var ap;ok.clearCache=ap=function(a){void 0===a&&(a="");w(a,"string",ok,"clearCache:url");""!==a?Yo[a]&&(delete Yo[a],Zo--):(Yo=new Sb,Zo=0)};
ok.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.element=this.ce;a.Mq=this.Mq;a.Hi.assign(this.Hi);a.Bm=this.Bm;a.ze=this.ze;a.Ki=this.Ki;a.Zm=this.Zm};ok.prototype.toString=function(){return"Picture("+this.source+")#"+ub(this)};
G(ok,{element:"element"},function(){return this.ce},function(a){var b=this.ce;b!==a&&(a instanceof HTMLImageElement||a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||v("Picture.element must be an instance of Image, Canvas, or Video."),this.Fw=a instanceof HTMLCanvasElement,this.ce=a,!0===a.complete||void 0===a.complete?(a.kt instanceof Event&&null!==this.ze&&this.ze(this,a.kt),!0===a.Hw&&null!==this.Ki&&this.Ki(this,null),a.Hw=!0,this.ka.w()||(Sk(this,!1),this.H())):a.Wz||(a.addEventListener("load",
function(b){bp(a,b)}),a.addEventListener("error",function(b){cp(a,b)}),a.Wz=!0),this.h("element",b,a),this.ba())});
G(ok,{source:"source"},function(){return this.Mq},function(a){var b=this.Mq;if(b!==a){w(a,"string",ok,"source");this.Mq=a;var c=Yo,d=this.g;if(void 0!==c[a])var e=c[a].ln[0].source;else{30<Zo&&(ap(),c=Yo);e=oa("img");e.addEventListener("load",function(a){bp(e,a)});e.addEventListener("error",function(a){cp(e,a)});e.Wz=!0;e.src=a;var f=this.Zm;null!==f&&(e.crossOrigin=f(this));c[a]=new dp(e);Zo++}null!==d&&Tl(d,this);this.element=e;null!==d&&Sl(d,this);this.ba();this.h("source",b,a)}});
function bp(a,b){a.Hw=!0;a.kt=!1;for(var c=null,d=$o(),e=d.length,f=0;f<e;f++){var g=d[f],h=g.Tm.ja(a.src);if(null!==h){e=h.length;for(f=0;f<e;f++)c=h[f],c.ka.w()||(g.IA.add(c),g.vd()),null!==c.Ki&&c.Ki(c,b);g.ba()}}}function cp(a,b){a.kt=b;for(var c=null,d=$o(),e=d.length,f=0;f<e;f++)if(c=d[f].Tm.ja(a.src),null!==c){for(var e=c.length,g=ob(),f=0;f<e;f++)g.push(c[f]);for(f=0;f<e;f++)c=g[f],null!==c.ze&&c.ze(c,b);pb(g)}}
G(ok,{RI:"sourceCrossOrigin"},function(){return this.Zm},function(a){if(this.Zm!==a&&(null!==a&&w(a,"function",ok,"sourceCrossOrigin"),this.Zm=a,null!==this.element)){var b=this.element.src;null===a&&"string"===typeof b?this.element.crossOrigin=null:null!==a&&(this.element.crossOrigin=a(this))}});G(ok,{Vh:"sourceRect"},function(){return this.Hi},function(a){var b=this.Hi;b.A(a)||(ra(a,D,ok,"sourceRect"),this.Hi=a=a.O(),this.ba(),this.h("sourceRect",b,a))});
G(ok,{vF:"imageStretch"},function(){return this.Bm},function(a){var b=this.Bm;b!==a&&(va(a,U,ok,"imageStretch"),this.Bm=a,this.ba(),this.h("imageStretch",b,a))});G(ok,{Px:"errorFunction"},function(){return this.ze},function(a){var b=this.ze;b!==a&&(null!==a&&w(a,"function",ok,"errorFunction"),this.ze=a,this.h("errorFunction",b,a))});
G(ok,{ZI:"successFunction"},function(){return this.Ki},function(a){var b=this.Ki;b!==a&&(null!==a&&w(a,"function",ok,"successFunction"),this.Ki=a,this.h("successFunction",b,a))});
ok.prototype.Xi=function(a,b){var c=this.ce;if(null!==c){var d=c.src;null!==d&&""!==d||v("Element has no source attribute: "+c);if(!(c.kt instanceof Event)&&!0===c.Hw){var d=this.ta,e=0,f=0,g=this.Fw,h=g?+c.width:c.naturalWidth,g=g?+c.height:c.naturalHeight;void 0===h&&c.videoWidth&&(h=c.videoWidth);void 0===g&&c.videoHeight&&(g=c.videoHeight);h=h||d.width;g=g||d.height;if(0!==h&&0!==g){this.Vh.w()&&(e=this.Hi.x,f=this.Hi.y,h=this.Hi.width,g=this.Hi.height);var k=h,l=g,m=this.Bm;switch(m){case Ti:if(this.Vh.w())break;
e+=Math.max((k-d.width)/2,0);f+=Math.max((l-d.height)/2,0);h=Math.min(d.width,k);g=Math.min(d.height,l);break;case Ne:k=d.width;l=d.height;break;case Vi:case Wi:var n=0;m===Vi?(n=Math.min(d.height/l,d.width/k),k*=n,l*=n):m===Wi&&(n=Math.max(d.height/l,d.width/k),k*=n,l*=n,e+=(k-d.width)/2,f+=(l-d.height)/2,h*=1/(k/d.width),g*=1/(l/d.height),k=d.width,l=d.height)}this.wA=h*g;var m=this.Rh()*b.scale,p=this.wA/(k*m*l*m),m=Yo[this.source],n=null;if(void 0!==m&&16<p){2>m.ln.length&&(ep(m,4,h,g),ep(m,16,
h,g));for(var q=m.ln,s=q.length,n=q[0],t=0;t<s;t++)if(q[t].bs*q[t].bs<p)n=q[t];else break}if(!b.sm){if(null===this.Qq)if(null===this.ce)this.Qq=!1;else{p=oa("canvas").getContext("2d");p.drawImage(this.ce,0,0);try{p.getImageData(0,0,1,1),this.Qq=!1}catch(u){this.Qq=!0}}if(this.Qq)return}if(b.Gw||void 0===m||null===n||1===n.bs)try{a.drawImage(c,e,f,h,g,Math.max((d.width-k)/2,0),Math.max((d.height-l)/2,0),Math.min(d.width,k),Math.min(d.height,l))}catch(x){}else{a.save();try{a.drawImage(n.source,Math.max((d.width-
k)/2,0),Math.max((d.height-l)/2,0),Math.min(d.width,k),Math.min(d.height,l))}catch(B){}a.restore()}}}}};H(ok,{ta:"naturalBounds"},function(){return this.hc});
ok.prototype.Mn=function(a,b,c,d){var e=this.ka,f=Nm(this,!0),g=this.ce,h=this.Fw;if(h||!this.Nw&&g&&g.complete)this.Nw=!0;null===g&&(isFinite(a)||(a=0),isFinite(b)||(b=0));isFinite(e.width)||f===Ne||f===Dm?(isFinite(a)||(a=this.Vh.w()?this.Vh.width:h?+g.width:g.naturalWidth),c=0):null!==g&&!1!==this.Nw&&(a=this.Vh.w()?this.Vh.width:h?+g.width:g.naturalWidth);isFinite(e.height)||f===Ne||f===Cm?(isFinite(b)||(b=this.Vh.w()?this.Vh.height:h?+g.height:g.naturalHeight),d=0):null!==g&&!1!==this.Nw&&(b=
this.Vh.w()?this.Vh.height:h?+g.height:g.naturalHeight);isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);e=this.se;f=this.Jf;c=Math.max(c,f.width);d=Math.max(d,f.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);null===g||g.complete||(isFinite(a)||(a=0),isFinite(b)||(b=0));ad(this.hc,a,b);Km(this,0,0,a,b)};ok.prototype.Jh=function(a,b,c,d){Om(this,a,b,c,d)};function dp(a){this.ln=[new fp(a,1)]}
function ep(a,b,c,d){var e=new Rb(null),f=e.getContext("2d"),g=1/b;e.width=c/b;e.height=d/b;b=new fp(e.Xc,b);c=a.ln[a.ln.length-1];f.setTransform(g*c.bs,0,0,g*c.bs,0,0);f.drawImage(c.source,0,0);a.ln.push(b)}function fp(a,b){this.source=a;this.bs=b}function mb(){this.m=new Ke;this.yb=null}r=mb.prototype;r.reset=function(){this.m=new Ke;this.yb=null};
function S(a,b,c,d,e,f){null===a.m&&v("StreamGeometryContext has been closed");void 0!==e&&!0===e?(null===a.yb&&v("Need to call beginFigure first"),d=new Cf(vf),d.q=b,d.s=c,a.yb.pa.add(d)):(a.yb=new Me,a.yb.da=b,a.yb.ea=c,a.yb.Jr=d,a.m.Xa.add(a.yb));void 0!==f&&(a.yb.Gm=f)}function ff(a){null===a.m&&v("StreamGeometryContext has been closed");null===a.yb&&v("Need to call beginFigure first");var b=a.yb.pa.length;0<b&&a.yb.pa.Y(b-1).close()}
function gf(a){null===a.m&&v("StreamGeometryContext has been closed");null===a.yb&&v("Need to call beginFigure first");0<a.yb.pa.length&&(a.yb.Jr=!0)}r.Ja=function(a){null===this.m&&v("StreamGeometryContext has been closed");null===this.yb&&v("Need to call beginFigure first");this.yb.pk=a};r.moveTo=function(a,b,c){void 0===c&&(c=!1);null===this.m&&v("StreamGeometryContext has been closed");null===this.yb&&v("Need to call beginFigure first");var d=new Cf(vf);d.q=a;d.s=b;c&&d.close();this.yb.pa.add(d)};
r.lineTo=function(a,b,c){void 0===c&&(c=!1);null===this.m&&v("StreamGeometryContext has been closed");null===this.yb&&v("Need to call beginFigure first");var d=new Cf($e);d.q=a;d.s=b;c&&d.close();this.yb.pa.add(d)};function T(a,b,c,d,e,f,g,h){void 0===h&&(h=!1);null===a.m&&v("StreamGeometryContext has been closed");null===a.yb&&v("Need to call beginFigure first");var k=new Cf(wf);k.kb=b;k.wb=c;k.Hd=d;k.Jd=e;k.q=f;k.s=g;h&&k.close();a.yb.pa.add(k)}
function df(a,b,c,d,e){var f;void 0===f&&(f=!1);null===a.m&&v("StreamGeometryContext has been closed");null===a.yb&&v("Need to call beginFigure first");var g=new Cf(xf);g.kb=b;g.wb=c;g.q=d;g.s=e;f&&g.close();a.yb.pa.add(g)}r.arcTo=function(a,b,c,d,e,f,g){void 0===f&&(f=0);void 0===g&&(g=!1);null===this.m&&v("StreamGeometryContext has been closed");null===this.yb&&v("Need to call beginFigure first");var h=new Cf(yf);h.bh=a;h.Xh=b;h.ra=c;h.Ba=d;h.radiusX=e;h.radiusY=0!==f?f:e;g&&h.close();this.yb.pa.add(h)};
function ef(a,b,c,d,e,f,g,h){var k;void 0===k&&(k=!1);null===a.m&&v("StreamGeometryContext has been closed");null===a.yb&&v("Need to call beginFigure first");b=new Cf(zf,g,h,b,c,d,e,f);k&&b.close();a.yb.pa.add(b)}
Q.makeGeometry=function(a,b,c){var d=a.ka,e=d.width,d=d.height;void 0!==b&&!isNaN(b)&&isFinite(b)&&(e=b);void 0!==c&&!isNaN(c)&&isFinite(c)&&(d=c);isFinite(e)||(e=100);isFinite(d)||(d=100);b=null;"None"!==a.io?b=Q.$h[a.io]:"None"!==a.Rx?b=Q.$h[a.Rx]:(c=Q.Ff[a.jb],"string"===typeof c&&(c=Q.Ff[c]),void 0===c&&v("Unknown Shape.figure: "+a.jb),b=c(a,e,d),b.Fm=e,b.Em=d);null===b&&(c=Q.Ff.Rectangle,"function"===typeof c&&(b=c(a,e,d)));return b};
Q.Kh=function(a,b,c,d,e,f,g,h,k,l,m,n,p,q){var s=1-k;a=a*s+c*k;b=b*s+d*k;c=c*s+e*k;d=d*s+f*k;e=e*s+g*k;f=f*s+h*k;h=a*s+c*k;g=b*s+d*k;c=c*s+e*k;d=d*s+f*k;l.x=a;l.y=b;m.x=h;m.y=g;n.x=h*s+c*k;n.y=g*s+d*k;p.x=c;p.y=d;q.x=e;q.y=f};Q.tn=function(a){a=Q.Bl(a);var b=ob();b[0]=a[0];for(var c=1,d=1;d<a.length;)b[c]=a[d],b[c+1]=a[d],b[c+2]=a[d+1],d+=2,c+=3;pb(a);return b};
Q.Bl=function(a){var b=Q.Yj(a),c=ob(),d=Math.floor(b.length/2),e=b.length-1;a=0===a%2?2:1;for(var f=0;f<e;f++){var g=b[f],h=b[f+1],k=b[(d+f-1)%e],l=b[(d+f+a)%e];c[2*f]=g;c[2*f+1]=Q.ik(g.x,g.y,k.x,k.y,h.x,h.y,l.x,l.y,new z)}c[c.length]=c[0];pb(b);return c};Q.ik=function(a,b,c,d,e,f,g,h,k){c=a-c;var l=e-g,m=g=0;0===c||0===l?0===c?(h=(f-h)/l,g=a,m=h*g+(f-h*e)):(d=(b-d)/c,g=e,m=d*g+(b-d*a)):(d=(b-d)/c,h=(f-h)/l,a=b-d*a,g=(f-h*e-a)/(d-h),m=d*g+a);k.k(g,m);return k};
Q.Yj=function(a){for(var b=ob(),c=1.5*Math.PI,d=0,e=0;e<a;e++)d=2*Math.PI/a*e+c,b[e]=new z(.5+.5*Math.cos(d),.5+.5*Math.sin(d));b.push(b[0]);return b};Q.iz=(new R(.156,.156)).va();Q.jz=(new R(.844,.844)).va();
Q.Ff={None:"Rectangle",Rectangle:function(a,b,c){a=new Ke;a.type=Pe;a.da=0;a.ea=0;a.q=b;a.s=c;return a},Square:function(a,b,c){a=new Ke;a.Vc=Vi;a.type=Pe;a.da=0;a.ea=0;a.q=Math.min(b,c);a.s=Math.min(b,c);return a},Ellipse:function(a,b,c){a=new Ke;a.type=Qe;a.da=0;a.ea=0;a.q=b;a.s=c;a.o=Q.iz;a.p=Q.jz;return a},Circle:function(a,b,c){a=new Ke;a.Vc=Vi;a.type=Qe;a.da=0;a.ea=0;a.q=Math.min(b,c);a.s=Math.min(b,c);a.o=Q.iz;a.p=Q.jz;return a},Connector:"Ellipse",TriangleRight:function(a,b,c){a=new Ke;var d=
new Me,e=new Cf;e.q=b;e.s=.5*c;d.pa.add(e);b=new Cf;b.q=0;b.s=c;d.pa.add(b.close());a.Xa.add(d);a.o=new R(0,.25);a.p=new R(.5,.75);return a},TriangleDown:function(a,b,c){a=new Ke;var d=new Me,e=new Cf;e.q=b;e.s=0;d.pa.add(e);e=new Cf;e.q=.5*b;e.s=c;d.pa.add(e.close());a.Xa.add(d);a.o=new R(.25,0);a.p=new R(.75,.5);return a},TriangleLeft:function(a,b,c){a=new Ke;var d=new Me;d.da=b;d.ea=c;var e=new Cf;e.q=0;e.s=.5*c;d.pa.add(e);c=new Cf;c.q=b;c.s=0;d.pa.add(c.close());a.Xa.add(d);a.o=new R(.5,.25);
a.p=new R(1,.75);return a},TriangleUp:function(a,b,c){a=new Ke;var d=new Me;d.da=b;d.ea=c;var e=new Cf;e.q=0;e.s=c;d.pa.add(e);c=new Cf;c.q=.5*b;c.s=0;d.pa.add(c.close());a.Xa.add(d);a.o=new R(.25,.5);a.p=new R(.75,1);return a},Line1:function(a,b,c){a=new Ke;a.type=Oe;a.da=0;a.ea=0;a.q=b;a.s=c;return a},Line2:function(a,b,c){a=new Ke;a.type=Oe;a.da=b;a.ea=0;a.q=0;a.s=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new Ke;a.type=Oe;a.da=0;a.ea=c/2;a.q=b;a.s=c/2;return a},LineV:function(a,b,c){a=
new Ke;a.type=Oe;a.da=b/2;a.ea=0;a.q=b/2;a.s=c;return a},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(a,b,c){var d=Q.ia;a=E();S(a,0,0,!1);T(a,d*b,0,1*b,(1-d)*c,b,c);b=a.m;F(a);return b},Curve2:function(a,b,c){var d=Q.ia;a=E();S(a,0,0,!1);T(a,0,d*c,(1-d)*b,c,b,c);b=a.m;F(a);return b},Curve3:function(a,b,c){var d=Q.ia;a=E();S(a,1*b,0,!1);T(a,1*b,d*c,d*b,1*c,0,1*c);b=a.m;F(a);return b},Curve4:function(a,b,c){var d=Q.ia;a=E();S(a,1*b,0,!1);T(a,(1-d)*b,0,0,(1-d)*c,0,1*c);b=a.m;F(a);return b},Alternative:"Triangle",
Merge:"Triangle",Triangle:function(a,b,c){a=E();S(a,.5*b,0*c,!0);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,!0);b=a.m;b.o=new R(.25,.5);b.p=new R(.75,1);F(a);return b},Decision:"Diamond",Diamond:function(a,b,c){a=E();S(a,.5*b,0,!0);a.lineTo(0,.5*c);a.lineTo(.5*b,1*c);a.lineTo(1*b,.5*c,!0);b=a.m;b.o=new R(.25,.25);b.p=new R(.75,.75);F(a);return b},Pentagon:function(a,b,c){var d=Q.Yj(5);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;5>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.2,.22);b.p=new R(.8,
.9);F(a);return b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var d=Q.Yj(6);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;6>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.07,.25);b.p=new R(.93,.75);F(a);return b},Heptagon:function(a,b,c){var d=Q.Yj(7);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;7>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.2,.15);b.p=new R(.8,.85);F(a);return b},Octagon:function(a,b,c){var d=Q.Yj(8);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=
1;8>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.15,.15);b.p=new R(.85,.85);F(a);return b},Nonagon:function(a,b,c){var d=Q.Yj(9);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;9>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.17,.13);b.p=new R(.82,.82);F(a);return b},Decagon:function(a,b,c){var d=Q.Yj(10);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.16,.16);b.p=new R(.84,.84);F(a);return b},Dodecagon:function(a,
b,c){var d=Q.Yj(12);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.16,.16);b.p=new R(.84,.84);F(a);return b},FivePointedStar:function(a,b,c){var d=Q.Bl(5);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.312,.383);b.p=new R(.693,.765);F(a);return b},SixPointedStar:function(a,b,c){var d=Q.Bl(6);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);
ff(a);b=a.m;b.o=new R(.17,.251);b.p=new R(.833,.755);F(a);return b},SevenPointedStar:function(a,b,c){var d=Q.Bl(7);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;14>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.363,.361);b.p=new R(.641,.709);F(a);return b},EightPointedStar:function(a,b,c){var d=Q.Bl(8);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;16>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.252,.255);b.p=new R(.75,.75);F(a);return b},NinePointedStar:function(a,b,
c){var d=Q.Bl(9);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;18>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.355,.361);b.p=new R(.645,.651);F(a);return b},TenPointedStar:function(a,b,c){var d=Q.Bl(10);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;20>e;e++)a.lineTo(d[e].x*b,d[e].y*c);pb(d);ff(a);b=a.m;b.o=new R(.281,.261);b.p=new R(.723,.748);F(a);return b},FivePointedBurst:function(a,b,c){var d=Q.tn(5);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*
c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.312,.383);b.p=new R(.693,.765);F(a);return b},SixPointedBurst:function(a,b,c){var d=Q.tn(6);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.17,.251);b.p=new R(.833,.755);F(a);return b},SevenPointedBurst:function(a,b,c){var d=Q.tn(7);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*c,d[e+
1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.363,.361);b.p=new R(.641,.709);F(a);return b},EightPointedBurst:function(a,b,c){var d=Q.tn(8);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.252,.255);b.p=new R(.75,.75);F(a);return b},NinePointedBurst:function(a,b,c){var d=Q.tn(9);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*c,d[e+1].x*
b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.355,.361);b.p=new R(.645,.651);F(a);return b},TenPointedBurst:function(a,b,c){var d=Q.tn(10);a=E();S(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)T(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);pb(d);ff(a);b=a.m;b.o=new R(.281,.261);b.p=new R(.723,.748);F(a);return b},Cloud:function(a,b,c){a=E();S(a,.08034461*b,.1944299*c,!0);T(a,-.09239631*b,.07836421*c,.1406031*b,-.0542823*c,.2008615*b,.05349299*c);T(a,.2450511*
b,-.00697547*c,.3776197*b,-.01112067*c,.4338609*b,.074219*c);T(a,.4539471*b,0,.6066018*b,-.02526587*c,.6558228*b,.07004196*c);T(a,.6914277*b,-.01904177*c,.8921095*b,-.01220843*c,.8921095*b,.08370865*c);T(a,1.036446*b,.04105738*c,1.020377*b,.3022052*c,.9147671*b,.3194596*c);T(a,1.04448*b,.360238*c,.992256*b,.5219009*c,.9082935*b,.562044*c);T(a,1.032337*b,.5771781*c,1.018411*b,.8120651*c,.9212406*b,.8217117*c);T(a,1.028411*b,.9571472*c,.8556702*b,1.052487*c,.7592566*b,.9156953*c);T(a,.7431877*b,1.009325*
c,.5624123*b,1.021761*c,.5101666*b,.9310455*c);T(a,.4820677*b,1.031761*c,.3030112*b,1.002796*c,.2609328*b,.9344623*c);T(a,.2329994*b,1.01518*c,.03213784*b,1.01518*c,.08034461*b,.870098*c);T(a,-.02812061*b,.9032597*c,-.01205169*b,.6835638*c,.06829292*b,.6545475*c);T(a,-.01812061*b,.6089503*c,-.00606892*b,.4555777*c,.06427569*b,.4265613*c);T(a,-.01606892*b,.3892545*c,-.01205169*b,.1944299*c,.08034461*b,.1944299*c);ff(a);b=a.m;b.o=new R(.1,.1);b.p=new R(.9,.9);F(a);return b},Gate:"Crescent",Crescent:function(a,
b,c){a=E();S(a,0,0,!0);T(a,1*b,0,1*b,1*c,0,1*c);T(a,.5*b,.75*c,.5*b,.25*c,0,0);ff(a);b=a.m;b.o=new R(.511,.19);b.p=new R(.776,.76);F(a);return b},FramedRectangle:function(a,b,c){var d=E(),e=a?a.Zb:NaN;a=a?a.as:NaN;isNaN(e)&&(e=.1);isNaN(a)&&(a=.1);S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,!0);S(d,e*b,a*c,!1,!0);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,!0);b=d.m;b.o=new R(e,a);b.p=new R(1-e,1-a);F(d);return b},Delay:"HalfEllipse",HalfEllipse:function(a,
b,c){var d=Q.ia;a=E();S(a,0,0,!0);T(a,d*b,0,1*b,(.5-d/2)*c,1*b,.5*c);T(a,1*b,(.5+d/2)*c,d*b,1*c,0,1*c);ff(a);b=a.m;b.o=new R(0,.2);b.p=new R(.75,.8);F(a);return b},Heart:function(a,b,c){a=E();S(a,.5*b,1*c,!0);T(a,.1*b,.8*c,0,.5*c,0*b,.3*c);T(a,0*b,0,.45*b,0,.5*b,.3*c);T(a,.55*b,0,1*b,0,1*b,.3*c);T(a,b,.5*c,.9*b,.8*c,.5*b,1*c);ff(a);b=a.m;b.o=new R(.15,.29);b.p=new R(.86,.68);F(a);return b},Spade:function(a,b,c){a=E();S(a,.5*b,0,!0);a.lineTo(.51*b,.01*c);T(a,.6*b,.2*c,b,.25*c,b,.5*c);T(a,b,.8*c,.6*
b,.8*c,.55*b,.7*c);T(a,.5*b,.75*c,.55*b,.95*c,.75*b,c);a.lineTo(.25*b,c);T(a,.45*b,.95*c,.5*b,.75*c,.45*b,.7*c);T(a,.4*b,.8*c,0,.8*c,0,.5*c);T(a,0,.25*c,.4*b,.2*c,.49*b,.01*c);ff(a);b=a.m;b.o=new R(.19,.26);b.p=new R(.8,.68);F(a);return b},Club:function(a,b,c){a=E();S(a,.4*b,.6*c,!0);T(a,.5*b,.75*c,.45*b,.95*c,.15*b,1*c);a.lineTo(.85*b,c);T(a,.55*b,.95*c,.5*b,.75*c,.6*b,.6*c);var d=.2,e=.3,f=0,g=4*(Math.SQRT2-1)/3*d;T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5+g+e)*
b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e+.05)*b,(.5-g+f-.02)*c,.65*b,.36771243*c);d=.2;e=0;f=-.3;g=4*(Math.SQRT2-1)/3*d;T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,.35*b,.36771243*
c);d=.2;e=-.3;f=0;g=4*(Math.SQRT2-1)/3*d;T(a,(.5+d+e-.05)*b,(.5-g+f-.02)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,.4*b,.6*c);ff(a);b=a.m;b.o=new R(.06,.39);b.p=new R(.93,.58);F(a);return b},Ring:function(a,b,c){a=E();var d=4*(Math.SQRT2-1)/3*.5;S(a,b,.5*c,!0);T(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);T(a,(.5-d)*b,0,0,
(.5-d)*c,0,.5*c);T(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);T(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;S(a,.5*b,.1*c,!0,!0);T(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c);T(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);T(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);T(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);b=a.m;b.o=new R(.146,.146);b.p=new R(.853,.853);b.Vc=Vi;F(a);return b},YinYang:function(a,b,c){var d=.5;a=E();d=.5;S(a,.5*b,0,!0);a.arcTo(270,180,.5*b,.5*b,.5*b);T(a,1*b,d*c,0,d*c,d*b,0,!0);var d=.1,
e=.25;S(a,(.5+d)*b,e*c,!0,!0);a.arcTo(0,-360,.5*b,c*e,d*b);ff(a);S(a,.5*b,0,!1);a.arcTo(270,-180,.5*b,.5*b,.5*b);a.Ja(!1);e=.75;S(a,(.5+d)*b,e*c,!0);a.arcTo(0,360,.5*b,c*e,d*b);ff(a);b=a.m;b.Vc=Vi;F(a);return b},Peace:function(a,b,c){a=E();var d=4*(Math.SQRT2-1)/3*.5;S(a,b,.5*c,!0);T(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0);T(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c);T(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c);T(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c);d=4*(Math.SQRT2-1)/3*.4;S(a,.5*b,.1*c,!0,!0);T(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,
.5*c);T(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c);T(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c);T(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);var d=.07,e=0,f=-.707*.11,g=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+f)*c,!0);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);d=.07;e=-.707*
.11;f=.707*.11;g=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+f)*c,!0);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);d=.07;e=.707*.11;f=.707*.11;g=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+f)*c,!0);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*
b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);b=a.m;b.o=new R(.146,.146);b.p=new R(.853,.853);b.Vc=Vi;F(a);return b},NotAllowed:function(a,b,c){var d=Q.ia,e=.5*d,f=.5;a=E();S(a,.5*b,(.5-f)*c,!0);T(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c);T(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c);T(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,
.5*c);T(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c);var f=.4,e=.4*d,d=Va(),g=Va(),h=Va(),k=Va();Q.Kh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.42,d,g,h,k,k);var l=Va(),m=Va(),n=Va();Q.Kh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.58,k,k,n,l,m);var p=Va(),q=Va(),s=Va();Q.Kh(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.42,p,q,s,k,k);var t=Va(),u=Va(),x=Va();Q.Kh(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.58,k,k,x,t,u);S(a,x.x*b,x.y*c,!0,!0);T(a,t.x*b,t.y*c,u.x*b,u.y*c,(.5-f)*b,.5*c);T(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,
(.5-f)*c,.5*b,(.5-f)*c);T(a,d.x*b,d.y*c,g.x*b,g.y*c,h.x*b,h.y*c);a.lineTo(x.x*b,x.y*c);ff(a);S(a,s.x*b,s.y*c,!0,!0);a.lineTo(n.x*b,n.y*c);T(a,l.x*b,l.y*c,m.x*b,m.y*c,(.5+f)*b,.5*c);T(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c);T(a,p.x*b,p.y*c,q.x*b,q.y*c,s.x*b,s.y*c);ff(a);A(d);A(g);A(h);A(k);A(l);A(m);A(n);A(p);A(q);A(s);A(t);A(u);A(x);b=a.m;F(a);b.Vc=Vi;return b},Fragile:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.25*b,0);a.lineTo(.2*b,.15*c);a.lineTo(.3*b,.25*c);a.lineTo(.29*b,.33*c);
a.lineTo(.35*b,.25*c);a.lineTo(.3*b,.15*c);a.lineTo(.4*b,0);a.lineTo(1*b,0);T(a,1*b,.25*c,.75*b,.5*c,.55*b,.5*c);a.lineTo(.55*b,.9*c);a.lineTo(.7*b,.9*c);a.lineTo(.7*b,1*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.9*c);a.lineTo(.45*b,.9*c);a.lineTo(.45*b,.5*c);T(a,.25*b,.5*c,0,.25*c,0,0);ff(a);b=a.m;b.o=new R(.25,0);b.p=new R(.75,.4);F(a);return b},HourGlass:function(a,b,c){a=E();S(a,.65*b,.5*c,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(.35*b,.5*c);a.lineTo(0,0);a.lineTo(1*b,0);ff(a);b=a.m;F(a);return b},
Lightning:function(a,b,c){a=E();S(a,0*b,.55*c,!0);a.lineTo(.75*b,0);a.lineTo(.25*b,.45*c);a.lineTo(.9*b,.48*c);a.lineTo(.4*b,1*c);a.lineTo(.65*b,.55*c);ff(a);b=a.m;F(a);return b},Parallelogram1:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=E();S(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);ff(d);b=d.m;b.o=new R(a,0);b.p=new R(1-a,1);F(d);return b},Input:"Output",Output:function(a,b,c){a=E();S(a,0,1*c,!0);a.lineTo(.1*b,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);ff(a);b=a.m;b.o=
new R(.1,0);b.p=new R(.9,1);F(a);return b},Parallelogram2:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.25);var d=E();S(d,a*b,0,!0);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);ff(d);b=d.m;b.o=new R(a,0);b.p=new R(1-a,1);F(d);return b},ThickCross:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.25);var d=E();S(d,(.5-a/2)*b,0,!0);d.lineTo((.5+a/2)*b,0);d.lineTo((.5+a/2)*b,(.5-a/2)*c);d.lineTo(1*b,(.5-a/2)*c);d.lineTo(1*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,(.5+a/2)*c);d.lineTo((.5+a/2)*b,1*c);d.lineTo((.5-
a/2)*b,1*c);d.lineTo((.5-a/2)*b,(.5+a/2)*c);d.lineTo(0,(.5+a/2)*c);d.lineTo(0,(.5-a/2)*c);d.lineTo((.5-a/2)*b,(.5-a/2)*c);ff(d);b=d.m;b.o=new R(.5-a/2,.5-a/2);b.p=new R(.5+a/2,.5+a/2);F(d);return b},ThickX:function(a,b,c){a=.25/Math.SQRT2;var d=E();S(d,.3*b,0,!0);d.lineTo(.5*b,.2*c);d.lineTo(.7*b,0);d.lineTo(1*b,.3*c);d.lineTo(.8*b,.5*c);d.lineTo(1*b,.7*c);d.lineTo(.7*b,1*c);d.lineTo(.5*b,.8*c);d.lineTo(.3*b,1*c);d.lineTo(0,.7*c);d.lineTo(.2*b,.5*c);d.lineTo(0,.3*c);ff(d);b=d.m;b.o=new R(.5-a,.5-
a);b.p=new R(.5+a,.5+a);F(d);return b},ThinCross:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=.1);a=E();S(a,(.5-d/2)*b,0,!0);a.lineTo((.5+d/2)*b,0);a.lineTo((.5+d/2)*b,(.5-d/2)*c);a.lineTo(1*b,(.5-d/2)*c);a.lineTo(1*b,(.5+d/2)*c);a.lineTo((.5+d/2)*b,(.5+d/2)*c);a.lineTo((.5+d/2)*b,1*c);a.lineTo((.5-d/2)*b,1*c);a.lineTo((.5-d/2)*b,(.5+d/2)*c);a.lineTo(0,(.5+d/2)*c);a.lineTo(0,(.5-d/2)*c);a.lineTo((.5-d/2)*b,(.5-d/2)*c);ff(a);b=a.m;F(a);return b},ThinX:function(a,b,c){a=E();S(a,.1*b,0,!0);a.lineTo(.5*
b,.4*c);a.lineTo(.9*b,0);a.lineTo(1*b,.1*c);a.lineTo(.6*b,.5*c);a.lineTo(1*b,.9*c);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.6*c);a.lineTo(.1*b,1*c);a.lineTo(0,.9*c);a.lineTo(.4*b,.5*c);a.lineTo(0,.1*c);ff(a);return a.m},RightTriangle:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);ff(a);b=a.m;b.o=new R(0,.5);b.p=new R(.5,1);F(a);return b},RoundedIBeam:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(1*b,0);T(a,.5*b,.25*c,.5*b,.75*c,1*b,1*c);a.lineTo(0,1*c);T(a,.5*b,.75*c,.5*b,.25*c,0,0);ff(a);
b=a.m;F(a);return b},RoundedRectangle:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=d*Q.ia;var e=E();S(e,d,0,!0);e.lineTo(b-d,0);T(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);T(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);T(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);T(e,0,a,a,0,d,0);ff(e);b=e.m;1<a?(b.o=new R(0,0,a,a),b.p=new R(1,1,-a,-a)):(b.o=ud,b.p=Hd);F(e);return b},Border:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=5);d=Math.min(d,b/3);d=Math.min(d,c/3);a=E();S(a,d,0,!0);a.lineTo(b-
d,0);T(a,b-0,0,b,0,b,d);a.lineTo(b,c-d);T(a,b,c-0,b-0,c,b-d,c);a.lineTo(d,c);T(a,0,c,0,c-0,0,c-d);a.lineTo(0,d);T(a,0,0,0,0,d,0);ff(a);b=a.m;b.o=ud;b.p=Hd;F(a);return b},SquareIBeam:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=.2);a=E();S(a,0,0,!0);a.lineTo(1*b,0);a.lineTo(1*b,d*c);a.lineTo((.5+d/2)*b,d*c);a.lineTo((.5+d/2)*b,(1-d)*c);a.lineTo(1*b,(1-d)*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,(1-d)*c);a.lineTo((.5-d/2)*b,(1-d)*c);a.lineTo((.5-d/2)*b,d*c);a.lineTo(0,d*c);ff(a);b=a.m;F(a);
return b},Trapezoid:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.2);var d=E();S(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);b=d.m;b.o=new R(a,0);b.p=new R(1-a,1);F(d);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=0);a=E();S(a,d,0,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*b,1*c);ff(a);b=a.m;b.o=new R(.1,0);b.p=new R(.9,1);F(a);return b},GenderMale:function(a,b,c){a=E();var d=Q.ia,e=.4*d,f=.4,g=Va(),
h=Va(),k=Va(),l=Va();S(a,(.5-f)*b,.5*c,!0);T(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,(.5-f)*c,.5*b,(.5-f)*c);Q.Kh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.44,k,l,h,g,g);T(a,k.x*b,k.y*c,l.x*b,l.y*c,h.x*b,h.y*c);var m=Wa(h.x,h.y);Q.Kh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.56,g,g,h,k,l);var n=Wa(h.x,h.y);a.lineTo((.1*m.x+.855)*b,.1*m.y*c);a.lineTo(.85*b,.1*m.y*c);a.lineTo(.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,.15*c);a.lineTo((.1*n.x+.9)*b,.15*c);a.lineTo((.1*n.x+.9)*b,(.1*n.y+.05*.9)*c);a.lineTo(n.x*b,n.y*c);T(a,k.x*
b,k.y*c,l.x*b,l.y*c,(.5+f)*b,.5*c);T(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c);T(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c);f=.35;e=.35*d;S(a,.5*b,(.5-f)*c,!0,!0);T(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c);T(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c);T(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c);T(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c);S(a,(.5-f)*b,.5*c,!0);A(g);A(h);A(k);A(l);A(m);A(n);b=a.m;b.o=new R(.202,.257);b.p=new R(.692,.839);
b.Vc=Vi;F(a);return b},GenderFemale:function(a,b,c){a=E();var d=.375,e=0,f=-.125,g=4*(Math.SQRT2-1)/3*d;S(a,(.525+e)*b,(.5+d+f)*c,!0);T(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c);T(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.475+e)*b,(.5+d+f)*c);a.lineTo(.475*b,.85*c);a.lineTo(.425*b,.85*c);a.lineTo(.425*b,.9*c);a.lineTo(.475*b,.9*c);
a.lineTo(.475*b,1*c);a.lineTo(.525*b,1*c);a.lineTo(.525*b,.9*c);a.lineTo(.575*b,.9*c);a.lineTo(.575*b,.85*c);a.lineTo(.525*b,.85*c);ff(a);d=.325;e=0;f=-.125;g=4*(Math.SQRT2-1)/3*d;S(a,(.5+d+e)*b,(.5+f)*c,!0,!0);T(a,(.5+d+e)*b,(.5+g+f)*c,(.5+g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c);T(a,(.5-g+e)*b,(.5+d+f)*c,(.5-d+e)*b,(.5+g+f)*c,(.5-d+e)*b,(.5+f)*c);T(a,(.5-d+e)*b,(.5-g+f)*c,(.5-g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c);T(a,(.5+g+e)*b,(.5-d+f)*c,(.5+d+e)*b,(.5-g+f)*c,(.5+d+e)*b,(.5+f)*c);S(a,(.525+e)*b,
(.5+d+f)*c,!0);b=a.m;b.o=new R(.232,.136);b.p=new R(.782,.611);b.Vc=Vi;F(a);return b},PlusLine:function(a,b,c){a=E();S(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);b=a.m;F(a);return b},XLine:function(a,b,c){a=E();S(a,0,1*c,!1);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);b=a.m;F(a);return b},AsteriskLine:function(a,b,c){a=E();var d=.2/Math.SQRT2;S(a,d*b,(1-d)*c,!1);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,.5*c);a.lineTo(1*b,.5*c);a.moveTo(.5*
b,0*c);a.lineTo(.5*b,1*c);b=a.m;F(a);return b},CircleLine:function(a,b,c){var d=.5*Q.ia;a=E();S(a,1*b,.5*c,!1);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.m;b.o=new R(.146,.146);b.p=new R(.853,.853);b.Vc=Vi;F(a);return b},Pie:function(a,b,c){a=E();var d=4*(Math.SQRT2-1)/3*.5;S(a,(.5*Math.SQRT2/2+.5)*b,(.5-.5*Math.SQRT2/2)*c,!0);T(a,.7*b,0*c,.5*b,0*c,.5*b,0*c);T(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*
c,0*b,.5*c);T(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.5*b,1*c);T(a,(.5+d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);a.lineTo(.5*b,.5*c);ff(a);b=a.m;F(a);return b},PiePiece:function(a,b,c){var d=Q.ia/Math.SQRT2*.5,e=Math.SQRT2/2,f=1-Math.SQRT2/2;a=E();S(a,b,c,!0);T(a,b,(1-d)*c,(e+d)*b,(f+d)*c,e*b,f*c);a.lineTo(0,c);ff(a);b=a.m;F(a);return b},StopSign:function(a,b,c){a=1/(Math.SQRT2+2);var d=E();S(d,a*b,0,!0);d.lineTo((1-a)*b,0);d.lineTo(1*b,a*c);d.lineTo(1*b,(1-a)*c);d.lineTo((1-a)*b,1*c);d.lineTo(a*b,1*c);d.lineTo(0,
(1-a)*c);d.lineTo(0,a*c);ff(d);b=d.m;b.o=new R(a/2,a/2);b.p=new R(1-a/2,1-a/2);F(d);return b},LogicImplies:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=.2);a=E();S(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);b=a.m;b.o=ud;b.p=new R(.8,.5);F(a);return b},LogicIff:function(a,b,c){var d=a?a.Zb:NaN;isNaN(d)&&(d=.2);a=E();S(a,(1-d)*b,0*c,!1);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,c);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(d*b,0);a.lineTo(0,.5*c);a.lineTo(d*
b,c);b=a.m;b.o=new R(.2,0);b.p=new R(.8,.5);F(a);return b},LogicNot:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,1*c);b=a.m;F(a);return b},LogicAnd:function(a,b,c){a=E();S(a,0,1*c,!1);a.lineTo(.5*b,0);a.lineTo(1*b,1*c);b=a.m;b.o=new R(.25,.5);b.p=new R(.75,1);F(a);return b},LogicOr:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(.5*b,1*c);a.lineTo(1*b,0);b=a.m;b.o=new R(.219,0);b.p=new R(.78,.409);F(a);return b},LogicXor:function(a,b,c){a=E();S(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.moveTo(0,
.5*c);a.lineTo(1*b,.5*c);var d=.5*Q.ia;T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);b=a.m;b.Vc=Vi;F(a);return b},LogicTruth:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(1*b,0);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);b=a.m;F(a);return b},LogicFalsity:function(a,b,c){a=E();S(a,0,1*c,!1);a.lineTo(1*b,1*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);b=a.m;F(a);return b},LogicThereExists:function(a,b,c){a=E();S(a,
0,0,!1);a.lineTo(1*b,0);a.lineTo(1*b,.5*c);a.lineTo(0,.5*c);a.moveTo(1*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);b=a.m;F(a);return b},LogicForAll:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(.5*b,1*c);a.lineTo(1*b,0);a.moveTo(.25*b,.5*c);a.lineTo(.75*b,.5*c);b=a.m;b.o=new R(.25,0);b.p=new R(.75,.5);F(a);return b},LogicIsDefinedAs:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(b,0);a.moveTo(0,.5*c);a.lineTo(b,.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.m;b.o=new R(.01,.01);b.p=new R(.99,.49);F(a);return b},LogicIntersect:function(a,
b,c){var d=.5*Q.ia;a=E();S(a,0,1*c,!1);a.lineTo(0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);a.lineTo(1*b,1*c);b=a.m;b.o=new R(0,.5);b.p=Hd;F(a);return b},LogicUnion:function(a,b,c){var d=.5*Q.ia;a=E();S(a,1*b,0,!1);a.lineTo(1*b,.5*c);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);a.lineTo(0,0);b=a.m;b.o=ud;b.p=new R(1,.5);F(a);return b},Arrow:function(a,b,c){var d=a?a.Zb:NaN,e=a?a.as:NaN;isNaN(d)&&(d=.3);isNaN(e)&&(e=.3);a=E();S(a,0,
(.5-e/2)*c,!0);a.lineTo((1-d)*b,(.5-e/2)*c);a.lineTo((1-d)*b,0);a.lineTo(1*b,.5*c);a.lineTo((1-d)*b,1*c);a.lineTo((1-d)*b,(.5+e/2)*c);a.lineTo(0,(.5+e/2)*c);ff(a);b=a.m;b.o=new R(0,.5-e/2);d=Q.ik(0,.5+e/2,1,.5+e/2,1-d,1,1,.5,Va());b.p=new R(d.x,d.y);A(d);F(a);return b},ISOProcess:"Chevron",Chevron:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.5*b,0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,1*c);a.lineTo(.5*b,.5*c);ff(a);b=a.m;F(a);return b},DoubleArrow:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.3*
b,.214*c);a.lineTo(.3*b,0);a.lineTo(1*b,.5*c);a.lineTo(.3*b,1*c);a.lineTo(.3*b,.786*c);a.lineTo(0,1*c);ff(a);S(a,.3*b,.214*c,!1);a.lineTo(.3*b,.786*c);a.Ja(!1);b=a.m;F(a);return b},DoubleEndArrow:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(.3*b,.7*c);a.lineTo(.3*b,1*c);a.lineTo(0,.5*c);a.lineTo(.3*b,0);a.lineTo(.3*b,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);ff(a);b=a.m;c=Q.ik(0,.5,.3,0,0,.3,.3,.3,Va());b.o=new R(c.x,c.y);c=Q.ik(.7,1,1,.5,.7,.7,1,.7,c);b.p=
new R(c.x,c.y);A(c);F(a);return b},IBeamArrow:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(.2*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.2*b,0);a.lineTo(.2*b,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);ff(a);b=a.m;b.o=new R(0,.3);c=Q.ik(.7,1,1,.5,.7,.7,1,.7,Va());b.p=new R(c.x,c.y);A(c);F(a);return b},Pointer:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(.2*b,.5*c);a.lineTo(0,0);ff(a);b=a.m;b.o=new R(.2,.35);c=Q.ik(.2,
.65,1,.65,0,1,1,.5,Va());b.p=new R(c.x,c.y);A(c);F(a);return b},RoundedPointer:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(0,1*c);T(a,.5*b,.75*c,.5*b,.25*c,0,0);ff(a);b=a.m;b.o=new R(.4,.35);c=Q.ik(.2,.65,1,.65,0,1,1,.5,Va());b.p=new R(c.x,c.y);A(c);F(a);return b},SplitEndArrow:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(.7*b,.7*c);a.lineTo(0,.7*c);a.lineTo(.2*b,.5*c);a.lineTo(0,.3*c);a.lineTo(.7*b,.3*c);a.lineTo(.7*b,0);ff(a);b=a.m;b.o=new R(.2,.3);c=Q.ik(.7,1,1,.5,.7,
.7,1,.7,Va());b.p=new R(c.x,c.y);A(c);F(a);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.7*b,0);ff(a);b=a.m;b.o=ud;b.p=new R(.7,1);F(a);return b},Cone1:function(a,b,c){var d=Q.ia;a=.5*d;var e=.1*d,d=E();S(d,0,.9*c,!0);d.lineTo(.5*b,0);d.lineTo(1*b,.9*c);T(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c);T(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c);ff(d);b=d.m;b.o=new R(.25,.5);b.p=new R(.75,.97);F(d);return b},Cone2:function(a,
b,c){a=E();S(a,0,.9*c,!0);T(a,(1-.85/.9)*b,1*c,.85/.9*b,1*c,1*b,.9*c);a.lineTo(.5*b,0);a.lineTo(0,.9*c);ff(a);S(a,0,.9*c,!1);T(a,(1-.85/.9)*b,.8*c,.85/.9*b,.8*c,1*b,.9*c);a.Ja(!1);b=a.m;b.o=new R(.25,.5);b.p=new R(.75,.82);F(a);return b},Cube1:function(a,b,c){a=E();S(a,.5*b,1*c,!0);a.lineTo(1*b,.85*c);a.lineTo(1*b,.15*c);a.lineTo(.5*b,0*c);a.lineTo(0*b,.15*c);a.lineTo(0*b,.85*c);ff(a);S(a,.5*b,1*c,!1);a.lineTo(.5*b,.3*c);a.lineTo(0,.15*c);a.moveTo(.5*b,.3*c);a.lineTo(1*b,.15*c);a.Ja(!1);b=a.m;b.o=
new R(0,.3);b.p=new R(.5,.85);F(a);return b},Cube2:function(a,b,c){a=E();S(a,0,.3*c,!0);a.lineTo(0*b,1*c);a.lineTo(.7*b,c);a.lineTo(1*b,.7*c);a.lineTo(1*b,0*c);a.lineTo(.3*b,0*c);ff(a);S(a,0,.3*c,!1);a.lineTo(.7*b,.3*c);a.lineTo(1*b,0*c);a.moveTo(.7*b,.3*c);a.lineTo(.7*b,1*c);a.Ja(!1);b=a.m;b.o=new R(0,.3);b.p=new R(.7,1);F(a);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var d=Q.ia;a=.5*d;var e=.1*d,d=E();S(d,0,.1*c,!0);T(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0);T(d,(.5+a)*b,0,1*b,(.1-e)*c,
1*b,.1*c);d.lineTo(b,.9*c);T(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c);T(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c);d.lineTo(0,.1*c);S(d,0,.1*c,!1);T(d,0,(.1+e)*c,(.5-a)*b,.2*c,.5*b,.2*c);T(d,(.5+a)*b,.2*c,1*b,(.1+e)*c,1*b,.1*c);d.Ja(!1);b=d.m;b.o=new R(0,.2);b.p=new R(1,.9);F(d);return b},Cylinder2:function(a,b,c){var d=Q.ia;a=.5*d;var e=.1*d,d=E();S(d,0,.9*c,!0);d.lineTo(0,.1*c);T(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0);T(d,(.5+a)*b,0,1*b,(.1-e)*c,1*b,.1*c);d.lineTo(1*b,.9*c);T(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c);
T(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c);S(d,0,.9*c,!1);T(d,0,(.9-e)*c,(.5-a)*b,.8*c,.5*b,.8*c);T(d,(.5+a)*b,.8*c,1*b,(.9-e)*c,1*b,.9*c);d.Ja(!1);b=d.m;b.o=new R(0,.1);b.p=new R(1,.8);F(d);return b},Cylinder3:function(a,b,c){var d=Q.ia;a=.1*d;var e=.5*d,d=E();S(d,.1*b,0,!0);d.lineTo(.9*b,0);T(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c);T(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c);d.lineTo(.1*b,1*c);T(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c);T(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0);S(d,.1*b,0,!1);T(d,(.1+a)*b,0,.2*b,(.5-e)*c,.2*
b,.5*c);T(d,.2*b,(.5+e)*c,(.1+a)*b,1*c,.1*b,1*c);d.Ja(!1);b=d.m;b.o=new R(.2,0);b.p=new R(.9,1);F(d);return b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var d=Q.ia;a=.1*d;var e=.5*d,d=E();S(d,.9*b,0,!0);T(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c);T(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c);d.lineTo(.1*b,1*c);T(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c);T(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0);d.lineTo(.9*b,0);S(d,.9*b,0,!1);T(d,(.9-a)*b,0,.8*b,(.5-e)*c,.8*b,.5*c);T(d,.8*b,(.5+e)*c,(.9-a)*b,1*c,.9*b,1*c);d.Ja(!1);b=
d.m;b.o=new R(.1,0);b.p=new R(.8,1);F(d);return b},Prism1:function(a,b,c){a=E();S(a,.25*b,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(b,.5*c);a.lineTo(.5*b,c);a.lineTo(0,c);ff(a);S(a,.25*b,.25*c,!1);a.lineTo(.5*b,c);a.Ja(!1);b=a.m;b.o=new R(.408,.172);b.p=new R(.833,.662);F(a);return b},Prism2:function(a,b,c){a=E();S(a,0,.25*c,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);ff(a);S(a,0,c,!1);a.lineTo(.25*b,.5*c);a.lineTo(b,.25*c);a.moveTo(0,.25*c);a.lineTo(.25*b,.5*c);a.Ja(!1);
b=a.m;b.o=new R(.25,.5);b.p=new R(.75,.75);F(a);return b},Pyramid1:function(a,b,c){a=E();S(a,.5*b,0,!0);a.lineTo(b,.75*c);a.lineTo(.5*b,1*c);a.lineTo(0,.75*c);ff(a);S(a,.5*b,0,!1);a.lineTo(.5*b,1*c);a.Ja(!1);b=a.m;b.o=new R(.25,.367);b.p=new R(.75,.875);F(a);return b},Pyramid2:function(a,b,c){a=E();S(a,.5*b,0,!0);a.lineTo(b,.85*c);a.lineTo(.5*b,1*c);a.lineTo(0,.85*c);ff(a);S(a,.5*b,0,!1);a.lineTo(.5*b,.7*c);a.lineTo(0,.85*c);a.moveTo(.5*b,.7*c);a.lineTo(1*b,.85*c);a.Ja(!1);b=a.m;b.o=new R(.25,.367);
b.p=new R(.75,.875);F(a);return b},Actor:function(a,b,c){var d=Q.ia,e=.2*d,f=.1*d,g=.5,h=.1;a=E();S(a,g*b,(h+.1)*c,!0);T(a,(g-e)*b,(h+.1)*c,(g-.2)*b,(h+f)*c,(g-.2)*b,h*c);T(a,(g-.2)*b,(h-f)*c,(g-e)*b,(h-.1)*c,g*b,(h-.1)*c);T(a,(g+e)*b,(h-.1)*c,(g+.2)*b,(h-f)*c,(g+.2)*b,h*c);T(a,(g+.2)*b,(h+f)*c,(g+e)*b,(h+.1)*c,g*b,(h+.1)*c);e=.05;f=d*e;S(a,.5*b,.2*c,!0);a.lineTo(.95*b,.2*c);g=.95;h=.25;T(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c);a.lineTo(1*b,.6*c);a.lineTo(.85*b,.6*c);a.lineTo(.85*b,.35*c);
e=.025;f=d*e;g=.825;h=.35;T(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c);T(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c);a.lineTo(.8*b,1*c);a.lineTo(.55*b,1*c);a.lineTo(.55*b,.7*c);e=.05;f=d*e;g=.5;h=.7;T(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c);T(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c);a.lineTo(.45*b,1*c);a.lineTo(.2*b,1*c);a.lineTo(.2*b,.35*c);e=.025;f=d*e;g=.175;h=.35;T(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c);T(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c);a.lineTo(.15*
b,.6*c);a.lineTo(0*b,.6*c);a.lineTo(0*b,.25*c);e=.05;f=d*e;g=.05;h=.25;T(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c);a.lineTo(.5*b,.2*c);b=a.m;b.o=new R(.2,.2);b.p=new R(.8,.65);F(a);return b},Card:function(a,b,c){a=E();S(a,1*b,0*c,!0);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,.2*c);a.lineTo(.2*b,0*c);ff(a);b=a.m;b.o=new R(0,.2);b.p=Hd;F(a);return b},Collate:function(a,b,c){a=E();S(a,.5*b,.5*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);S(a,.5*b,.5*c,!0);a.lineTo(1*b,1*c);a.lineTo(0,
1*c);a.lineTo(.5*b,.5*c);b=a.m;b.o=new R(.25,0);b.p=new R(.75,.25);F(a);return b},CreateRequest:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);S(d,0,a*c,!1);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);d.Ja(!1);b=d.m;b.o=new R(0,a);b.p=new R(1,1-a);F(d);return b},Database:function(a,b,c){a=E();var d=Q.ia,e=.5*d,d=.1*d;S(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);T(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c);T(a,(.5-e)*b,
1*c,0,(.9+d)*c,0,.9*c);a.lineTo(0,.1*c);T(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0);T(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c);S(a,1*b,.1*c,!1);T(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c);T(a,(.5-e)*b,.2*c,0,(.1+d)*c,0,.1*c);a.moveTo(1*b,.2*c);T(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c);T(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c);a.moveTo(1*b,.3*c);T(a,1*b,(.3+d)*c,(.5+e)*b,.4*c,.5*b,.4*c);T(a,(.5-e)*b,.4*c,0,(.3+d)*c,0,.3*c);a.Ja(!1);b=a.m;b.o=new R(0,.4);b.p=new R(1,.9);F(a);return b},StoredData:"DataStorage",DataStorage:function(a,
b,c){a=E();S(a,0,0,!0);a.lineTo(.75*b,0);T(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(0,1*c);T(a,.25*b,.9*c,.25*b,.1*c,0,0);ff(a);b=a.m;b.o=new R(.226,0);b.p=new R(.81,1);F(a);return b},DiskStorage:function(a,b,c){a=E();var d=Q.ia,e=.5*d,d=.1*d;S(a,1*b,.1*c,!0);a.lineTo(1*b,.9*c);T(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c);T(a,(.5-e)*b,1*c,0,(.9+d)*c,0,.9*c);a.lineTo(0,.1*c);T(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0);T(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c);S(a,1*b,.1*c,!1);T(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c);T(a,
(.5-e)*b,.2*c,0,(.1+d)*c,0,.1*c);a.moveTo(1*b,.2*c);T(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c);T(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c);a.Ja(!1);b=a.m;b.o=new R(0,.3);b.p=new R(1,.9);F(a);return b},Display:function(a,b,c){a=E();S(a,.25*b,0,!0);a.lineTo(.75*b,0);T(a,1*b,0,1*b,1*c,.75*b,1*c);a.lineTo(.25*b,1*c);a.lineTo(0,.5*c);ff(a);b=a.m;b.o=new R(.25,0);b.p=new R(.75,1);F(a);return b},DividedEvent:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)?a=.2:.15>a&&(a=.15);var d=E(),e=.2*Q.ia;S(d,0,.2*c,!0);T(d,0,(.2-e)*
c,(.2-e)*b,0,.2*b,0);d.lineTo(.8*b,0);T(d,(.8+e)*b,0,1*b,(.2-e)*c,1*b,.2*c);d.lineTo(1*b,.8*c);T(d,1*b,(.8+e)*c,(.8+e)*b,1*c,.8*b,1*c);d.lineTo(.2*b,1*c);T(d,(.2-e)*b,1*c,0,(.8+e)*c,0,.8*c);d.lineTo(0,.2*c);S(d,0,a*c,!1);d.lineTo(1*b,a*c);d.Ja(!1);b=d.m;b.o=new R(0,a);b.p=new R(1,1-a);F(d);return b},DividedProcess:function(a,b,c){a=a?a.Zb:NaN;if(isNaN(a)||.1>a)a=.1;var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);S(d,0,a*c,!1);d.lineTo(1*b,a*c);d.Ja(!1);b=d.m;b.o=new R(0,
a);b.p=Hd;F(d);return b},Document:function(a,b,c){c/=.8;a=E();S(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);T(a,.5*b,.4*c,.5*b,1*c,0,.7*c);ff(a);b=a.m;b.o=ud;b.p=new R(1,.6);F(a);return b},ExternalOrganization:function(a,b,c){a=a?a.Zb:NaN;if(isNaN(a)||.2>a)a=.2;var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);S(d,a*b,0,!1);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-
a)*c);d.Ja(!1);b=d.m;b.o=new R(a/2,a/2);b.p=new R(1-a/2,1-a/2);F(d);return b},ExternalProcess:function(a,b,c){a=E();S(a,.5*b,0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);ff(a);S(a,.1*b,.4*c,!1);a.lineTo(.1*b,.6*c);a.moveTo(.9*b,.6*c);a.lineTo(.9*b,.4*c);a.moveTo(.6*b,.1*c);a.lineTo(.4*b,.1*c);a.moveTo(.4*b,.9*c);a.lineTo(.6*b,.9*c);a.Ja(!1);b=a.m;b.o=new R(.25,.25);b.p=new R(.75,.75);F(a);return b},File:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(1*
b,1*c);a.lineTo(0,1*c);ff(a);S(a,.75*b,0,!1);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.25*c);a.Ja(!1);b=a.m;b.o=new R(0,.25);b.p=Hd;F(a);return b},Interrupt:function(a,b,c){a=E();S(a,1*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);S(a,1*b,.5*c,!1);a.lineTo(1*b,1*c);S(a,1*b,.5*c,!1);a.lineTo(1*b,0);b=a.m;b.o=new R(0,.25);b.p=new R(.5,.75);F(a);return b},InternalStorage:function(a,b,c){var d=a?a.Zb:NaN;a=a?a.as:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.1);var e=E();S(e,0,0,!0);e.lineTo(1*b,0);e.lineTo(1*
b,1*c);e.lineTo(0,1*c);ff(e);S(e,d*b,0,!1);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);e.Ja(!1);b=e.m;b.o=new R(d,a);b.p=Hd;F(e);return b},Junction:function(a,b,c){a=E();var d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,f=.5*Q.ia;S(a,1*b,.5*c,!0);T(a,1*b,(.5+f)*c,(.5+f)*b,1*c,.5*b,1*c);T(a,(.5-f)*b,1*c,0,(.5+f)*c,0,.5*c);T(a,0,(.5-f)*c,(.5-f)*b,0,.5*b,0);T(a,(.5+f)*b,0,1*b,(.5-f)*c,1*b,.5*c);S(a,(e+d)*b,(e+d)*c,!1);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);a.Ja(!1);b=a.m;b.Vc=Vi;
F(a);return b},LinedDocument:function(a,b,c){c/=.8;a=E();S(a,0,.7*c,!0);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,.7*c);T(a,.5*b,.4*c,.5*b,1*c,0,.7*c);ff(a);S(a,.1*b,0,!1);a.lineTo(.1*b,.75*c);a.Ja(!1);b=a.m;b.o=new R(.1,0);b.p=new R(1,.6);F(a);return b},LoopLimit:function(a,b,c){a=E();S(a,0,1*c,!0);a.lineTo(0,.25*c);a.lineTo(.25*b,0);a.lineTo(.75*b,0);a.lineTo(1*b,.25*c);a.lineTo(1*b,1*c);ff(a);b=a.m;b.o=new R(0,.25);b.p=Hd;F(a);return b},SequentialData:"MagneticTape",MagneticTape:function(a,b,
c){a=E();var d=.5*Q.ia;S(a,.5*b,1*c,!0);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);T(a,1*b,(.5+d)*c,(.5+d)*b,.9*c,.6*b,.9*c);a.lineTo(1*b,.9*c);a.lineTo(1*b,1*c);a.lineTo(.5*b,1*c);b=a.m;b.o=new R(.15,.15);b.p=new R(.85,.8);F(a);return b},ManualInput:function(a,b,c){a=E();S(a,1*b,0,!0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.25*c);ff(a);b=a.m;b.o=new R(0,.25);b.p=Hd;F(a);return b},MessageFromUser:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&
(a=.7);var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(a*b,.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);b=d.m;b.o=ud;b.p=new R(a,1);F(d);return b},MicroformProcessing:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.25);var d=E();S(d,0,0,!0);d.lineTo(.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.5*b,(1-a)*c);d.lineTo(0,1*c);ff(d);b=d.m;b.o=new R(0,a);b.p=new R(1,1-a);F(d);return b},MicroformRecording:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.75*b,.25*c);a.lineTo(1*b,.15*c);a.lineTo(1*b,.85*c);
a.lineTo(.75*b,.75*c);a.lineTo(0,1*c);ff(a);b=a.m;b.o=new R(0,.25);b.p=new R(1,.75);F(a);return b},MultiDocument:function(a,b,c){c/=.8;a=E();S(a,b,0,!0);a.lineTo(b,.5*c);T(a,.96*b,.47*c,.93*b,.45*c,.9*b,.44*c);a.lineTo(.9*b,.6*c);T(a,.86*b,.57*c,.83*b,.55*c,.8*b,.54*c);a.lineTo(.8*b,.7*c);T(a,.4*b,.4*c,.4*b,1*c,0,.7*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);a.lineTo(.1*b,.1*c);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);ff(a);S(a,.1*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.lineTo(.8*b,.54*c);a.moveTo(.2*b,.1*c);a.lineTo(.9*
b,.1*c);a.lineTo(.9*b,.44*c);a.Ja(!1);b=a.m;b.o=new R(0,.25);b.p=new R(.8,.77);F(a);return b},MultiProcess:function(a,b,c){a=E();S(a,.1*b,.1*c,!0);a.lineTo(.2*b,.1*c);a.lineTo(.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,.8*c);a.lineTo(.9*b,.8*c);a.lineTo(.9*b,.9*c);a.lineTo(.8*b,.9*c);a.lineTo(.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.2*c);a.lineTo(.1*b,.2*c);ff(a);S(a,.2*b,.1*c,!1);a.lineTo(.9*b,.1*c);a.lineTo(.9*b,.8*c);a.moveTo(.1*b,.2*c);a.lineTo(.8*b,.2*c);a.lineTo(.8*b,.9*c);a.Ja(!1);b=a.m;b.o=new R(0,
.2);b.p=new R(.8,1);F(a);return b},OfflineStorage:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=1-a,e=E();S(e,0,0,!0);e.lineTo(1*b,0);e.lineTo(.5*b,1*c);ff(e);S(e,.5*a*b,a*c,!1);e.lineTo((1-.5*a)*b,a*c);e.Ja(!1);b=e.m;b.o=new R(d/4+.5*a,a);b.p=new R(3*d/4+.5*a,a+.5*d);F(e);return b},OffPageConnector:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(.75*b,0);a.lineTo(1*b,.5*c);a.lineTo(.75*b,1*c);a.lineTo(0,1*c);ff(a);b=a.m;b.o=ud;b.p=new R(.75,1);F(a);return b},Or:function(a,b,c){a=E();var d=.5*Q.ia;
S(a,1*b,.5*c,!0);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);S(a,1*b,.5*c,!1);a.lineTo(0,.5*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,0);a.Ja(!1);b=a.m;b.Vc=Vi;F(a);return b},PaperTape:function(a,b,c){c/=.8;a=E();S(a,0,.7*c,!0);a.lineTo(0,.3*c);T(a,.5*b,.6*c,.5*b,0,1*b,.3*c);a.lineTo(1*b,.7*c);T(a,.5*b,.4*c,.5*b,1*c,0,.7*c);ff(a);b=a.m;b.o=new R(0,.49);b.p=new R(1,.75);F(a);return b},PrimitiveFromCall:function(a,
b,c){var d=a?a.Zb:NaN;a=a?a.as:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=E();S(e,0,0,!0);e.lineTo(1*b,0);e.lineTo((1-a)*b,.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);ff(e);b=e.m;b.o=new R(d,0);b.p=new R(1-a,1);F(e);return b},PrimitiveToCall:function(a,b,c){var d=a?a.Zb:NaN;a=a?a.as:NaN;isNaN(d)&&(d=.1);isNaN(a)&&(a=.3);var e=E();S(e,0,0,!0);e.lineTo((1-a)*b,0);e.lineTo(1*b,.5*c);e.lineTo((1-a)*b,1*c);e.lineTo(0,1*c);ff(e);b=e.m;b.o=new R(d,0);b.p=new R(1-a,1);F(e);return b},Subroutine:"Procedure",Procedure:function(a,
b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);S(d,(1-a)*b,0,!1);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);d.Ja(!1);b=d.m;b.o=new R(a,0);b.p=new R(1-a,1);F(d);return b},Process:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);ff(d);S(d,a*b,0,!1);d.lineTo(a*b,1*c);d.Ja(!1);b=d.m;b.o=new R(a,0);b.p=Hd;F(d);return b},Sort:function(a,b,c){a=E();S(a,.5*b,
0,!0);a.lineTo(1*b,.5*c);a.lineTo(.5*b,1*c);a.lineTo(0,.5*c);ff(a);S(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.Ja(!1);b=a.m;b.o=new R(.25,.25);b.p=new R(.75,.5);F(a);return b},Start:function(a,b,c){a=E();S(a,.25*b,0,!0);S(a,.25*b,0,!0);a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);S(a,.25*b,0,!1);a.lineTo(.25*b,1*c);a.moveTo(.75*b,0);a.lineTo(.75*b,1*c);a.Ja(!1);b=a.m;b.o=new R(.25,0);b.p=new R(.75,1);F(a);return b},Terminator:function(a,b,c){a=E();S(a,.25*b,0,!0);a.arcTo(270,
180,.75*b,.5*c,.25*b,.5*c);a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c);b=a.m;b.o=new R(.23,0);b.p=new R(.77,1);F(a);return b},TransmittalTape:function(a,b,c){a=a?a.Zb:NaN;isNaN(a)&&(a=.1);var d=E();S(d,0,0,!0);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);ff(d);b=d.m;b.o=ud;b.p=new R(1,1-a);F(d);return b},AndGate:function(a,b,c){a=E();var d=.5*Q.ia;S(a,0,0,!0);a.lineTo(.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);a.lineTo(0,1*c);ff(a);
b=a.m;b.o=ud;b.p=new R(.55,1);F(a);return b},Buffer:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);ff(a);b=a.m;b.o=new R(0,.25);b.p=new R(.5,.75);F(a);return b},Clock:function(a,b,c){a=E();var d=.5*Q.ia;S(a,1*b,.5*c,!0);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);S(a,1*b,.5*c,!1);a.lineTo(1*b,.5*c);S(a,.8*b,.75*c,!1);a.lineTo(.8*b,.25*c);a.lineTo(.6*b,.25*c);a.lineTo(.6*b,
.75*c);a.lineTo(.4*b,.75*c);a.lineTo(.4*b,.25*c);a.lineTo(.2*b,.25*c);a.lineTo(.2*b,.75*c);a.Ja(!1);b=a.m;b.Vc=Vi;F(a);return b},Ground:function(a,b,c){a=E();S(a,.5*b,0,!1);a.lineTo(.5*b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.3*b,.8*c);a.lineTo(.7*b,.8*c);a.moveTo(.4*b,1*c);a.lineTo(.6*b,1*c);b=a.m;F(a);return b},Inverter:function(a,b,c){a=E();var d=.1*Q.ia;S(a,.8*b,.5*c,!0);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.8*b,.5*c);S(a,1*b,.5*c,!0);T(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*
c);T(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c);T(a,.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c);T(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c);b=a.m;b.o=new R(0,.25);b.p=new R(.4,.75);F(a);return b},NandGate:function(a,b,c){a=E();var d=Q.ia,e=.5*d,f=.4*d,d=.1*d;S(a,.8*b,.5*c,!0);T(a,.8*b,(.5+f)*c,(.4+e)*b,1*c,.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(.4*b,0);T(a,(.4+e)*b,0,.8*b,(.5-f)*c,.8*b,.5*c);S(a,1*b,.5*c,!0);T(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c);T(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c);T(a,
.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c);T(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c);b=a.m;b.o=new R(0,.05);b.p=new R(.55,.95);F(a);return b},NorGate:function(a,b,c){a=E();var d=Q.ia,e=.5,f=d*e,g=0,h=.5;S(a,.8*b,.5*c,!0);T(a,.7*b,(h+f)*c,(g+f)*b,(h+e)*c,0,1*c);T(a,.25*b,.75*c,.25*b,.25*c,0,0);T(a,(g+f)*b,(h-e)*c,.7*b,(h-f)*c,.8*b,.5*c);e=.1;f=.1*d;g=.9;h=.5;S(a,(g-e)*b,h*c,!0);T(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c);T(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c);T(a,(g+e)*b,(h+f)*c,(g+f)*b,
(h+e)*c,g*b,(h+e)*c);T(a,(g-f)*b,(h+e)*c,(g-e)*b,(h+f)*c,(g-e)*b,h*c);b=a.m;b.o=new R(.2,.25);b.p=new R(.6,.75);F(a);return b},OrGate:function(a,b,c){a=E();var d=.5*Q.ia;S(a,0,0,!0);T(a,(0+d+d)*b,0*c,.8*b,(.5-d)*c,1*b,.5*c);T(a,.8*b,(.5+d)*c,(0+d+d)*b,1*c,0,1*c);T(a,.25*b,.75*c,.25*b,.25*c,0,0);ff(a);b=a.m;b.o=new R(.2,.25);b.p=new R(.75,.75);F(a);return b},XnorGate:function(a,b,c){a=E();var d=Q.ia,e=.5,f=d*e,g=.2,h=.5;S(a,.1*b,0,!1);T(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c);S(a,.8*b,.5*c,!0);T(a,.7*
b,(h+f)*c,(g+f)*b,(h+e)*c,.2*b,1*c);T(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);T(a,(g+f)*b,(h-e)*c,.7*b,(h-f)*c,.8*b,.5*c);e=.1;f=.1*d;g=.9;h=.5;S(a,(g-e)*b,h*c,!0);T(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c);T(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c);T(a,(g+e)*b,(h+f)*c,(g+f)*b,(h+e)*c,g*b,(h+e)*c);T(a,(g-f)*b,(h+e)*c,(g-e)*b,(h+f)*c,(g-e)*b,h*c);b=a.m;b.o=new R(.4,.25);b.p=new R(.65,.75);F(a);return b},XorGate:function(a,b,c){a=E();var d=.5*Q.ia;S(a,.1*b,0,!1);T(a,.35*b,.25*c,.35*b,.75*c,.1*
b,1*c);S(a,.2*b,0,!0);T(a,(.2+d)*b,0*c,.9*b,(.5-d)*c,1*b,.5*c);T(a,.9*b,(.5+d)*c,(.2+d)*b,1*c,.2*b,1*c);T(a,.45*b,.75*c,.45*b,.25*c,.2*b,0);ff(a);b=a.m;b.o=new R(.4,.25);b.p=new R(.8,.75);F(a);return b},Capacitor:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.m;F(a);return b},Resistor:function(a,b,c){a=E();S(a,0,.5*c,!1);a.lineTo(.1*b,0);a.lineTo(.2*b,1*c);a.lineTo(.3*b,0);a.lineTo(.4*b,1*c);a.lineTo(.5*b,0);a.lineTo(.6*b,1*c);a.lineTo(.7*b,.5*c);b=a.m;F(a);
return b},Inductor:function(a,b,c){a=E();var d=.1*Q.ia,e=.1;S(a,(e-.5*d)*b,c,!1);T(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.3;T(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);T(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.5;T(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);T(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.7;T(a,(e+.1)*b,0,(e+d)*b,c,e*b,c);T(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0);e=.9;T(a,(e+.1)*b,0,(e+d)*b,c,(e+.5*d)*b,c);b=a.m;F(a);return b},ACvoltageSource:function(a,b,c){a=E();var d=.5*Q.ia;S(a,0*b,.5*c,!1);T(a,0*b,(.5-d)*c,(.5-d)*b,0*
c,.5*b,0*c);T(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c);a.moveTo(.1*b,.5*c);T(a,.5*b,0*c,.5*b,1*c,.9*b,.5*c);b=a.m;b.Vc=Vi;F(a);return b},DCvoltageSource:function(a,b,c){a=E();S(a,0,.75*c,!1);a.lineTo(0,.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.m;F(a);return b},Diode:function(a,b,c){a=E();S(a,1*b,0,!1);a.lineTo(1*b,.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,.5*c);a.lineTo(1*b,1*c);b=a.m;b.o=new R(0,.25);b.p=new R(.5,
.75);F(a);return b},Wifi:function(a,b,c){var d=b,e=c;b*=.38;c*=.6;a=E();var f=Q.ia,g=.8*f,h=.8,k=0,l=.5,d=(d-b)/2,e=(e-c)/2;S(a,k*b+d,(l+h)*c+e,!0);T(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*b+d,l*c+e);T(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);T(a,k*b+d,(l-h)*c+e,(k-h+.5*g)*b+d,(l-g)*c+e,(k-h+.5*g)*b+d,l*c+e);T(a,(k-h+.5*g)*b+d,(l+g)*c+e,k*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);ff(a);g=.4*f;h=.4;k=.2;l=.5;S(a,k*b+d,(l+h)*c+e,!0);T(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*
b+d,l*c+e);T(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);T(a,k*b+d,(l-h)*c+e,(k-h+.5*g)*b+d,(l-g)*c+e,(k-h+.5*g)*b+d,l*c+e);T(a,(k-h+.5*g)*b+d,(l+g)*c+e,k*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);ff(a);g=.2*f;h=.2;l=k=.5;S(a,(k-h)*b+d,l*c+e,!0);T(a,(k-h)*b+d,(l-g)*c+e,(k-g)*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);T(a,(k+g)*b+d,(l-h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);T(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);T(a,(k-g)*b+d,(l+h)*c+e,(k-h)*b+d,(l+g)*c+e,(k-h)*b+d,l*c+e);g=.4*f;
h=.4;k=.8;l=.5;S(a,k*b+d,(l-h)*c+e,!0);T(a,(k+g)*b+d,(l-h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);T(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);T(a,k*b+d,(l+h)*c+e,(k+h-.5*g)*b+d,(l+g)*c+e,(k+h-.5*g)*b+d,l*c+e);T(a,(k+h-.5*g)*b+d,(l-g)*c+e,k*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);ff(a);g=.8*f;h=.8;k=1;l=.5;S(a,k*b+d,(l-h)*c+e,!0);T(a,(k+g)*b+d,(l-h)*c+e,(k+h)*b+d,(l-g)*c+e,(k+h)*b+d,l*c+e);T(a,(k+h)*b+d,(l+g)*c+e,(k+g)*b+d,(l+h)*c+e,k*b+d,(l+h)*c+e);T(a,k*b+d,(l+h)*c+e,(k+h-.5*g)*b+d,(l+
g)*c+e,(k+h-.5*g)*b+d,l*c+e);T(a,(k+h-.5*g)*b+d,(l-g)*c+e,k*b+d,(l-h)*c+e,k*b+d,(l-h)*c+e);ff(a);b=a.m;F(a);return b},Email:function(a,b,c){a=E();S(a,0,0,!0);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);ff(a);S(a,0,0,!1);a.lineTo(.5*b,.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(.45*b,.54*c);a.moveTo(1*b,1*c);a.lineTo(.55*b,.54*c);a.Ja(!1);b=a.m;F(a);return b},Ethernet:function(a,b,c){a=E();S(a,.35*b,0,!0);a.lineTo(.65*b,0);a.lineTo(.65*b,.4*c);a.lineTo(.35*b,.4*c);a.lineTo(.35*
b,0);ff(a);S(a,.1*b,1*c,!0,!0);a.lineTo(.4*b,1*c);a.lineTo(.4*b,.6*c);a.lineTo(.1*b,.6*c);a.lineTo(.1*b,1*c);ff(a);S(a,.6*b,1*c,!0,!0);a.lineTo(.9*b,1*c);a.lineTo(.9*b,.6*c);a.lineTo(.6*b,.6*c);a.lineTo(.6*b,1*c);ff(a);S(a,0,.5*c,!1);a.lineTo(1*b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.5*b,.4*c);a.moveTo(.75*b,.5*c);a.lineTo(.75*b,.6*c);a.moveTo(.25*b,.5*c);a.lineTo(.25*b,.6*c);a.Ja(!1);b=a.m;F(a);return b},Power:function(a,b,c){a=E();var d=Q.ia,e=.4*d,f=.4,g=Va(),h=Va(),k=Va(),l=Va();Q.Kh(.5,.5-f,.5+
e,.5-f,.5+f,.5-e,.5+f,.5,.5,g,g,h,k,l);var m=Wa(h.x,h.y);S(a,h.x*b,h.y*c,!0);T(a,k.x*b,k.y*c,l.x*b,l.y*c,(.5+f)*b,.5*c);T(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c);T(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c);Q.Kh(.5-f,.5,.5-f,.5-e,.5-e,.5-f,.5,.5-f,.5,k,l,h,g,g);T(a,k.x*b,k.y*c,l.x*b,l.y*c,h.x*b,h.y*c);e=.3*d;f=.3;Q.Kh(.5-f,.5,.5-f,.5-e,.5-e,.5-f,.5,.5-f,.5,k,l,h,g,g);a.lineTo(h.x*b,h.y*c);T(a,l.x*b,l.y*c,k.x*b,k.y*c,(.5-f)*b,.5*c);T(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*
b,(.5+f)*c);T(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c);Q.Kh(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.5,g,g,h,k,l);T(a,l.x*b,l.y*c,k.x*b,k.y*c,h.x*b,h.y*c);ff(a);S(a,.45*b,0,!0);a.lineTo(.45*b,.5*c);a.lineTo(.55*b,.5*c);a.lineTo(.55*b,0);ff(a);A(g);A(h);A(k);A(l);A(m);b=a.m;b.o=new R(.25,.55);b.p=new R(.75,.8);F(a);return b},Fallout:function(a,b,c){a=E();var d=.5*Q.ia;S(a,0*b,.5*c,!0);T(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c);T(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c);T(a,1*b,(.5+d)*c,(.5+d)*b,
1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c);var e=d=0;S(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.4;e=0;ff(a);S(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);d=.2;e=-.3;ff(a);S(a,(.3+d)*b,(.8+e)*c,!0,!0);a.lineTo((.5+d)*b,(.5+e)*c);a.lineTo((.1+d)*b,(.5+e)*c);a.lineTo((.3+d)*b,(.8+e)*c);ff(a);b=a.m;b.Vc=Vi;F(a);return b},IrritationHazard:function(a,b,c){a=
E();S(a,.2*b,0*c,!0);a.lineTo(.5*b,.3*c);a.lineTo(.8*b,0*c);a.lineTo(1*b,.2*c);a.lineTo(.7*b,.5*c);a.lineTo(1*b,.8*c);a.lineTo(.8*b,1*c);a.lineTo(.5*b,.7*c);a.lineTo(.2*b,1*c);a.lineTo(0*b,.8*c);a.lineTo(.3*b,.5*c);a.lineTo(0*b,.2*c);ff(a);b=a.m;b.o=new R(.3,.3);b.p=new R(.7,.7);F(a);return b},ElectricalHazard:function(a,b,c){a=E();S(a,.37*b,0*c,!0);a.lineTo(.5*b,.11*c);a.lineTo(.77*b,.04*c);a.lineTo(.33*b,.49*c);a.lineTo(1*b,.37*c);a.lineTo(.63*b,.86*c);a.lineTo(.77*b,.91*c);a.lineTo(.34*b,1*c);
a.lineTo(.34*b,.78*c);a.lineTo(.44*b,.8*c);a.lineTo(.65*b,.56*c);a.lineTo(0*b,.68*c);ff(a);b=a.m;F(a);return b},FireHazard:function(a,b,c){a=E();S(a,.1*b,1*c,!0);T(a,-.25*b,.63*c,.45*b,.44*c,.29*b,0*c);T(a,.48*b,.17*c,.54*b,.35*c,.51*b,.42*c);T(a,.59*b,.29*c,.58*b,.28*c,.59*b,.18*c);T(a,.8*b,.34*c,.88*b,.43*c,.75*b,.6*c);T(a,.87*b,.48*c,.88*b,.43*c,.88*b,.31*c);T(a,1.17*b,.76*c,.82*b,.8*c,.9*b,1*c);ff(a);b=a.m;b.o=new R(.05,.645);b.p=new R(.884,.908);F(a);return b},BpmnActivityLoop:function(a,b,c){a=
E();var d=4*(Math.SQRT2-1)/3*.5;S(a,.65*b,1*c,!1);T(a,(1-d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c);T(a,1*b,(.5-d+0)*c,(.5+d+0)*b,0*c,.5*b,0*c);T(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c);T(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.35*b,.98*c);a.moveTo(.25*b,.8*c);a.lineTo(.35*b,1*c);a.lineTo(.1*b,1*c);b=a.m;F(a);return b},BpmnActivityParallel:function(a,b,c){a=E();S(a,0,0,!1);a.lineTo(0,1*c);a.moveTo(.5*b,0);a.lineTo(.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);b=a.m;F(a);return b},BpmnActivitySequential:function(a,
b,c){a=E();S(a,0,0,!1);a.lineTo(1*b,0);a.moveTo(0,.5*c);a.lineTo(1*b,.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);b=a.m;F(a);return b},BpmnActivityAdHoc:function(a,b,c){a=E();S(a,0,0,!1);S(a,1*b,1*c,!1);S(a,0,.5*c,!1);T(a,.2*b,.35*c,.3*b,.35*c,.5*b,.5*c);T(a,.7*b,.65*c,.8*b,.65*c,1*b,.5*c);b=a.m;F(a);return b},BpmnActivityCompensation:function(a,b,c){a=E();S(a,0,.5*c,!0);a.lineTo(.5*b,0);a.lineTo(.5*b,.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(.5*b,.5*c);a.lineTo(.5*b,1*c);ff(a);b=a.m;F(a);return b},
BpmnTaskMessage:function(a,b,c){a=E();S(a,0,.2*c,!0);a.lineTo(1*b,.2*c);a.lineTo(1*b,.8*c);a.lineTo(0,.8*c);a.lineTo(0,.8*c);ff(a);S(a,0,.2*c,!1);a.lineTo(.5*b,.5*c);a.lineTo(1*b,.2*c);a.Ja(!1);b=a.m;F(a);return b},BpmnTaskScript:function(a,b,c){a=E();S(a,.7*b,1*c,!0);a.lineTo(.3*b,1*c);T(a,.6*b,.5*c,0,.5*c,.3*b,0);a.lineTo(.7*b,0);T(a,.4*b,.5*c,1*b,.5*c,.7*b,1*c);ff(a);S(a,.45*b,.73*c,!1);a.lineTo(.7*b,.73*c);a.moveTo(.38*b,.5*c);a.lineTo(.63*b,.5*c);a.moveTo(.31*b,.27*c);a.lineTo(.56*b,.27*c);a.Ja(!1);
b=a.m;F(a);return b},BpmnTaskUser:function(a,b,c){a=E();S(a,0,0,!1);S(a,.335*b,(1-.555)*c,!0);a.lineTo(.335*b,.595*c);a.lineTo(.665*b,.595*c);a.lineTo(.665*b,(1-.555)*c);T(a,.88*b,.46*c,.98*b,.54*c,1*b,.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,.68*c);T(a,.02*b,.54*c,.12*b,.46*c,.335*b,(1-.555)*c);a.lineTo(.365*b,.405*c);var d=.5-.285,e=Math.PI/4,f=4*(1-Math.cos(e))/(3*Math.sin(e)),e=f*d,f=f*d;T(a,(.5-(e+d)/2)*b,(d+(d+f)/2)*c,(.5-d)*b,(d+f)*c,(.5-d)*b,d*c);T(a,(.5-d)*b,(d-f)*c,(.5-e)*b,(d-
d)*c,.5*b,(d-d)*c);T(a,(.5+e)*b,(d-d)*c,(.5+d)*b,(d-f)*c,(.5+d)*b,d*c);T(a,(.5+d)*b,(d+f)*c,(.5+(e+d)/2)*b,(d+(d+f)/2)*c,.635*b,.405*c);a.lineTo(.635*b,.405*c);a.lineTo(.665*b,(1-.555)*c);a.lineTo(.665*b,.595*c);a.lineTo(.335*b,.595*c);S(a,.2*b,1*c,!1);a.lineTo(.2*b,.8*c);S(a,.8*b,1*c,!1);a.lineTo(.8*b,.8*c);b=a.m;F(a);return b},BpmnEventConditional:function(a,b,c){a=E();S(a,.1*b,0,!0);a.lineTo(.9*b,0);a.lineTo(.9*b,1*c);a.lineTo(.1*b,1*c);ff(a);S(a,.2*b,.2*c,!1);a.lineTo(.8*b,.2*c);a.moveTo(.2*b,
.4*c);a.lineTo(.8*b,.4*c);a.moveTo(.2*b,.6*c);a.lineTo(.8*b,.6*c);a.moveTo(.2*b,.8*c);a.lineTo(.8*b,.8*c);a.Ja(!1);b=a.m;F(a);return b},BpmnEventError:function(a,b,c){a=E();S(a,0,1*c,!0);a.lineTo(.33*b,0);a.lineTo(.66*b,.5*c);a.lineTo(1*b,0);a.lineTo(.66*b,1*c);a.lineTo(.33*b,.5*c);ff(a);b=a.m;F(a);return b},BpmnEventEscalation:function(a,b,c){a=E();S(a,0,0,!1);S(a,1*b,1*c,!1);S(a,.1*b,1*c,!0);a.lineTo(.5*b,0);a.lineTo(.9*b,1*c);a.lineTo(.5*b,.5*c);ff(a);b=a.m;F(a);return b},BpmnEventTimer:function(a,
b,c){a=E();var d=.5*Q.ia;S(a,1*b,.5*c,!0);T(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c);T(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c);T(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0);T(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c);S(a,.5*b,0,!1);a.lineTo(.5*b,.15*c);a.moveTo(.5*b,1*c);a.lineTo(.5*b,.85*c);a.moveTo(0,.5*c);a.lineTo(.15*b,.5*c);a.moveTo(1*b,.5*c);a.lineTo(.85*b,.5*c);a.moveTo(.5*b,.5*c);a.lineTo(.58*b,.1*c);a.moveTo(.5*b,.5*c);a.lineTo(.78*b,.54*c);a.Ja(!1);b=a.m;b.Vc=Vi;F(a);return b}};
for(var gp in Q.Ff)Q.Ff[gp.toLowerCase()]=gp;
Q.Au={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",
OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};Q.JG=function(){if(null!==Q.Au){for(var a in Q.Au){var b=cf(Q.Au[a],!1);Q.$h[a]=b;a.toLowerCase()!==a&&(Q.$h[a.toLowerCase()]=a)}Q.Au=null}};
Q.GB=function(a){Q.JG();var b=Q.$h[a];if(void 0===b){b=a.toLowerCase();if("none"===b)return"None";b=Q.$h[b]}return"string"===typeof b?b:b instanceof Ke?a:null};
function O(a){0===arguments.length?L.call(this):L.call(this,a);this.D=311807;this.Fj=this.hh="";this.vq=this.sq=this.Eq=this.wp=null;this.Gq="";this.fh=this.Fq=this.gl=null;this.uq="";this.Vm=null;this.tq=(new Za(NaN,NaN)).freeze();this.wq="";this.Wm=null;this.Ad="";this.xt=this.Eo=this.tj=null;this.$f=(new z(NaN,NaN)).freeze();this.Ep="";this.Ij=null;this.Fp=ud;this.Op=Q.OD;this.Hp=Q.ND;this.Oo=null;this.xp=hp;this.jl=(new z(6,6)).freeze();this.il="gray";this.hl=4;this.oA=-1;this.ZD=new D;this.Kj=
null;this.ui=NaN}yb(O,L);vb("Part",O);O.prototype.cloneProtected=function(a){L.prototype.cloneProtected.call(this,a);a.D=this.D&-4097|49152;a.hh=this.hh;a.Fj=this.Fj;a.wp=this.wp;a.Eq=this.Eq;a.sq=this.sq;a.vq=this.vq;a.Gq=this.Gq;a.Fq=this.Fq;a.fh=null;a.uq=this.uq;a.tq.assign(this.tq);a.wq=this.wq;a.Ad=this.Ad;a.Eo=this.Eo;a.$f.assign(this.$f);a.Ep=this.Ep;a.Fp=this.Fp.O();a.Op=this.Op.O();a.Hp=this.Hp.O();a.Oo=this.Oo;a.xp=this.xp;a.jl.assign(this.jl);a.il=this.il;a.hl=this.hl};
O.prototype.Xg=function(a){L.prototype.Xg.call(this,a);a.lk();a.gl=null;a.Vm=null;a.Wm=null;a.Ij=null;a.Kj=null};O.prototype.toString=function(){var a=xa(Object.getPrototypeOf(this))+"#"+ub(this);null!==this.data&&(a+="("+Sf(this.data)+")");return a};O.LayoutNone=0;var ul;O.LayoutAdded=ul=1;var Cl;O.LayoutRemoved=Cl=2;O.LayoutShown=4;O.LayoutHidden=8;O.LayoutNodeSized=16;var fm;O.LayoutGroupLayout=fm=32;O.LayoutNodeReplaced=64;var hp;O.LayoutStandard=hp=ul|Cl|28|fm|64;O.LayoutAll=16777215;
O.prototype.Ol=function(a,b,c,d,e,f,g){var h=this.g;null!==h&&(a===Qf&&"elements"===b?e instanceof L?vl(e,function(a){xl(h,a);wl(h,a)}):e instanceof ok&&Sl(h,e):a===Rf&&"elements"===b&&(e instanceof L?vl(e,function(a){Bl(h,a);Al(h,a)}):e instanceof ok&&Tl(h,e)),h.ec(a,b,c,d,e,f,g))};O.prototype.updateTargetBindings=O.prototype.sb=function(a){L.prototype.sb.call(this,a);if(null!==this.data){a=this.la.l;for(var b=a.length,c=0;c<b;c++){var d=a[c];d instanceof L&&vl(d,function(a){null!==a.data&&a.sb()})}}};
O.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.U;if(c instanceof Xf){var d=c.Gl(a),b=b.eF(d),e=this.Ca;b!==e&&(b=null!==e?c.$a(e.data):void 0,e=c.Tn,"function"===typeof e?e(a,b):a[e]=b,c.yv(a,d))}}}};H(O,{su:"adornments"},function(){return null===this.fh?Cc:this.fh.yC});O.prototype.findAdornment=O.prototype.wn=function(a){var b=this.fh;return null===b?null:b.ja(a)};
O.prototype.addAdornment=O.prototype.Tj=function(a,b){if(null!==b){var c=null,d=this.fh;null!==d&&(c=d.ja(a));if(c!==b){if(null!==c){var e=c.g;null!==e&&e.remove(c)}null===d&&(this.fh=d=new Fb("string",Vg));b.hh!==a&&(b.jc=a);d.add(a,b);c=this.g;null!==c&&(c.add(b),b.data=this.data)}}};O.prototype.removeAdornment=O.prototype.vk=function(a){var b=this.fh;if(null!==b){var c=b.ja(a);if(null!==c){var d=c.g;null!==d&&d.remove(c)}b.remove(a);0===b.count&&(this.fh=null)}};
O.prototype.clearAdornments=O.prototype.kr=function(){var a=this.fh;if(null!==a){for(var b=ob(),a=a.i;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.vk(b[c]);pb(b)}};
O.prototype.updateAdornments=function(){var a=this.g;if(null!==a){a:{if(this.Ia&&this.DG){var b=this.ls;if(!(null!==b&&this.Q.w()&&this.sa()&&b.rk()&&b.Q.w()))break a;var c=this.wn("Selection");if(null===c){c=this.EG;null===c&&(c=this instanceof W?a.TF:this instanceof Wg?a.rF:a.hG);if(!(c instanceof Vg))break a;Yg(c);c=c.copy();null!==c&&(c.jc="Selection",c.Xb=b)}if(null!==c){var d=c.placeholder;if(null!==d){var e=b.Rh(),f=0;b instanceof X&&(f=b.Na);var g=Ya();g.k((b.ta.width+f)*e,(b.ta.height+f)*
e);d.ka=g;$a(g)}c.angle=b.gk();c.type!==si&&(d=Va(),c.location=b.Ra(ud,d),A(d));this.Tj("Selection",c);break a}}this.vk("Selection")}ip(this,a);for(a=this.su;a.next();)b=a.value,b.sb(),b.H()}};function ip(a,b){b.Ya.ue.each(function(b){b.isEnabled&&b.updateAdornments(a)})}H(O,{layer:"layer"},function(){return this.xt});H(O,{g:"diagram"},function(){var a=this.xt;return null!==a?a.g:null});
G(O,{Le:"layerName"},function(){return this.Fj},function(a){var b=this.Fj;if(b!==a){w(a,"string",O,"layerName");var c=this.g;if(null===c||null!==c.tr(a)&&!c.Yl)if(this.Fj=a,null!==c&&c.Rb(),this.h("layerName",b,a),b=this.layer,null!==b&&b.name!==a&&(c=b.g,null!==c&&(a=c.tr(a),null!==a&&a!==b))){var d=b.pe(-1,this,!0);0<=d&&c.ec(Rf,"parts",b,this,null,d,!0);d=a.Dn(99999999,this,!0);0<=d&&c.ec(Qf,"parts",a,null,this,!0,d);d=this.Mr;if(null!==d){var e=c.ya;c.ya=!0;d(this,b,a);c.ya=e}}}});
G(O,{Mr:"layerChanged"},function(){return this.wp},function(a){var b=this.wp;b!==a&&(null!==a&&w(a,"function",O,"layerChanged"),this.wp=a,this.h("layerChanged",b,a))});O.prototype.invalidateAdornments=O.prototype.qd=function(){var a=this.g;null!==a&&(Ak(a),0!==(this.D&16384)!==!0&&(this.D|=16384,a.vd()))};function dk(a){0!==(a.D&16384)!==!1&&(a.updateAdornments(),a.D&=-16385,a=a.g,null!==a&&(a.dd=!0))}
G(O,{location:"location"},function(){return this.$f},function(a){var b=this.$f;if(!(b.A(a)||this instanceof W)){a=a.O();var c=this.g;this.$f=a;if(!1===dl(this)){var d=this.xa,e=a.x-b.x,f=a.y-b.y,g=d.copy();d.k(g.x+e,g.y+f);hn(this,!1);!d.A(g)&&c&&this.h("position",g,d)}this.h("location",b,a)}});function hn(a,b){if(!1===ml(a)){var c=a.g;null!==c&&(c.lf.add(a),a instanceof V&&!c.V.Ua&&a.He(),b||c.vd());jp(a,!0)}}
function kp(a){if(!1!==ml(a)){var b=a.position,c=a.location;c.w()&&b.w()||(lp(a,b,c),a.Xf());var b=a.xa,c=a.Cb,d=c.copy();c.wa();c.x=b.x;c.y=b.y;c.freeze();a.lv(d,c);jp(a,!1)}}H(O,{Kb:"locationObject"},function(){if(null===this.Ij){var a=this.oy;""!==a?(a=this.Bd(a),this.Ij=null!==a?a:this):this.Ij=this instanceof Vg?this.type!==si&&null!==this.placeholder?this.placeholder:this:this}return this.Ij.visible?this.Ij:this});
G(O,{aG:"minLocation"},function(){return this.Op},function(a){var b=this.Op;b.A(a)||(this.Op=a=a.O(),this.h("minLocation",b,a))});G(O,{WF:"maxLocation"},function(){return this.Hp},function(a){var b=this.Hp;b.A(a)||(this.Hp=a=a.O(),this.h("maxLocation",b,a))});G(O,{oy:"locationObjectName"},function(){return this.Ep},function(a){var b=this.Ep;b!==a&&(this.Ep=a,this.Ij=null,bn(this),this.h("locationObjectName",b,a))});
G(O,{qe:"locationSpot"},function(){return this.Fp},function(a){var b=this.Fp;b.A(a)||(this.Fp=a=a.O(),bn(this),this.h("locationSpot",b,a))});O.prototype.move=O.prototype.move=function(a){this.position=a};O.prototype.moveTo=O.prototype.moveTo=function(a,b){var c=Wa(a,b);this.move(c);A(c)};
O.prototype.isVisible=O.prototype.sa=function(){if(!this.visible)return!1;var a=this.layer;if(null!==a&&!a.visible)return!1;a=this.Ca;if(!(null===a||a.td&&a.sa()))return!1;if(this instanceof V){a=this.El();if(null!==a&&!a.rc)return!1;a=this.ud;if(null!==a)return a.sa()}else if(this instanceof W){var b=!0,c=this.g;null!==c&&(b=c.Kc);c=this.M;if(null!==c){if(this.cc&&b&&!c.rc)return!1;if(c===a)return!0;c=c.findVisibleNode();if(null===c||c===a)return!1}c=this.R;if(null!==c){if(this.cc&&!b&&!c.rc)return!1;
if(c===a)return!0;b=c.findVisibleNode();if(null===b||b===a)return!1}}return!0};O.prototype.Zd=function(a){var b=this.g;a?(this.v(4),this.qd(),null!==b&&b.lf.add(this)):(this.v(8),this.kr());null!==b&&(b.Rb(),b.ba())};
O.prototype.findObject=O.prototype.Bd=function(a){if(this.name===a)return this;var b=this.Kj;null===b&&(this.Kj=b=new Sb);if(void 0!==b[a])return b[a];for(var c=this.la.l,d=c.length,e=0;e<d;e++){var f=c[e];if(f.name===a)return b[a]=f;if(f instanceof L)if(null===f.th&&null===f.nf){if(f=f.Bd(a),null!==f)return b[a]=f}else if(Ql(f)&&(f=f.la.first(),null!==f&&f.name===a))return b[a]=f}return b[a]=null};
function mp(a,b,c,d){void 0===d&&(d=new z);c.Fd()&&(c=Dd);var e=b.ta;d.k(e.width*c.x+c.offsetX,e.height*c.y+c.offsetY);if(null===b||b===a)return d;b.transform.Ka(d);for(b=b.I;null!==b&&b!==a;)b.transform.Ka(d),b=b.I;a.Hj.Ka(d);d.offset(-a.mc.x,-a.mc.y);return d}O.prototype.ensureBounds=O.prototype.Ee=function(){lj(this,Infinity,Infinity);this.ac()};
function hk(a,b){var c;c=a.ZD;var d;isNaN(a.ui)&&(a.ui=so(a));d=a.ui;var e=2*d;if(!a.pk)return c.k(b.x-1-d,b.y-1-d,b.width+2+e,b.height+2+e),c;d=b.x;var e=b.y,f=b.width,g=b.height,h=a.shadowBlur,k=a.KG,f=f+h,g=g+h;d-=h/2;e-=h/2;0<k.x?f+=k.x:(d+=k.x,f-=k.x);0<k.y?g+=k.y:(e+=k.y,g-=k.y);c.k(d-1,e-1,f+2,g+2);return c}r=O.prototype;
r.ac=function(){this.Xf();if(!1===dl(this))kp(this);else{var a=bb();a.assign(this.Cb);Um(this);this.Cb.wa();var b=ck(this);this.Jh(0,0,this.mc.width,this.mc.height);var c=this.position;lp(this,c,this.location);var d=this.Cb;d.x=c.x;d.y=c.y;d.freeze();this.Xf();this.lv(a,d);a.A(d)?this.Me(b):!this.Zc()||Q.u(a.width,d.width)&&Q.u(a.height,d.height)||0<=this.oA&&this.v(16);fb(a);jp(this,!1)}};
r.lv=function(a,b){Pm(this,!1);var c=this.g;if(null!==c){this.lk();var d=!1,e=a.w();if(!1===c.rh){var f=c.Wc,g=c.padding,h=f.x+g.left,k=f.y+g.top,l=f.width-2*g.right,f=f.height-2*g.bottom;e&&a.x>h&&a.y>k&&a.right<l&&a.bottom<f&&b.x>h&&b.y>k&&b.right<l&&b.bottom<f&&(d=!0)}0!==(this.D&65536)!==!0&&a.A(b)||yl(this,d,c);c.ba()}};
r.Uy=function(a,b){if(!a.w()||this instanceof W)return!1;if(this.g&&!(this instanceof Vg)){var c=this.g.gh;c.Fc&&Rj(c,this,"position",b.copy(),a.copy())}var c=this.$f,d=c.copy();c.k(c.x+(a.x-b.x),c.y+(a.y-b.y));this.xa=a;!1===ml(this)&&!1===dl(this)&&(hn(this,!1),this.Xf(),kp(this));c.A(d)||this.h("location",d,c);return!0};r.nD=function(a,b){var c=this.$f;!1===ml(this)&&!1===dl(this)?(this.$f.k(c.x+a-this.xa.x,c.y+b-this.xa.y),this.xa.k(a,b),hn(this,!0),this.Xf()):(c.k(NaN,NaN),this.xa.k(a,b))};
function lp(a,b,c){var d=NaN,e=NaN,f=Va(),g=a.qe,h=a.Kb;g.Fd()&&v("determineOffset: Part's locationSpot must be real: "+g.toString());var k=h.ta,d=0;h.Na&&(d=h.eg);f.ns(0,0,k.width+d,k.height+d,g);if(h!==a)for(h.Na&&f.offset(-d/2,-d/2),h.transform.Ka(f),g=h.I;null!==g&&g!==a;)g.transform.Ka(f),g=g.I;a.Hj.Ka(f);f.offset(-a.mc.x,-a.mc.y);g=a.g;c.w()?(h=b.x,k=b.y,d=c.x-f.x,e=c.y-f.y,b.k(d,e),c=!1,null!==g&&(d=g.gh,d.ni?c=!0:!d.Fc||a instanceof Vg||Rj(d,a,"position",new z(h,k),b),c||b.x===h&&b.y===k||
(d=g.Ma,g.Ma=!0,a.h("position",new z(h,k),b),g.Ma=d))):b.w()&&(d=b.x,e=b.y,b=c.copy(),c.k(d+f.x,e+f.y),c.A(b)||null===g||(d=g.Ma,g.Ma=!0,a.h("location",b,c),g.Ma=d));A(f)}function yl(a,b,c){Qm(a,!1);a instanceof V&&nm(c,a);a.layer.bc||b||c.Rb();b=a.Cb;var d=c.Va;d.w()?(ck(a)?hd(b,d)||a.Me(!1):b.Gf(d)&&a.Me(!0),a.updateAdornments()):c.Dj=!0}r.ok=function(){return!0};
function fk(a,b){if(a.visible){var c=a.Cb;if(0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)){var d=a.transform,e=a.I,f=a.$l;f.reset();null!==e&&(e.gf()?f.multiply(e.Ve):null!==e.I&&f.multiply(e.I.Ve));f.multiply(a.kd);null!==a.Nb&&(Wm(a,b,a.Nb,!0,!0),b.fillRect(c.x,c.y,c.width,c.height));null===a.Nb&&null===a.ob&&(b.fillStyle="rgba(0,0,0,0.4)",b.fillRect(c.x,c.y,c.width,c.height));null!==a.ob&&(d.Kr()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),e=a.ta,c=e.width,e=e.height,Wm(a,b,a.ob,!0,
!1),b.fillRect(0,0,c+0,e+0),d.Kr()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy))))}}}r.Zc=function(){return!0};
G(O,{jc:"category"},function(){return this.hh},function(a){var b=this.hh;if(b!==a){w(a,"string",O,"category");var c=this.g,d=this.data,e=null;if(null!==c&&null!==d&&!(this instanceof Vg)){var f=c.U.V;f.isEnabled&&!f.Ua&&(e=this.clone(),e.la.ld(this.la))}this.hh=a;this.h("category",b,a);null===c||null===d||this instanceof Vg?(e=this.Wg,null!==e&&(a=e.fh,null!==a&&a.remove(b),e.Tj(this.jc,this))):(f=c.U,f.V.Ua||(this instanceof W?(f instanceof Xf?f.lD(d,a):f instanceof Yf&&f.HG(d,a),c=$l(c,a),null!==
c&&(Yg(c),c=c.copy(),null!==c&&np(this,c,b,a))):(null!==f&&f.wv(d,a),c=Xl(c,d,a),null!==c&&(Yg(c),c=c.copy(),null===c||c instanceof W||(c.location=this.location,np(this,c,b,a)))),null!==e&&(b=this.clone(),b.la.ld(this.la),this.h("self",e,b))))}});G(O,{self:"self"},function(){return this},function(a){np(this,a,this.jc,a.jc)});var op=!1;
function np(a,b,c,d){b.constructor===a.constructor||op||(op=!0,Da('Should not change the class of the Part when changing category from "'+c+'" to "'+d+'"'),Da("  Old class: "+xa(a)+", new class: "+xa(b)+", part: "+a.toString()));a.kr();var e=a.data;c=a.Le;var f=a.Ia,g=a.ig,h=!0,k=!0,l=!1;if(a instanceof V)var m=a,h=m.Th,k=m.rc,l=m.jo;b.Xg(a);b.cloneProtected(a);a.hh=d;a.H();a.ba();b=a.g;d=!0;null!==b&&(d=b.Ma,b.Ma=!0);a.Ag=e;null!==e&&a.sb();null!==b&&(b.Ma=d);e=a.Le;e!==c&&(a.Fj=c,a.Le=e);a instanceof
V&&(m=a,m.Th=h,m.rc=k,m.jo=l,m.Zc()&&m.v(64));a.Ia=f;a.ig=g}O.prototype.canCopy=function(){if(!this.OE)return!1;var a=this.layer;if(null===a)return!0;if(!a.Ti)return!1;a=a.g;return null===a?!0:a.Ti?!0:!1};O.prototype.canDelete=function(){if(!this.VE)return!1;var a=this.layer;if(null===a)return!0;if(!a.ql)return!1;a=a.g;return null===a?!0:a.ql?!0:!1};O.prototype.canEdit=function(){if(!this.UG)return!1;var a=this.layer;if(null===a)return!0;if(!a.xu)return!1;a=a.g;return null===a?!0:a.xu?!0:!1};
O.prototype.canGroup=function(){if(!this.sF)return!1;var a=this.layer;if(null===a)return!0;if(!a.uu)return!1;a=a.g;return null===a?!0:a.uu?!0:!1};O.prototype.canMove=function(){if(!this.fG)return!1;var a=this.layer;if(null===a)return!0;if(!a.Wj)return!1;a=a.g;return null===a?!0:a.Wj?!0:!1};O.prototype.canReshape=function(){if(!this.sG)return!1;var a=this.layer;if(null===a)return!0;if(!a.vu)return!1;a=a.g;return null===a?!0:a.vu?!0:!1};
O.prototype.canResize=function(){if(!this.tG)return!1;var a=this.layer;if(null===a)return!0;if(!a.hr)return!1;a=a.g;return null===a?!0:a.hr?!0:!1};O.prototype.canRotate=function(){if(!this.wG)return!1;var a=this.layer;if(null===a)return!0;if(!a.wu)return!1;a=a.g;return null===a?!0:a.wu?!0:!1};O.prototype.canSelect=function(){if(!this.wk)return!1;var a=this.layer;if(null===a)return!0;if(!a.De)return!1;a=a.g;return null===a?!0:a.De?!0:!1};
G(O,{OE:"copyable"},function(){return 0!==(this.D&1)},function(a){var b=0!==(this.D&1);b!==a&&(this.D^=1,this.h("copyable",b,a))});G(O,{VE:"deletable"},function(){return 0!==(this.D&2)},function(a){var b=0!==(this.D&2);b!==a&&(this.D^=2,this.h("deletable",b,a))});G(O,{UG:"textEditable"},function(){return 0!==(this.D&4)},function(a){var b=0!==(this.D&4);b!==a&&(this.D^=4,this.h("textEditable",b,a),this.qd())});
G(O,{sF:"groupable"},function(){return 0!==(this.D&8)},function(a){var b=0!==(this.D&8);b!==a&&(this.D^=8,this.h("groupable",b,a))});G(O,{fG:"movable"},function(){return 0!==(this.D&16)},function(a){var b=0!==(this.D&16);b!==a&&(this.D^=16,this.h("movable",b,a))});G(O,{DG:"selectionAdorned"},function(){return 0!==(this.D&32)},function(a){var b=0!==(this.D&32);b!==a&&(this.D^=32,this.h("selectionAdorned",b,a),this.qd())});
G(O,{iy:"isInDocumentBounds"},function(){return 0!==(this.D&64)},function(a){var b=0!==(this.D&64);if(b!==a){this.D^=64;var c=this.g;null!==c&&c.Rb();this.h("isInDocumentBounds",b,a)}});G(O,{vC:"isLayoutPositioned"},function(){return 0!==(this.D&128)},function(a){var b=0!==(this.D&128);b!==a&&(this.D^=128,this.h("isLayoutPositioned",b,a),this.v(a?4:8))});G(O,{wk:"selectable"},function(){return 0!==(this.D&256)},function(a){var b=0!==(this.D&256);b!==a&&(this.D^=256,this.h("selectable",b,a),this.qd())});
G(O,{sG:"reshapable"},function(){return 0!==(this.D&512)},function(a){var b=0!==(this.D&512);b!==a&&(this.D^=512,this.h("reshapable",b,a),this.qd())});G(O,{tG:"resizable"},function(){return 0!==(this.D&1024)},function(a){var b=0!==(this.D&1024);b!==a&&(this.D^=1024,this.h("resizable",b,a),this.qd())});G(O,{wG:"rotatable"},function(){return 0!==(this.D&2048)},function(a){var b=0!==(this.D&2048);b!==a&&(this.D^=2048,this.h("rotatable",b,a),this.qd())});
G(O,{Ia:"isSelected"},function(){return 0!==(this.D&4096)},function(a){var b=0!==(this.D&4096);if(b!==a){var c=this.g;if(!a||this.canSelect()&&!(null!==c&&c.selection.count>=c.XF)){this.D^=4096;var d=!1;if(null!==c){d=c.Ma;c.Ma=!0;var e=c.selection;e.wa();a?e.add(this):e.remove(this);e.freeze()}this.h("isSelected",b,a);this.qd();a=this.FG;null!==a&&a(this);null!==c&&(c.vd(),c.Ma=d)}}});
G(O,{ig:"isHighlighted"},function(){return 0!==(this.D&524288)},function(a){var b=0!==(this.D&524288);if(b!==a){this.D^=524288;var c=this.g;null!==c&&(c=c.Tu,c.wa(),a?c.add(this):c.remove(this),c.freeze());this.h("isHighlighted",b,a);this.ba()}});G(O,{pk:"isShadowed"},function(){return 0!==(this.D&8192)},function(a){var b=0!==(this.D&8192);b!==a&&(this.D^=8192,this.h("isShadowed",b,a),this.ba())});function ml(a){return 0!==(a.D&32768)}function jp(a,b){a.D=b?a.D|32768:a.D&-32769}
function Qm(a,b){a.D=b?a.D|65536:a.D&-65537}function ck(a){return 0!==(a.D&131072)}O.prototype.Me=function(a){this.D=a?this.D|131072:this.D&-131073};function pp(a,b){a.D=b?a.D|1048576:a.D&-1048577}G(O,{qC:"isAnimated"},function(){return 0!==(this.D&262144)},function(a){var b=0!==(this.D&262144);b!==a&&(this.D^=262144,this.h("isAnimated",b,a))});G(O,{Py:"selectionObjectName"},function(){return this.Gq},function(a){var b=this.Gq;b!==a&&(this.Gq=a,this.gl=null,this.h("selectionObjectName",b,a))});
G(O,{EG:"selectionAdornmentTemplate"},function(){return this.Eq},function(a){var b=this.Eq;b!==a&&(this instanceof W&&(a.type=si),this.Eq=a,this.h("selectionAdornmentTemplate",b,a))});H(O,{ls:"selectionObject"},function(){if(null===this.gl){var a=this.Py;null!==a&&""!==a?(a=this.Bd(a),this.gl=null!==a?a:this):this instanceof W?(a=this.path,this.gl=null!==a?a:this):this.gl=this}return this.gl});
G(O,{FG:"selectionChanged"},function(){return this.Fq},function(a){var b=this.Fq;b!==a&&(null!==a&&w(a,"function",O,"selectionChanged"),this.Fq=a,this.h("selectionChanged",b,a))});G(O,{ZC:"resizeAdornmentTemplate"},function(){return this.sq},function(a){var b=this.sq;b!==a&&(this.sq=a,this.h("resizeAdornmentTemplate",b,a))});G(O,{aD:"resizeObjectName"},function(){return this.uq},function(a){var b=this.uq;b!==a&&(this.uq=a,this.Vm=null,this.h("resizeObjectName",b,a))});
H(O,{$C:"resizeObject"},function(){if(null===this.Vm){var a=this.aD;null!==a&&""!==a?(a=this.Bd(a),this.Vm=null!==a?a:this):this.Vm=this}return this.Vm});G(O,{uG:"resizeCellSize"},function(){return this.tq},function(a){var b=this.tq;b.A(a)||(this.tq=a=a.O(),this.h("resizeCellSize",b,a))});G(O,{xG:"rotateAdornmentTemplate"},function(){return this.vq},function(a){var b=this.vq;b!==a&&(this.vq=a,this.h("rotateAdornmentTemplate",b,a))});
G(O,{yG:"rotateObjectName"},function(){return this.wq},function(a){var b=this.wq;b!==a&&(this.wq=a,this.Wm=null,this.h("rotateObjectName",b,a))});H(O,{cD:"rotateObject"},function(){if(null===this.Wm){var a=this.yG;null!==a&&""!==a?(a=this.Bd(a),this.Wm=null!==a?a:this):this.Wm=this}return this.Wm});G(O,{text:"text"},function(){return this.Ad},function(a){var b=this.Ad;b!==a&&(this.Ad=a,this.h("text",b,a))});
G(O,{Ca:"containingGroup"},function(){return this.tj},function(a){if(this.Zc()){var b=this.tj;if(b!==a){null===a||this!==a&&!a.$g(this)||(this===a&&v("Cannot make a Group a member of itself: "+this.toString()),v("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString()));this.v(Cl);var c=this.g;null!==b?qp(b,this):this instanceof Wg&&null!==c&&c.Rj.remove(this);this.tj=a;null!==a?rp(a,this):this instanceof Wg&&null!==c&&c.Rj.add(this);this.v(ul);if(null!==
c){var d=this.data,e=c.U;null!==d&&e instanceof Xf&&e.yv(d,e.$a(null!==a?a.data:null))}d=this.NB;null!==d&&(e=!0,null!==c&&(e=c.ya,c.ya=!0),d(this,b,a),null!==c&&(c.ya=e));if(this instanceof Wg)for(c=new Xb(O),Ug(c,this,!0,0,!0),c=c.i;c.next();)if(d=c.value,d instanceof V)for(d=d.Gd;d.next();)Vl(d.value);if(this instanceof V)for(d=this.Gd;d.next();)Vl(d.value);this.h("containingGroup",b,a);null!==a&&a.Cv()}}else v("cannot set the Part.containingGroup of a Link or Adornment")});r=O.prototype;
r.lk=function(){var a=this.Ca;null!==a&&(a.H(),null!==a.ub&&a.ub.H(),a.He())};r.ba=function(){var a=this.g;null!==a&&!dl(this)&&!ml(this)&&this.sa()&&this.Cb.w()&&a.ba(hk(this,this.Cb))};r.Fr=function(a){var b=this.tj;null===b||a||rp(b,this)};r.Gr=function(a){var b=this.tj;null===b||a||qp(b,this)};r.Cl=function(){var a=this.data;if(null!==a){var b=this.g;null!==b&&(b=b.U,null!==b&&b.Ly(a))}};
G(O,{NB:"containingGroupChanged"},function(){return this.Eo},function(a){var b=this.Eo;b!==a&&(null!==a&&w(a,"function",O,"containingGroupChanged"),this.Eo=a,this.h("containingGroupChanged",b,a))});O.prototype.findSubGraphLevel=function(){return sp(this,this)};function sp(a,b){var c=b.Ca;return null!==c?1+sp(a,c):b instanceof V&&(c=b.ud,null!==c)?sp(a,c):0}O.prototype.findTopLevelPart=function(){return tp(this,this)};
function tp(a,b){var c=b.Ca;return null!==c?tp(a,c):b instanceof V&&(c=b.ud,null!==c)?tp(a,c):b}H(O,{bv:"isTopLevel"},function(){return null!==this.Ca||this instanceof V&&this.Ie?!1:!0});O.prototype.isMemberOf=O.prototype.$g=function(a){return a instanceof Wg?up(this,this,a):!1};function up(a,b,c){if(b===c||null===c)return!1;var d=b.Ca;return null===d||d!==c&&!up(a,d,c)?b instanceof V&&(b=b.ud,null!==b)?up(a,b,c):!1:!0}
O.prototype.findCommonContainingGroup=O.prototype.dF=function(a){if(null===a)return null;if(this===a)return this instanceof Wg?this:null;for(var b=this;null!==b;)b instanceof Wg&&pp(b,!0),b=b.Ca;for(var c=null,b=a;null!==b;){if(0!==(b.D&1048576)){c=b;break}b=b.Ca}for(b=this;null!==b;)b instanceof Wg&&pp(b,!1),b=b.Ca;return c};G(O,{OF:"layoutConditions"},function(){return this.xp},function(a){var b=this.xp;b!==a&&(this.xp=a,this.h("layoutConditions",b,a))});
O.prototype.canLayout=function(){if(!this.vC||!this.sa())return!1;var a=this.layer;return null!==a&&a.bc||this instanceof V&&this.Ie?!1:!0};O.prototype.invalidateLayout=O.prototype.v=function(a){void 0===a&&(a=16777215);var b;this.vC&&0!==(a&this.OF)?(b=this.layer,null!==b&&b.bc||this instanceof V&&this.Ie?b=!1:(b=this.g,b=null!==b&&b.V.Ua?!1:!0)):b=!1;if(b)if(b=this.tj,null!==b){var c=b.vb;null!==c?c.v():b.v(a)}else a=this.g,null!==a&&(c=a.vb,null!==c&&c.v())};
function zl(a){if(!a.sa())return!1;a=a.layer;return null!==a&&a.bc?!1:!0}G(O,{WB:"dragComputation"},function(){return this.Oo},function(a){var b=this.Oo;b!==a&&(null!==a&&w(a,"function",O,"dragComputation"),this.Oo=a,this.h("dragComputation",b,a))});G(O,{KG:"shadowOffset"},function(){return this.jl},function(a){var b=this.jl;b.A(a)||(this.jl=a=a.O(),this.ba(),this.h("shadowOffset",b,a))});
G(O,{shadowColor:"shadowColor"},function(){return this.il},function(a){var b=this.il;b!==a&&(this.il=a,this.ba(),this.h("shadowColor",b,a))});G(O,{shadowBlur:"shadowBlur"},function(){return this.hl},function(a){var b=this.hl;b!==a&&(this.hl=a,this.ba(),this.h("shadowBlur",b,a))});function Vg(a){0===arguments.length?O.call(this,Yi):O.call(this,a);this.Le="Adornment";this.mb=null;this.D&=-257;this.$f=new z(NaN,NaN);this.ei=new N(D);this.ub=null}yb(Vg,O);vb("Adornment",Vg);
Vg.prototype.toString=function(){var a=this.Wg;return"Adornment("+this.jc+")"+(null!==a?a.toString():"")};Vg.prototype.updateRelationshipsFromData=function(){};Vg.prototype.Tr=function(){var a=this.Xb.J,b=this.Xb;if(a instanceof W&&b instanceof X){var c=a.path,b=c.za;a.Tr();for(var b=c.za,a=this.la.l,c=a.length,d=0;d<c;d++){var e=a[d];e.Hf&&e instanceof X&&(e.za=b)}}};H(Vg,{placeholder:"placeholder"},function(){return this.ub});
G(Vg,{Xb:"adornedObject"},function(){return this.mb},function(a){var b=this.Wg,c=null;null!==a&&(c=a.J);null===b||null!==a&&b===c||b.vk(this.jc);this.mb=a;null!==c&&c.Tj(this.jc,this)});H(Vg,{Wg:"adornedPart"},function(){var a=this.mb;return null!==a?a.J:null});Vg.prototype.ok=function(){var a=this.mb;if(null===a)return!0;a=a.J;return null===a||!dl(a)};Vg.prototype.Zc=function(){return!1};H(Vg,{Ca:"containingGroup"},function(){return null});
Vg.prototype.Ol=function(a,b,c,d,e,f,g){if(a===Qf&&"elements"===b)if(e instanceof Si){var h=e;null===this.ub?this.ub=h:this.ub!==h&&v("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else e instanceof L&&(h=e.sr(function(a){return a instanceof Si}),h instanceof Si&&(null===this.ub?this.ub=h:this.ub!==h&&v("Cannot insert a second Placeholder into the visual tree of an Adornment.")));else a===Rf&&"elements"===b&&null!==this.ub&&(d===this.ub?this.ub=null:d instanceof L&&this.ub.nk(d)&&
(this.ub=null));O.prototype.Ol.call(this,a,b,c,d,e,f,g)};Vg.prototype.updateAdornments=function(){};Vg.prototype.Cl=function(){};function V(a){0===arguments.length?O.call(this,Yi):O.call(this,a);this.Lb=new N(W);this.Mm=this.Gj=this.Ap=this.zp=null;this.op=!0;this.$q=!1;this.Vq=null;this.xo=this.pp=!0;this.yo=Q.RD;this.hd=this.xg=null;this.lq=vp;this.Pi=!1}yb(V,O);vb("Node",V);
V.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.zp=this.zp;a.Ap=this.Ap;a.Gj=this.Gj;a.op=this.op;a.$q=this.$q;a.Vq=this.Vq;a.pp=this.pp;a.xo=this.xo;a.yo=this.yo.O();a.lq=this.lq};V.prototype.Xg=function(a){O.prototype.Xg.call(this,a);a.He();a.xg=this.xg;a.hd=null};var wp;V.DirectionDefault=wp=I(V,"DirectionDefault",0);V.DirectionAbsolute=I(V,"DirectionAbsolute",1);var xp;V.DirectionRotatedNode=xp=I(V,"DirectionRotatedNode",2);var Hm;
V.DirectionRotatedNodeOrthogonal=Hm=I(V,"DirectionRotatedNodeOrthogonal",3);V.SpreadingNone=I(V,"SpreadingNone",10);var vp;V.SpreadingEvenly=vp=I(V,"SpreadingEvenly",11);var yp;V.SpreadingPacked=yp=I(V,"SpreadingPacked",12);function zp(a,b){null!==b&&(null===a.xg&&(a.xg=new Xb(Ap)),a.xg.add(b))}
V.prototype.Ol=function(a,b,c,d,e,f,g){a===Qf&&"elements"===b?this.hd=null:a===Rf&&"elements"===b&&(null===this.g?this.hd=null:d instanceof U&&oo(this,d,function(a,b){jn(a,b,!0)}));O.prototype.Ol.call(this,a,b,c,d,e,f,g)};V.prototype.invalidateConnectedLinks=V.prototype.He=function(a){void 0===a&&(a=null);for(var b=this.Gd;b.next();){var c=b.value;null!==a&&a.contains(c)||(Bp(this,c.Ic),Bp(this,c.xd),c.Ab())}};function Bp(a,b){if(null!==b){b.kq=null;var c=a.Ca;null===c||c.td||Bp(c,c.ek(""))}}
V.prototype.ok=function(){return!0};G(V,{nG:"portSpreading"},function(){return this.lq},function(a){var b=this.lq;b!==a&&(this.lq=a,this.h("portSpreading",b,a),a=this.g,null!==a&&a.V.Ua||this.He())});G(V,{FB:"avoidable"},function(){return this.xo},function(a){var b=this.xo;if(b!==a){this.xo=a;var c=this.g;null!==c&&nm(c,this);this.h("avoidable",b,a)}});
G(V,{yE:"avoidableMargin"},function(){return this.yo},function(a){"number"===typeof a?a=new qd(a):ra(a,qd,V,"avoidableMargin");var b=this.yo;if(!b.A(a)){this.yo=a=a.O();var c=this.g;null!==c&&nm(c,this);this.h("avoidableMargin",b,a)}});V.prototype.canAvoid=function(){return this.FB&&!this.Ie};V.prototype.getAvoidableRect=function(a){a.set(this.Q);a.ru(this.yE);return a};V.prototype.findVisibleNode=function(){for(var a=this;null!==a&&!a.sa();)a=a.Ca;return a};
V.prototype.Zd=function(a){O.prototype.Zd.call(this,a);for(var b=this.Gd;b.next();)b.value.Zd(a)};H(V,{Gd:"linksConnected"},function(){return this.Lb.i});V.prototype.findLinksConnected=V.prototype.$B=function(a){void 0===a&&(a=null);if(null===a)return this.Lb.i;var b=new Ec(this.Lb),c=this;b.Nl=function(b){return b.M===c&&b.Ef===a||b.R===c&&b.wg===a};return b};
V.prototype.findLinksOutOf=V.prototype.Ou=function(a){void 0===a&&(a=null);var b=new Ec(this.Lb),c=this;b.Nl=function(b){return b.M!==c?!1:null===a?!0:b.Ef===a};return b};V.prototype.findLinksInto=V.prototype.Df=function(a){void 0===a&&(a=null);var b=new Ec(this.Lb),c=this;b.Nl=function(b){return b.R!==c?!1:null===a?!0:b.wg===a};return b};
V.prototype.findNodesConnected=V.prototype.aC=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.Lb.i;d.next();){var e=d.value;if(e.M===this){if(null===a||e.Ef===a)e=e.R,null!==b?b.add(e):null!==c&&c!==e?(b=new Xb(V),b.add(c),b.add(e)):c=e}else e.R!==this||null!==a&&e.wg!==a||(e=e.M,null!==b?b.add(e):null!==c&&c!==e?(b=new Xb(V),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Dc(c):Cc};
V.prototype.findNodesOutOf=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.Lb.i;d.next();){var e=d.value;e.M!==this||null!==a&&e.Ef!==a||(e=e.R,null!==b?b.add(e):null!==c&&c!==e?(b=new Xb(V),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Dc(c):Cc};
V.prototype.findNodesInto=function(a){void 0===a&&(a=null);for(var b=null,c=null,d=this.Lb.i;d.next();){var e=d.value;e.R!==this||null!==a&&e.wg!==a||(e=e.M,null!==b?b.add(e):null!==c&&c!==e?(b=new Xb(V),b.add(c),b.add(e)):c=e)}return null!==b?b.i:null!==c?new Dc(c):Cc};
V.prototype.findLinksBetween=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);var d=new Ec(this.Lb),e=this;d.Nl=function(d){return(d.M!==e||d.R!==a||null!==b&&d.Ef!==b||null!==c&&d.wg!==c)&&(d.M!==a||d.R!==e||null!==c&&d.Ef!==c||null!==b&&d.wg!==b)?!1:!0};return d};V.prototype.findLinksTo=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=null);var d=new Ec(this.Lb),e=this;d.Nl=function(d){return d.M!==e||d.R!==a||null!==b&&d.Ef!==b||null!==c&&d.wg===c?!1:!0};return d};
G(V,{QF:"linkConnected"},function(){return this.zp},function(a){var b=this.zp;b!==a&&(null!==a&&w(a,"function",V,"linkConnected"),this.zp=a,this.h("linkConnected",b,a))});G(V,{RF:"linkDisconnected"},function(){return this.Ap},function(a){var b=this.Ap;b!==a&&(null!==a&&w(a,"function",V,"linkDisconnected"),this.Ap=a,this.h("linkDisconnected",b,a))});
G(V,{iv:"linkValidation"},function(){return this.Gj},function(a){var b=this.Gj;b!==a&&(null!==a&&w(a,"function",V,"linkValidation"),this.Gj=a,this.h("linkValidation",b,a))});
function Cp(a,b,c){Bp(a,c);if(!a.Lb.contains(b)){a.Lb.add(b);var d=a.QF;if(null!==d){var e=!0,f=a.g;null!==f&&(e=f.ya,f.ya=!0);d(a,b,c);null!==f&&(f.ya=e)}b.cc&&(c=b.M,b=b.R,null!==c&&null!==b&&c!==b&&(d=!0,f=a.g,null!==f&&(d=f.Kc),a=d?b:c,e=d?c:b,a.Pi||(a.Pi=e),!e.Th||null!==f&&f.V.Ua||(d?c===e&&(e.Th=!1):b===e&&(e.Th=!1))))}}
function Dp(a,b,c){Bp(a,c);if(a.Lb.remove(b)){var d=a.RF,e=a.g;if(null!==d){var f=!0;null!==e&&(f=e.ya,e.ya=!0);d(a,b,c);null!==e&&(e.ya=f)}b.cc&&(c=!0,null!==e&&(c=e.Kc),a=c?b.R:b.M,b=c?b.M:b.R,null!==a&&(a.Pi=!1),null===b||b.Th||(0===b.Lb.count?(b.Pi=null,null!==e&&e.V.Ua||(b.Th=!0)):gm(b)))}}
function gm(a){a.Pi=!1;if(0!==a.Lb.count){var b=!0,c=a.g;if(null===c||!c.V.Ua){null!==c&&(b=c.Kc);for(c=a.Lb.i;c.next();){var d=c.value;if(d.cc)if(b){if(d.M===a){a.Th=!1;return}}else if(d.R===a){a.Th=!1;return}}a.Th=!0}}}
V.prototype.updateRelationshipsFromData=function(){O.prototype.updateRelationshipsFromData.call(this);var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.U;if(c instanceof Yf){var d=c.Hl(a),b=b.oe(d),e=this.El();b!==e&&(b=null!==e?c.$a(e.data):void 0,e=c.Un,"function"===typeof e?e(a,b):a[e]=b,c.ug(a,d))}}}};V.prototype.Fr=function(a){O.prototype.Fr.call(this,a);a||gm(this);var b=this.Mm;null===b||a||Ep(b,this)};
V.prototype.Gr=function(a){O.prototype.Gr.call(this,a);var b=this.Mm;null===b||a||null===b.Pd||(b.Pd.remove(this),b.H())};V.prototype.Cl=function(){if(0<this.Lb.count){var a=this.g;if(null===a)return;for(var b=this.Lb.copy().i;b.next();)a.remove(b.value)}this.ud=null;O.prototype.Cl.call(this)};H(V,{Ie:"isLinkLabel"},function(){return null!==this.Mm});
G(V,{ud:"labeledLink"},function(){return this.Mm},function(a){var b=this.Mm;if(b!==a){var c=this.g,d=this.data;if(null!==b&&(null!==b.Pd&&(b.Pd.remove(this),b.H()),null!==c&&null!==d&&!c.V.Ua)){var e=b.data,f=c.U;if(null!==e&&f instanceof Xf){var g=f.$a(d);void 0!==g&&f.UC(e,g)}}this.Mm=a;null!==a&&(Ep(a,this),null===c||null===d||c.V.Ua||(e=a.data,f=c.U,null!==e&&f instanceof Xf&&(g=f.$a(d),void 0!==g&&f.zx(e,g))));bn(this);this.h("labeledLink",b,a)}});
V.prototype.findPort=V.prototype.ek=function(a){if(null===this.hd){if(""===a&&!1===this.Hg)return this;kn(this)}var b=this.hd.ja(a);return null!==b||""!==a&&(b=this.hd.ja(""),null!==b)?b:this};H(V,{port:"port"},function(){return this.ek("")});H(V,{ports:"ports"},function(){null===this.hd&&kn(this);return this.hd.yC});function kn(a){null===a.hd?a.hd=new Fb("string",U):a.hd.clear();oo(a,a,function(a,c){var d=c.bd;null!==d&&a.hd.add(d,c)});0===a.hd.count&&a.hd.add("",a)}
function jn(a,b,c){var d=b.bd;if(null!==d&&(null!==a.hd&&a.hd.remove(d),b=a.g,null!==b&&c)){c=null;for(d=a.$B(d);d.next();)a=d.value,null===c&&(c=ob()),c.push(a);if(null!==c){for(d=0;d<c.length;d++)a=c[d],b.remove(a);pb(c)}}}
V.prototype.isInTreeOf=function(a){if(null===a||a===this)return!1;var b=!0,c=this.g;null!==c&&(b=c.Kc);c=this;if(b)for(;c!==a;){for(var b=null,d=c.Lb.i;d.next();){var e=d.value;if(e.cc&&(b=e.M,b!==c&&b!==this))break}if(b===this||null===b||b===c)return!1;c=b}else for(;c!==a;){b=null;for(d=c.Lb.i;d.next()&&(e=d.value,!e.cc||(b=e.R,b===c||b===this)););if(b===this||null===b||b===c)return!1;c=b}return!0};
V.prototype.findTreeRoot=function(){var a=!0,b=this.g;null!==b&&(a=b.Kc);b=this;if(a)for(;;){for(var a=null,c=b.Lb.i;c.next();){var d=c.value;if(d.cc&&(a=d.M,a!==b&&a!==this))break}if(a===this)return this;if(null===a||a===b)return b;b=a}else for(;;){a=null;for(c=b.Lb.i;c.next()&&(d=c.value,!d.cc||(a=d.R,a===b||a===this)););if(a===this)return this;if(null===a||a===b)return b;b=a}};
V.prototype.findCommonTreeParent=function(a){if(null===a)return null;if(this===a)return this;for(var b=this;null!==b;)pp(b,!0),b=b.El();for(var c=null,b=a;null!==b;){if(0!==(b.D&1048576)){c=b;break}b=b.El()}for(b=this;null!==b;)pp(b,!1),b=b.El();return c};V.prototype.findTreeParentLink=V.prototype.xr=function(){var a=!0,b=this.g;null!==b&&(a=b.Kc);b=this.Lb.i;if(a)for(;b.next();){if(a=b.value,a.cc&&a.M!==this)return a}else for(;b.next();)if(a=b.value,a.cc&&a.R!==this)return a;return null};
V.prototype.findTreeParentNode=V.prototype.El=function(){var a=this.Pi;if(null===a)return null;if(a instanceof V)return a;var b=!0,a=this.g;null!==a&&(b=a.Kc);a=this.Lb.i;if(b)for(;a.next();){if(b=a.value,b.cc&&(b=b.M,b!==this))return this.Pi=b}else for(;a.next();)if(b=a.value,b.cc&&(b=b.R,b!==this))return this.Pi=b;return this.Pi=null};V.prototype.findTreeLevel=function(){return Fp(this,this)};function Fp(a,b){var c=b.El();return null===c?0:1+Fp(a,c)}
V.prototype.findTreeChildrenLinks=V.prototype.Qu=function(){var a=!0,b=this.g;null!==b&&(a=b.Kc);if(a){var a=new Ec(this.Lb),c=this;a.Nl=function(a){return a.cc&&a.M===c?!0:!1}}else a=new Ec(this.Lb),c=this,a.Nl=function(a){return a.cc&&a.R===c?!0:!1};return a};
V.prototype.findTreeChildrenNodes=V.prototype.cC=function(){var a=!0,b=this.g;null!==b&&(a=b.Kc);var c=b=null,d=this.Lb.i;if(a)for(;d.next();)a=d.value,a.cc&&a.M===this&&(a=a.R,null!==b?b.add(a):null!==c&&c!==a?(b=new N(V),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.cc&&a.R===this&&(a=a.M,null!==b?b.add(a):null!==c&&c!==a?(b=new N(V),b.add(c),b.add(a)):c=a);return null!==b?b.i:null!==c?new Dc(c):Cc};
V.prototype.findTreeParts=function(a){void 0===a&&(a=Infinity);w(a,"number",V,"collapseTree:level");var b=new Xb(O);Ug(b,this,!1,a,!0);return b};V.prototype.collapseTree=V.prototype.collapseTree=function(a){void 0===a&&(a=1);ua(a,V,"collapseTree:level");1>a&&(a=1);var b=this.g;if(null!==b&&!b.Ed){var c=b.rb;0!==b.V.be&&c.tk();b.Ed=!0;var c=b.Kc,d=new Xb(V);d.add(this);Gp(this,d,c,a,this.rc);b.Ed=!1}};
function Gp(a,b,c,d,e){if(1<d)for(e=c?a.Ou():a.Df();e.next();){var f=e.value;f.cc&&(f=f.Ux(a),null===f||f===a||b.contains(f)||(b.add(f),Gp(f,b,c,d-1,f.rc)))}else Hp(a,b,c,e)}function Hp(a,b,c,d){for(var e=c?a.Ou():a.Df();e.next();){var f=e.value;f.cc&&(f=f.Ux(a),null===f||f===a||b.contains(f)||(b.add(f),d&&(f.lk(),f.Zd(!1)),f.rc&&(f.jo=f.rc,Hp(f,b,c,f.jo))))}a.rc=!1}
V.prototype.expandTree=V.prototype.expandTree=function(a){void 0===a&&(a=2);ua(a,V,"expandTree:level");2>a&&(a=2);var b=this.g;if(null!==b&&!b.Ed){var c=b.rb;0!==b.V.be&&c.tk();b.Ed=!0;var d=b.Kc,e=new Xb(V);e.add(this);Ip(this,e,d,a,this.rc,c,this);b.Ed=!1}};function Ip(a,b,c,d,e,f,g){for(var h=c?a.Ou():a.Df();h.next();){var k=h.value;k.cc&&(e||k.wf||k.Ab(),k=k.Ux(a),null!==k&&k!==a&&!b.contains(k)&&(b.add(k),e||(k.Zd(!0),k.lk(),ak(f,k,g)),2<d||k.jo))&&(k.jo=!1,Ip(k,b,c,d-1,k.rc,f,g))}a.rc=!0}
G(V,{rc:"isTreeExpanded"},function(){return this.op},function(a){var b=this.op;if(b!==a){this.op=a;var c=this.g;this.h("isTreeExpanded",b,a);b=this.ZG;if(null!==b){var d=!0;null!==c&&(d=c.ya,c.ya=!0);b(this);null!==c&&(c.ya=d)}a?null===c||c.Ed||(0!==c.V.be&&c.rb.tk(),c.Ed=!0,a=c.Kc,b=new Xb(V),b.add(this),Ip(this,b,a,2,!1,c.rb,this),c.Ed=!1):null===c||c.Ed||(0!==c.V.be&&c.rb.tk(),c.Ed=!0,a=c.Kc,b=new Xb(V),b.add(this),Hp(this,b,a,!0),c.Ed=!1)}});
G(V,{jo:"wasTreeExpanded"},function(){return this.$q},function(a){var b=this.$q;b!==a&&(this.$q=a,this.h("wasTreeExpanded",b,a))});G(V,{ZG:"treeExpandedChanged"},function(){return this.Vq},function(a){var b=this.Vq;b!==a&&(null!==a&&w(a,"function",V,"treeExpandedChanged"),this.Vq=a,this.h("treeExpandedChanged",b,a))});G(V,{Th:"isTreeLeaf"},function(){return this.pp},function(a){var b=this.pp;b!==a&&(this.pp=a,this.h("isTreeLeaf",b,a))});
function W(){O.call(this,si);this.kf=null;this.Gg="";this.vf=this.Wo=null;this.Ug="";this.Uq=null;this.rq=this.qq=this.pq=!1;this.qp=!0;this.so=Ei;this.Fo=0;this.Io=Ei;this.Jo=NaN;this.cl=vn;this.Lq=.5;this.Pd=null;this.nc=(new N(z)).freeze();this.Xm=this.Qd=null;this.wf=!1;this.$w=null;this.lx=!1;this.dm=this.qh=this.za=null;this.xe=0;this.pm=this.lm=null;this.ei=new N(D);this.px=new z;this.dB=this.bB=null;this.Yv=!1;this.G=null}yb(W,O);vb("Link",W);
W.prototype.cloneProtected=function(a){O.prototype.cloneProtected.call(this,a);a.Gg=this.Gg;a.Wo=this.Wo;a.Ug=this.Ug;a.Uq=this.Uq;a.pq=this.pq;a.qq=this.qq;a.rq=this.rq;a.qp=this.qp;a.so=this.so;a.Fo=this.Fo;a.Io=this.Io;a.Jo=this.Jo;a.cl=this.cl;a.Lq=this.Lq;a.G=null!==this.G?this.G.copy():null};W.prototype.Xg=function(a){O.prototype.Xg.call(this,a);this.Gg=a.Gg;this.Ug=a.Ug;a.Qd=null;a.Ab();a.dm=this.dm;a.xe=this.xe};var vn;W.Normal=vn=I(W,"Normal",1);W.Orthogonal=I(W,"Orthogonal",2);
W.AvoidsNodes=I(W,"AvoidsNodes",6);var Jp;W.AvoidsNodesStraight=Jp=I(W,"AvoidsNodesStraight",7);var Ei;W.None=Ei=I(W,"None",0);var Ni;W.Bezier=Ni=I(W,"Bezier",9);var Di;W.JumpGap=Di=I(W,"JumpGap",10);var ti;W.JumpOver=ti=I(W,"JumpOver",11);var sn;W.End=sn=I(W,"End",17);var tn;W.Scale=tn=I(W,"Scale",18);var un;W.Stretch=un=I(W,"Stretch",19);var Eo;W.OrientAlong=Eo=I(W,"OrientAlong",21);var Kp;W.OrientPlus90=Kp=I(W,"OrientPlus90",22);var Lp;W.OrientMinus90=Lp=I(W,"OrientMinus90",23);var Mp;
W.OrientOpposite=Mp=I(W,"OrientOpposite",24);var Np;W.OrientUpright=Np=I(W,"OrientUpright",25);var Op;W.OrientPlus90Upright=Op=I(W,"OrientPlus90Upright",26);var Pp;W.OrientMinus90Upright=Pp=I(W,"OrientMinus90Upright",27);var Qp;W.OrientUpright45=Qp=I(W,"OrientUpright45",28);W.prototype.Xd=function(){this.G=new Gm};
W.prototype.ok=function(){var a=this.M;if(null!==a){var b=a.findVisibleNode();null!==b&&(a=b);if(dl(a)||ml(a))return!1}a=this.R;return null!==a&&(b=a.findVisibleNode(),null!==b&&(a=b),dl(a)||ml(a))?!1:!0};W.prototype.Uy=function(){return!1};W.prototype.Zc=function(){return!1};
W.prototype.computeAngle=function(a,b,c){a=0;switch(b){default:case Ei:a=0;break;case Eo:a=c;break;case Kp:a=c+90;break;case Lp:a=c-90;break;case Mp:a=c+180;break;case Np:a=Q.Zr(c);90<a&&270>a&&(a-=180);break;case Op:a=Q.Zr(c+90);90<a&&270>a&&(a-=180);break;case Pp:a=Q.Zr(c-90);90<a&&270>a&&(a-=180);break;case Qp:a=Q.Zr(c);if(45<a&&135>a||225<a&&315>a)return 0;90<a&&270>a&&(a-=180)}return Q.Zr(a)};
G(W,{M:"fromNode"},function(){return this.kf},function(a){var b=this.kf;if(b!==a){var c=this.Ic;null!==b&&(this.vf!==b&&Dp(b,this,c),Rp(this),this.v(Cl));this.kf=a;this.qh=null;this.Ab();var d=this.g;if(null!==d){var e=this.data,f=d.U;if(null!==e)if(f instanceof Xf){var g=null!==a?a.data:null;f.xv(e,f.$a(g))}else f instanceof Yf&&(g=null!==a?a.data:null,d.Kc?f.ug(e,f.$a(g)):(null!==b&&f.ug(b.data,void 0),f.ug(g,f.$a(null!==this.vf?this.vf.data:null))))}e=this.Ic;f=this.fC;null!==f&&(g=!0,null!==d&&
(g=d.ya,d.ya=!0),f(this,c,e),null!==d&&(d.ya=g));null!==a&&(this.vf!==a&&Cp(a,this,e),Sp(this),this.v(ul));this.h("fromNode",b,a);Vl(this)}});
G(W,{Ef:"fromPortId"},function(){return this.Gg},function(a){var b=this.Gg;if(b!==a){var c=this.Ic;null!==c&&Bp(this.M,c);Rp(this);this.Gg=a;var d=this.Ic;null!==d&&Bp(this.M,d);var e=this.g;if(null!==e){var f=this.data,g=e.U;null!==f&&g instanceof Xf&&g.Ry(f,a)}c!==d&&(this.qh=null,this.Ab(),f=this.fC,null!==f&&(g=!0,null!==e&&(g=e.ya,e.ya=!0),f(this,c,d),null!==e&&(e.ya=g)));Sp(this);this.h("fromPortId",b,a)}});H(W,{Ic:"fromPort"},function(){var a=this.kf;return null===a?null:a.ek(this.Gg)});
G(W,{fC:"fromPortChanged"},function(){return this.Wo},function(a){var b=this.Wo;b!==a&&(null!==a&&w(a,"function",W,"fromPortChanged"),this.Wo=a,this.h("fromPortChanged",b,a))});
G(W,{R:"toNode"},function(){return this.vf},function(a){var b=this.vf;if(b!==a){var c=this.xd;null!==b&&(this.kf!==b&&Dp(b,this,c),Rp(this),this.v(Cl));this.vf=a;this.qh=null;this.Ab();var d=this.g;if(null!==d){var e=this.data,f=d.U;if(null!==e)if(f instanceof Xf){var g=null!==a?a.data:null;f.zv(e,f.$a(g))}else f instanceof Yf&&(g=null!==a?a.data:null,d.Kc?(null!==b&&f.ug(b.data,void 0),f.ug(g,f.$a(null!==this.kf?this.kf.data:null))):f.ug(e,f.$a(g)))}e=this.xd;f=this.wD;null!==f&&(g=!0,null!==d&&
(g=d.ya,d.ya=!0),f(this,c,e),null!==d&&(d.ya=g));null!==a&&(this.kf!==a&&Cp(a,this,e),Sp(this),this.v(ul));this.h("toNode",b,a);Vl(this)}});
G(W,{wg:"toPortId"},function(){return this.Ug},function(a){var b=this.Ug;if(b!==a){var c=this.xd;null!==c&&Bp(this.R,c);Rp(this);this.Ug=a;var d=this.xd;null!==d&&Bp(this.R,d);var e=this.g;if(null!==e){var f=this.data,g=e.U;null!==f&&g instanceof Xf&&g.Vy(f,a)}c!==d&&(this.qh=null,this.Ab(),f=this.wD,null!==f&&(g=!0,null!==e&&(g=e.ya,e.ya=!0),f(this,c,d),null!==e&&(e.ya=g)));Sp(this);this.h("toPortId",b,a)}});H(W,{xd:"toPort"},function(){var a=this.vf;return null===a?null:a.ek(this.Ug)});
G(W,{wD:"toPortChanged"},function(){return this.Uq},function(a){var b=this.Uq;b!==a&&(null!==a&&w(a,"function",W,"toPortChanged"),this.Uq=a,this.h("toPortChanged",b,a))});G(W,{Za:"fromSpot"},function(){return null!==this.G?this.G.mi:ee},function(a){null===this.G&&this.Xd();var b=this.G.mi;b.A(a)||(a=a.O(),this.G.mi=a,this.h("fromSpot",b,a),this.Ab())});
G(W,{fk:"fromEndSegmentLength"},function(){return null!==this.G?this.G.ki:NaN},function(a){null===this.G&&this.Xd();var b=this.G.ki;b!==a&&(0>a&&za(a,">= 0",W,"fromEndSegmentLength"),this.G.ki=a,this.h("fromEndSegmentLength",b,a),this.Ab())});G(W,{Br:"fromEndSegmentDirection"},function(){return null!==this.G?this.G.ji:wp},function(a){null===this.G&&this.Xd();var b=this.G.ji;b!==a&&(this.G.ji=a,this.h("fromEndSegmentDirection",b,a),this.Ab())});
G(W,{Cr:"fromShortLength"},function(){return null!==this.G?this.G.li:NaN},function(a){null===this.G&&this.Xd();var b=this.G.li;b!==a&&(this.G.li=a,this.h("fromShortLength",b,a),this.Ab())});G(W,{ab:"toSpot"},function(){return null!==this.G?this.G.Oi:ee},function(a){null===this.G&&this.Xd();var b=this.G.Oi;b.A(a)||(a=a.O(),this.G.Oi=a,this.h("toSpot",b,a),this.Ab())});
G(W,{Bk:"toEndSegmentLength"},function(){return null!==this.G?this.G.Mi:NaN},function(a){null===this.G&&this.Xd();var b=this.G.Mi;b!==a&&(0>a&&za(a,">= 0",W,"toEndSegmentLength"),this.G.Mi=a,this.h("toEndSegmentLength",b,a),this.Ab())});G(W,{ss:"toEndSegmentDirection"},function(){return null!==this.G?this.G.Li:wp},function(a){null===this.G&&this.Xd();var b=this.G.Li;b!==a&&(this.G.Li=a,this.h("toEndSegmentDirection",b,a),this.Ab())});
G(W,{us:"toShortLength"},function(){return null!==this.G?this.G.Ni:NaN},function(a){null===this.G&&this.Xd();var b=this.G.Ni;b!==a&&(this.G.Ni=a,this.h("toShortLength",b,a),this.Ab())});function Vl(a){var b=a.M,c=a.R;null!==b?null!==c?Tp(a,b.dF(c)):Tp(a,null):Tp(a,null)}function Tp(a,b){var c=a.tj;if(c!==b){null!==c&&qp(c,a);a.tj=b;null!==b&&rp(b,a);var d=a.NB;if(null!==d){var e=!0,f=a.g;null!==f&&(e=f.ya,f.ya=!0);d(a,c,b);null!==f&&(f.ya=e)}!a.wf||a.bB!==c&&a.dB!==c||a.Ab()}}
W.prototype.lk=function(){var a=this.Ca;null!==a&&this.M!==a&&this.R!==a&&O.prototype.lk.call(this)};W.prototype.getOtherNode=W.prototype.Ux=function(a){var b=this.M;return a===b?this.R:b};W.prototype.getOtherPort=function(a){var b=this.Ic;return a===b?this.xd:b};H(W,{bI:"isLabeledLink"},function(){return null===this.Pd?!1:0<this.Pd.count});H(W,{If:"labelNodes"},function(){return null===this.Pd?Cc:this.Pd.i});function Ep(a,b){null===a.Pd&&(a.Pd=new Xb(V));a.Pd.add(b);a.H()}
W.prototype.Fr=function(a){O.prototype.Fr.call(this,a);Up(this)&&Fi(this,this.Q);if(!a){a=this.kf;var b=this.vf;null!==a&&(Cp(a,this,this.Ic),Sp(this));null!==b&&(Cp(b,this,this.xd),Sp(this))}};W.prototype.Gr=function(a){O.prototype.Gr.call(this,a);Up(this)&&Fi(this,this.Q);if(!a){a=this.kf;var b=this.vf;null!==a&&(Dp(a,this,this.Ic),Rp(this));null!==b&&(Dp(b,this,this.xd),Rp(this))}};
W.prototype.Cl=function(){this.wf=!0;if(null!==this.Pd){var a=this.g;if(null===a)return;for(var b=this.Pd.copy().i;b.next();)a.remove(b.value)}b=this.data;null!==b&&(a=this.g,null!==a&&(a=a.U,a instanceof Xf?a.Ky(b):a instanceof Yf&&a.ug(b,void 0)))};
W.prototype.updateRelationshipsFromData=function(){var a=this.data;if(null!==a){var b=this.g;if(null!==b){var c=b.U;if(c instanceof Xf){var d=c.hk(a),e=b.oe(d),f=this.M;e!==f&&(e=null!==f?c.$a(f.data):void 0,f=c.In,"function"===typeof f?f(a,e):a[f]=e,c.xv(a,d));d=c.kk(a);e=b.oe(d);f=this.R;e!==f&&(e=null!==f?c.$a(f.data):void 0,f=c.Kn,"function"===typeof f?f(a,e):a[f]=e,c.zv(a,d));var g=c.Zi(a);if(0<g.length||0<this.If.count){if(1===g.length&&1===this.If.count&&(b=g[0],d=this.If.first(),c.$a(d.data)===
b))return;var d=(new Xb).ld(g),h=new Xb;this.If.each(function(a){null!==a.data&&(a=c.$a(a.data),void 0!==a&&h.add(a))});b=h.copy();b.RC(d);d=d.copy();d.RC(h);if(0<b.count||0<d.count)g.length=0,h.each(function(a){g.push(a)}),b.each(function(b){c.UC(a,b)}),d.each(function(b){c.zx(a,b)})}}}}};
W.prototype.move=W.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);c=a.x-c;b=a.y-b;O.prototype.move.call(this,a);this.sk(c,b);for(a=this.If;a.next();){var d=a.value,e=d.position;d.moveTo(e.x+c,e.y+b)}};G(W,{pG:"relinkableFrom"},function(){return this.pq},function(a){var b=this.pq;b!==a&&(this.pq=a,this.h("relinkableFrom",b,a),this.qd())});
G(W,{qG:"relinkableTo"},function(){return this.qq},function(a){var b=this.qq;b!==a&&(this.qq=a,this.h("relinkableTo",b,a),this.qd())});W.prototype.canRelinkFrom=function(){if(!this.pG)return!1;var a=this.layer;if(null===a)return!0;if(!a.rl)return!1;a=a.g;return null===a||a.rl?!0:!1};W.prototype.canRelinkTo=function(){if(!this.qG)return!1;var a=this.layer;if(null===a)return!0;if(!a.rl)return!1;a=a.g;return null===a||a.rl?!0:!1};
G(W,{fs:"resegmentable"},function(){return this.rq},function(a){var b=this.rq;b!==a&&(this.rq=a,this.h("resegmentable",b,a),this.qd())});G(W,{cc:"isTreeLink"},function(){return this.qp},function(a){var b=this.qp;b!==a&&(this.qp=a,this.h("isTreeLink",b,a),null!==this.M&&gm(this.M),null!==this.R&&gm(this.R))});H(W,{path:"path"},function(){var a=this.Ye();return a instanceof X?a:null});
H(W,{Pl:"routeBounds"},function(){this.updateRoute();var a=new D;var b=Infinity,c=Infinity,d=this.Z;if(0===d)a.k(NaN,NaN,0,0);else{if(1===d)d=this.j(0),b=Math.min(d.x,b),c=Math.min(d.y,c),a.k(d.x,d.y,0,0);else if(2===d){var e=this.j(0),f=this.j(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y);a.k(e.x,e.y,0,0);a.Zh(f)}else if(this.computeCurve()===Ni&&3<=d&&!this.Jb)if(e=this.j(0),b=e.x,c=e.y,a.k(b,c,0,0),3===d)d=this.j(1),b=Math.min(d.x,b),c=Math.min(d.y,c),f=this.j(2),b=Math.min(f.x,b),c=Math.min(f.y,
c),Q.nn(e.x,e.y,d.x,d.y,d.x,d.y,f.x,f.y,.5,a);else for(var g=3;g<d;g+=3){var h=this.j(g-2);g+3>=d&&(g=d-1);var k=this.j(g-1),f=this.j(g);Q.nn(e.x,e.y,h.x,h.y,k.x,k.y,f.x,f.y,.5,a);b=Math.min(f.x,b);c=Math.min(f.y,c);e=f}else for(e=this.j(0),f=this.j(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y),a.k(e.x,e.y,0,0),a.Zh(f),g=2;g<d;g++)e=this.j(g),b=Math.min(e.x,b),c=Math.min(e.y,c),a.Zh(e);this.px.k(b-a.x,c-a.y)}return this.$w=a});H(W,{EC:"midPoint"},function(){this.updateRoute();return this.computeMidPoint(new z)});
W.prototype.computeMidPoint=function(a){var b=this.Z;if(0===b)return a.assign(Q.PD),a;if(1===b)return a.assign(this.j(0)),a;if(2===b){var c=this.j(0),d=this.j(1);a.k((c.x+d.x)/2,(c.y+d.y)/2);return a}if(this.computeCurve()===Ni&&3<=b&&!this.Jb){if(3===b)return this.j(1);var b=(b-1)/3|0,e=3*(b/2|0);1===b%2?(c=this.j(e),d=this.j(e+1),b=this.j(e+2),e=this.j(e+3),Q.BE(c.x,c.y,d.x,d.y,b.x,b.y,e.x,e.y,a)):a.assign(this.j(e));return a}for(var e=0,f=ob(),g=0;g<b-1;g++)c=0,c=this.j(g),d=this.j(g+1),Q.Sa(c.x,
d.x)?(c=d.y-c.y,0>c&&(c=-c)):Q.Sa(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.Wi(d)),f.push(c),e+=c;for(d=g=c=0;c<e/2&&g<b;){d=f[g];if(c+d>e/2)break;c+=d;g++}pb(f);b=this.j(g);f=this.j(g+1);b.x===f.x?b.y>f.y?a.k(b.x,b.y-(e/2-c)):a.k(b.x,b.y+(e/2-c)):b.y===f.y?b.x>f.x?a.k(b.x-(e/2-c),b.y):a.k(b.x+(e/2-c),b.y):(e=(e/2-c)/d,a.k(b.x+e*(f.x-b.x),b.y+e*(f.y-b.y)));return a};H(W,{DC:"midAngle"},function(){this.updateRoute();return this.computeMidAngle()});
W.prototype.computeMidAngle=function(){var a=this.Z;if(2>a)return NaN;if(this.computeCurve()===Ni&&4<=a&&!this.Jb){var b=(a-1)/3|0,c=3*(b/2|0);if(1===b%2){var c=Math.floor(c),a=this.j(c),b=this.j(c+1),d=this.j(c+2),c=this.j(c+3);return Q.AE(a.x,a.y,b.x,b.y,d.x,d.y,c.x,c.y)}if(0<c&&c+1<a)return a=this.j(c-1),b=this.j(c+1),a.Ph(b)}d=a/2|0;if(0===a%2)return a=this.j(d-1),b=this.j(d),a.Ph(b);var a=this.j(d-1),b=this.j(d),d=this.j(d+1),c=a.Wi(b),e=b.Wi(d);return c>e?a.Ph(b):b.Ph(d)};
G(W,{points:"points"},function(){return this.nc},function(a){var b=this.nc;if(b!==a){var c=null;if(Array.isArray(a)){var d=0===a.length%2;if(d)for(var e=0;e<a.length;e++)if("number"!==typeof a[e]||isNaN(a[e])){d=!1;break}if(d)for(c=new N(z),d=0;d<a.length/2;d++)e=(new z(a[2*d],a[2*d+1])).freeze(),c.add(e);else{for(var f=!0,d=0;d<a.length;d++)if(e=a[d],!Ea(e)||"number"!==typeof e.x||isNaN(e.x)||"number"!==typeof e.y||isNaN(e.y)){f=!1;break}if(f)for(c=new N(z),d=0;d<a.length;d++)e=a[d],c.add((new z(e.x,
e.y)).freeze());else v("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+a)}}else if(a instanceof N)for(c=a.copy(),a=c.i;a.next();)a.value.freeze();else v("Link.points value is not an instance of List or Array: "+a);c.freeze();this.nc=c;this.Dd();Vp(this);this.g&&this.g.rb.Fc&&(this.Xm=c);this.h("points",b,c)}});H(W,{Z:"pointsCount"},function(){return this.nc.count});W.prototype.getPoint=W.prototype.j=function(a){return this.nc.l[a]};
W.prototype.setPoint=W.prototype.Ne=function(a,b){null===this.Qd&&v("Call Link.startRoute before modifying the points of the route.");this.nc.Pf(a,b)};W.prototype.setPointAt=W.prototype.L=function(a,b,c){null===this.Qd&&v("Call Link.startRoute before modifying the points of the route.");this.nc.Pf(a,new z(b,c))};W.prototype.insertPoint=function(a,b){null===this.Qd&&v("Call Link.startRoute before modifying the points of the route.");this.nc.pd(a,b)};
W.prototype.insertPointAt=W.prototype.n=function(a,b,c){null===this.Qd&&v("Call Link.startRoute before modifying the points of the route.");this.nc.pd(a,new z(b,c))};W.prototype.addPoint=W.prototype.Vg=function(a){null===this.Qd&&v("Call Link.startRoute before modifying the points of the route.");this.nc.add(a)};W.prototype.addPointAt=W.prototype.Uj=function(a,b){null===this.Qd&&v("Call Link.startRoute before modifying the points of the route.");this.nc.add(new z(a,b))};
W.prototype.removePoint=W.prototype.VC=function(a){null===this.Qd&&v("Call Link.startRoute before modifying the points of the route.");this.nc.Cc(a)};W.prototype.clearPoints=W.prototype.rn=function(){null===this.Qd&&v("Call Link.startRoute before modifying the points of the route.");this.nc.clear()};
W.prototype.movePoints=W.prototype.sk=function(a,b){for(var c=new N(z),d=this.nc.i;d.next();){var e=d.value;c.add((new z(e.x+a,e.y+b)).freeze())}c.freeze();d=this.nc;this.nc=c;this.Dd();Vp(this);this.g&&this.g.rb.Fc&&(this.Xm=c);this.h("points",d,c)};W.prototype.startRoute=W.prototype.yk=function(){null===this.Qd&&(this.Qd=this.nc,this.nc=this.nc.copy())};
W.prototype.commitRoute=W.prototype.Lh=function(){if(null!==this.Qd){for(var a=this.Qd,b=this.nc,c=Infinity,d=Infinity,e=a.l,f=e.length,g=0;g<f;g++)var h=e[g],c=Math.min(h.x,c),d=Math.min(h.y,d);for(var k=Infinity,l=Infinity,m=b.l,n=m.length,g=0;g<n;g++)h=m[g],k=Math.min(h.x,k),l=Math.min(h.y,l),h.freeze();b.freeze();if(n===f)for(g=0;g<n;g++){if(f=e[g],h=m[g],f.x-c!==h.x-k||f.y-d!==h.y-l){this.Dd();break}}else this.Dd();this.Qd=null;this.g&&this.g.rb.Fc&&(this.Xm=b);Vp(this);this.h("points",a,b)}};
W.prototype.rollbackRoute=W.prototype.vG=function(){null!==this.Qd&&(this.nc=this.Qd,this.Qd=null)};function Vp(a){0===a.nc.count?a.wf=!1:(a.wf=!0,a.lm=a.j(0).copy(),a.pm=a.j(a.Z-1).copy(),Wp(a,!1))}W.prototype.invalidateRoute=W.prototype.Ab=function(){if(!(this.lx||this.g&&this.g.V.Ua)){var a=this.path;null!==a&&(this.wf=!1,this.Dd(),a.H())}};G(W,{ho:null},function(){return this.lx},function(a){this.lx=a});
W.prototype.updateRoute=function(){if(!this.wf&&!this.Yv){var a=!0;try{this.Yv=!0,this.yk(),a=this.computePoints()}finally{this.Yv=!1,a?this.Lh():this.vG()}}};
W.prototype.computePoints=function(){var a=this.g;if(null===a)return!1;var b=this.M,c=null;null===b?(a.dl||(a.St=new X,a.St.ka=Q.no,a.St.Na=0,a.dl=new V,a.dl.add(a.St),a.dl.Ee()),this.lm&&(a.dl.position=a.dl.location=this.lm,a.dl.Ee(),b=a.dl,c=a.St)):c=this.Ic;if(null!==c){var d=ln(c);d!==b&&b.sa()?c=d:(d=b.findVisibleNode(),null!==d&&d!==b?(b=d,c=d.ek("")):b=d)}this.bB=b;if(null===b||null===c||!b.location.w())return!1;var d=this.R,e=null;null===d?(a.el||(a.Tt=new X,a.Tt.ka=Q.no,a.Tt.Na=0,a.el=new V,
a.el.add(a.Tt),a.el.Ee()),this.pm&&(a.el.position=a.el.location=this.pm,a.el.Ee(),d=a.el,e=a.Tt)):e=this.xd;null!==e&&(a=ln(e),a!==d&&d.sa()?e=a:(a=d.findVisibleNode(),null!==a&&a!==d?(d=a,e=a.ek("")):d=a));this.dB=d;if(null===d||null===e||!d.location.w())return!1;var a=this.Z,f=Xp(this,c),g=Yp(this,e),h=c===e&&null!==c,k=this.Jb,l=this.me===Ni;this.qh=h&&!k?l=!0:!1;var m=this.er===Ei||h;if(k||f!==td||g!==td||h){l=this.mk;m&&(k&&l||h)&&this.rn();var n=h?this.computeCurviness():0,p=this.getLinkPoint(b,
c,f,!0,k,d,e),q=0,s=0,t=0;if(k||f!==td||h){var u=this.computeEndSegmentLength(b,c,f,!0),t=this.getLinkDirection(b,c,p,f,!0,k,d,e);h&&(t-=k?90:30,0>n&&(t-=180));0>t?t+=360:360<=t&&(t-=360);h&&(u+=Math.abs(n));0===t?q=u:90===t?s=u:180===t?q=-u:270===t?s=-u:(q=u*Math.cos(t*Math.PI/180),s=u*Math.sin(t*Math.PI/180));if(f.Fd()&&h){var x=c.Ra(Dd,Va()),B=Wa(x.x+1E3*q,x.y+1E3*s);this.getLinkPointFromPoint(b,c,x,B,!0,p);A(x);A(B)}}var u=this.getLinkPoint(d,e,g,!1,k,b,c),y=0,C=0,K=0;if(k||g!==td||h)x=this.computeEndSegmentLength(d,
e,g,!1),K=this.getLinkDirection(d,e,u,g,!1,k,b,c),h&&(K+=k?0:30,0>n&&(K+=180)),0>K?K+=360:360<=K&&(K-=360),h&&(x+=Math.abs(n)),0===K?y=x:90===K?C=x:180===K?y=-x:270===K?C=-x:(y=x*Math.cos(K*Math.PI/180),C=x*Math.sin(K*Math.PI/180)),g.Fd()&&h&&(x=e.Ra(Dd,Va()),B=Wa(x.x+1E3*y,x.y+1E3*C),this.getLinkPointFromPoint(d,e,x,B,!1,u),A(x),A(B));e=p;if(k||f!==td||h)e=new z(p.x+q,p.y+s);c=u;if(k||g!==td||h)c=new z(u.x+y,u.y+C);!m&&!k&&f===td&&3<a&&this.adjustPoints(0,p,a-2,c)?this.Ne(a-1,u):!m&&!k&&g===td&&
3<a&&this.adjustPoints(1,e,a-1,u)?this.Ne(0,p):!m&&!k&&4<a&&this.adjustPoints(1,e,a-2,c)?(this.Ne(0,p),this.Ne(a-1,u)):!m&&k&&6<=a&&!l&&this.adjustPoints(1,e,a-2,c)?(this.Ne(0,p),this.Ne(a-1,u)):(this.rn(),this.Vg(p),(k||f!==td||h)&&this.Vg(e),k&&this.addOrthoPoints(e,t,c,K,b,d),(k||g!==td||h)&&this.Vg(c),this.Vg(u))}else f=!1,!m&&3<=a&&(m=this.getLinkPoint(b,c,td,!0,!1,d,e),g=this.getLinkPoint(d,e,td,!1,!1,b,c),f=this.adjustPoints(0,m,a-1,g))&&(m=this.getLinkPoint(b,c,td,!0,!1,d,e),g=this.getLinkPoint(d,
e,td,!1,!1,b,c),this.adjustPoints(0,m,a-1,g)),f||(this.rn(),l?(a=this.getLinkPoint(b,c,td,!0,!1,d,e),m=this.getLinkPoint(d,e,td,!1,!1,b,c),f=m.x-a.x,g=m.y-a.y,h=this.computeCurviness(),l=k=0,p=a.x+f/3,t=a.y+g/3,q=p,s=t,Q.u(g,0)?s=0<f?s-h:s+h:(k=-f/g,l=Math.sqrt(h*h/(k*k+1)),0>h&&(l=-l),q=(0>g?-1:1)*l+p,s=k*(q-p)+t),p=a.x+2*f/3,t=a.y+2*g/3,u=p,y=t,Q.u(g,0)?y=0<f?y-h:y+h:(u=(0>g?-1:1)*l+p,y=k*(u-p)+t),this.rn(),this.Vg(a),this.Uj(q,s),this.Uj(u,y),this.Vg(m),this.Ne(0,this.getLinkPoint(b,c,td,!0,!1,
d,e)),this.Ne(3,this.getLinkPoint(d,e,td,!1,!1,b,c))):(a=d,d=this.getLinkPoint(b,c,td,!0,!1,a,e),e=this.getLinkPoint(a,e,td,!1,!1,b,c),this.hasCurviness()?(g=e.x-d.x,b=e.y-d.y,c=this.computeCurviness(),a=d.x+g/2,m=d.y+b/2,f=a,h=m,Q.u(b,0)?h=0<g?h-c:h+c:(g=-g/b,f=Math.sqrt(c*c/(g*g+1)),0>c&&(f=-f),f=(0>b?-1:1)*f+a,h=g*(f-a)+m),this.Vg(d),this.Uj(f,h)):this.Vg(d),this.Vg(e)));return!0};
function Zp(a,b){Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9E9:a.x-9E9,b.y=a.y):(b.y=b.y>=a.y?a.y+9E9:a.y-9E9,b.x=a.x);return b}
W.prototype.getLinkPointFromPoint=function(a,b,c,d,e,f){void 0===f&&(f=new z);if(null===a||null===b)return f.assign(c),f;a.sa()||(e=a.findVisibleNode(),null!==e&&e!==a&&(b=e.port));var g=e=0,h=0,k=0;a=null;e=b.I;null===e||e.gf()||(e=e.I);if(null===e)e=d.x,g=d.y,h=c.x,k=c.y;else{a=e.Ve;e=1/(a.m11*a.m22-a.m12*a.m21);var h=a.m22*e,k=-a.m12*e,l=-a.m21*e,m=a.m11*e,n=e*(a.m21*a.dy-a.m22*a.dx),p=e*(a.m12*a.dx-a.m11*a.dy);e=d.x*h+d.y*l+n;g=d.x*k+d.y*m+p;h=c.x*h+c.y*l+n;k=c.x*k+c.y*m+p}b.Bn(e,g,h,k,f);null!==
a&&f.transform(a);return f};function $p(a,b){var c=b.kq;null===c&&(c=new aq,c.port=b,c.dc=b.J,b.kq=c);return bq(c,a)}
W.prototype.getLinkPoint=function(a,b,c,d,e,f,g,h){void 0===h&&(h=new z);if(c.Jc())return b.Ra(c,h),h;if(c.Fn()&&(c=$p(this,b),null!==c)){h.assign(c.Jn);if(e&&this.sv===Jp){var k=$p(this,g);if(c.Al<k.Al){c=Va();var k=Va(),l=new D(b.Ra(ud,c),b.Ra(Hd,k)),m=this.computeSpot(!d);a=this.getLinkPoint(f,g,m,!d,e,a,b,k);a.x>=l.x&&a.x<=l.x+l.width?h.x=a.x:a.y>=l.y&&a.y<=l.y+l.height&&(h.y=a.y);A(c);A(k)}}return h}f=b.Ra(Dd,Va());k=c=null;this.Z>(e?6:2)?(k=d?this.j(1):this.j(this.Z-2),e&&(k=Zp(f,k.copy()))):
(c=Va(),k=g.Ra(Dd,c),e&&(k=Zp(f,k)));this.getLinkPointFromPoint(a,b,f,k,d,h);A(f);null!==c&&A(c);return h};
W.prototype.getLinkDirection=function(a,b,c,d,e,f,g,h){a:if(d.Jc())c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:.5>d.x?225:.5<d.x?45:0;else{if(d.Fn()){var k=$p(this,b);if(null!==k)switch(k.wd){case 1:c=270;break a;case 2:c=180;break a;default:case 4:c=0;break a;case 8:c=90;break a}}var k=b.Ra(Dd,Va()),l=null,m=null;this.Z>(f?6:2)?(m=e?this.j(1):this.j(this.Z-2),m=f?Zp(k,m.copy()):c):(l=Va(),m=h.Ra(Dd,l));c=0;c=Math.abs(m.x-k.x)>Math.abs(m.y-k.y)?m.x>=k.x?0:180:m.y>=
k.y?90:270;A(k);null!==l&&A(l)}d.Fd()&&g.$g(a)&&(c+=180,360<=c&&(c-=360));a=wp;a=e?this.Br:this.ss;a===wp&&(a=e?b.Br:b.ss);switch(a){case xp:b=b.gk();c+=b;360<=c&&(c-=360);break;case wp:case Hm:b=b.gk();if(0===b)break;45<=b&&135>b?c+=90:135<=b&&225>b?c+=180:225<=b&&315>b&&(c+=270);360<=c&&(c-=360)}return c};W.prototype.computeEndSegmentLength=function(a,b,c,d){if(null!==b&&c.Fn()&&(a=$p(this,b),null!==a))return a.Ku;a=NaN;a=d?this.fk:this.Bk;null!==b&&isNaN(a)&&(a=d?b.fk:b.Bk);isNaN(a)&&(a=10);return a};
W.prototype.computeSpot=function(a){return a?Xp(this,this.Ic):Yp(this,this.xd)};function Xp(a,b){if(null===b)return Dd;var c=a.Za;c.kc()&&(void 0===b&&(b=a.Ic),null!==b&&(c=b.Za));return c===ee?td:c}function Yp(a,b){if(null===b)return Dd;var c=a.ab;c.kc()&&(void 0===b&&(b=a.xd),null!==b&&(c=b.ab));return c===ee?td:c}W.prototype.computeOtherPoint=function(a,b){var c=b.Ra(Dd),d;d=b.kq;d=null!==d?bq(d,this):null;null!==d&&(c=d.Jn);return c};
W.prototype.computeShortLength=function(a){return a?cq(this):dq(this)};function cq(a){var b=a.Cr;isNaN(b)&&(a=a.Ic,null!==a&&(b=a.Cr));return isNaN(b)?0:b}function dq(a){var b=a.us;isNaN(b)&&(a=a.xd,null!==a&&(b=a.us));return isNaN(b)?0:b}
W.prototype.Yi=function(a,b,c,d,e,f){if(!1===this.Of)return!1;void 0===b&&(b=null);void 0===c&&(c=null);var g=f;void 0===f&&(g=hb(),g.reset());g.multiply(this.transform);if(this.xl(a,g))return to(this,b,c,e),void 0===f&&jb(g),!0;if(this.Gf(a,g)){var h=!1;if(!this.Yf)for(var k=this.la.l,l=k.length;l--;){var m=k[l];if(m.visible||m===this.Kb){var n=m.Q,p=this.ta;if(!(n.x>p.width||n.y>p.height||0>n.x+n.width||0>n.y+n.height)){n=hb();n.set(g);if(m instanceof L)h=m.Yi(a,b,c,d,e,n);else if(this.path===m){var h=
m,q=a,s=d,p=n;if(!1===h.Of)h=!1;else if(p.multiply(h.transform),s)b:{var t=q,u=p;if(h.xl(t,u))h=!0;else{if(void 0===u&&(u=h.transform,t.Vi(h.Q))){h=!0;break b}var p=t.left,q=t.right,s=t.top,t=t.bottom,x=Va(),B=Va(),y=Va(),C=hb();C.set(u);C.IC(h.transform);C.ay();B.x=q;B.y=s;B.transform(C);x.x=p;x.y=s;x.transform(C);u=!1;Co(h,x,B,y)?u=!0:(x.x=q,x.y=t,x.transform(C),Co(h,x,B,y)?u=!0:(B.x=p,B.y=t,B.transform(C),Co(h,x,B,y)?u=!0:(x.x=p,x.y=s,x.transform(C),Co(h,x,B,y)&&(u=!0))));jb(C);A(x);A(B);A(y);
h=u}}else h=h.xl(q,p)}else h=Mm(m,a,d,n);h&&(null!==b&&(m=b(m)),m&&(null===c||c(m))&&e.add(m));jb(n)}}}void 0===f&&jb(g);return h||null!==this.background||null!==this.sl}void 0===f&&jb(g);return!1};H(W,{Jb:"isOrthogonal"},function(){return 2===(this.cl.value&2)});H(W,{mk:"isAvoiding"},function(){return 4===(this.cl.value&4)});W.prototype.computeCurve=function(){if(null===this.qh){var a=this.Ic,b=this.Jb;this.qh=null!==a&&a===this.xd&&!b}return this.qh?Ni:this.me};
W.prototype.computeCorner=function(){if(this.me===Ni)return 0;var a=this.Kx;if(isNaN(a)||0>a)a=10;return a};W.prototype.computeCurviness=function(){var a=this.Gu;if(isNaN(a)){var b=this.xe;if(0!==b){var a=10,c=this.g;null!==c&&(a=c.hv);c=Math.abs(b);a=a/2+((c-1)/2|0)*a;0===c%2&&(a=-a);0>b&&(a=-a)}else a=10}return a};W.prototype.computeThickness=function(){var a=this.path;return null!==a?Math.max(a.Na,1):1};W.prototype.hasCurviness=function(){return!isNaN(this.Gu)||0!==this.xe&&!this.Jb};
W.prototype.adjustPoints=function(a,b,c,d){var e=this.er;if(this.Jb){if(e===tn)return!1;e===un&&(e=sn)}switch(e){case tn:var f=this.j(a),g=this.j(c);if(!f.A(b)||!g.A(d)){var e=f.x,f=f.y,h=g.x-e,k=g.y-f,l=Math.sqrt(h*h+k*k);if(!Q.u(l,0)){var m=0;Q.u(h,0)?m=0>k?-Math.PI/2:Math.PI/2:(m=Math.atan(k/Math.abs(h)),0>h&&(m=Math.PI-m));var g=b.x,n=b.y,k=d.x-g,p=d.y-n,q=Math.sqrt(k*k+p*p),h=0;Q.u(k,0)?h=0>p?-Math.PI/2:Math.PI/2:(h=Math.atan(p/Math.abs(k)),0>k&&(h=Math.PI-h));l=q/l;m=h-m;this.Ne(a,b);for(a+=
1;a<c;a++)b=this.j(a),h=b.x-e,k=b.y-f,b=Math.sqrt(h*h+k*k),Q.u(b,0)||(p=0,Q.u(h,0)?p=0>k?-Math.PI/2:Math.PI/2:(p=Math.atan(k/Math.abs(h)),0>h&&(p=Math.PI-p)),h=p+m,b*=l,this.L(a,g+b*Math.cos(h),n+b*Math.sin(h)));this.Ne(c,d)}}return!0;case un:f=this.j(a);n=this.j(c);if(!f.A(b)||!n.A(d)){var e=f.x,f=f.y,g=n.x,n=n.y,l=(g-e)*(g-e)+(n-f)*(n-f),h=b.x,m=b.y,k=d.x,p=d.y,q=0,s=1,q=0!==k-h?(p-m)/(k-h):9E9;0!==q&&(s=Math.sqrt(1+1/(q*q)));this.Ne(a,b);for(a+=1;a<c;a++){b=this.j(a);var t=b.x,u=b.y,x=.5;0!==l&&
(x=((e-t)*(e-g)+(f-u)*(f-n))/l);var B=e+x*(g-e),y=f+x*(n-f);b=Math.sqrt((t-B)*(t-B)+(u-y)*(u-y));u<q*(t-B)+y&&(b=-b);0<q&&(b=-b);t=h+x*(k-h);x=m+x*(p-m);0!==q?(b=t+b/s,this.L(a,b,x-(b-t)/q)):this.L(a,t,x+b)}this.Ne(c,d)}return!0;case sn:return this.Jb&&(e=this.j(a),f=this.j(a+1),g=this.j(a+2),Q.u(e.y,f.y)?Q.u(f.x,g.x)?this.L(a+1,f.x,b.y):Q.u(f.y,g.y)&&this.L(a+1,b.x,f.y):Q.u(e.x,f.x)&&(Q.u(f.y,g.y)?this.L(a+1,b.x,f.y):Q.u(f.x,g.x)&&this.L(a+1,f.x,b.y)),e=this.j(c),f=this.j(c-1),g=this.j(c-2),Q.u(e.y,
f.y)?Q.u(f.x,g.x)?this.L(c-1,f.x,d.y):Q.u(f.y,g.y)&&this.L(c-1,d.x,f.y):Q.u(e.x,f.x)&&(Q.u(f.y,g.y)?this.L(c-1,d.x,f.y):Q.u(f.x,g.x)&&this.L(c-1,f.x,d.y))),this.Ne(a,b),this.Ne(c,d),!0;default:return!1}};
W.prototype.addOrthoPoints=function(a,b,c,d,e,f){b=-45<=b&&45>b?0:45<=b&&135>b?90:135<=b&&225>b?180:270;d=-45<=d&&45>d?0:45<=d&&135>d?90:135<=d&&225>d?180:270;var g=e.Q.copy(),h=f.Q.copy();if(g.w()&&h.w()){g.Ze(8,8);h.Ze(8,8);g.Zh(a);h.Zh(c);var k,l;if(0===b)if(c.x>a.x||270===d&&c.y<a.y&&h.right>a.x||90===d&&c.y>a.y&&h.right>a.x)k=new z(c.x,a.y),l=new z(c.x,(a.y+c.y)/2),180===d?(k.x=this.computeMidOrthoPosition(a.x,c.x,!1),l.x=k.x,l.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(k.x=a.x<h.left?this.computeMidOrthoPosition(a.x,
h.left,!1):a.x<h.right&&(270===d&&a.y<h.top||90===d&&a.y>h.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):h.right,l.x=k.x,l.y=c.y):0===d&&a.x<h.left&&a.y>h.top&&a.y<h.bottom&&(k.x=a.x,k.y=a.y<c.y?Math.min(c.y,h.top):Math.max(c.y,h.bottom),l.y=k.y);else{k=new z(a.x,c.y);l=new z((a.x+c.x)/2,c.y);if(180===d||90===d&&c.y<g.top||270===d&&c.y>g.bottom)180===d&&(h.na(a)||g.na(c))?k.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(180===d||90===d)?k.y=this.computeMidOrthoPosition(g.top,Math.max(c.y,
h.bottom),!0):c.y>a.y&&(180===d||270===d)&&(k.y=this.computeMidOrthoPosition(g.bottom,Math.min(c.y,h.top),!0)),l.x=c.x,l.y=k.y;if(k.y>g.top&&k.y<g.bottom)if(c.x>=g.left&&c.x<=a.x||a.x<=h.right&&a.x>=c.x){if(90===d||270===d)k=new z(Math.max((a.x+c.x)/2,a.x),a.y),l=new z(k.x,c.y)}else k.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,0===d?g.top:Math.min(g.top,h.top)):Math.max(c.y,0===d?g.bottom:Math.max(g.bottom,h.bottom)),l.x=c.x,l.y=k.y}else if(180===b)if(c.x<a.x||270===d&&c.y<a.y&&h.left<a.x||
90===d&&c.y>a.y&&h.left<a.x)k=new z(c.x,a.y),l=new z(c.x,(a.y+c.y)/2),0===d?(k.x=this.computeMidOrthoPosition(a.x,c.x,!1),l.x=k.x,l.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(k.x=a.x>h.right?this.computeMidOrthoPosition(a.x,h.right,!1):a.x>h.left&&(270===d&&a.y<h.top||90===d&&a.y>h.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):h.left,l.x=k.x,l.y=c.y):180===d&&a.x>h.right&&a.y>h.top&&a.y<h.bottom&&(k.x=a.x,k.y=a.y<c.y?Math.min(c.y,h.top):Math.max(c.y,h.bottom),l.y=k.y);else{k=new z(a.x,c.y);l=new z((a.x+
c.x)/2,c.y);if(0===d||90===d&&c.y<g.top||270===d&&c.y>g.bottom)0===d&&(h.na(a)||g.na(c))?k.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(0===d||90===d)?k.y=this.computeMidOrthoPosition(g.top,Math.max(c.y,h.bottom),!0):c.y>a.y&&(0===d||270===d)&&(k.y=this.computeMidOrthoPosition(g.bottom,Math.min(c.y,h.top),!0)),l.x=c.x,l.y=k.y;if(k.y>g.top&&k.y<g.bottom)if(c.x<=g.right&&c.x>=a.x||a.x>=h.left&&a.x<=c.x){if(90===d||270===d)k=new z(Math.min((a.x+c.x)/2,a.x),a.y),l=new z(k.x,c.y)}else k.y=270===
d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,180===d?g.top:Math.min(g.top,h.top)):Math.max(c.y,180===d?g.bottom:Math.max(g.bottom,h.bottom)),l.x=c.x,l.y=k.y}else if(90===b)if(c.y>a.y||180===d&&c.x<a.x&&h.bottom>a.y||0===d&&c.x>a.x&&h.bottom>a.y)k=new z(a.x,c.y),l=new z((a.x+c.x)/2,c.y),270===d?(k.y=this.computeMidOrthoPosition(a.y,c.y,!0),l.x=c.x,l.y=k.y):180===d&&c.x<a.x||0===d&&c.x>a.x?(k.y=a.y<h.top?this.computeMidOrthoPosition(a.y,h.top,!0):a.y<h.bottom&&(180===d&&a.x<h.left||0===d&&a.x>h.right)?
this.computeMidOrthoPosition(a.y,c.y,!0):h.bottom,l.x=c.x,l.y=k.y):90===d&&a.y<h.top&&a.x>h.left&&a.x<h.right&&(k.x=a.x<c.x?Math.min(c.x,h.left):Math.max(c.x,h.right),k.y=a.y,l.x=k.x);else{k=new z(c.x,a.y);l=new z(c.x,(a.y+c.y)/2);if(270===d||0===d&&c.x<g.left||180===d&&c.x>g.right)270===d&&(h.na(a)||g.na(c))?k.x=this.computeMidOrthoPosition(a.x,c.x,!1):c.x<a.x&&(270===d||0===d)?k.x=this.computeMidOrthoPosition(g.left,Math.max(c.x,h.right),!1):c.x>a.x&&(270===d||180===d)&&(k.x=this.computeMidOrthoPosition(g.right,
Math.min(c.x,h.left),!1)),l.x=k.x,l.y=c.y;if(k.x>g.left&&k.x<g.right)if(c.y>=g.top&&c.y<=a.y||a.y<=h.bottom&&a.y>=c.y){if(0===d||180===d)k=new z(a.x,Math.max((a.y+c.y)/2,a.y)),l=new z(c.x,k.y)}else k.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,90===d?g.left:Math.min(g.left,h.left)):Math.max(c.x,90===d?g.right:Math.max(g.right,h.right)),l.x=k.x,l.y=c.y}else if(c.y<a.y||180===d&&c.x<a.x&&h.top<a.y||0===d&&c.x>a.x&&h.top<a.y)k=new z(a.x,c.y),l=new z((a.x+c.x)/2,c.y),90===d?(k.y=this.computeMidOrthoPosition(a.y,
c.y,!0),l.x=c.x,l.y=k.y):180===d&&c.x<a.x||0===d&&c.x>=a.x?(k.y=a.y>h.bottom?this.computeMidOrthoPosition(a.y,h.bottom,!0):a.y>h.top&&(180===d&&a.x<h.left||0===d&&a.x>h.right)?this.computeMidOrthoPosition(a.y,c.y,!0):h.top,l.x=c.x,l.y=k.y):270===d&&a.y>h.bottom&&a.x>h.left&&a.x<h.right&&(k.x=a.x<c.x?Math.min(c.x,h.left):Math.max(c.x,h.right),k.y=a.y,l.x=k.x);else{k=new z(c.x,a.y);l=new z(c.x,(a.y+c.y)/2);if(90===d||0===d&&c.x<g.left||180===d&&c.x>g.right)90===d&&(h.na(a)||g.na(c))?k.x=this.computeMidOrthoPosition(a.x,
c.x,!1):c.x<a.x&&(90===d||0===d)?k.x=this.computeMidOrthoPosition(g.left,Math.max(c.x,h.right),!1):c.x>a.x&&(90===d||180===d)&&(k.x=this.computeMidOrthoPosition(g.right,Math.min(c.x,h.left),!1)),l.x=k.x,l.y=c.y;if(k.x>g.left&&k.x<g.right)if(c.y<=g.bottom&&c.y>=a.y||a.y>=h.top&&a.y<=c.y){if(0===d||180===d)k=new z(a.x,Math.min((a.y+c.y)/2,a.y)),l=new z(c.x,k.y)}else k.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,270===d?g.left:Math.min(g.left,h.left)):Math.max(c.x,270===d?g.right:Math.max(g.right,
h.right)),l.x=k.x,l.y=c.y}var m=k,n=l;if(this.mk){var p=this.g,q;(q=null===p)||(p.rb.hg?q=!1:(q=p.Ha,q=q instanceof $g?!q.du||q.CF:!0),q=!q);if(q||g.na(c)&&!f.$g(e)||h.na(a)&&!e.$g(f)||e===f||this.layer.bc)a=!1;else if(e=im(p,!0,this.Ca,null),e.Hn(Math.min(a.x,m.x),Math.min(a.y,m.y),Math.abs(a.x-m.x),Math.abs(a.y-m.y))&&e.Hn(Math.min(m.x,n.x),Math.min(m.y,n.y),Math.abs(m.x-n.x),Math.abs(m.y-n.y))&&e.Hn(Math.min(n.x,c.x),Math.min(n.y,c.y),Math.abs(n.x-c.x),Math.abs(n.y-c.y)))a=!1;else if(g=g.copy().eh(h),
g.Ze(2*e.qn,2*e.on),eq(e,a,b,c,d,g),h=fq(e,c.x,c.y),e.abort||999999!==h||(lm(e),h=e.rD,g.Ze(e.qn*h,e.on*h),eq(e,a,b,c,d,g),h=fq(e,c.x,c.y)),e.abort||999999!==h||(lm(e),h=e.zC,g.Ze(e.qn*h,e.on*h),eq(e,a,b,c,d,g),h=fq(e,c.x,c.y)),!e.abort&&999999===h&&e.HD&&(lm(e),eq(e,a,b,c,d,e.Qa),h=fq(e,c.x,c.y)),!e.abort&&999999>h&&0!==fq(e,c.x,c.y)){gq(this,e,c.x,c.y,d,!0);d=this.j(2);if(4>this.Z)0===b||180===b?(d.x=a.x,d.y=c.y):(d.x=c.x,d.y=a.y),this.L(2,d.x,d.y),this.n(3,d.x,d.y);else if(c=this.j(3),0===b||180===
b)Q.u(d.x,c.x)?(b=0===b?Math.max(d.x,a.x):Math.min(d.x,a.x),this.L(2,b,a.y),this.L(3,b,c.y)):Q.u(d.y,c.y)?(Math.abs(a.y-d.y)<=e.on/2&&(this.L(2,d.x,a.y),this.L(3,c.x,a.y)),this.n(2,d.x,a.y)):this.L(2,a.x,d.y);else if(90===b||270===b)Q.u(d.y,c.y)?(b=90===b?Math.max(d.y,a.y):Math.min(d.y,a.y),this.L(2,a.x,b),this.L(3,c.x,b)):Q.u(d.x,c.x)?(Math.abs(a.x-d.x)<=e.qn/2&&(this.L(2,a.x,d.y),this.L(3,a.x,c.y)),this.n(2,a.x,d.y)):this.L(2,d.x,a.y);a=!0}else a=!1}else a=!1;a||(this.Vg(k),this.Vg(l))}};
W.prototype.computeMidOrthoPosition=function(a,b){if(this.hasCurviness()){var c=this.computeCurviness();return(a+b)/2+c}return(a+b)/2};function Fh(a){if(!a.mk)return!1;var b=a.points.l,c=b.length;if(4>c)return!1;a=im(a.g,!0,a.Ca,null);for(var d=1;d<c-2;d++){var e=b[d],f=b[d+1];if(!a.Hn(Math.min(e.x,f.x),Math.min(e.y,f.y),Math.abs(e.x-f.x),Math.abs(e.y-f.y)))return!0}return!1}
function gq(a,b,c,d,e,f){var g=b.qn,h=b.on,k=fq(b,c,d),l=c,m=d;for(0===e?l+=g:90===e?m+=h:180===e?l-=g:m-=h;1<k&&fq(b,l,m)===k-1;)c=l,d=m,0===e?l+=g:90===e?m+=h:180===e?l-=g:m-=h,k-=1;if(f){if(1<k)if(180===e||0===e)c=Math.floor(c/g)*g+g/2;else if(90===e||270===e)d=Math.floor(d/h)*h+h/2}else c=Math.floor(c/g)*g+g/2,d=Math.floor(d/h)*h+h/2;1<k&&(f=e,l=c,m=d,0===e?(f=90,m+=h):90===e?(f=180,l-=g):180===e?(f=270,m-=h):270===e&&(f=0,l+=g),fq(b,l,m)===k-1?gq(a,b,l,m,f,!1):(l=c,m=d,0===e?(f=270,m-=h):90===
e?(f=0,l+=g):180===e?(f=90,m+=h):270===e&&(f=180,l-=g),fq(b,l,m)===k-1&&gq(a,b,l,m,f,!1)));a.Uj(c,d)}W.prototype.findClosestSegment=function(a){var b=a.x;a=a.y;for(var c=this.j(0),d=this.j(1),e=Yc(b,a,c.x,c.y,d.x,d.y),f=0,g=1;g<this.Z-1;g++){var c=this.j(g+1),h=Yc(b,a,d.x,d.y,c.x,c.y),d=c;h<e&&(f=g,e=h)}return f};W.prototype.invalidateGeometry=W.prototype.Dd=function(){this.za=null;this.H()};H(W,{yc:"geometry"},function(){null===this.za&&(this.updateRoute(),this.za=this.makeGeometry());return this.za});
W.prototype.Tr=function(){if(null===this.za&&!1!==this.wf){this.za=this.makeGeometry();var a=this.path;if(null!==a){a.za=this.za;for(var b=this.la.l,c=b.length,d=0;d<c;d++){var e=b[d];e!==a&&e.Hf&&e instanceof X&&(e.za=this.za)}}}};
W.prototype.makeGeometry=function(){var a=this.Z;if(2>a){var b=new Ke(Le),c=new Me(0,0);b.Xa.add(c);return b}var d=!1,b=this.g;null!==b&&0!==b.V.be&&Up(this)&&(d=!0);var c=b=0,e=this.j(0).copy(),f=e.copy(),b=this.nc.l,g=this.computeCurve();if(g===Ni&&3<=a&&!Q.Sa(this.eo,0))if(3===a)var h=this.j(1),b=Math.min(e.x,h.x),c=Math.min(e.y,h.y),h=this.j(2),b=Math.min(b,h.x),c=Math.min(c,h.y);else{if(this.Jb)for(h=0;h<a;h++)c=b[h],f.x=Math.min(c.x,f.x),f.y=Math.min(c.y,f.y);else for(h=3;h<a;h+=3)h+3>=a&&(h=
a-1),b=this.j(h),f.x=Math.min(b.x,f.x),f.y=Math.min(b.y,f.y);b=f.x;c=f.y}else{for(h=0;h<a;h++)c=b[h],f.x=Math.min(c.x,f.x),f.y=Math.min(c.y,f.y);b=f.x;c=f.y}b-=this.px.x;c-=this.px.y;e.x-=b;e.y-=c;if(2===a){var k=this.j(1).copy();k.x-=b;k.y-=c;0!==cq(this)&&hq(this,e,!0,f);0!==dq(this)&&hq(this,k,!1,f);b=new Ke(Oe);b.da=e.x;b.ea=e.y;b.q=k.x;b.s=k.y}else{k=E();0!==cq(this)&&hq(this,e,!0,f);S(k,e.x,e.y,!1,!1);if(g===Ni&&3<=a&&!Q.Sa(this.eo,0))if(3===a)h=this.j(1),a=h.x-b,d=h.y-c,h=this.j(2).copy(),
h.x-=b,h.y-=c,0!==dq(this)&&hq(this,h,!1,f),T(k,a,d,a,d,h.x,h.y);else if(this.Jb){for(var f=new z(b,c),e=this.j(1).copy(),g=new z(b,c),a=new z(b,c),d=this.j(0),l=null,m=this.eo/3,h=1;h<this.Z-1;h++){var l=this.j(h),n=d,p=l,q=this.j(iq(this,l,h,!1));if(!Q.Sa(n.x,p.x)||!Q.Sa(p.x,q.x))if(!Q.Sa(n.y,p.y)||!Q.Sa(p.y,q.y)){var s=m,t=g,u=a;isNaN(s)&&(s=this.eo/3);var x=n.x,n=n.y,B=p.x,p=p.y,y=q.x,q=q.y,C=s*jq(x,n,B,p),s=s*jq(B,p,y,q);Q.Sa(n,p)&&Q.Sa(B,y)&&(B>x?q>p?(t.x=B-C,t.y=p-C,u.x=B+s,u.y=p+s):(t.x=B-
C,t.y=p+C,u.x=B+s,u.y=p-s):q>p?(t.x=B+C,t.y=p-C,u.x=B-s,u.y=p+s):(t.x=B+C,t.y=p+C,u.x=B-s,u.y=p-s));Q.Sa(x,B)&&Q.Sa(p,q)&&(p>n?(y>B?(t.x=B-C,t.y=p-C,u.x=B+s):(t.x=B+C,t.y=p-C,u.x=B-s),u.y=p+s):(y>B?(t.x=B-C,t.y=p+C,u.x=B+s):(t.x=B+C,t.y=p+C,u.x=B-s),u.y=p-s));if(Q.Sa(x,B)&&Q.Sa(B,y)||Q.Sa(n,p)&&Q.Sa(p,q))x=.5*(x+y),n=.5*(n+q),t.x=x,t.y=n,u.x=x,u.y=n;1===h?(e.x=.5*(d.x+l.x),e.y=.5*(d.y+l.y)):2===h&&Q.Sa(d.x,this.j(0).x)&&Q.Sa(d.y,this.j(0).y)&&(e.x=.5*(d.x+l.x),e.y=.5*(d.y+l.y));T(k,e.x-b,e.y-c,g.x-
b,g.y-c,l.x-b,l.y-c);f.set(g);e.set(a);d=l}}h=d.x;d=d.y;f=this.j(this.Z-1);h=.5*(h+f.x);d=.5*(d+f.y);T(k,a.x-b,a.y-c,h-b,d-c,f.x-b,f.y-c)}else for(h=3;h<a;h+=3)d=this.j(h-2),h+3>=a&&(h=a-1),f=this.j(h-1),e=this.j(h),h===a-1&&0!==dq(this)&&(e=e.copy(),hq(this,e,!1,Q.ej)),T(k,d.x-b,d.y-c,f.x-b,f.y-c,e.x-b,e.y-c);else{f=Va();f.assign(this.j(0));for(h=1;h<a;){h=iq(this,f,h,1<h);t=this.j(h);if(h>=a-1){f!==t&&(0!==dq(this)&&(t=t.copy(),hq(this,t,!1,Q.ej)),kq(this,k,-b,-c,f,t,d));break}h=iq(this,t,h+1,h<
a-3);e=k;g=-b;l=-c;m=f;u=this.j(h);x=f;n=d;Q.u(m.y,t.y)&&Q.u(t.x,u.x)?(s=this.computeCorner(),s=Math.min(s,Math.abs(t.x-m.x)/2),s=B=Math.min(s,Math.abs(u.y-t.y)/2),Q.u(s,0)?(kq(this,e,g,l,m,t,n),x.assign(t)):(p=t.x,y=t.y,q=p,C=y,p=t.x>m.x?t.x-s:t.x+s,C=u.y>t.y?t.y+B:t.y-B,kq(this,e,g,l,m,new z(p,y),n),df(e,t.x+g,t.y+l,q+g,C+l),x.k(q,C))):Q.u(m.x,t.x)&&Q.u(t.y,u.y)?(s=this.computeCorner(),B=Math.min(s,Math.abs(t.y-m.y)/2),B=s=Math.min(B,Math.abs(u.x-t.x)/2),Q.u(s,0)?(kq(this,e,g,l,m,t,n),x.assign(t)):
(p=t.x,C=y=t.y,y=t.y>m.y?t.y-B:t.y+B,q=u.x>t.x?t.x+s:t.x-s,kq(this,e,g,l,m,new z(p,y),n),df(e,t.x+g,t.y+l,q+g,C+l),x.k(q,C))):(kq(this,e,g,l,m,t,n),x.assign(t))}A(f)}b=k.m;F(k)}return b};function jq(a,b,c,d){a=c-a;if(isNaN(a)||Infinity===a||-Infinity===a)return NaN;0>a&&(a=-a);b=d-b;if(isNaN(b)||Infinity===b||-Infinity===b)return NaN;0>b&&(b=-b);return Q.Sa(a,0)?b:Q.Sa(b,0)?a:Math.sqrt(a*a+b*b)}
function hq(a,b,c,d){var e=a.Z;if(!(2>e))if(c){var f=a.j(1);c=f.x-d.x;d=f.y-d.y;f=jq(b.x,b.y,c,d);0!==f&&(e=2===e?.5*f:f,a=cq(a),a>e&&(a=e),c=a*(c-b.x)/f,a=a*(d-b.y)/f,b.x+=c,b.y+=a)}else f=a.j(e-2),c=f.x-d.x,d=f.y-d.y,f=jq(b.x,b.y,c,d),0!==f&&(e=2===e?.5*f:f,a=dq(a),a>e&&(a=e),c=a*(b.x-c)/f,a=a*(b.y-d)/f,b.x-=c,b.y-=a)}
function iq(a,b,c,d){for(var e=a.Z,f=b;Q.Sa(b.x,f.x)&&Q.Sa(b.y,f.y);){if(c>=e)return e-1;f=a.j(c++)}if(!Q.Sa(b.x,f.x)&&!Q.Sa(b.y,f.y))return c-1;for(var g=f;Q.Sa(b.x,f.x)&&Q.Sa(f.x,g.x)&&(!d||(b.y>=f.y?f.y>=g.y:f.y<=g.y))||Q.Sa(b.y,f.y)&&Q.Sa(f.y,g.y)&&(!d||(b.x>=f.x?f.x>=g.x:f.x<=g.x));){if(c>=e)return e-1;g=a.j(c++)}return c-2}
function kq(a,b,c,d,e,f,g){if(!g&&Up(a)){g=[];var h=0;a.sa()&&(h=lq(a,e,f,g));var k=e.x,k=e.y;if(0<h)if(Q.u(e.y,f.y))if(e.x<f.x)for(var l=0;l<h;){var m=Math.max(e.x,Math.min(g[l++]-5,f.x-10));b.lineTo(m+c,f.y+d);for(var k=m+c,n=Math.min(m+10,f.x);l<h;){var p=g[l];if(p<n+10)l++,n=Math.min(p+5,f.x);else break}p=(m+n)/2+c;p=f.y-10+d;m=n+c;n=f.y+d;a.me===Di?S(b,m,n,!1,!1):T(b,k,p,m,p,m,n)}else for(l=h-1;0<=l;){m=Math.min(e.x,Math.max(g[l--]+5,f.x+10));b.lineTo(m+c,f.y+d);k=m+c;for(n=Math.max(m-10,f.x);0<=
l;)if(p=g[l],p>n-10)l--,n=Math.max(p-5,f.x);else break;p=f.y-10+d;m=n+c;n=f.y+d;a.me===Di?S(b,m,n,!1,!1):T(b,k,p,m,p,m,n)}else if(Q.u(e.x,f.x))if(e.y<f.y)for(l=0;l<h;){m=Math.max(e.y,Math.min(g[l++]-5,f.y-10));b.lineTo(f.x+c,m+d);k=m+d;for(n=Math.min(m+10,f.y);l<h;)if(p=g[l],p<n+10)l++,n=Math.min(p+5,f.y);else break;p=f.x-10+c;m=f.x+c;n+=d;a.me===Di?S(b,m,n,!1,!1):T(b,p,k,p,n,m,n)}else for(l=h-1;0<=l;){m=Math.min(e.y,Math.max(g[l--]+5,f.y+10));b.lineTo(f.x+c,m+d);k=m+d;for(n=Math.max(m-10,f.y);0<=
l;)if(p=g[l],p>n-10)l--,n=Math.max(p-5,f.y);else break;p=f.x-10+c;m=f.x+c;n+=d;a.me===Di?S(b,m,n,!1,!1):T(b,p,k,p,n,m,n)}}b.lineTo(f.x+c,f.y+d)}
function lq(a,b,c,d){var e=a.g;if(null===e||b.A(c))return 0;for(e=e.fv;e.next();){var f=e.value;if(null!==f&&f.visible)for(var f=f.hb.l,g=f.length,h=0;h<g;h++){var k=f[h];if(k instanceof W){if(k===a)return 0<d.length&&d.sort(function(a,b){return a-b}),d.length;if(k.sa()&&Up(k)){var l=k.Pl;l.w()&&a.Pl.Gf(l)&&!a.usesSamePort(k)&&(l=k.path,null!==l&&l.rk()&&mq(b,c,d,k))}}}}0<d.length&&d.sort(function(a,b){return a-b});return d.length}
function mq(a,b,c,d){for(var e=Q.u(a.y,b.y),f=d.Z,g=d.j(0),h=Va(),k=1;k<f;k++){var l=d.j(k);if(k<f-1){var m=d.j(k+1);if(g.y===l.y&&l.y===m.y){if(l.x>g.x&&m.x>l.x||l.x<g.x&&m.x<l.x)l=m,k++}else g.x===l.x&&l.x===m.x&&(l.y>g.y&&m.y>l.y||l.y<g.y&&m.y<l.y)&&(l=m,k++)}a:{var m=h,n=a.x,p=a.y,q=b.x,s=b.y,t=g.x,g=g.y,u=l.x,x=l.y;if(!Q.u(n,q)){if(Q.u(p,s)&&Q.u(t,u)&&Math.min(n,q)<t&&Math.max(n,q)>t&&Math.min(g,x)<p&&Math.max(g,x)>p&&!Q.u(g,x)){m.x=t;m.y=p;m=!0;break a}}else if(!Q.u(p,s)&&Q.u(g,x)&&Math.min(p,
s)<g&&Math.max(p,s)>g&&Math.min(t,u)<n&&Math.max(t,u)>n&&!Q.u(t,u)){m.x=n;m.y=g;m=!0;break a}m.x=0;m.y=0;m=!1}m&&(e?c.push(h.x):c.push(h.y));g=l}A(h)}H(W,{yr:"firstPickIndex"},function(){return 2>=this.Z?0:this.Jb||Xp(this)!==td?1:0});H(W,{ev:"lastPickIndex"},function(){var a=this.Z;return 0===a?0:2>=a?a-1:this.Jb||Yp(this)!==td?a-2:a-1});function Up(a){a=a.me;return a===ti||a===Di}function Wp(a,b){if(b||Up(a)){var c=a.g;null===c||c.Jk.contains(a)||null===a.$w||c.Jk.add(a,a.$w)}}
function Fi(a,b){var c=a.layer;if(null!==c&&c.visible&&!c.bc){var d=c.g;if(null!==d)for(var e=!1,d=d.fv;d.next();){var f=d.value;if(f.visible)if(f===c)for(var e=!0,g=!1,f=f.hb.l,h=f.length,k=0;k<h;k++){var l=f[k];l instanceof W&&(l===a?g=!0:g&&nq(a,l,b))}else if(e)for(f=f.hb.l,h=f.length,k=0;k<h;k++)l=f[k],l instanceof W&&nq(a,l,b)}}}function nq(a,b,c){if(null!==b&&null!==b.za&&Up(b)){var d=b.Pl;d.w()&&(a.Pl.Gf(d)||c.Gf(d))&&(a.usesSamePort(b)||b.Dd())}}
W.prototype.usesSamePort=function(a){var b=this.Z,c=a.Z;if(0<b&&0<c){var d=this.j(0),e=a.j(0);if(d.Wd(e))return!0;b=this.j(b-1);a=a.j(c-1);if(b.Wd(a)||d.Wd(a)||b.Wd(e))return!0}else if(this.M===a.M||this.R===a.R||this.M==a.R||this.R==a.M)return!0;return!1};W.prototype.Zd=function(a){O.prototype.Zd.call(this,a);if(null!==this.Pd)for(var b=this.Pd.i;b.next();)b.value.Zd(a)};G(W,{er:"adjusting"},function(){return this.so},function(a){var b=this.so;b!==a&&(this.so=a,this.h("adjusting",b,a))});
G(W,{Kx:"corner"},function(){return this.Fo},function(a){var b=this.Fo;b!==a&&(this.Fo=a,this.Dd(),this.h("corner",b,a))});G(W,{me:"curve"},function(){return this.Io},function(a){var b=this.Io;b!==a&&(this.Io=a,this.Ab(),Wp(this,b===Di||b===ti||a===Di||a===ti),this.h("curve",b,a))});G(W,{Gu:"curviness"},function(){return this.Jo},function(a){var b=this.Jo;b!==a&&(this.Jo=a,this.Ab(),this.h("curviness",b,a))});
G(W,{sv:"routing"},function(){return this.cl},function(a){var b=this.cl;b!==a&&(this.cl=a,this.qh=null,this.Ab(),Wp(this,2===(b.value&2)||2===(a.value&2)),this.h("routing",b,a))});G(W,{eo:"smoothness"},function(){return this.Lq},function(a){var b=this.Lq;b!==a&&(this.Lq=a,this.Dd(),this.h("smoothness",b,a))});
function Sp(a){var b=a.kf;if(null!==b){var c=a.vf;if(null!==c){var d=a.Gg,e=a.Ug;a:{if(null!==c&&null!==b.xg)for(a=b.xg.i;a.next();){var f=a.value;if(f.Sn===b&&f.Xr===c&&f.nv===d&&f.ov===e||f.Sn===c&&f.Xr===b&&f.nv===e&&f.ov===d){a=f;break a}}a=null}for(var g=null,h=null,k=b.Lb.l,l=k.length,f=0;f<l;f++){var m=k[f];if(m.kf===b&&m.Gg===d&&m.vf===c&&m.Ug===e||m.kf===c&&m.Gg===e&&m.vf===b&&m.Ug===d)null===h?h=m:(null===g&&(g=new N(W),g.add(h)),g.add(m))}if(null!==g)for(null===a&&(a=new Ap,a.Sn=b,a.nv=
d,a.Xr=c,a.ov=e,zp(b,a),zp(c,a)),a.links=g,b=g.l,f=0;f<b.length;f++)if(m=b[f],0===m.xe){c=1;for(d=0;d<b.length;d++)Math.abs(b[d].xe)===c&&(c++,d=-1);m.dm=a;m.xe=m.M===a.Sn?c:-c;c=m.g;(null===c||c.Ae)&&m.Ab()}}}}
function Rp(a){var b=a.dm;if(null!==b){var c=a.xe;a.dm=null;a.xe=0;b.links.remove(a);if(2>b.links.count)1===b.links.count&&(c=b.links.l[0],c.dm=null,c.xe=0,c.Ab()),c=b.Sn,null!==b&&null!==c.xg&&c.xg.remove(b),c=b.Xr,null!==b&&null!==c.xg&&c.xg.remove(b);else for(c=Math.abs(c),a=0===c%2,b=b.links.i;b.next();){var d=b.value,e=Math.abs(d.xe),f=0===e%2;e>c&&a===f&&(d.xe=0<d.xe?d.xe-2:d.xe+2,d.Ab())}}}function Ap(){sb(this);this.links=this.ov=this.Xr=this.nv=this.Sn=null}
zb(Ap,{Sn:!0,nv:!0,Xr:!0,ov:!0,links:!0,spacing:!0});function jm(){sb(this);this.Wy=this.group=null;this.Hr=!0;this.abort=!1;this.qf=this.pf=1;this.Jp=this.Ip=-1;this.zd=this.yd=8;this.Ob=null;this.HD=!1;this.rD=22;this.zC=111}zb(jm,{group:!0,Wy:!0,Hr:!0,abort:!0,HD:!0,rD:!0,zC:!0});
jm.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;this.pf=Math.floor((a.x-this.yd)/this.yd)*this.yd;this.qf=Math.floor((b-this.zd)/this.zd)*this.zd;this.Ip=Math.ceil((c+2*this.yd)/this.yd)*this.yd;this.Jp=Math.ceil((d+2*this.zd)/this.zd)*this.zd;a=1+(Math.ceil((this.Ip-this.pf)/this.yd)|0);b=1+(Math.ceil((this.Jp-this.qf)/this.zd)|0);if(null===this.Ob||this.fn<a-1||this.gn<b-1){c=[];for(d=0;d<=a;d++){for(var e=[],f=0;f<=b;f++)e[f]=0;c[d]=e}this.Ob=
c;this.fn=a-1;this.gn=b-1}if(null!==this.Ob)for(a=0;a<=this.fn;a++)for(b=0;b<=this.gn;b++)this.Ob[a][b]=999999}};H(jm,{Qa:null},function(){return new D(this.pf,this.qf,this.Ip-this.pf,this.Jp-this.qf)});G(jm,{qn:null},function(){return this.yd},function(a){0<a&&a!==this.yd&&(this.yd=a,this.initialize(this.Qa))});G(jm,{on:null},function(){return this.zd},function(a){0<a&&a!==this.zd&&(this.zd=a,this.initialize(this.Qa))});function oq(a,b,c){return a.pf<=b&&b<=a.Ip&&a.qf<=c&&c<=a.Jp}
function fq(a,b,c){if(!oq(a,b,c))return 0;b-=a.pf;b/=a.yd;c-=a.qf;c/=a.zd;return a.Ob[b|0][c|0]}function mm(a,b,c){oq(a,b,c)&&(b-=a.pf,b/=a.yd,c-=a.qf,c/=a.zd,a.Ob[b|0][c|0]=0)}function lm(a){if(null!==a.Ob)for(var b=0;b<=a.fn;b++)for(var c=0;c<=a.gn;c++)1<=a.Ob[b][c]&&(a.Ob[b][c]|=999999)}
jm.prototype.Hn=function(a,b,c,d){if(a>this.Ip||a+c<this.pf||b>this.Jp||b+d<this.qf)return!0;a=(a-this.pf)/this.yd|0;b=(b-this.qf)/this.zd|0;c=Math.max(0,c)/this.yd+1|0;var e=Math.max(0,d)/this.zd+1|0;0>a&&(c+=a,a=0);0>b&&(e+=b,b=0);if(0>c||0>e)return!0;d=Math.min(a+c-1,this.fn)|0;for(c=Math.min(b+e-1,this.gn)|0;a<=d;a++)for(e=b;e<=c;e++)if(0===this.Ob[a][e])return!1;return!0};
function pq(a,b,c,d,e,f,g,h,k){if(!(b<f||b>g||c<h||c>k)){var l,m;l=b|0;m=c|0;var n=a.Ob[l][m];if(1<=n&&999999>n)for(e?m+=d:l+=d,n+=1;f<=l&&l<=g&&h<=m&&m<=k&&!(n>=a.Ob[l][m]);)a.Ob[l][m]=n,n+=1,e?m+=d:l+=d;l=e?m:l;if(e)if(0<d)for(c+=d;c<l;c+=d)pq(a,b,c,1,!e,f,g,h,k),pq(a,b,c,-1,!e,f,g,h,k);else for(c+=d;c>l;c+=d)pq(a,b,c,1,!e,f,g,h,k),pq(a,b,c,-1,!e,f,g,h,k);else if(0<d)for(b+=d;b<l;b+=d)pq(a,b,c,1,!e,f,g,h,k),pq(a,b,c,-1,!e,f,g,h,k);else for(b+=d;b>l;b+=d)pq(a,b,c,1,!e,f,g,h,k),pq(a,b,c,-1,!e,f,g,
h,k)}}function qq(a,b,c,d,e,f,g,h,k,l,m){for(var n=b|0,p=c|0,q=a.Ob[n][p];0===q&&n>h&&n<k&&p>l&&p<m;)if(g?p+=f:n+=f,q=a.Ob[n][p],1>=Math.abs(n-d)&&1>=Math.abs(p-e))return a.abort=!0,0;n=b|0;p=c|0;q=a.Ob[n][p];b=1;for(a.Ob[n][p]=b;0===q&&n>h&&n<k&&p>l&&p<m;)g?p+=f:n+=f,q=a.Ob[n][p],a.Ob[n][p]=b,b+=1;return g?p:n}
function eq(a,b,c,d,e,f){if(null!==a.Ob){a.abort=!1;var g=b.x,h=b.y;if(oq(a,g,h)){var g=g-a.pf,g=g/a.yd,h=h-a.qf,h=h/a.zd,k=d.x,l=d.y;if(oq(a,k,l))if(k-=a.pf,k/=a.yd,l-=a.qf,l/=a.zd,1>=Math.abs(g-k)&&1>=Math.abs(h-l))a.abort=!0;else{var m=f.x;b=f.y;d=f.x+f.width;var n=f.y+f.height,m=m-a.pf,m=m/a.yd;b-=a.qf;b/=a.zd;d-=a.pf;d/=a.yd;n-=a.qf;n/=a.zd;f=Math.max(0,Math.min(a.fn,m|0));d=Math.min(a.fn,Math.max(0,d|0));b=Math.max(0,Math.min(a.gn,b|0));var n=Math.min(a.gn,Math.max(0,n|0)),g=g|0,h=h|0,k=k|0,
l=l|0,m=g,p=h,q=0===c||90===c?1:-1;(c=90===c||270===c)?p=qq(a,g,h,k,l,q,c,f,d,b,n):m=qq(a,g,h,k,l,q,c,f,d,b,n);if(!a.abort){a:{c=0===e||90===e?1:-1;e=90===e||270===e;for(var q=k|0,s=l|0,t=a.Ob[q][s];0===t&&q>f&&q<d&&s>b&&s<n;)if(e?s+=c:q+=c,t=a.Ob[q][s],1>=Math.abs(q-g)&&1>=Math.abs(s-h)){a.abort=!0;break a}q=k|0;s=l|0;t=a.Ob[q][s];for(a.Ob[q][s]=999999;0===t&&q>f&&q<d&&s>b&&s<n;)e?s+=c:q+=c,t=a.Ob[q][s],a.Ob[q][s]=999999}a.abort||(pq(a,m,p,1,!1,f,d,b,n),pq(a,m,p,-1,!1,f,d,b,n),pq(a,m,p,1,!0,f,d,
b,n),pq(a,m,p,-1,!0,f,d,b,n))}}}}}function aq(){sb(this);this.port=this.dc=null;this.Kf=[];this.Rn=!1}zb(aq,{dc:!0,port:!0,Kf:!0,Rn:!0});aq.prototype.toString=function(){for(var a=this.Kf,b=this.dc.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];null!==d&&(b+="\n  "+d.toString())}return b};
function rq(a,b,c,d){b=b.offsetY;switch(b){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(b){case 9:return 180<c?270:90;case 6:return 90<c&&270>=c?180:0}a=180*Math.atan2(a.height,a.width)/Math.PI;switch(b){case 3:return c>a&&c<=180+a?180:270;case 5:return c>180-a&&c<=360-a?270:0;case 12:return c>a&&c<=180+a?90:0;case 10:return c>180-a&&c<=360-a?180:90;case 7:return 90<c&&c<=180+a?180:c>180+a&&c<=360-a?270:0;case 13:return 180<c&&c<=360-a?270:c>a&&180>=c?90:0;case 14:return c>
a&&c<=180-a?90:c>180-a&&270>=c?180:0;case 11:return c>180-a&&c<=180+a?180:c>180+a?270:90}d&&15!==b&&(c-=15,0>c&&(c+=360));return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function bq(a,b){var c=a.Kf;if(0===c.length){a:if(!a.Rn){c=a.Rn;a.Rn=!0;var d,e=null,f=a.dc,f=f instanceof Wg?f:null;if(null===f||f.td)d=a.dc.$B(a.port.bd);else{if(!f.Q.w()){a.Rn=c;break a}e=f;d=e.ZB()}var g=a.Kf.length=0,h=a.port.Ra(ud,Va()),k=a.port.Ra(Hd,Va()),f=db(h.x,h.y,0,0);f.Zh(k);A(h);A(k);h=Wa(f.x+f.width/2,f.y+f.height/2);for(d=d.i;d.next();)if(k=d.value,k.sa()){var l=td,m=k.Ic===a.port||k.M.$g(e),l=m?Xp(k,a.port):Yp(k,a.port);if(l.Fn()&&(m=m?k.xd:k.Ic,null!==m)){var n=m.J;if(null!==n){var m=
k.computeOtherPoint(n,m),n=h.Ph(m),l=rq(f,l,n,k.Jb),p=0;0===l?(p=4,180<n&&(n-=360)):p=90===l?8:180===l?2:1;l=a.Kf[g];void 0===l?(l=new sq(k,n,p),a.Kf[g]=l):(l.link=k,l.angle=n,l.wd=p);l.mv.set(m);g++}}}A(h);a.Kf.sort(aq.prototype.gG);e=a.Kf.length;h=-1;for(g=d=0;g<e;g++)l=a.Kf[g],void 0!==l&&(l.wd!==h&&(h=l.wd,d=0),l.Cn=d,d++);h=-1;d=0;for(g=e-1;0<=g;g--)l=a.Kf[g],void 0!==l&&(l.wd!==h&&(h=l.wd,d=l.Cn+1),l.Al=d);g=a.Kf;m=a.port;e=a.dc.nG;h=Va();d=Va();k=Va();l=Va();m.Ra(ud,h);m.Ra(wd,d);m.Ra(Hd,k);
m.Ra(Fd,l);var q=p=n=m=0;if(e===yp)for(var s=0;s<g.length;s++){var t=g[s];if(null!==t){var u=t.link.computeThickness();switch(t.wd){case 8:p+=u;break;case 2:q+=u;break;case 1:m+=u;break;default:case 4:n+=u}}}for(var x=0,B=0,y=1,s=0;s<g.length;s++)if(t=g[s],null!==t){var C,K;if(x!=t.wd){x=t.wd;switch(x){case 8:C=k;K=l;break;case 2:C=l;K=h;break;case 1:C=h;K=d;break;default:case 4:C=d,K=k}var J=K.x-C.x;K=K.y-C.y;switch(x){case 8:p>Math.abs(J)?(y=Math.abs(J)/p,p=Math.abs(J)):y=1;break;case 2:q>Math.abs(K)?
(y=Math.abs(K)/q,q=Math.abs(K)):y=1;break;case 1:m>Math.abs(J)?(y=Math.abs(J)/m,m=Math.abs(J)):y=1;break;default:case 4:n>Math.abs(K)?(y=Math.abs(K)/n,n=Math.abs(K)):y=1}B=0}var ba=t.Jn;if(e===yp){u=t.link.computeThickness();u*=y;ba.set(C);switch(x){case 8:ba.x=C.x+J/2+p/2-B-u/2;break;case 2:ba.y=C.y+K/2+q/2-B-u/2;break;case 1:ba.x=C.x+J/2-m/2+B+u/2;break;default:case 4:ba.y=C.y+K/2-n/2+B+u/2}B+=u}else u=.5,e===vp&&(u=(t.Cn+1)/(t.Al+1)),ba.x=C.x+J*u,ba.y=C.y+K*u}A(h);A(d);A(k);A(l);C=a.Kf;for(J=0;J<
C.length;J++)K=C[J],null!==K&&(K.Ku=a.computeEndSegmentLength(K));a.Rn=c;fb(f)}c=a.Kf}for(f=0;f<c.length;f++)if(C=c[f],null!==C&&C.link===b)return C;return null}aq.prototype.gG=function(a,b){return a===b?0:null===a?-1:null===b?1:a.wd<b.wd?-1:a.wd>b.wd?1:a.angle<b.angle?-1:a.angle>b.angle?1:0};
aq.prototype.computeEndSegmentLength=function(a){var b=a.link,c=b.computeEndSegmentLength(this.dc,this.port,td,b.Ic===this.port),d=a.Cn;if(0>d)return c;var e=a.Al;if(1>=e||!b.Jb)return c;var b=a.mv,f=a.Jn;if(2===a.wd||8===a.wd)d=e-1-d;return((a=2===a.wd||4===a.wd)?b.y<f.y:b.x<f.x)?c+8*d:(a?b.y===f.y:b.x===f.x)?c:c+8*(e-1-d)};function sq(a,b,c){this.link=a;this.angle=b;this.wd=c;this.mv=new z;this.Al=this.Cn=0;this.Jn=new z;this.Ku=0}zb(sq,{link:!0,angle:!0,wd:!0,mv:!0,Cn:!0,Al:!0,Jn:!0,Ku:!0});
sq.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.wd.toString()+":"+this.Cn.toString()+"/"+this.Al.toString()+" "+this.Jn.toString()+" "+this.Ku.toString()+" "+this.mv.toString()};function Gm(){this.Oi=this.mi=ee;this.Mi=this.ki=NaN;this.Li=this.ji=wp;this.Ni=this.li=NaN}Gm.prototype.copy=function(){var a=new Gm;a.mi=this.mi.O();a.Oi=this.Oi.O();a.ki=this.ki;a.Mi=this.Mi;a.ji=this.ji;a.Li=this.Li;a.li=this.li;a.Ni=this.Ni;return a};
function Wg(a){0===arguments.length?V.call(this,Yi):V.call(this,a);this.Lp=new Xb(O);this.Qm=new Xb(Wg);this.Jj=this.Mp=this.Kp=null;this.Yq=!1;this.np=!0;this.Zq=!1;this.ub=this.Oq=null;this.Bo=!1;this.Co=!0;this.ap=this.Do=!1;this.ed=new lg;this.ed.group=this;this.Uw=!1}yb(Wg,V);vb("Group",Wg);
Wg.prototype.cloneProtected=function(a){V.prototype.cloneProtected.call(this,a);a.Kp=this.Kp;a.Mp=this.Mp;a.Jj=this.Jj;a.Yq=this.Yq;a.np=this.np;a.Zq=this.Zq;a.Oq=this.Oq;var b=a.sr(function(a){return a instanceof Si});a.ub=b instanceof Si?b:null;a.Bo=this.Bo;a.Co=this.Co;a.Do=this.Do;a.ap=this.ap;null!==this.ed?(a.ed=this.ed.copy(),a.ed.group=a):(null!==a.ed&&(a.ed.group=null),a.ed=null)};
Wg.prototype.Xg=function(a){V.prototype.Xg.call(this,a);var b=a.xn();for(a=a.lc;a.next();){var c=a.value;c.H();c.v(8);c.kr();if(c instanceof V)c.He(b);else if(c instanceof W)for(c=c.If;c.next();)c.value.He(b)}};
Wg.prototype.Ol=function(a,b,c,d,e,f,g){if(a===Qf&&"elements"===b)if(e instanceof Si){var h=e;null===this.ub?this.ub=h:this.ub!==h&&v("Cannot insert a second Placeholder into the visual tree of a Group.")}else e instanceof L&&(h=e.sr(function(a){return a instanceof Si}),h instanceof Si&&(null===this.ub?this.ub=h:this.ub!==h&&v("Cannot insert a second Placeholder into the visual tree of a Group.")));else a===Rf&&"elements"===b&&null!==this.ub&&(d===this.ub?this.ub=null:d instanceof L&&this.ub.nk(d)&&
(this.ub=null));V.prototype.Ol.call(this,a,b,c,d,e,f,g)};Wg.prototype.Jh=function(a,b,c,d){this.Ij=this.ub;L.prototype.Jh.call(this,a,b,c,d)};Wg.prototype.ok=function(){if(!V.prototype.ok.call(this))return!1;for(var a=this.lc;a.next();){var b=a.value;if(b instanceof V){if(b.sa()&&dl(b))return!1}else if(b instanceof W&&b.sa()&&dl(b)&&b.M!==this&&b.R!==this)return!1}return!0};H(Wg,{placeholder:"placeholder"},function(){return this.ub});
G(Wg,{MB:"computesBoundsAfterDrag"},function(){return this.Bo},function(a){var b=this.Bo;b!==a&&(w(a,"boolean",Wg,"computesBoundsAfterDrag"),this.Bo=a,this.h("computesBoundsAfterDrag",b,a))});G(Wg,{HE:"computesBoundsIncludingLinks"},function(){return this.Co},function(a){w(a,"boolean",Wg,"computesBoundsIncludingLinks");var b=this.Co;b!==a&&(this.Co=a,this.h("computesBoundsIncludingLinks",b,a))});
G(Wg,{IE:"computesBoundsIncludingLocation"},function(){return this.Do},function(a){w(a,"boolean",Wg,"computesBoundsIncludingLocation");var b=this.Do;b!==a&&(this.Do=a,this.h("computesBoundsIncludingLocation",b,a))});G(Wg,{tF:"handlesDragDropForMembers"},function(){return this.ap},function(a){w(a,"boolean",Wg,"handlesDragDropForMembers");var b=this.ap;b!==a&&(this.ap=a,this.h("handlesDragDropForMembers",b,a))});H(Wg,{lc:"memberParts"},function(){return this.Lp.i});
function rp(a,b){if(a.Lp.add(b)){b instanceof Wg&&a.Qm.add(b);var c=a.YF;if(null!==c){var d=!0,e=a.g;null!==e&&(d=e.ya,e.ya=!0);c(a,b);null!==e&&(e.ya=d)}a.sa()&&a.td||b.Zd(!1)}c=a.ub;null===c&&(c=a);c.H()}function qp(a,b){if(a.Lp.remove(b)){b instanceof Wg&&a.Qm.remove(b);var c=a.ZF;if(null!==c){var d=!0,e=a.g;null!==e&&(d=e.ya,e.ya=!0);c(a,b);null!==e&&(e.ya=d)}a.sa()&&a.td||b.Zd(!0)}c=a.ub;null===c&&(c=a);c.H()}
Wg.prototype.Cl=function(){if(0<this.Lp.count){var a=this.g;if(null===a)return;for(var b=this.Lp.copy().i;b.next();)a.remove(b.value)}V.prototype.Cl.call(this)};Wg.prototype.Cv=function(){var a=this.layer;null!==a&&a.Cv(this)};G(Wg,{vb:"layout"},function(){return this.ed},function(a){var b=this.ed;b!==a&&(null!==a&&ra(a,lg,Wg,"layout"),null!==b&&(b.g=null,b.group=null),this.ed=a,null!==a&&(a.g=this.g,a.group=this),this.h("layout",b,a))});
G(Wg,{YF:"memberAdded"},function(){return this.Kp},function(a){var b=this.Kp;b!==a&&(null!==a&&w(a,"function",Wg,"memberAdded"),this.Kp=a,this.h("memberAdded",b,a))});G(Wg,{ZF:"memberRemoved"},function(){return this.Mp},function(a){var b=this.Mp;b!==a&&(null!==a&&w(a,"function",Wg,"memberRemoved"),this.Mp=a,this.h("memberRemoved",b,a))});
G(Wg,{qy:"memberValidation"},function(){return this.Jj},function(a){var b=this.Jj;b!==a&&(null!==a&&w(a,"function",Wg,"memberValidation"),this.Jj=a,this.h("memberValidation",b,a))});Wg.prototype.canAddMembers=function(a){var b=this.g;if(null===b)return!1;b=b.ib;for(a=bh(a).i;a.next();)if(!b.isValidMember(this,a.value))return!1;return!0};
Wg.prototype.addMembers=function(a,b){var c=this.g;if(null===c)return!1;for(var c=c.ib,d=!0,e=bh(a).i;e.next();){var f=e.value;!b||c.isValidMember(this,f)?f.Ca=this:d=!1}return d};G(Wg,{aH:"ungroupable"},function(){return this.Yq},function(a){var b=this.Yq;b!==a&&(w(a,"boolean",Wg,"ungroupable"),this.Yq=a,this.h("ungroupable",b,a))});Wg.prototype.canUngroup=function(){if(!this.aH)return!1;var a=this.layer;if(null!==a&&!a.yu)return!1;a=a.g;return null===a||a.yu?!0:!1};
Wg.prototype.invalidateConnectedLinks=Wg.prototype.He=function(a){void 0===a&&(a=null);V.prototype.He.call(this,a);for(var b=this.ZB();b.next();){var c=b.value;if(null===a||!a.contains(c)){var d=c.M;null!==d&&d.$g(this)&&!d.sa()?c.Ab():(d=c.R,null!==d&&d.$g(this)&&!d.sa()&&c.Ab())}}};Wg.prototype.findExternalLinksConnected=Wg.prototype.ZB=function(){var a=this.xn();a.add(this);for(var b=new Xb(W),c=a.i;c.next();){var d=c.value;if(d instanceof V)for(d=d.Gd;d.next();){var e=d.value;a.contains(e)||b.add(e)}}return b.i};
Wg.prototype.findExternalNodesConnected=function(){var a=this.xn();a.add(this);for(var b=new Xb(V),c=a.i;c.next();){var d=c.value;if(d instanceof V)for(d=d.Gd;d.next();){var e=d.value,f=e.M;a.contains(f)&&f!==this||b.add(f);e=e.R;a.contains(e)&&e!==this||b.add(e)}}return b.i};Wg.prototype.findSubGraphParts=Wg.prototype.xn=function(){var a=new Xb(O);Ug(a,this,!0,0,!0);a.remove(this);return a};Wg.prototype.Zd=function(a){V.prototype.Zd.call(this,a);for(var b=this.lc;b.next();)b.value.Zd(a)};
Wg.prototype.collapseSubGraph=Wg.prototype.collapseSubGraph=function(){var a=this.g;if(null!==a&&!a.Ed){a.Ed=!0;var b=this.xn();tq(this,b);a.Ed=!1}};function tq(a,b){for(var c=a.lc;c.next();){var d=c.value;d.Zd(!1);if(d instanceof Wg){var e=d;e.td&&(e.ez=e.td,tq(e,b))}if(d instanceof V)d.He(b);else if(d instanceof W)for(d=d.If;d.next();)d.value.He(b)}a.td=!1}
Wg.prototype.expandSubGraph=Wg.prototype.expandSubGraph=function(){var a=this.g;if(null!==a&&!a.Ed){var b=a.rb;0!==a.V.be&&b.tk();a.Ed=!0;var c=this.xn();uq(this,c,b,this);a.Ed=!1}};function uq(a,b,c,d){for(var e=a.lc;e.next();){var f=e.value;f.Zd(!0);if(f instanceof Wg){var g=f;g.ez&&(g.ez=!1,uq(g,b,c,d))}if(f instanceof V)f.He(b),ak(c,f,d);else if(f instanceof W)for(f=f.If;f.next();)f.value.He(b)}a.td=!0}
G(Wg,{td:"isSubGraphExpanded"},function(){return this.np},function(a){var b=this.np;if(b!==a){w(a,"boolean",Wg,"isSubGraphExpanded");this.np=a;var c=this.g;this.h("isSubGraphExpanded",b,a);b=this.SG;if(null!==b){var d=!0;null!==c&&(d=c.ya,c.ya=!0);b(this);null!==c&&(c.ya=d)}null!==c&&c.V.Ua||(a?this.expandSubGraph():this.collapseSubGraph())}});
G(Wg,{ez:"wasSubGraphExpanded"},function(){return this.Zq},function(a){var b=this.Zq;b!==a&&(w(a,"boolean",Wg,"wasSubGraphExpanded"),this.Zq=a,this.h("wasSubGraphExpanded",b,a))});G(Wg,{SG:"subGraphExpandedChanged"},function(){return this.Oq},function(a){var b=this.Oq;b!==a&&(null!==a&&w(a,"function",Wg,"subGraphExpandedChanged"),this.Oq=a,this.h("subGraphExpandedChanged",b,a))});
Wg.prototype.move=Wg.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0);b=b.y;isNaN(b)&&(b=0);var c=a.x-c,b=a.y-b,d=Wa(c,b);V.prototype.move.call(this,a);for(a=this.xn().i;a.next();){var e=a.value;if(!(e instanceof W||e instanceof V&&e.Ie)){var f=e.position,g=e.location;f.w()?(d.x=f.x+c,d.y=f.y+b,e.position=d):g.w()&&(d.x=g.x+c,d.y=g.y+b,e.location=d)}}for(a.reset();a.next();)e=a.value,e instanceof W&&(f=e.position,d.x=f.x+c,d.y=f.y+b,e.move(d));A(d)};
function Si(){U.call(this);this.ge=Q.mo;this.zq=new D(NaN,NaN,NaN,NaN)}yb(Si,U);vb("Placeholder",Si);Si.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.ge=this.ge.O();a.zq=this.zq.copy()};Si.prototype.Ui=function(a){if(null===this.background&&null===this.sl)return!1;var b=this.ta;return jd(0,0,b.width,b.height,a.x,a.y)};
Si.prototype.Mn=function(){var a=this.J;null!==a&&(a instanceof Wg||a instanceof Vg)||v("Placeholder is not inside a Group or Adornment.");if(a instanceof Wg){var b=this.computeBorder(this.zq),c=this.hc;ad(c,b.width||0,b.height||0);Km(this,0,0,c.width,c.height);for(var c=a.lc,d=!1;c.next();)if(c.value.sa()){d=!0;break}!d||isNaN(b.x)||isNaN(b.y)||(c=new z,c.ms(b,a.qe),a.location=new z(c.x,c.y))}else{var b=this.ka,c=this.hc,d=this.padding,e=d.left+d.right,f=d.top+d.bottom;if(b.w())ad(c,b.width+e||0,
b.height+f||0),Km(this,-d.left,-d.top,c.width,c.height);else{var g=a.Xb,h=g.Ra(ud,Va()),b=db(h.x,h.y,0,0);b.Zh(g.Ra(Hd,h));b.Zh(g.Ra(wd,h));b.Zh(g.Ra(Fd,h));a.$f.k(b.x,b.y);ad(c,b.width+e||0,b.height+f||0);Km(this,-d.left,-d.top,c.width,c.height);A(h);fb(b)}}};Si.prototype.Jh=function(a,b,c,d){var e=this.Q;e.x=a;e.y=b;e.width=c;e.height=d};
Si.prototype.computeBorder=function(a){var b=this.J;if(b instanceof Wg){var c=b;if(c.MB&&this.zq.w()){var d=c.g;if(null!==d&&(d=d.Ha,d instanceof $g&&!d.Po&&null!==d.Ib&&!d.Ib.contains(c)))return a.assign(this.zq),a}}var c=bb(),d=this.computeMemberBounds(c),e=this.padding;a.k(d.x-e.left,d.y-e.top,d.width+e.left+e.right,d.height+e.top+e.bottom);fb(c);b instanceof Wg&&(c=b,c.IE&&c.location.w()&&a.Zh(c.location));return a};
Si.prototype.computeMemberBounds=function(a){if(!(this.J instanceof Wg))return a.k(0,0,0,0),a;for(var b=this.J,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=b.lc;g.next();){var h=g.value;if(h.sa()){if(h instanceof W){var k=h;if(!b.HE)continue;if(Yk(k))continue;if(k.M===b||k.R===b)continue}h=h.Q;h.left<c&&(c=h.left);h.top<d&&(d=h.top);h.right>e&&(e=h.right);h.bottom>f&&(f=h.bottom)}}isFinite(c)&&isFinite(d)?a.k(c,d,e-c,f-d):(b=b.location,c=this.padding,a.k(b.x+c.left,b.y+c.top,0,0));return a};
G(Si,{padding:"padding"},function(){return this.ge},function(a){"number"===typeof a?((isNaN(a)||0>a)&&za(a,">= 0",Si,"padding"),a=new qd(a)):(ra(a,qd,Si,"padding"),(isNaN(a.left)||0>a.left)&&za(a.left,">= 0",Si,"padding:value.left"),(isNaN(a.right)||0>a.right)&&za(a.right,">= 0",Si,"padding:value.right"),(isNaN(a.top)||0>a.top)&&za(a.top,">= 0",Si,"padding:value.top"),(isNaN(a.bottom)||0>a.bottom)&&za(a.bottom,">= 0",Si,"padding:value.bottom"));var b=this.ge;b.A(a)||(this.ge=a=a.O(),this.h("padding",
b,a))});function lg(){0<arguments.length&&Aa(lg);sb(this);this.Cw=this.N=null;this.hp=this.jp=!0;this.rp=!1;this.uo=(new z(0,0)).freeze();this.kp=this.mp=!0;this.Lz="";this.Im=!1;this.Vw=null}vb("Layout",lg);lg.prototype.cloneProtected=function(a){a.jp=this.jp;a.hp=this.hp;a.rp=this.rp;a.uo.assign(this.uo);a.mp=this.mp;a.kp=this.kp;a.Lz=this.Lz;this.hp||(a.Im=!0)};lg.prototype.copy=function(){var a=new this.constructor;this.cloneProtected(a);return a};
lg.prototype.toString=function(){var a=xa(Object.getPrototypeOf(this)),a=a+"(";null!==this.group&&(a+=" in "+this.group);null!==this.g&&(a+=" for "+this.g);return a+")"};G(lg,{g:"diagram"},function(){return this.N},function(a){null!==a&&ra(a,M,lg,"diagram");this.N=a});G(lg,{group:"group"},function(){return this.Cw},function(a){this.Cw!==a&&(null!==a&&ra(a,Wg,lg,"group"),this.Cw=a,null!==a&&(this.N=a.g))});
G(lg,{HF:"isOngoing"},function(){return this.jp},function(a){this.jp!==a&&(w(a,"boolean",lg,"isOngoing"),this.jp=a)});G(lg,{FF:"isInitial"},function(){return this.hp},function(a){w(a,"boolean",lg,"isInitial");this.hp=a;a||(this.Im=!0)});G(lg,{cv:"isViewportSized"},function(){return this.rp},function(a){this.rp!==a&&(w(a,"boolean",lg,"isViewportSized"),(this.rp=a)&&this.v())});G(lg,{av:"isRouting"},function(){return this.mp},function(a){this.mp!==a&&(w(a,"boolean",lg,"isRouting"),this.mp=a)});
G(lg,{wC:"isRealtime"},function(){return this.kp},function(a){this.kp!==a&&(w(a,"boolean",lg,"isRealtime"),this.kp=a)});G(lg,{Ke:"isValidLayout"},function(){return this.Im},function(a){this.Im!==a&&(w(a,"boolean",lg,"isValidLayout"),this.Im=a,a||(a=this.g,null!==a&&(a.Ks=!0)))});lg.prototype.invalidateLayout=lg.prototype.v=function(){if(this.Im){var a=this.g;if(null!==a&&!a.V.Ua){var b=a.rb;!b.Hm&&(b.hg&&b.Wh(),this.HF&&a.Ae||this.FF&&!a.Ae)&&(this.Ke=!1,a.vd())}}};
G(lg,{network:"network"},function(){return this.Vw},function(a){var b=this.Vw;b!==a&&(null!==a&&ra(a,kc,lg,"network"),null!==b&&(b.vb=null),this.Vw=a,null!==a&&(a.vb=this))});lg.prototype.createNetwork=function(){return new kc};lg.prototype.makeNetwork=function(a){var b=this.createNetwork();b.vb=this;a instanceof M?(b.Ri(a.Mf,!0),b.Ri(a.links,!0)):a instanceof Wg?b.Ri(a.lc):b.Ri(a.i);return b};
lg.prototype.updateParts=function(){var a=this.g;if(null===a&&null!==this.network)for(var b=this.network.vertexes.i;b.next();){var c=b.value.dc;if(null!==c&&(a=c.g,null!==a))break}this.Ke=!0;try{null!==a&&a.Bb("Layout"),this.commitLayout()}finally{null!==a&&a.od("Layout")}};lg.prototype.commitLayout=function(){};
lg.prototype.doLayout=function(a){null===a&&v("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var b=new Xb(O);a instanceof M?(vq(this,b,a.Mf,!0,this.wy,!0,!1,!0),vq(this,b,a.bj,!0,this.wy,!0,!1,!0)):a instanceof Wg?vq(this,b,a.lc,!1,this.wy,!0,!1,!0):b.ld(a.i);var c=b.count;if(0<c){a=this.g;null!==a&&a.Bb("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.md.x,e=d,f=this.md.y,g=0,h=0,b=b.i;b.next();){var k=b.value;k.Ee();var l=k.oa,m=l.width,
l=l.height;k.moveTo(e,f);k.Uw=!1;e+=Math.max(m,50)+20;h=Math.max(h,Math.max(l,50));g>=c-1?(g=0,e=d,f+=h+20,h=0):g++}null!==a&&a.od("Layout")}this.Ke=!0};lg.prototype.wy=function(a){return!a.location.w()||a instanceof Wg&&a.Uw?!0:!1};
function vq(a,b,c,d,e,f,g,h){for(c=c.i;c.next();){var k=c.value;d&&!k.bv||null!==e&&!e(k)||!k.canLayout()||(f&&k instanceof V?k.Ie||(k instanceof Wg?null===k.vb?vq(a,b,k.lc,!1,e,f,g,h):b.add(k):b.add(k)):g&&k instanceof W?b.add(k):!h||!k.Zc()||k instanceof V||b.add(k))}}
lg.prototype.collectParts=function(a){var b=new Xb(O);a instanceof M?(vq(this,b,a.Mf,!0,null,!0,!0,!0),vq(this,b,a.links,!0,null,!0,!0,!0),vq(this,b,a.bj,!0,null,!0,!0,!0)):a instanceof Wg?vq(this,b,a.lc,!1,null,!0,!0,!0):vq(this,b,a.i,!1,null,!0,!0,!0);return b};G(lg,{md:"arrangementOrigin"},function(){return this.uo},function(a){ra(a,z,lg,"arrangementOrigin");this.uo.A(a)||(this.uo.assign(a),this.v())});
lg.prototype.initialOrigin=function(a){var b=this.group;if(null!==b){var c=b.position.copy();(isNaN(c.x)||isNaN(c.y))&&c.set(a);b=b.placeholder;null!==b&&(c=b.Ra(ud),(isNaN(c.x)||isNaN(c.y))&&c.set(a),c.x+=b.padding.left,c.y+=b.padding.top);return c}return a};function kc(){sb(this);this.ed=null;this.clear()}vb("LayoutNetwork",kc);
kc.prototype.clear=function(){if(this.vertexes)for(var a=this.vertexes.i;a.next();){var b=a.value;b.clear();b.network=null}if(this.edges)for(a=this.edges.i;a.next();)b=a.value,b.clear(),b.network=null;this.vertexes=new Xb(lc);this.edges=new Xb(sc);this.Ay=new Fb(V,lc);this.ny=new Fb(W,sc)};
kc.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutNetwork"+(null!==this.vb?"("+this.vb.toString()+")":"");if(0>=a)return b;b+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count;if(1<a){for(var c=this.vertexes.i;c.next();)b+="\n    "+c.value.toString(a-1);for(c=this.edges.i;c.next();)b+="\n    "+c.value.toString(a-1)}return b};G(kc,{vb:"layout"},function(){return this.ed},function(a){this.ed=a});kc.prototype.createVertex=function(){return new lc};kc.prototype.createEdge=function(){return new sc};
kc.prototype.addParts=kc.prototype.Ri=function(a,b,c){if(null!==a){void 0===b&&(b=!1);w(b,"boolean",kc,"addParts:toplevelonly");void 0===c&&(c=null);null===c&&(c=function(a){if(a instanceof V)return!a.Ie;if(a instanceof W){var b=a.M;if(null===b||b.Ie)return!1;a=a.R;return null===a||a.Ie?!1:!0}return!1});for(a=a.i;a.next();){var d=a.value;if(d instanceof V&&(!b||d.bv)&&d.canLayout()&&c(d))if(d instanceof Wg&&null===d.vb)this.Ri(d.lc,!1);else if(null===this.Fl(d)){var e=this.createVertex();e.dc=d;this.Vj(e)}}for(a.reset();a.next();)if(d=
a.value,d instanceof W&&(!b||d.bv)&&d.canLayout()&&c(d)&&null===this.Mu(d)){var f=d.M,e=d.R;null!==f&&null!==e&&f!==e&&(f=this.findGroupVertex(f),e=this.findGroupVertex(e),null!==f&&null!==e&&this.Ln(f,e,d))}}};kc.prototype.findGroupVertex=function(a){if(null===a)return null;var b=a.findVisibleNode();if(null===b)return null;a=this.Fl(b);if(null!==a)return a;for(b=b.Ca;null!==b;){a=this.Fl(b);if(null!==a)return a;b=b.Ca}return null};
kc.prototype.addVertex=kc.prototype.Vj=function(a){if(null!==a){this.vertexes.add(a);var b=a.dc;null!==b&&this.Ay.add(b,a);a.network=this}};kc.prototype.addNode=kc.prototype.dr=function(a){if(null===a)return null;var b=this.Fl(a);null===b&&(b=this.createVertex(),b.dc=a,this.Vj(b));return b};kc.prototype.deleteVertex=kc.prototype.VB=function(a){if(null!==a&&wq(this,a)){for(var b=a.$d,c=b.count-1;0<=c;c--){var d=b.Y(c);this.un(d)}b=a.Vd;for(c=b.count-1;0<=c;c--)d=b.Y(c),this.un(d)}};
function wq(a,b){if(null===b)return!1;var c=a.vertexes.remove(b);c&&(a.Ay.remove(b.dc),b.network=null);return c}kc.prototype.deleteNode=function(a){null!==a&&(a=this.Fl(a),null!==a&&this.VB(a))};kc.prototype.findVertex=kc.prototype.Fl=function(a){return null===a?null:this.Ay.ja(a)};kc.prototype.addEdge=kc.prototype.jn=function(a){if(null!==a){this.edges.add(a);var b=a.link;null!==b&&null===this.Mu(b)&&this.ny.add(b,a);b=a.toVertex;null!==b&&b.yB(a);b=a.fromVertex;null!==b&&b.xB(a);a.network=this}};
kc.prototype.addLink=function(a){if(null===a)return null;var b=a.M,c=a.R,d=this.Mu(a);null===d?(d=this.createEdge(),d.link=a,null!==b&&(d.fromVertex=this.dr(b)),null!==c&&(d.toVertex=this.dr(c)),this.jn(d)):(d.fromVertex=null!==b?this.dr(b):null,d.toVertex=null!==c?this.dr(c):null);return d};kc.prototype.deleteEdge=kc.prototype.un=function(a){if(null!==a){var b=a.toVertex;null!==b&&b.UB(a);b=a.fromVertex;null!==b&&b.TB(a);xq(this,a)}};
function xq(a,b){null!==b&&a.edges.remove(b)&&(a.ny.remove(b.link),b.network=null)}kc.prototype.deleteLink=function(a){null!==a&&(a=this.Mu(a),null!==a&&this.un(a))};kc.prototype.findEdge=kc.prototype.Mu=function(a){return null===a?null:this.ny.ja(a)};kc.prototype.linkVertexes=kc.prototype.Ln=function(a,b,c){if(null===a||null===b)return null;if(a.network===this&&b.network===this){var d=this.createEdge();d.link=c;d.fromVertex=a;d.toVertex=b;this.jn(d);return d}return null};
kc.prototype.reverseEdge=kc.prototype.rv=function(a){if(null!==a){var b=a.fromVertex,c=a.toVertex;null!==b&&null!==c&&(b.TB(a),c.UB(a),a.rv(),b.yB(a),c.xB(a))}};kc.prototype.deleteSelfEdges=kc.prototype.Iu=function(){for(var a=ob(),b=this.edges.i;b.next();){var c=b.value;c.fromVertex===c.toVertex&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.un(a[c]);pb(a)};
kc.prototype.deleteArtificialVertexes=function(){for(var a=ob(),b=this.vertexes.i;b.next();){var c=b.value;null===c.dc&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.VB(a[b]);c=ob();for(b=this.edges.i;b.next();){var d=b.value;null===d.link&&c.push(d)}d=c.length;for(b=0;b<d;b++)this.un(c[b]);pb(a);pb(c)};function yq(a){for(var b=ob(),c=a.edges.i;c.next();){var d=c.value;null!==d.fromVertex&&null!==d.toVertex||b.push(d)}c=b.length;for(d=0;d<c;d++)a.un(b[d]);pb(b)}
kc.prototype.splitIntoSubNetworks=kc.prototype.OG=function(){this.deleteArtificialVertexes();yq(this);this.Iu();for(var a=new N(kc),b=!0;b;)for(var b=!1,c=this.vertexes.i;c.next();){var d=c.value;if(0<d.$d.count||0<d.Vd.count){b=this.vb.createNetwork();a.add(b);zq(this,b,d);b=!0;break}}a.sort(function(a,b){return null===a||null===b||a===b?0:b.vertexes.count-a.vertexes.count});return a};
function zq(a,b,c){if(null!==c&&c.network!==b){wq(a,c);b.Vj(c);for(var d=c.Mb;d.next();){var e=d.value;e.network!==b&&(xq(a,e),b.jn(e),zq(a,b,e.fromVertex))}for(d=c.Hb;d.next();)c=d.value,c.network!==b&&(xq(a,c),b.jn(c),zq(a,b,c.toVertex))}}kc.prototype.findAllParts=function(){for(var a=new Xb(O),b=this.vertexes.i;b.next();)a.add(b.value.dc);for(b=this.edges.i;b.next();)a.add(b.value.link);return a};
function lc(){sb(this);this.network=null;this.P=(new D(0,0,10,10)).freeze();this.B=(new z(5,5)).freeze();this.clear()}vb("LayoutVertex",lc);lc.prototype.clear=function(){this.Ec=this.Ag=null;this.$d=new N(sc);this.Vd=new N(sc)};
lc.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutVertex#"+ub(this);if(0<a&&(b+=null!==this.dc?"("+this.dc.toString()+")":"",1<a)){a="";for(var c=!0,d=this.$d.i;d.next();){var e=d.value;c?c=!1:a+=",";a+=e.toString(0)}e="";c=!0;for(d=this.Vd.i;d.next();){var f=d.value;c?c=!1:e+=",";e+=f.toString(0)}b+=" sources: "+a+" destinations: "+e}return b};
G(lc,{data:"data"},function(){return this.Ag},function(a){this.Ag=a;if(null!==a){var b=a.bounds;a=b.x;var c=b.y,d=b.width,b=b.height;this.B.k(d/2,b/2);this.P.k(a,c,d,b)}});G(lc,{dc:"node"},function(){return this.Ec},function(a){if(this.Ec!==a){this.Ec=a;a.Ee();var b=a.Q,c=b.x,d=b.y,e=b.width,b=b.height;isNaN(c)&&(c=0);isNaN(d)&&(d=0);this.P.k(c,d,e,b);if(!(a instanceof Wg)&&(a=a.Kb.Ra(Dd),a.w())){this.B.k(a.x-c,a.y-d);return}this.B.k(e/2,b/2)}});
G(lc,{Qa:"bounds"},function(){return this.P},function(a){this.P.A(a)||this.P.assign(a)});G(lc,{focus:"focus"},function(){return this.B},function(a){this.B.A(a)||this.B.assign(a)});G(lc,{ra:"centerX"},function(){return this.P.x+this.B.x},function(a){var b=this.P;b.x+this.B.x!==a&&(b.wa(),b.x=a-this.B.x,b.freeze())});G(lc,{Ba:"centerY"},function(){return this.P.y+this.B.y},function(a){var b=this.P;b.y+this.B.y!==a&&(b.wa(),b.y=a-this.B.y,b.freeze())});
G(lc,{zr:"focusX"},function(){return this.B.x},function(a){var b=this.B;b.x!==a&&(b.wa(),b.x=a,b.freeze())});G(lc,{Ar:"focusY"},function(){return this.B.y},function(a){var b=this.B;b.y!==a&&(b.wa(),b.y=a,b.freeze())});G(lc,{x:"x"},function(){return this.P.x},function(a){var b=this.P;b.x!==a&&(b.wa(),b.x=a,b.freeze())});G(lc,{y:"y"},function(){return this.P.y},function(a){var b=this.P;b.y!==a&&(b.wa(),b.y=a,b.freeze())});
G(lc,{width:"width"},function(){return this.P.width},function(a){var b=this.P;b.width!==a&&(b.wa(),b.width=a,b.freeze())});G(lc,{height:"height"},function(){return this.P.height},function(a){var b=this.P;b.height!==a&&(b.wa(),b.height=a,b.freeze())});
lc.prototype.commit=function(){var a=this.Ag;if(null!==a){var b=this.Qa,c=a.bounds;Ea(c)?(c.x=b.x,c.y=b.y,c.width=b.width,c.height=b.height):a.bounds=b.copy()}else if(a=this.dc,null!==a){b=this.Qa;if(!(a instanceof Wg)){var c=a.Q,d=a.Kb.Ra(Dd);if(c.w()&&d.w()){a.moveTo(b.x+this.zr-(d.x-c.x),b.y+this.Ar-(d.y-c.y));return}}a.moveTo(b.x,b.y)}};lc.prototype.addSourceEdge=lc.prototype.yB=function(a){null!==a&&(this.$d.contains(a)||this.$d.add(a))};
lc.prototype.deleteSourceEdge=lc.prototype.UB=function(a){null!==a&&this.$d.remove(a)};lc.prototype.addDestinationEdge=lc.prototype.xB=function(a){null!==a&&(this.Vd.contains(a)||this.Vd.add(a))};lc.prototype.deleteDestinationEdge=lc.prototype.TB=function(a){null!==a&&this.Vd.remove(a)};H(lc,{NG:"sourceVertexes"},function(){for(var a=new Xb(lc),b=this.Mb;b.next();)a.add(b.value.fromVertex);return a.i});
H(lc,{XE:"destinationVertexes"},function(){for(var a=new Xb(lc),b=this.Hb;b.next();)a.add(b.value.toVertex);return a.i});H(lc,{vertexes:"vertexes"},function(){for(var a=new Xb(lc),b=this.Mb;b.next();)a.add(b.value.fromVertex);for(b=this.Hb;b.next();)a.add(b.value.toVertex);return a.i});H(lc,{Mb:"sourceEdges"},function(){return this.$d.i});H(lc,{Hb:"destinationEdges"},function(){return this.Vd.i});
H(lc,{edges:"edges"},function(){for(var a=new N(sc),b=this.Mb;b.next();)a.add(b.value);for(b=this.Hb;b.next();)a.add(b.value);return a.i});H(lc,{cF:"edgesCount"},function(){return this.$d.count+this.Vd.count});var Aq;lc.standardComparer=Aq=function(a,b){var c=a.Ec,d=b.Ec;return c?d?(c=c.text,d=d.text,c<d?-1:c>d?1:0):1:null!==d?-1:0};
lc.smartComparer=function(a,b){if(null!==a){if(null!==b){var c=a.Ec,d=b.Ec;if(null!==c){if(null!==d){for(var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var f=parseFloat(c[e]),g=parseFloat(d[e]);if(isNaN(f)){if(!isNaN(g))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(g))return-1;if(0!==f-g)return f-
g}}else if(""!==c[e])return 1;return""!==d[e]&&void 0!==d[e]?-1:0}return 1}return null!==d?-1:0}return 1}return null!==b?-1:0};function sc(){sb(this);this.network=null;this.clear()}vb("LayoutEdge",sc);sc.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null};
sc.prototype.toString=function(a){void 0===a&&(a=0);var b="LayoutEdge#"+ub(this);0<a&&(b+=null!==this.link?"("+this.link.toString()+")":"",1<a&&(b+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --\x3e "+(this.toVertex?this.toVertex.toString():"null")));return b};sc.prototype.rv=function(){var a=this.fromVertex;this.fromVertex=this.toVertex;this.toVertex=a};sc.prototype.commit=function(){};
sc.prototype.getOtherVertex=sc.prototype.lF=function(a){return this.toVertex===a?this.fromVertex:this.fromVertex===a?this.toVertex:null};function um(){0<arguments.length&&Aa(um);lg.call(this);this.cv=!0;this.ar=this.br=NaN;this.ci=(new Za(NaN,NaN)).freeze();this.Sg=(new Za(10,10)).freeze();this.Nd=Kn;this.sc=In;this.Rg=xn;this.zg=Bq}yb(um,lg);vb("GridLayout",um);
um.prototype.cloneProtected=function(a){lg.prototype.cloneProtected.call(this,a);a.br=this.br;a.ar=this.ar;a.ci.assign(this.ci);a.Sg.assign(this.Sg);a.Nd=this.Nd;a.sc=this.sc;a.Rg=this.Rg;a.zg=this.zg};
um.prototype.doLayout=function(a){null===a&&v("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");this.md=this.initialOrigin(this.md);var b=this.g,c=new Xb(O);a instanceof M?(b=a,vq(this,c,a.Mf,!0,null,!0,!0,!0),vq(this,c,a.links,!0,null,!0,!0,!0),vq(this,c,a.bj,!0,null,!0,!0,!0)):a instanceof Wg?(b=a.g,vq(this,c,a.lc,!1,null,!0,!0,!0)):c.ld(a.i);for(a=c.copy().i;a.next();){var d=a.value;if(d instanceof W){var e=d;if(null!==e.M||null!==e.R){c.remove(e);
continue}}d.Ee();if(d instanceof Wg)for(d=d.lc;d.next();)c.remove(d.value)}e=c.ae();if(0!==e.length){switch(this.sorting){case Hn:e.reverse();break;case xn:e.sort(this.comparer);break;case yn:e.sort(this.comparer),e.reverse()}var f=this.dH;isNaN(f)&&(f=0);var g=this.LD,g=isNaN(g)&&null!==b?Math.max(b.Va.width-b.padding.left-b.padding.right,0):Math.max(this.LD,0);0>=f&&0>=g&&(f=1);c=this.spacing.width;isFinite(c)||(c=0);a=this.spacing.height;isFinite(a)||(a=0);null!==b&&b.Bb("Layout");d=[];switch(this.alignment){case Ln:var h=
c,k=a,l=Math.max(this.pn.width,1);if(!isFinite(l))for(var m=l=0;m<e.length;m++)var n=e[m],p=n.oa,l=Math.max(l,p.width);var l=Math.max(l+h,1),q=Math.max(this.pn.height,1);if(!isFinite(q))for(m=q=0;m<e.length;m++)n=e[m],p=n.oa,q=Math.max(q,p.height);for(var q=Math.max(q+k,1),s=this.We,t=this.md.x,u=t,x=this.md.y,B=0,y=0,m=0;m<e.length;m++){var n=e[m],p=n.oa,C=Math.ceil((p.width+h)/l)*l,K=Math.ceil((p.height+k)/q)*q,J=0;switch(s){case Jn:J=Math.abs(u-p.width);break;default:J=u+p.width}if(0<f&&B>f-1||
0<g&&0<B&&J>g)d.push(new D(0,x,g+h,y)),B=0,u=t,x+=y,y=0;y=Math.max(y,K);K=0;switch(s){case Jn:K=-p.width;break;default:K=0}n.moveTo(u+K,x);switch(s){case Jn:u-=C;break;default:u+=C}B++}d.push(new D(0,x,g+h,y));break;case Kn:h=f;k=c;l=a;m=Math.max(this.pn.width,1);n=x=C=0;p=Va();for(f=0;f<e.length;f++)q=e[f],s=q.oa,t=mp(q,q.Kb,q.qe,p),C=Math.max(C,t.x),x=Math.max(x,s.width-t.x),n=Math.max(n,t.y);u=this.We;switch(u){case Jn:C+=k;break;default:x+=k}var m=isFinite(m)?Math.max(m+k,1):Math.max(C+x,1),ba=
x=this.md.x,B=this.md.y,y=0;g>=C&&(g-=C);for(var C=K=0,J=Math.max(this.pn.height,1),ja=n=0,Y=!0,P=Va(),f=0;f<e.length;f++){q=e[f];s=q.oa;t=mp(q,q.Kb,q.qe,p);if(0<y)switch(u){case Jn:ba=Math.floor((ba-x-(s.width-t.x))/m)*m+x;break;default:ba=Math.ceil((ba-x+t.x)/m)*m+x}else switch(u){case Jn:K=ba+t.x+s.width;break;default:K=ba-t.x}var ha=0;switch(u){case Jn:ha=-(ba+t.x)+K;break;default:ha=ba+s.width-t.x-K}if(0<h&&y>h-1||0<g&&0<y&&ha>g){d.push(new D(0,Y?B-n:B,g+k,ja+n+l));for(ba=0;ba<y&&f!==y;ba++){var ha=
e[f-y+ba],Ra=mp(ha,ha.Kb,ha.qe,P);ha.moveTo(ha.position.x,ha.position.y+n-Ra.y)}ja+=l;B=Y?B+ja:B+(ja+n);y=ja=n=0;ba=x;Y=!1}ba===x&&(C=u===Jn?Math.max(C,s.width-t.x):Math.min(C,-t.x));n=Math.max(n,t.y);ja=Math.max(ja,s.height-t.y);isFinite(J)&&(ja=Math.max(ja,Math.max(s.height,J)-t.y));Y?q.moveTo(ba-t.x,B-t.y):q.moveTo(ba-t.x,B);switch(u){case Jn:ba-=t.x+k;break;default:ba+=s.width-t.x+k}y++}d.push(new D(0,B,g+k,(Y?ja:ja+n)+l));for(ba=0;ba<y&&f!==y;ba++)ha=e[f-y+ba],Ra=mp(ha,ha.Kb,ha.qe,p),ha.moveTo(ha.position.x,
ha.position.y+n-Ra.y);A(p);A(P);if(u===Jn)for(f=0;f<d.length;f++)e=d[f],e.width+=C,e.x-=C;else for(f=0;f<d.length;f++)e=d[f],e.x>C&&(e.width+=e.x-C,e.x=C)}for(h=f=g=e=0;h<d.length;h++)k=d[h],e=Math.min(e,k.x),g=Math.min(g,k.y),f=Math.max(f,k.x+k.width);this.We===Jn?this.commitLayers(d,new z(e+c/2-(f+e),g-a/2)):this.commitLayers(d,new z(e-c/2,g-a/2));null!==b&&b.od("Layout");this.Ke=!0}};um.prototype.commitLayers=function(){};
G(um,{LD:"wrappingWidth"},function(){return this.br},function(a){this.br!==a&&(w(a,"number",um,"wrappingWidth"),0<a||isNaN(a))&&(this.br=a,this.cv=isNaN(a),this.v())});G(um,{dH:"wrappingColumn"},function(){return this.ar},function(a){this.ar!==a&&(w(a,"number",um,"wrappingColumn"),0<a||isNaN(a))&&(this.ar=a,this.v())});G(um,{pn:"cellSize"},function(){return this.ci},function(a){ra(a,Za,um,"cellSize");this.ci.A(a)||(this.ci.assign(a),this.v())});
G(um,{spacing:"spacing"},function(){return this.Sg},function(a){ra(a,Za,um,"spacing");this.Sg.A(a)||(this.Sg.assign(a),this.v())});G(um,{alignment:"alignment"},function(){return this.Nd},function(a){this.Nd!==a&&(va(a,um,um,"alignment"),a===Kn||a===Ln)&&(this.Nd=a,this.v())});G(um,{We:"arrangement"},function(){return this.sc},function(a){this.sc!==a&&(va(a,um,um,"arrangement"),a===In||a===Jn)&&(this.sc=a,this.v())});
G(um,{sorting:"sorting"},function(){return this.Rg},function(a){this.Rg!==a&&(va(a,um,um,"sorting"),a===zn||a===Hn||a===xn||a===yn)&&(this.Rg=a,this.v())});G(um,{comparer:"comparer"},function(){return this.zg},function(a){this.zg!==a&&(w(a,"function",um,"comparer"),this.zg=a,this.v())});var Bq;um.standardComparer=Bq=function(a,b){var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
um.smartComparer=function(a,b){if(null!==a){if(null!==b){for(var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=0;e<c.length;e++)if(""!==d[e]&&void 0!==d[e]){var f=parseFloat(c[e]),g=parseFloat(d[e]);if(isNaN(f)){if(!isNaN(g))return 1;if(0!==c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])}else{if(isNaN(g))return-1;if(0!==f-g)return f-g}}else if(""!==c[e])return 1;return""!==
d[e]&&void 0!==d[e]?-1:0}return 1}return null!==b?-1:0};var Ln;um.Position=Ln=I(um,"Position",0);var Kn;um.Location=Kn=I(um,"Location",1);var In;um.LeftToRight=In=I(um,"LeftToRight",2);var Jn;um.RightToLeft=Jn=I(um,"RightToLeft",3);var zn;um.Forward=zn=I(um,"Forward",4);var Hn;um.Reverse=Hn=I(um,"Reverse",5);var xn;um.Ascending=xn=I(um,"Ascending",6);var yn;um.Descending=yn=I(um,"Descending",7);
function Mn(){0<arguments.length&&Aa(Mn);lg.call(this);this.tw=this.tm=this.Nc=0;this.Qo=360;this.sw=Yn;this.vj=0;this.Sz=Yn;this.Rs=this.yf=this.lB=0;this.nu=new Cq;this.Us=this.$k=0;this.hE=600;this.mq=NaN;this.wo=1;this.Nq=0;this.Pq=360;this.sc=Yn;this.aa=Un;this.Rg=Rn;this.zg=Aq;this.Sg=6;this.Zp=ao}yb(Mn,lg);vb("CircularLayout",Mn);
Mn.prototype.cloneProtected=function(a){lg.prototype.cloneProtected.call(this,a);a.mq=this.mq;a.wo=this.wo;a.Nq=this.Nq;a.Pq=this.Pq;a.sc=this.sc;a.aa=this.aa;a.Rg=this.Rg;a.zg=this.zg;a.Sg=this.Sg;a.Zp=this.Zp};Mn.prototype.createNetwork=function(){return new Dq};
Mn.prototype.doLayout=function(a){null===a&&v("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.network.vertexes;if(1>=a.count)1===a.count&&(a=a.first(),a.ra=0,a.Ba=0);else{var b=new N(Eq);b.ld(a.i);a=new N(Eq);var c=new N(Eq),d;d=this.sort(b);var e=this.sw,f=this.Sz,g=this.Nc,h=this.tm,k=this.tw,l=this.Qo,b=this.vj,m=this.lB,n=this.yf,p=this.Rs,e=this.We,f=this.jv,g=this.oG;if(!isFinite(g)||
0>=g)g=NaN;h=this.xE;if(!isFinite(h)||0>=h)h=1;k=this.bh;isFinite(k)||(k=0);l=this.Xh;if(!isFinite(l)||360<l||1>l)l=360;b=this.spacing;isFinite(b)||(b=NaN);e===Zn&&f===$n?e=Yn:e===Zn&&f!==$n&&(f=$n,e=this.We);if((this.direction===Sn||this.direction===Tn)&&this.sorting!==Rn){for(var q=0;!(q>=d.length);q+=2){a.add(d.Y(q));if(q+1>=d.length)break;c.add(d.Y(q+1))}this.direction===Sn?(this.We===Zn&&a.reverse(),d=new N(Eq),d.ld(a),d.ld(c)):(this.We===Zn&&c.reverse(),d=new N(Eq),d.ld(c),d.ld(a))}for(var s=
d.length,t=m=0,q=0;q<d.length;q++){var n=k+l*t*(this.direction===Un?1:-1)/s,u=d.Y(q).diameter;isNaN(u)&&(u=Fq(d.Y(q),n));360>l&&(0===q||q===d.length-1)&&(u/=2);m+=u;t++}if(isNaN(g)||e===Zn){isNaN(b)&&(b=6);if(e!==Yn&&e!==Zn){u=-Infinity;for(q=0;q<s;q++){var p=d.Y(q),x=d.Y(q===s-1?0:q+1);isNaN(p.diameter)&&Fq(p,0);isNaN(x.diameter)&&Fq(x,0);u=Math.max(u,(p.diameter+x.diameter)/2)}p=u+b;e===Wn?(n=2*Math.PI/s,g=(u+b)/n):g=Gq(this,p*(360<=l?s:s-1),h,k*Math.PI/180,l*Math.PI/180)}else g=Gq(this,m+(360<=
l?s:s-1)*(e!==Zn?b:1.6*b),h,k*Math.PI/180,l*Math.PI/180);n=g*h}else if(n=g*h,t=Hq(this,g,n,k*Math.PI/180,l*Math.PI/180),isNaN(b)){if(e===Yn||e===Zn)b=(t-m)/(360<=l?s:s-1)}else if(e===Yn||e===Zn)q=(t-m)/(360<=l?s:s-1),q<b?(g=Gq(this,m+b*(360<=l?s:s-1),h,k*Math.PI/180,l*Math.PI/180),n=g*h):b=q;else{u=-Infinity;for(q=0;q<s;q++)p=d.Y(q),x=d.Y(q===s-1?0:q+1),isNaN(p.diameter)&&Fq(p,0),isNaN(x.diameter)&&Fq(x,0),u=Math.max(u,(p.diameter+x.diameter)/2);p=u+b;q=Gq(this,p*(360<=l?s:s-1),h,k*Math.PI/180,l*
Math.PI/180);q>g?(g=q,n=g*h):p=t/(360<=l?s:s-1)}this.sw=e;this.Sz=f;this.Nc=g;this.tm=h;this.tw=k;this.Qo=l;this.vj=b;this.lB=m;this.yf=n;this.Rs=p;b=d;d=this.sw;e=this.Nc;f=this.tw;h=this.Qo;k=this.vj;l=this.yf;m=this.Rs;if(this.direction!==Sn&&this.direction!==Tn||d!==Zn)if(this.direction===Sn||this.direction===Tn){g=0;switch(d){case Xn:g=180*Iq(this,e,l,f,m)/Math.PI;break;case Yn:m=b=0;g=a.first();null!==g&&(b=Fq(g,Math.PI/2));g=c.first();null!==g&&(m=Fq(g,Math.PI/2));g=180*Iq(this,e,l,f,k+(b+
m)/2)/Math.PI;break;case Wn:g=h/b.length}if(this.direction===Sn){switch(d){case Xn:Jq(this,a,f,Vn);break;case Yn:Kq(this,a,f,Vn);break;case Wn:Lq(this,a,h/2,f,Vn)}switch(d){case Xn:Jq(this,c,f+g,Un);break;case Yn:Kq(this,c,f+g,Un);break;case Wn:Lq(this,c,h/2,f+g,Un)}}else{switch(d){case Xn:Jq(this,c,f,Vn);break;case Yn:Kq(this,c,f,Vn);break;case Wn:Lq(this,c,h/2,f,Vn)}switch(d){case Xn:Jq(this,a,f+g,Un);break;case Yn:Kq(this,a,f+g,Un);break;case Wn:Lq(this,a,h/2,f+g,Un)}}}else switch(d){case Xn:Jq(this,
b,f,this.direction);break;case Yn:Kq(this,b,f,this.direction);break;case Wn:Lq(this,b,h,f,this.direction);break;case Zn:Mq(this,b,h,f,this.direction)}else Mq(this,b,h,f-h/2,Un)}this.updateParts();this.network=null;this.Ke=!0};
function Lq(a,b,c,d,e){var f=a.Qo,g=a.Nc;a=a.yf;d=d*Math.PI/180;c=c*Math.PI/180;for(var h=b.length,k=0;k<h;k++){var l=d+(e===Un?k*c/(360<=f?h:h-1):-(k*c)/h),m=b.Y(k),n=g*Math.tan(l)/a,n=Math.sqrt((g*g+a*a*n*n)/(1+n*n));m.ra=n*Math.cos(l);m.Ba=n*Math.sin(l);m.actualAngle=180*l/Math.PI}}
function Kq(a,b,c,d){var e=a.Nc,f=a.yf,g=a.vj;c=c*Math.PI/180;for(var h=b.length,k=0;k<h;k++){var l=b.Y(k),m=b.Y(k===h-1?0:k+1),n=f*Math.sin(c);l.ra=e*Math.cos(c);l.Ba=n;l.actualAngle=180*c/Math.PI;isNaN(l.diameter)&&Fq(l,0);isNaN(m.diameter)&&Fq(m,0);l=Iq(a,e,f,d===Un?c:-c,(l.diameter+m.diameter)/2+g);c+=d===Un?l:-l}}
function Jq(a,b,c,d){var e=a.Nc,f=a.yf,g=a.Rs;c=c*Math.PI/180;for(var h=b.length,k=0;k<h;k++){var l=b.Y(k);l.ra=e*Math.cos(c);l.Ba=f*Math.sin(c);l.actualAngle=180*c/Math.PI;l=Iq(a,e,f,d===Un?c:-c,g);c+=d===Un?l:-l}}function Mq(a,b,c,d,e){var f=a.Us,f=a.Qo;a.$k=0;a.nu=new Cq;if(360>c){for(f=d+(e===Un?f:-f);0>f;)f+=360;f%=360;180<f&&(f-=360);f*=Math.PI/180;a.Us=f;Nq(a,b,c,d,e)}else Oq(a,b,c,d,e);a.nu.commit(b)}
function Oq(a,b,c,d,e){var f=a.Nc,g=a.vj,h=a.tm,k=f*Math.cos(d*Math.PI/180),l=a.yf*Math.sin(d*Math.PI/180),m=b.ae();if(3===m.length)m[0].ra=f,m[0].Ba=0,m[1].ra=m[0].ra-m[0].width/2-m[1].width/2-g,m[1].y=m[0].y,m[2].ra=(m[0].ra+m[1].ra)/2,m[2].y=m[0].y-m[2].height-g;else if(4===m.length)m[0].ra=f,m[0].Ba=0,m[2].ra=-m[0].ra,m[2].Ba=m[0].Ba,m[1].ra=0,m[1].y=Math.min(m[0].y,m[2].y)-m[1].height-g,m[3].ra=0,m[3].y=Math.max(m[0].y+m[0].height+g,m[2].y+m[2].height+g);else{for(var f=Va(),n=0;n<m.length;n++){m[n].ra=
k;m[n].Ba=l;if(n>=m.length-1)break;Pq(a,k,l,m,n,e,f)||Qq(a,k,l,m,n,e,f);k=f.x;l=f.y}A(f);a.$k++;if(!(23<a.$k)){var k=m[0].ra,l=m[0].Ba,f=m[m.length-1].ra,n=m[m.length-1].Ba,p=Math.abs(k-f)-((m[0].width+m[m.length-1].width)/2+g),q=Math.abs(l-n)-((m[0].height+m[m.length-1].height)/2+g),g=0;1>Math.abs(q)?Math.abs(k-f)<(m[0].width+m[m.length-1].width)/2&&(g=0):g=0<q?q:1>Math.abs(p)?0:p;p=!1;p=Math.abs(f)>Math.abs(n)?0<f!==l>n:0<n!==k<f;if(p=e===Un?p:!p)g=-Math.abs(g),g=Math.min(g,-m[m.length-1].width),
g=Math.min(g,-m[m.length-1].height);a.nu.compare(g,m);1<Math.abs(g)&&(a.Nc=8>a.$k?a.Nc-g/(2*Math.PI):5>m.length&&10<g?a.Nc/2:a.Nc-(0<g?1.7:-2.3),a.yf=a.Nc*h,Oq(a,b,c,d,e))}}}
function Nq(a,b,c,d,e){for(var f=a.Nc,g=a.yf,h=a.tm,k=f*Math.cos(d*Math.PI/180),l=g*Math.sin(d*Math.PI/180),m=Va(),n=b.ae(),p=0;p<n.length;p++){n[p].ra=k;n[p].Ba=l;if(p>=n.length-1)break;Pq(a,k,l,n,p,e,m)||Qq(a,k,l,n,p,e,m);k=m.x;l=m.y}A(m);a.$k++;if(!(23<a.$k)){k=Math.atan2(l,k);k=e===Un?a.Us-k:k-a.Us;k=Math.abs(k)<Math.abs(k-2*Math.PI)?k:k-2*Math.PI;f=k*(f+g)/2;g=a.nu;if(Math.abs(f)<Math.abs(g.zn))for(g.zn=f,g.Tl=[],g.ko=[],k=0;k<n.length;k++)g.Tl[k]=n[k].Qa.x,g.ko[k]=n[k].Qa.y;1<Math.abs(f)&&(a.Nc=
8>a.$k?a.Nc-f/(2*Math.PI):a.Nc-(0<f?1.7:-2.3),a.yf=a.Nc*h,Nq(a,b,c,d,e))}}function Pq(a,b,c,d,e,f,g){var h=a.Nc,k=a.yf,l=0,m=0;a=(d[e].width+d[e+1].width)/2+a.vj;var n=!1;if(0<=c!==(f===Un)){if(l=b+a,l>h){l=b-a;if(l<-h)return g.x=l,g.y=m,!1;n=!0}}else if(l=b-a,l<-h){l=b+a;if(l>h)return g.x=l,g.y=m,!1;n=!0}m=Math.sqrt(1-Math.min(1,l*l/(h*h)))*k;0>c!==n&&(m=-m);if(Math.abs(c-m)>(d[e].height+d[e+1].height)/2)return g.x=l,g.y=m,!1;g.x=l;g.y=m;return!0}
function Qq(a,b,c,d,e,f,g){var h=a.Nc,k=a.yf,l=0,m=0;a=(d[e].height+d[e+1].height)/2+a.vj;d=!1;if(0<=b!==(f===Un)){if(m=c-a,m<-k){m=c+a;if(m>k){g.x=l;g.y=m;return}d=!0}}else if(m=c+a,m>k){m=c-a;if(m<-k){g.x=l;g.y=m;return}d=!0}l=Math.sqrt(1-Math.min(1,m*m/(k*k)))*h;0>b!==d&&(l=-l);g.x=l;g.y=m}Mn.prototype.commitLayout=function(){this.commitNodes();this.av&&this.commitLinks()};
Mn.prototype.commitNodes=function(){for(var a=this.pE,b=this.network.vertexes.i;b.next();){var c=b.value;c.x+=a.x;c.y+=a.y;c.commit()}};Mn.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};
function Hq(a,b,c,d,e){var f=a.hE;if(.001>Math.abs(a.tm-1))return void 0!==d&&void 0!==e?e*b:2*Math.PI*b;a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c;for(var g=0,h=0,h=void 0!==d&&void 0!==e?e/(f+1):Math.PI/(2*(f+1)),k=0,l=0;l<=f;l++)k=void 0!==d&&void 0!==e?d+l*e/f:l*Math.PI/(2*f),k=Math.sin(k),g+=Math.sqrt(1-a*a*k*k)*h;return void 0!==d&&void 0!==e?(b>c?b:c)*g:4*(b>c?b:c)*g}function Gq(a,b,c,d,e){var f=0,f=void 0!==d&&void 0!==e?Hq(a,1,c,d,e):Hq(a,1,c);return b/f}
function Iq(a,b,c,d,e){if(.001>Math.abs(a.tm-1))return e/b;var f=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,g=0;a=2*Math.PI/(700*a.network.vertexes.count);b>c&&(d+=Math.PI/2);for(var h=0;;h++){var k=Math.sin(d+h*a),g=g+(b>c?b:c)*Math.sqrt(1-f*f*k*k)*a;if(g>=e)return h*a}}
Mn.prototype.sort=function(a){switch(this.sorting){case Pn:break;case Qn:a.reverse();break;case Nn:a.sort(this.comparer);break;case On:a.sort(this.comparer);a.reverse();break;case Rn:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new N(Eq),c=0;c<a.length;c++){var e=-1,f=-1;if(0===c)for(var g=0;g<a.length;g++){var h=a.Y(g).cF;h>e&&(e=h,f=g)}else for(g=0;g<a.length;g++)h=b[g],h>e&&(e=h,f=g);d.add(a.Y(f));b[f]=-1;f=a.Y(f);e=0;for(g=f.Mb;g.next();)e=a.indexOf(g.value.fromVertex),0>e||0<=b[e]&&b[e]++;
for(f=f.Hb;f.next();)e=a.indexOf(f.value.toVertex),0>e||0<=b[e]&&b[e]++}a=[];for(b=0;b<d.length;b++){g=d.Y(b);a[b]=[];for(var k=0,c=g.Hb;c.next();)k=d.indexOf(c.value.toVertex),k!==b&&0>a[b].indexOf(k)&&a[b].push(k);for(c=g.Mb;c.next();)k=d.indexOf(c.value.fromVertex),k!==b&&0>a[b].indexOf(k)&&a[b].push(k)}g=[];for(b=0;b<a.length;b++)g[b]=0;for(var c=[],h=[],l=[],e=[],f=new N(Eq),m=0,b=0;b<a.length;b++){var n=a[b].length;if(1===n)e.push(b);else if(0===n)f.add(d.Y(b));else{if(0===m)c.push(b);else{for(var p=
Infinity,q=Infinity,s=-1,t=[],n=0;n<c.length;n++)0>a[c[n]].indexOf(c[n===c.length-1?0:n+1])&&t.push(n===c.length-1?0:n+1);if(0===t.length)for(n=0;n<c.length;n++)t.push(n);for(n=0;n<t.length;n++){var u=t[n],x,k=a[b];x=h;for(var B=l,y=g,C=u,K=c,J=0,ba=0;ba<x.length;ba++){var ja=y[x[ba]],Y=y[B[ba]],P=0,ha=0;ja<Y?(P=ja,ha=Y):(P=Y,ha=ja);if(P<C&&C<=ha)for(ja=0;ja<k.length;ja++)Y=k[ja],0>K.indexOf(Y)||P<y[Y]&&y[Y]<ha||P===y[Y]||ha===y[Y]||J++;else for(ja=0;ja<k.length;ja++)Y=k[ja],0>K.indexOf(Y)||P<y[Y]&&
y[Y]<ha&&P!==y[Y]&&ha!==y[Y]&&J++}x=J;for(y=B=0;y<a[b].length;y++)k=c.indexOf(a[b][y]),0<=k&&(k=Math.abs(u-(k>=u?k+1:k)),B+=k<c.length+1-k?k:c.length+1-k);for(y=0;y<h.length;y++)k=g[h[y]],C=g[l[y]],k>=u&&k++,C>=u&&C++,k>C&&(K=C,C=k,k=K),C-k<(c.length+2)/2===(k<u&&u<=C)&&B++;if(x<p||x===p&&B<q)p=x,q=B,s=u}c.splice(s,0,b);for(n=0;n<c.length;n++)g[c[n]]=n;for(n=0;n<a[b].length;n++)p=a[b][n],0<=c.indexOf(p)&&(h.push(b),l.push(p))}m++}}h=!1;for(l=c.length;;){h=!0;for(g=0;g<e.length;g++)if(b=e[g],m=a[b][0],
k=c.indexOf(m),0<=k){for(q=n=0;q<a[m].length;q++)p=a[m][q],p=c.indexOf(p),0>p||p===k||(s=p>k?p-k:k-p,n+=p<k!==s>l-s?1:-1);c.splice(0>n?k:k+1,0,b);e.splice(g,1);g--}else h=!1;if(h)break;else c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)k=c[b],f.add(d.Y(k));return f;default:v("Invalid sorting type.")}return a};G(Mn,{oG:"radius"},function(){return this.mq},function(a){this.mq!==a&&(w(a,"number",Mn,"radius"),0<a||isNaN(a))&&(this.mq=a,this.v())});
G(Mn,{xE:"aspectRatio"},function(){return this.wo},function(a){this.wo!==a&&(w(a,"number",Mn,"aspectRatio"),0<a&&(this.wo=a,this.v()))});G(Mn,{bh:"startAngle"},function(){return this.Nq},function(a){this.Nq!==a&&(w(a,"number",Mn,"startAngle"),this.Nq=a,this.v())});G(Mn,{Xh:"sweepAngle"},function(){return this.Pq},function(a){this.Pq!==a&&(w(a,"number",Mn,"sweepAngle"),this.Pq=0<a&&360>=a?a:360,this.v())});
G(Mn,{We:"arrangement"},function(){return this.sc},function(a){this.sc!==a&&(va(a,Mn,Mn,"arrangement"),a===Zn||a===Yn||a===Xn||a===Wn)&&(this.sc=a,this.v())});G(Mn,{direction:"direction"},function(){return this.aa},function(a){this.aa!==a&&(va(a,Mn,Mn,"direction"),a===Un||a===Vn||a===Sn||a===Tn)&&(this.aa=a,this.v())});G(Mn,{sorting:"sorting"},function(){return this.Rg},function(a){this.Rg!==a&&(va(a,Mn,Mn,"sorting"),a===Pn||a===Qn||a===Nn||On||a===Rn)&&(this.Rg=a,this.v())});
G(Mn,{comparer:"comparer"},function(){return this.zg},function(a){this.zg!==a&&(w(a,"function",Mn,"comparer"),this.zg=a,this.v())});G(Mn,{spacing:"spacing"},function(){return this.Sg},function(a){this.Sg!==a&&(w(a,"number",Mn,"spacing"),this.Sg=a,this.v())});G(Mn,{jv:"nodeDiameterFormula"},function(){return this.Zp},function(a){this.Zp!==a&&(va(a,Mn,Mn,"nodeDiameterFormula"),a===ao||a===$n)&&(this.Zp=a,this.v())});H(Mn,{qE:"actualXRadius"},function(){return this.Nc});H(Mn,{rE:"actualYRadius"},function(){return this.yf});
H(Mn,{eH:"actualSpacing"},function(){return this.vj});H(Mn,{pE:"actualCenter"},function(){return isNaN(this.md.x)||isNaN(this.md.y)?new z(0,0):new z(this.md.x+this.qE,this.md.y+this.rE)});var Yn;Mn.ConstantSpacing=Yn=I(Mn,"ConstantSpacing",0);var Xn;Mn.ConstantDistance=Xn=I(Mn,"ConstantDistance",1);var Wn;Mn.ConstantAngle=Wn=I(Mn,"ConstantAngle",2);var Zn;Mn.Packed=Zn=I(Mn,"Packed",3);var Un;Mn.Clockwise=Un=I(Mn,"Clockwise",4);var Vn;Mn.Counterclockwise=Vn=I(Mn,"Counterclockwise",5);var Sn;
Mn.BidirectionalLeft=Sn=I(Mn,"BidirectionalLeft",6);var Tn;Mn.BidirectionalRight=Tn=I(Mn,"BidirectionalRight",7);var Pn;Mn.Forwards=Pn=I(Mn,"Forwards",8);var Qn;Mn.Reverse=Qn=I(Mn,"Reverse",9);var Nn;Mn.Ascending=Nn=I(Mn,"Ascending",10);var On;Mn.Descending=On=I(Mn,"Descending",11);var Rn;Mn.Optimized=Rn=I(Mn,"Optimized",12);var ao;Mn.Pythagorean=ao=I(Mn,"Pythagorean",13);var $n;Mn.Circular=$n=I(Mn,"Circular",14);function Cq(){this.zn=-Infinity;this.ko=this.Tl=null}
Cq.prototype.compare=function(a,b){if(0<a&&0>this.zn||Math.abs(a)<Math.abs(this.zn)&&!(0>a&&0<this.zn)){this.zn=a;this.Tl=[];this.ko=[];for(var c=0;c<b.length;c++)this.Tl[c]=b[c].Qa.x,this.ko[c]=b[c].Qa.y}};Cq.prototype.commit=function(a){if(null!==this.Tl&&null!==this.ko)for(var b=0;b<this.Tl.length;b++){var c=a.Y(b);c.x=this.Tl[b];c.y=this.ko[b]}};function Dq(){kc.call(this)}yb(Dq,kc);vb("CircularNetwork",Dq);Dq.prototype.createVertex=function(){return new Eq};Dq.prototype.createEdge=function(){return new Rq};
function Eq(){lc.call(this);this.actualAngle=this.diameter=NaN}yb(Eq,lc);vb("CircularVertex",Eq);
function Fq(a,b){var c=a.network;if(null===c)return NaN;c=c.vb;if(null===c)return NaN;if(c.We===Zn)if(c.jv===$n)a.diameter=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.diameter=Math.min(a.height/c,a.width/d)}else a.diameter=c.jv===$n?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.diameter}function Rq(){sc.call(this)}yb(Rq,sc);vb("CircularEdge",Rq);
function Sq(){0<arguments.length&&Aa(Sq);lg.call(this);this.xf=null;this.tp=0;this.hf=(new Za(100,100)).freeze();this.vo=!1;this.Qg=!0;this.yg=!1;this.Pm=100;this.So=1;this.Ig=1E3;this.nq=Math;this.om=.05;this.nm=50;this.km=150;this.mm=0;this.Mo=10;this.Lo=5}yb(Sq,lg);vb("ForceDirectedLayout",Sq);
Sq.prototype.cloneProtected=function(a){lg.prototype.cloneProtected.call(this,a);a.hf.assign(this.hf);a.vo=this.vo;a.Qg=this.Qg;a.yg=this.yg;a.Pm=this.Pm;a.So=this.So;a.Ig=this.Ig;a.nq=this.nq;a.om=this.om;a.nm=this.nm;a.km=this.km;a.mm=this.mm;a.Mo=this.Mo;a.Lo=this.Lo};Sq.prototype.createNetwork=function(){return new Tq};
Sq.prototype.doLayout=function(a){null===a&&v("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));a=this.py;if(0<this.network.vertexes.count){this.network.Iu();for(var b=this.network.vertexes.i;b.next();){var c=b.value;c.charge=this.electricalCharge(c);c.mass=this.gravitationalMass(c)}for(b=this.network.edges.i;b.next();)c=b.value,c.stiffness=this.springStiffness(c),c.length=this.springLength(c);
this.Bx();this.tp=0;if(this.needsClusterLayout()){b=this.network;for(c=b.OG().i;c.next();){this.network=c.value;for(var d=this.network.vertexes.i;d.next();){var e=d.value;e.df=e.vertexes.count;e.aj=1;e.wl=null;e.tg=null}Uq(this,0,a)}this.network=b;c.reset();for(var d=this.DB,f=c.count,g=!0,h=e=0,k=ob(),l=0;l<f+b.vertexes.count+2;l++)k[l]=null;f=0;c.reset();for(var m=bb();c.next();)if(l=c.value,this.zf(l,m),g)g=!1,e=m.x+m.width/2,h=m.y+m.height/2,k[0]=new z(m.x+m.width+d.width,m.y),k[1]=new z(m.x,
m.y+m.height+d.height),f=2;else{var n=Vq(k,f,e,h,m.width,m.height,d),p=k[n],q=new z(p.x+m.width+d.width,p.y),s=new z(p.x,p.y+m.height+d.height);n+1<f&&k.splice(n+1,0,null);k[n]=q;k[n+1]=s;f++;n=p.x-m.x;p=p.y-m.y;for(l=l.vertexes.i;l.next();)q=l.value,q.ra+=n,q.Ba+=p}fb(m);for(l=b.vertexes.i;l.next();)g=l.value,m=g.Qa,2>f?(e=m.x+m.width/2,h=m.y+m.height/2,k[0]=new z(m.x+m.width+d.width,m.y),k[1]=new z(m.x,m.y+m.height+d.height),f=2):(n=Vq(k,f,e,h,m.width,m.height,d),p=k[n],q=new z(p.x+m.width+d.width,
p.y),s=new z(p.x,p.y+m.height+d.height),n+1<f&&k.splice(n+1,0,null),k[n]=q,k[n+1]=s,f++,g.ra=p.x+g.width/2,g.Ba=p.y+g.height/2);pb(k);for(c.reset();c.next();){d=c.value;for(e=d.vertexes.i;e.next();)b.Vj(e.value);for(d=d.edges.i;d.next();)b.jn(d.value)}}Wq(this,a);this.updateParts()}this.Pm=a;this.network=null;this.Ke=!0};
Sq.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var a=0,b=0,c=this.network.vertexes.first().Qa,d=this.network.vertexes.i;d.next();){if(d.value.Qa.Gf(c)&&(a++,2<a))return!0;if(10<b)break;b++}return!1};Sq.prototype.zf=function(a,b){for(var c=!0,d=a.vertexes.i;d.next();){var e=d.value;c?(c=!1,b.set(e.Qa)):b.eh(e.Qa)}return b};
function Uq(a,b,c){if(Xq(a,b)){var d=a.Ig;a.Ig*=1+1/(b+1);var e=Yq(a,b),f=Math.max(0,Math.max(Math.min(a.network.vertexes.count,c*(b+1)/11),10));a.py+=f;Uq(a,b+1,c);Wq(a,f);Zq(a,e);b=a.xf;null===b?b=new N($q):b.clear();b.ld(e.vertexes);b.sort(function(a,b){return null===a||null===b||a===b?0:b.df-a.df});for(e=b.i;e.next();)ar(a,e.value);a.Ig=d}}
function Xq(a,b){if(10<b||3>a.network.vertexes.count)return!1;null===a.xf?a.xf=new N($q):a.xf.clear();a.xf.ld(a.network.vertexes);var c=a.xf;c.sort(function(a,b){return null===a||null===b||a===b?0:b.df-a.df});for(var d=c.count-1;0<=d&&1>=c.Y(d).df;)d--;return 1<c.count-d}
function Yq(a,b){for(var c=a.network,d=new Tq,e=a.xf.i;e.next();){var f=e.value;if(1<f.df){d.Vj(f);var g=new gr;g.Mv=f.df;g.Pv=f.width;g.Lv=f.height;g.gz=f.B.x;g.hz=f.B.y;null===f.tg&&(f.tg=new N(gr));f.tg.add(g);f.Oy=f.tg.count-1}else break}for(var h=c.edges.i;h.next();)if(e=h.value,e.fromVertex.network===d&&e.toVertex.network===d)d.jn(e);else if(e.fromVertex.network===d){var k=e.fromVertex.wl;null===k&&(k=new N($q),e.fromVertex.wl=k);k.add(e.toVertex);e.fromVertex.df--;e.fromVertex.aj+=e.toVertex.aj}else e.toVertex.network===
d&&(k=e.toVertex.wl,null===k&&(k=new N($q),e.toVertex.wl=k),k.add(e.fromVertex),e.toVertex.df--,e.toVertex.aj+=e.fromVertex.aj);for(e=d.edges.i;e.next();)f=e.value,f.length*=Math.max(1,Q.sqrt((f.fromVertex.aj+f.toVertex.aj)/(4*b+1)));for(e=d.vertexes.i;e.next();)if(f=e.value,k=f.wl,null!==k&&0<k.count&&(g=f.tg.Y(f.tg.count-1),g=g.Mv-f.df,!(0>=g))){for(var l=0,m=0,n=k.count-g;n<k.count;n++){for(var p=k.Y(n),q=null,h=p.edges.i;h.next();){var s=h.value;if(s.lF(p)===f){q=s;break}}null!==q&&(m+=q.length,
l+=p.width*p.height)}k=f.ra;h=f.Ba;n=f.width;p=f.height;q=f.B;s=n*p;1>s&&(s=1);l=Q.sqrt((l+s+m*m*4/(g*g))/s);g=(l-1)*n/2;l=(l-1)*p/2;f.Qa=new D(k-q.x-g,h-q.y-l,n+2*g,p+2*l);f.focus=new z(q.x+g,q.y+l)}a.network=d;return c}function Zq(a,b){for(var c=a.network.vertexes.i;c.next();){var d=c.value;d.network=b;if(null!==d.tg){var e=d.tg.Y(d.Oy);d.df=e.Mv;var f=e.gz,g=e.hz;d.Qa=new D(d.ra-f,d.Ba-g,e.Pv,e.Lv);d.focus=new z(f,g);d.Oy--}}for(c=a.network.edges.i;c.next();)c.value.network=b;a.network=b}
function ar(a,b){var c=b.wl;if(null!==c&&0!==c.count){var d=b.ra,e=b.Ba,f=b.width,g=b.height;null!==b.tg&&0<b.tg.count&&(g=b.tg.Y(0),f=g.Pv,g=g.Lv);for(var f=Q.sqrt(f*f+g*g)/2,h=!1,k=g=0,l=0,m=b.vertexes.i;m.next();){var n=m.value;1>=n.df?k++:(h=!0,l++,g+=Math.atan2(b.Ba-n.Ba,b.ra-n.ra))}if(0!==k)for(0<l&&(g/=l),m=l=0,l=h?2*Math.PI/(k+1):2*Math.PI/k,0===k%2&&(m=l/2),1<c.count&&c.sort(function(a,b){return null===a||null===b||a===b?0:b.width*b.height-a.width*a.height}),h=0===k%2?0:1,c=c.i;c.next();)if(k=
c.value,!(1<k.df||a.isFixed(k))){for(var n=null,p=k.edges.i;p.next();){n=p.value;break}var p=k.width,q=k.height,p=Q.sqrt(p*p+q*q)/2,n=f+n.length+p,p=g+(l*(h/2>>1)+m)*(0===h%2?1:-1);k.ra=d+n*Math.cos(p);k.Ba=e+n*Math.sin(p);h++}}}function Vq(a,b,c,d,e,f,g){var h=9E19,k=-1,l=0;a:for(;l<b;l++){var m=a[l],n=m.x-c,p=m.y-d,n=n*n+p*p;if(n<h){for(p=l-1;0<=p;p--)if(a[p].y>m.y&&a[p].x-m.x<e+g.width)continue a;for(p=l+1;p<b;p++)if(a[p].x>m.x&&a[p].y-m.y<f+g.height)continue a;k=l;h=n}}return k}
Sq.prototype.Bx=function(){if(this.comments)for(var a=this.network.vertexes.i;a.next();)this.addComments(a.value)};
Sq.prototype.addComments=function(a){var b=a.dc;if(null!==b)for(b=b.aC();b.next();){var c=b.value;if("Comment"===c.jc&&c.sa()){var d=this.network.Fl(c);null===d&&(d=this.network.dr(c));d.charge=this.RE;for(var c=null,e=d.Hb;e.next();){var f=e.value;if(f.toVertex===a){c=f;break}}if(null===c)for(e=d.Mb;e.next();)if(f=e.value,f.fromVertex===a){c=f;break}null===c&&(c=this.network.Ln(a,d,null));c.length=this.SE}}};
function kr(a,b){var c=a.P,d=c.x,e=c.y,f=c.width,c=c.height,g=b.P,h=g.x,k=g.y,l=g.width,g=g.height;return d+f<h?e>k+g?(d=d+f-h,e=e-k-g,Q.sqrt(d*d+e*e)):e+c<k?(d=d+f-h,e=e+c-k,Q.sqrt(d*d+e*e)):h-(d+f):d>h+l?e>k+g?(d=d-h-l,e=e-k-g,Q.sqrt(d*d+e*e)):e+c<k?(d=d-h-l,e=e+c-k,Q.sqrt(d*d+e*e)):d-(h+l):e>k+g?e-(k+g):e+c<k?k-(e+c):.1}function Wq(a,b){a.xf=null;for(var c=a.tp+b;a.tp<c&&(a.tp++,lr(a)););a.xf=null}
function lr(a){null===a.xf&&(a.xf=new N($q),a.xf.ld(a.network.vertexes));var b=a.xf.l;if(0>=b.length)return!1;var c=b[0];c.forceX=0;c.forceY=0;for(var d=c.ra,e=d,f=c.Ba,g=f,c=1;c<b.length;c++){var h=b[c];h.forceX=0;h.forceY=0;var k=h.ra,h=h.Ba,d=Math.min(d,k),e=Math.max(e,k),f=Math.min(f,h),g=Math.max(g,h)}(f=e-d>g-f)?b.sort(function(a,b){return null===a||null===b||a===b?0:a.ra-b.ra}):b.sort(function(a,b){return null===a||null===b||a===b?0:a.Ba-b.Ba});for(var g=a.Ig,l=0,m=0,n=0,c=0;c<b.length;c++){var h=
b[c],k=h.P,p=h.B,d=k.x+p.x,k=k.y+p.y,m=h.charge*a.electricalFieldX(d,k),n=h.charge*a.electricalFieldY(d,k),m=m+h.mass*a.gravitationalFieldX(d,k),n=n+h.mass*a.gravitationalFieldY(d,k);h.forceX+=m;h.forceY+=n;for(p=c+1;p<b.length;p++)if(e=b[p],e!==h){var q=e.P,m=e.B,n=q.x+m.x,q=q.y+m.y;if(d-n>g||n-d>g){if(f)break}else if(k-q>g||q-k>g){if(!f)break}else{var s=kr(h,e);1>s?(m=a.qv,null===m&&(a.qv=m=new Ac(0)),l=m.random(),s=m.random(),d>n?(m=Math.abs(e.P.right-h.P.x),m=(1+m)*l):d<n?(m=Math.abs(e.P.x-h.P.right),
m=-(1+m)*l):(m=Math.max(e.width,h.width),m=(1+m)*l-m/2),k>q?(n=Math.abs(e.P.bottom-h.P.y),n=(1+n)*s):d<n?(n=Math.abs(e.P.y-h.P.bottom),n=-(1+n)*s):(n=Math.max(e.height,h.height),n=(1+n)*s-n/2)):(l=-(h.charge*e.charge)/(s*s),m=(n-d)/s*l,n=(q-k)/s*l);h.forceX+=m;h.forceY+=n;e.forceX-=m;e.forceY-=n}}}for(c=a.network.edges.i;c.next();)f=c.value,h=f.fromVertex,e=f.toVertex,k=h.P,p=h.B,d=k.x+p.x,k=k.y+p.y,q=e.P,m=e.B,n=q.x+m.x,q=q.y+m.y,s=kr(h,e),1>s?(m=a.qv,null===m&&(a.qv=m=new Ac(0)),l=m.random(),s=
m.random(),m=(d>n?1:-1)*(1+(e.width>h.width)?e.width:h.width)*l,n=(k>q?1:-1)*(1+(e.height>h.height)?e.height:h.height)*s):(l=f.stiffness*(s-f.length),m=(n-d)/s*l,n=(q-k)/s*l),h.forceX+=m,h.forceY+=n,e.forceX-=m,e.forceY-=n;c=0;d=Math.max(a.Ig/20,50);for(e=0;e<b.length;e++)h=b[e],a.isFixed(h)?a.moveFixedVertex(h):(f=h.forceX,g=h.forceY,f<-d?f=-d:f>d&&(f=d),g<-d?g=-d:g>d&&(g=d),h.ra+=f,h.Ba+=g,c=Math.max(c,f*f+g*g));return c>a.YB*a.YB}Sq.prototype.moveFixedVertex=function(){};
Sq.prototype.commitLayout=function(){this.Ty();this.commitNodes();this.av&&this.commitLinks()};Sq.prototype.Ty=function(){if(this.co)for(var a=this.network.edges.i;a.next();){var b=a.value.link;null!==b&&(b.Za=ee,b.ab=ee)}};Sq.prototype.commitNodes=function(){var a=0,b=0;if(this.wE){var c=bb();this.zf(this.network,c);b=this.md;a=b.x-c.x;b=b.y-c.y;fb(c)}for(var c=bb(),d=this.network.vertexes.i;d.next();){var e=d.value;if(0!==a||0!==b)c.assign(e.Qa),c.x+=a,c.y+=b,e.Qa=c;e.commit()}fb(c)};
Sq.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};Sq.prototype.springStiffness=function(a){a=a.stiffness;return isNaN(a)?this.om:a};Sq.prototype.springLength=function(a){a=a.length;return isNaN(a)?this.nm:a};Sq.prototype.electricalCharge=function(a){a=a.charge;return isNaN(a)?this.km:a};Sq.prototype.electricalFieldX=function(){return 0};Sq.prototype.electricalFieldY=function(){return 0};
Sq.prototype.gravitationalMass=function(a){a=a.mass;return isNaN(a)?this.mm:a};Sq.prototype.gravitationalFieldX=function(){return 0};Sq.prototype.gravitationalFieldY=function(){return 0};Sq.prototype.isFixed=function(a){return a.isFixed};H(Sq,{EH:"currentIteration"},function(){return this.tp});G(Sq,{DB:"arrangementSpacing"},function(){return this.hf},function(a){ra(a,Za,Sq,"arrangementSpacing");this.hf.A(a)||(this.hf.assign(a),this.v())});
G(Sq,{wE:"arrangesToOrigin"},function(){return this.vo},function(a){this.vo!==a&&(w(a,"boolean",Sq,"arrangesToOrigin"),this.vo=a,this.v())});G(Sq,{co:"setsPortSpots"},function(){return this.Qg},function(a){this.Qg!==a&&(w(a,"boolean",Sq,"setsPortSpots"),this.Qg=a,this.v())});G(Sq,{comments:"comments"},function(){return this.yg},function(a){this.yg!==a&&(w(a,"boolean",Sq,"comments"),this.yg=a,this.v())});
G(Sq,{py:"maxIterations"},function(){return this.Pm},function(a){this.Pm!==a&&(w(a,"number",Sq,"maxIterations"),0<=a&&(this.Pm=a,this.v()))});G(Sq,{YB:"epsilonDistance"},function(){return this.So},function(a){this.So!==a&&(w(a,"number",Sq,"epsilonDistance"),0<a&&(this.So=a,this.v()))});G(Sq,{YH:"infinityDistance"},function(){return this.Ig},function(a){this.Ig!==a&&(w(a,"number",Sq,"infinityDistance"),1<a&&(this.Ig=a,this.v()))});
G(Sq,{qv:"randomNumberGenerator"},function(){return this.nq},function(a){this.nq!==a&&(null!==a&&"function"!==typeof a.random&&v('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+a),this.nq=a)});G(Sq,{RH:"defaultSpringStiffness"},function(){return this.om},function(a){this.om!==a&&(w(a,"number",Sq,"defaultSpringStiffness"),this.om=a,this.v())});
G(Sq,{QH:"defaultSpringLength"},function(){return this.nm},function(a){this.nm!==a&&(w(a,"number",Sq,"defaultSpringLength"),this.nm=a,this.v())});G(Sq,{KH:"defaultElectricalCharge"},function(){return this.km},function(a){this.km!==a&&(w(a,"number",Sq,"defaultElectricalCharge"),this.km=a,this.v())});G(Sq,{LH:"defaultGravitationalMass"},function(){return this.mm},function(a){this.mm!==a&&(w(a,"number",Sq,"defaultGravitationalMass"),this.mm=a,this.v())});
G(Sq,{SE:"defaultCommentSpringLength"},function(){return this.Mo},function(a){this.Mo!==a&&(w(a,"number",Sq,"defaultCommentSpringLength"),this.Mo=a,this.v())});G(Sq,{RE:"defaultCommentElectricalCharge"},function(){return this.Lo},function(a){this.Lo!==a&&(w(a,"number",Sq,"defaultCommentElectricalCharge"),this.Lo=a,this.v())});function gr(){this.hz=this.gz=this.Lv=this.Pv=this.Mv=0}function Tq(){kc.call(this)}yb(Tq,kc);vb("ForceDirectedNetwork",Tq);Tq.prototype.createVertex=function(){return new $q};
Tq.prototype.createEdge=function(){return new mr};function $q(){lc.call(this);this.isFixed=!1;this.mass=this.charge=NaN;this.aj=this.df=this.forceY=this.forceX=0;this.tg=this.wl=null;this.Oy=0}yb($q,lc);vb("ForceDirectedVertex",$q);function mr(){sc.call(this);this.length=this.stiffness=NaN}yb(mr,sc);vb("ForceDirectedEdge",mr);
function wn(){0<arguments.length&&Aa(wn);lg.call(this);this.Mc=this.Vk=25;this.aa=0;this.jm=nr;this.Om=or;this.Dm=pr;this.Sk=4;this.Zl=qr;this.Bh=rr;this.Qg=!0;this.qi=4;this.nb=this.Bt=this.Pa=-1;this.Re=this.Np=0;this.qb=this.Qe=this.of=this.Zf=this.cd=null;this.Up=0;this.Tp=this.Xk=null;this.rf=0;this.Vp=null;this.ag=[];this.ag.length=100}yb(wn,lg);vb("LayeredDigraphLayout",wn);
wn.prototype.cloneProtected=function(a){lg.prototype.cloneProtected.call(this,a);a.Vk=this.Vk;a.Mc=this.Mc;a.aa=this.aa;a.jm=this.jm;a.Om=this.Om;a.Dm=this.Dm;a.Sk=this.Sk;a.Zl=this.Zl;a.Bh=this.Bh;a.Qg=this.Qg;a.qi=this.qi};wn.prototype.createNetwork=function(){return new sr};
wn.prototype.doLayout=function(a){null===a&&v("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.md=this.initialOrigin(this.md);this.Bt=-1;this.Re=this.Np=0;this.Vp=this.Tp=this.Xk=null;for(a=0;a<this.ag.length;a++)this.ag[a]=null;if(0<this.network.vertexes.count){this.network.Iu();for(a=this.network.edges.i;a.next();)a.value.rev=!1;switch(this.jm){default:case tr:var b=0,c=this.network.vertexes.count-
1;a=[];a.length=c+1;for(var d=this.network.vertexes.i;d.next();)d.value.valid=!0;for(;null!==ur(this.network);){for(d=vr(this.network);null!==d;)a[c]=d,c--,d.valid=!1,d=vr(this.network);for(d=wr(this.network);null!==d;)a[b]=d,b++,d.valid=!1,d=wr(this.network);for(var d=null,e=0,f=this.network.vertexes.i;f.next();){var g=f.value;if(g.valid){for(var h=0,k=g.Hb;k.next();)k.value.toVertex.valid&&h++;for(var k=0,l=g.Mb;l.next();)l.value.fromVertex.valid&&k++;if(null===d||e<h-k)d=g,e=h-k}}null!==d&&(a[b]=
d,b++,d.valid=!1)}for(b=0;b<this.network.vertexes.count;b++)a[b].index=b;for(a=this.network.edges.i;a.next();)b=a.value,b.fromVertex.index>b.toVertex.index&&(this.network.rv(b),b.rev=!0);break;case nr:for(b=this.network.vertexes.i;b.next();)a=b.value,a.vn=-1,a.finish=-1;for(a=this.network.edges.i;a.next();)a.value.forest=!1;this.Up=0;for(b.reset();b.next();)c=b.value,0===c.Mb.count&&xr(this,c);for(b.reset();b.next();)c=b.value,-1===c.vn&&xr(this,c);for(a.reset();a.next();)b=a.value,b.forest||(c=b.fromVertex,
d=c.finish,e=b.toVertex,f=e.finish,e.vn<c.vn&&d<f&&(this.network.rv(b),b.rev=!0))}for(a=this.network.vertexes.i;a.next();)a.value.layer=-1;this.Pa=-1;this.assignLayers();for(a.reset();a.next();)this.Pa=Math.max(this.Pa,a.value.layer);a=[];for(c=this.network.edges.i;c.next();)b=c.value,b.valid=!1,a.push(b);for(c=0;c<a.length;c++)if(b=a[c],!b.valid&&(null!==b.fromVertex.Ec&&null!==b.toVertex.Ec||b.fromVertex.layer!==b.toVertex.layer)){k=g=h=f=0;e=b.fromVertex;d=b.toVertex;if(null!==b.link){h=b.link;
if(null===h)continue;var m=e.Ec,f=d.Ec;if(null===m||null===f)continue;var n=h.M,g=h.R,p=h.Ic,k=h.xd;b.rev&&(h=n,l=p,n=g,p=k,g=h,k=l);var q=e.B,h=b.toVertex.B,s=b.rev?d.P:e.P,l=Va();s.w()?(mp(n,p,Dd,l),l.w()||l.assign(q)):l.assign(q);m!==n&&s.w()&&n.sa()&&(m=e.P,m.w()&&(l.x+=s.x-m.x,l.y+=s.y-m.y));n=b.rev?e.P:d.P;m=Va();n.w()?(mp(g,k,Dd,m),m.w()||m.assign(h)):m.assign(h);f!==g&&n.w()&&g.sa()&&(f=d.P,f.w()&&(m.x+=n.x-f.x,m.y+=n.y-f.y));90===this.aa||270===this.aa?(f=Math.round((l.x-q.x)/this.Mc),g=
l.x,h=Math.round((m.x-h.x)/this.Mc),k=m.x):(f=Math.round((l.y-q.y)/this.Mc),g=l.y,h=Math.round((m.y-h.y)/this.Mc),k=m.y);A(l);A(m);b.portFromColOffset=f;b.portFromPos=g;b.portToColOffset=h;b.portToPos=k}else b.portFromColOffset=0,b.portFromPos=0,b.portToColOffset=0,b.portToPos=0;l=e.layer;q=d.layer;m=b;n=0;s=m.link;if(null!==s){var t=s.Ic,u=s.xd;if(null!==t&&null!==u){var x=s.M,p=s.R;if(null!==x&&null!==p){var B=t.Za,y=u.ab;this.co||(s.Za.kc()||(B=s.Za),s.ab.kc()||(y=s.ab));if(B.kc()||B===td)B=yr(this,
!0);if(y.kc()||y===td)y=yr(this,!1);var C=s.Jb,K=s.getLinkPoint(x,t,B,!0,C,p,u,Va()),B=s.getLinkDirection(x,t,K,B,!0,C,p,u);A(K);B===zr(this,m,!0)?n+=1:this.co&&null!==x&&1===x.ports.count&&m.rev&&(n+=1);K=s.getLinkPoint(p,u,y,!1,C,x,t,Va());s=s.getLinkDirection(p,u,K,y,!1,C,x,t);A(K);s===zr(this,m,!1)?n+=2:this.co&&null!==p&&1===p.ports.count&&m.rev&&(n+=2)}}}m=1===n||3===n?!0:!1;if(n=2===n||3===n?!0:!1)p=this.network.createVertex(),p.Ec=null,p.tl=1,p.layer=l,p.near=e,this.network.Vj(p),e=this.network.Ln(e,
p,b.link),e.valid=!1,e.rev=b.rev,e.portFromColOffset=f,e.portToColOffset=0,e.portFromPos=g,e.portToPos=0,e=p;s=1;m&&s--;if(l-q>s&&0<l){b.valid=!1;p=this.network.createVertex();p.Ec=null;p.tl=2;p.layer=l-1;this.network.Vj(p);e=this.network.Ln(e,p,b.link);e.valid=!0;e.rev=b.rev;e.portFromColOffset=n?0:f;e.portToColOffset=0;e.portFromPos=n?0:g;e.portToPos=0;e=p;for(l--;l-q>s&&0<l;)p=this.network.createVertex(),p.Ec=null,p.tl=3,p.layer=l-1,this.network.Vj(p),e=this.network.Ln(e,p,b.link),e.valid=!0,e.rev=
b.rev,e.portFromColOffset=0,e.portToColOffset=0,e.portFromPos=0,e.portToPos=0,e=p,l--;e=this.network.Ln(p,d,b.link);e.valid=!m;m&&(p.near=d);e.rev=b.rev;e.portFromColOffset=0;e.portToColOffset=h;e.portFromPos=0;e.portToPos=k}else b.valid=!0}b=this.cd=[];for(c=0;c<=this.Pa;c++)b[c]=0;for(a=this.network.vertexes.i;a.next();)c=a.value,c.index=-1;this.initializeIndices();this.Bt=-1;for(c=this.Re=this.Np=0;c<=this.Pa;c++)b[c]>b[this.Re]&&(this.Bt=b[c]-1,this.Re=c),b[c]<b[this.Np]&&(this.Np=c);this.Vp=
[];for(c=0;c<b.length;c++)this.Vp[c]=[];for(a.reset();a.next();)b=a.value,c=this.Vp[b.layer],c[b.index]=b;this.nb=-1;for(a=0;a<=this.Pa;a++){b=Ar(this,a);c=0;d=this.cd[a];for(e=0;e<d;e++)f=b[e],c+=this.nodeMinColumnSpace(f,!0),f.column=c,c+=1,c+=this.nodeMinColumnSpace(f,!1);this.nb=Math.max(this.nb,c-1);Br(this,a,b)}this.reduceCrossings();this.straightenAndPack();this.updateParts()}this.network=null;this.Ke=!0};
wn.prototype.linkMinLength=function(a){var b=a.toVertex,c=0;for(a=a.fromVertex.Hb;a.next();)a.value.toVertex===b&&c++;return 1<c?2:1};function Cr(a){var b=a.fromVertex.Ec;a=a.toVertex.Ec;return null===b&&null===a?8:null===b||null===a?4:1}wn.prototype.nodeMinLayerSpace=function(a,b){return null===a.Ec?0:90===this.aa||270===this.aa?b?a.B.y+10:a.P.height-a.B.y+10:b?a.B.x+10:a.P.width-a.B.x+10};
wn.prototype.nodeMinColumnSpace=function(a,b){if(null===a.Ec)return 0;var c=b?a.yy:a.xy;if(null!==c)return c;c=this.aa;return 90===c||270===c?b?a.yy=a.B.x/this.Mc+1|0:a.xy=(a.P.width-a.B.x)/this.Mc+1|0:b?a.yy=a.B.y/this.Mc+1|0:a.xy=(a.P.height-a.B.y)/this.Mc+1|0};function Dr(a){null===a.Xk&&(a.Xk=[]);for(var b=0,c=a.network.vertexes.i;c.next();){var d=c.value;a.Xk[b]=d.layer;b++;a.Xk[b]=d.column;b++;a.Xk[b]=d.index;b++}return a.Xk}
function Er(a,b){for(var c=0,d=a.network.vertexes.i;d.next();){var e=d.value;e.layer=b[c];c++;e.column=b[c];c++;e.index=b[c];c++}}
function Fr(a,b,c){var d=Ar(a,b),e=a.cd[b];if(null===a.Tp||a.Tp.length<e*e)a.Tp=[];for(var f=a.Tp,g=0;g<e;g++){var h=0,k=d[g],l=k.near,m=0;if(null!==l&&l.layer===k.layer)if(m=l.index,m>g)for(var n=g+1;n<m;n++)k=d[n],k.near===l&&k.tl===l.tl||h++;else for(n=g-1;n>m;n--)k=d[n],k.near===l&&k.tl===l.tl||h++;var l=0,p,q=p=n=k=0,s,t=0,u=0;s=0;var x;if(0<=c)for(m=d[g].$d,l=0;l<m.count;l++)if(p=m.l[l],p.valid&&p.fromVertex.layer!==b)for(k=p.fromVertex.index,n=p.portToPos,p=p.portFromPos,q=l+1;q<m.count;q++)s=
m.l[q],s.valid&&s.fromVertex.layer!==b&&(t=s.fromVertex.index,u=s.portToPos,s=s.portFromPos,n<u&&(k>t||k===t&&p>s)&&h++,u<n&&(t>k||t===k&&s>p)&&h++);if(0>=c)for(m=d[g].Vd,l=0;l<m.count;l++)if(p=m.l[l],p.valid&&p.toVertex.layer!==b)for(k=p.toVertex.index,n=p.portToPos,p=p.portFromPos,q=l+1;q<m.count;q++)s=m.l[q],s.valid&&s.toVertex.layer!==b&&(t=s.toVertex.index,u=s.portToPos,s=s.portFromPos,p<s&&(k>t||k===t&&n>u)&&h++,s<p&&(t>k||t===k&&u>n)&&h++);f[g*e+g]=h;for(m=g+1;m<e;m++){var B=0,y=0;if(0<=c)for(h=
d[g].$d,x=d[m].$d,l=0;l<h.count;l++)if(p=h.l[l],p.valid&&p.fromVertex.layer!==b)for(k=p.fromVertex.index,p=p.portFromPos,q=0;q<x.count;q++)s=x.l[q],s.valid&&s.fromVertex.layer!==b&&(t=s.fromVertex.index,s=s.portFromPos,(k<t||k===t&&p<s)&&y++,(t<k||t===k&&s<p)&&B++);if(0>=c)for(h=d[g].Vd,x=d[m].Vd,l=0;l<h.count;l++)if(p=h.l[l],p.valid&&p.toVertex.layer!==b)for(k=p.toVertex.index,n=p.portToPos,q=0;q<x.count;q++)s=x.l[q],s.valid&&s.toVertex.layer!==b&&(t=s.toVertex.index,u=s.portToPos,(k<t||k===t&&n<
u)&&y++,(t<k||t===k&&u<n)&&B++);f[g*e+m]=B;f[m*e+g]=y}}Br(a,b,d);return f}wn.prototype.countCrossings=function(){for(var a=0,b=0;b<=this.Pa;b++)for(var c=Fr(this,b,1),d=this.cd[b],e=0;e<d;e++)for(var f=e;f<d;f++)a+=c[e*d+f];return a};
function Gr(a){for(var b=0,c=0;c<=a.Pa;c++){for(var d=a,e=c,f=Ar(d,e),g=d.cd[e],h=0,k=0;k<g;k++){var l=null,l=f[k].Vd,m,n=0,p=0;if(null!==l)for(var q=0;q<l.count;q++)m=l.l[q],m.valid&&m.toVertex.layer!==e&&(n=m.fromVertex.column+m.portFromColOffset,p=m.toVertex.column+m.portToColOffset,h+=(Math.abs(n-p)+1)*Cr(m))}Br(d,e,f);b+=h}return b}
wn.prototype.normalize=function(){var a=Infinity;this.nb=-1;for(var b=this.network.vertexes.i;b.next();){var c=b.value,a=Math.min(a,c.column-this.nodeMinColumnSpace(c,!0));this.nb=Math.max(this.nb,c.column+this.nodeMinColumnSpace(c,!1))}for(b.reset();b.next();)b.value.column-=a;this.nb-=a};
function Hr(a,b,c){for(var d=Ar(a,b),e=a.cd[b],f=[],g=0;g<e;g++){var h=d[g],k=null;0>=c&&(k=h.$d);var l=null;0<=c&&(l=h.Vd);var m=0,n=0,p=h.near;null!==p&&p.layer===h.layer&&(m+=p.column-1,n++);if(null!==k)for(p=0;p<k.count;p++){var h=k.l[p],q=h.fromVertex;h.valid&&!h.rev&&q.layer!==b&&(m+=q.column+h.portFromColOffset,n++)}if(null!==l)for(k=0;k<l.count;k++)h=l.l[k],p=h.toVertex,h.valid&&!h.rev&&p.layer!==b&&(m+=p.column+h.portToColOffset,n++);f[g]=0===n?-1:m/n}Br(a,b,d);return f}
function Ir(a,b,c){for(var d=Ar(a,b),e=a.cd[b],f=[],g=0;g<e;g++){var h=d[g],k=null;0>=c&&(k=h.$d);var l=null;0<=c&&(l=h.Vd);var m=0,n=[],p=h.near;null!==p&&p.layer===h.layer&&(n[m]=p.column-1,m++);if(null!==k)for(p=0;p<k.count;p++){var h=k.l[p],q=h.fromVertex;h.valid&&!h.rev&&q.layer!==b&&(n[m]=q.column+h.portFromColOffset,m++)}if(null!==l)for(k=0;k<l.count;k++)h=l.l[k],p=h.toVertex,h.valid&&!h.rev&&p.layer!==b&&(n[m]=p.column+h.portToColOffset,m++);0===m?f[g]=-1:(n.sort(function(a,b){return a-b}),
l=m>>1,f[g]=m&1?n[l]:n[l-1]+n[l]>>1)}Br(a,b,d);return f}function Jr(a,b,c,d,e,f){if(b.component===d){b.component=c;var g=0,h=0;if(e)for(var k=b.Hb;k.next();){var h=k.value,l=h.toVertex,g=b.layer-l.layer,h=a.linkMinLength(h);g===h&&Jr(a,l,c,d,e,f)}if(f)for(k=b.Mb;k.next();)h=k.value,l=h.fromVertex,g=l.layer-b.layer,h=a.linkMinLength(h),g===h&&Jr(a,l,c,d,e,f)}}
function Kr(a,b,c,d,e,f){if(b.component===d){b.component=c;if(e)for(var g=b.Hb;g.next();)Kr(a,g.value.toVertex,c,d,e,f);if(f)for(b=b.Mb;b.next();)Kr(a,b.value.fromVertex,c,d,e,f)}}function ur(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid)return b}return null}function vr(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.Hb;d.next();)if(d.value.toVertex.valid){c=!1;break}if(c)return b}}return null}
function wr(a){for(a=a.vertexes.i;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.Mb;d.next();)if(d.value.fromVertex.valid){c=!1;break}if(c)return b}}return null}function xr(a,b){b.vn=a.Up;a.Up++;for(var c=b.Hb;c.next();){var d=c.value,e=d.toVertex;-1===e.vn&&(d.forest=!0,xr(a,e))}b.finish=a.Up;a.Up++}
wn.prototype.assignLayers=function(){switch(this.Om){case Lr:Mr(this);break;case Nr:for(var a=0,b=this.network.vertexes.i;b.next();)a=Or(this,b.value),this.Pa=Math.max(a,this.Pa);for(b.reset();b.next();)a=b.value,a.layer=this.Pa-a.layer;break;default:case or:Mr(this);for(b=this.network.vertexes.i;b.next();)b.value.valid=!1;for(b.reset();b.next();)a=b.value,0===a.Mb.count&&Pr(this,a);a=Infinity;for(b.reset();b.next();)a=Math.min(a,b.value.layer);this.Pa=-1;for(b.reset();b.next();){var c=b.value;c.layer-=
a;this.Pa=Math.max(this.Pa,c.layer)}}};function Mr(a){for(var b=a.network.vertexes.i;b.next();){var c=Qr(a,b.value);a.Pa=Math.max(c,a.Pa)}}function Qr(a,b){var c=0;if(-1===b.layer){for(var d=b.Hb;d.next();)var e=d.value,f=e.toVertex,e=a.linkMinLength(e),c=Math.max(c,Qr(a,f)+e);b.layer=c}else c=b.layer;return c}function Or(a,b){var c=0;if(-1===b.layer){for(var d=b.Mb;d.next();)var e=d.value,f=e.fromVertex,e=a.linkMinLength(e),c=Math.max(c,Or(a,f)+e);b.layer=c}else c=b.layer;return c}
function Pr(a,b){if(!b.valid){b.valid=!0;for(var c=b.Hb;c.next();)Pr(a,c.value.toVertex);for(c=a.network.vertexes.i;c.next();)c.value.component=-1;for(var d=b.$d.l,e=d.length,f=0;f<e;f++){var g=d[f],h=a.linkMinLength(g);g.fromVertex.layer-g.toVertex.layer>h&&Jr(a,g.fromVertex,0,-1,!0,!1)}for(Jr(a,b,1,-1,!0,!0);0!==b.component;){for(var h=0,d=Infinity,k=0,l=null,m=a.network.vertexes.i;m.next();){var n=m.value;if(1===n.component){for(var p=0,q=!1,s=n.$d.l,e=s.length,f=0;f<e;f++){var g=s[f],t=g.fromVertex,
p=p+1;1!==t.component&&(h+=1,t=t.layer-n.layer,g=a.linkMinLength(g),d=Math.min(d,t-g))}g=n.Vd.l;e=g.length;for(f=0;f<e;f++)s=g[f].toVertex,p-=1,1!==s.component?h-=1:q=!0;(null===l||p<k)&&!q&&(l=n,k=p)}}if(0<h){for(c.reset();c.next();)e=c.value,1===e.component&&(e.layer+=d);b.component=0}else l.component=0}for(c=a.network.vertexes.i;c.next();)c.value.component=-1;for(Jr(a,b,1,-1,!0,!1);0!==b.component;){f=0;e=Infinity;d=0;h=null;for(k=a.network.vertexes.i;k.next();)if(l=k.value,1===l.component){m=
0;n=!1;g=l.$d.l;p=g.length;for(q=0;q<p;q++)s=g[q].fromVertex,m+=1,1!==s.component?f+=1:n=!0;g=l.Vd.l;p=g.length;for(q=0;q<p;q++)s=g[q],t=s.toVertex,m-=1,1!==t.component&&(f-=1,t=l.layer-t.layer,s=a.linkMinLength(s),e=Math.min(e,t-s));(null===h||m>d)&&!n&&(h=l,d=m)}if(0>f){for(c.reset();c.next();)f=c.value,1===f.component&&(f.layer-=e);b.component=0}else h.component=0}}}
function zr(a,b,c){return 90===a.aa?c&&!b.rev||!c&&b.rev?270:90:180===a.aa?c&&!b.rev||!c&&b.rev?0:180:270===a.aa?c&&!b.rev||!c&&b.rev?90:270:c&&!b.rev||!c&&b.rev?180:0}
wn.prototype.initializeIndices=function(){switch(this.Dm){default:case Rr:for(var a=this.network.vertexes.i;a.next();){var b=a.value,c=b.layer;b.index=this.cd[c];this.cd[c]++}break;case pr:a=this.network.vertexes.i;for(b=this.Pa;0<=b;b--)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&Sr(this,c);break;case Tr:for(a=this.network.vertexes.i,b=0;b<=this.Pa;b++)for(a.reset();a.next();)c=a.value,c.layer===b&&-1===c.index&&Ur(this,c)}};
function Sr(a,b){var c=b.layer;b.index=a.cd[c];a.cd[c]++;for(var c=b.Vd.ae(),d=!0;d;)for(var d=!1,e=0;e<c.length-1;e++){var f=c[e],g=c[e+1];f.portFromColOffset>g.portFromColOffset&&(d=!0,c[e]=g,c[e+1]=f)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.toVertex,-1===d.index&&Sr(a,d))}
function Ur(a,b){var c=b.layer;b.index=a.cd[c];a.cd[c]++;for(var c=b.$d.ae(),d=!0,e=0;d;)for(d=!1,e=0;e<c.length-1;e++){var f=c[e],g=c[e+1];f.portToColOffset>g.portToColOffset&&(d=!0,c[e]=g,c[e+1]=f)}for(e=0;e<c.length;e++)d=c[e],d.valid&&(d=d.fromVertex,-1===d.index&&Ur(a,d))}
wn.prototype.reduceCrossings=function(){for(var a=this.countCrossings(),b=Dr(this),c=0,d=0,e=0,c=0;c<this.Sk;c++){for(d=0;d<=this.Pa;d++)Vr(this,d,1),Wr(this,d,1);e=this.countCrossings();e<a&&(a=e,b=Dr(this));for(d=this.Pa;0<=d;d--)Vr(this,d,-1),Wr(this,d,-1);e=this.countCrossings();e<a&&(a=e,b=Dr(this))}Er(this,b);for(c=0;c<this.Sk;c++){for(d=0;d<=this.Pa;d++)Vr(this,d,0),Wr(this,d,0);e=this.countCrossings();e<a&&(a=e,b=Dr(this));for(d=this.Pa;0<=d;d--)Vr(this,d,0),Wr(this,d,0);e=this.countCrossings();
e<a&&(a=e,b=Dr(this))}Er(this,b);var f=!1,g=c=0,h=0,d=0;switch(this.Zl){case Xr:break;case Yr:for(h=a+1;(d=this.countCrossings())<h;)for(h=d,c=this.Pa;0<=c;c--)for(g=0;g<=c;g++){for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Wr(this,d,-1)||f;e=this.countCrossings();e>=a?Er(this,b):(a=e,b=Dr(this));for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Wr(this,d,1)||f;e=this.countCrossings();e>=a?Er(this,b):(a=e,b=Dr(this));for(f=!0;f;)for(f=!1,d=g;d<=c;d++)f=Wr(this,d,1)||f;e>=a?Er(this,b):(a=e,b=Dr(this));for(f=!0;f;)for(f=!1,
d=g;d<=c;d++)f=Wr(this,d,-1)||f;e>=a?Er(this,b):(a=e,b=Dr(this));for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Wr(this,d,0)||f;e>=a?Er(this,b):(a=e,b=Dr(this));for(f=!0;f;)for(f=!1,d=g;d<=c;d++)f=Wr(this,d,0)||f;e>=a?Er(this,b):(a=e,b=Dr(this))}break;default:case qr:for(c=this.Pa,g=0,h=a+1;(d=this.countCrossings())<h;){h=d;for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Wr(this,d,-1)||f;e=this.countCrossings();e>=a?Er(this,b):(a=e,b=Dr(this));for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Wr(this,d,1)||f;e=this.countCrossings();
e>=a?Er(this,b):(a=e,b=Dr(this));for(f=!0;f;)for(f=!1,d=g;d<=c;d++)f=Wr(this,d,1)||f;e>=a?Er(this,b):(a=e,b=Dr(this));for(f=!0;f;)for(f=!1,d=g;d<=c;d++)f=Wr(this,d,-1)||f;e>=a?Er(this,b):(a=e,b=Dr(this));for(f=!0;f;)for(f=!1,d=c;d>=g;d--)f=Wr(this,d,0)||f;e>=a?Er(this,b):(a=e,b=Dr(this));for(f=!0;f;)for(f=!1,d=g;d<=c;d++)f=Wr(this,d,0)||f;e>=a?Er(this,b):(a=e,b=Dr(this))}}Er(this,b)};
function Vr(a,b,c){var d=0,e=Ar(a,b),f=a.cd[b],g=Ir(a,b,c);c=Hr(a,b,c);for(d=0;d<f;d++)-1===c[d]&&(c[d]=e[d].column),-1===g[d]&&(g[d]=e[d].column);for(var h=!0,k;h;)for(h=!1,d=0;d<f-1;d++)if(g[d+1]<g[d]||g[d+1]===g[d]&&c[d+1]<c[d])h=!0,k=g[d],g[d]=g[d+1],g[d+1]=k,k=c[d],c[d]=c[d+1],c[d+1]=k,k=e[d],e[d]=e[d+1],e[d+1]=k;for(d=g=0;d<f;d++)k=e[d],k.index=d,g+=a.nodeMinColumnSpace(k,!0),k.column=g,g+=1,g+=a.nodeMinColumnSpace(k,!1);Br(a,b,e)}
function Wr(a,b,c){var d=Ar(a,b),e=a.cd[b];c=Fr(a,b,c);var f=0,g;g=[];for(f=0;f<e;f++)g[f]=-1;var h;h=[];for(f=0;f<e;f++)h[f]=-1;for(var k=!1,l=!0;l;)for(l=!1,f=0;f<e-1;f++){var m=c[d[f].index*e+d[f+1].index],n=c[d[f+1].index*e+d[f].index],p=0,q=0,s=d[f].column,t=d[f+1].column,u=a.nodeMinColumnSpace(d[f],!0),x=a.nodeMinColumnSpace(d[f],!1),B=a.nodeMinColumnSpace(d[f+1],!0),y=a.nodeMinColumnSpace(d[f+1],!1),u=s-u+B,x=t-x+y,B=B=0,C=d[f].Mb.i;for(C.reset();C.next();)if(y=C.value,y.valid&&y.fromVertex.layer===
b){y=y.fromVertex;for(B=0;d[B]!==y;)B++;B<f&&(p+=2*(f-B),q+=2*(f+1-B));B===f+1&&(p+=1);B>f+1&&(p+=4*(B-f),q+=4*(B-(f+1)))}C=d[f].Hb.i;for(C.reset();C.next();)if(y=C.value,y.valid&&y.toVertex.layer===b){y=y.toVertex;for(B=0;d[B]!==y;)B++;B===f+1&&(q+=1)}C=d[f+1].Mb.i;for(C.reset();C.next();)if(y=C.value,y.valid&&y.fromVertex.layer===b){y=y.fromVertex;for(B=0;d[B]!==y;)B++;B<f&&(p+=2*(f+1-B),q+=2*(f-B));B===f&&(q+=1);B>f+1&&(p+=4*(B-(f+1)),q+=4*(B-f))}C=d[f+1].Hb.i;for(C.reset();C.next();)if(y=C.value,
y.valid&&y.toVertex.layer===b){y=y.toVertex;for(B=0;d[B]!==y;)B++;B===f&&(p+=1)}var B=y=0,C=g[d[f].index],K=h[d[f].index],J=g[d[f+1].index],ba=h[d[f+1].index];-1!==C&&(y+=Math.abs(C-s),B+=Math.abs(C-x));-1!==K&&(y+=Math.abs(K-s),B+=Math.abs(K-x));-1!==J&&(y+=Math.abs(J-t),B+=Math.abs(J-u));-1!==ba&&(y+=Math.abs(ba-t),B+=Math.abs(ba-u));if(q<p-.5||q===p&&n<m-.5||q===p&&n===m&&B<y-.5)l=k=!0,d[f].column=x,d[f+1].column=u,m=d[f],d[f]=d[f+1],d[f+1]=m}for(f=0;f<e;f++)d[f].index=f;Br(a,b,d);return k}
wn.prototype.straightenAndPack=function(){var a=0,b=!1,c=0!==(this.Bh&Zr),a=this.Bh===rr;1E3<this.network.edges.count&&!a&&(c=!1);if(c){b=[];for(a=a=0;a<=this.Pa;a++)b[a]=0;for(var d=0,e=this.network.vertexes.i;e.next();){var f=e.value,a=f.layer,d=f.column,f=this.nodeMinColumnSpace(f,!1);b[a]=Math.max(b[a],d+f)}for(e.reset();e.next();)f=e.value,a=f.layer,d=f.column,f.column=(8*(this.nb-b[a])>>1)+8*d;this.nb*=8}if(0!==(this.Bh&$r))for(b=!0;b;){b=!1;for(a=this.Re+1;a<=this.Pa;a++)b=as(this,a,1)||b;
for(a=this.Re-1;0<=a;a--)b=as(this,a,-1)||b;b=as(this,this.Re,0)||b}if(0!==(this.Bh&bs)){for(a=this.Re+1;a<=this.Pa;a++)cs(this,a,1);for(a=this.Re-1;0<=a;a--)cs(this,a,-1);cs(this,this.Re,0)}c&&(ds(this,-1),ds(this,1));if(0!==(this.Bh&$r))for(b=!0;b;){b=!1;b=as(this,this.Re,0)||b;for(a=this.Re+1;a<=this.Pa;a++)b=as(this,a,0)||b;for(a=this.Re-1;0<=a;a--)b=as(this,a,0)||b}};function as(a,b,c){for(var d=!1;es(a,b,c);)d=!0;return d}
function es(a,b,c){var d=0,e=Ar(a,b),f=a.cd[b],g=Hr(a,b,-1);if(0<c)for(d=0;d<f;d++)g[d]=-1;var h=Hr(a,b,1);if(0>c)for(d=0;d<f;d++)h[d]=-1;for(var k=!1,l=!0;l;)for(l=!1,d=0;d<f;d++){var m=e[d].column,n=a.nodeMinColumnSpace(e[d],!0),p=a.nodeMinColumnSpace(e[d],!1),q=0,q=0>d-1||m-e[d-1].column-1>n+a.nodeMinColumnSpace(e[d-1],!1)?m-1:m,n=0,n=d+1>=f||e[d+1].column-m-1>p+a.nodeMinColumnSpace(e[d+1],!0)?m+1:m,s=p=0,t=0,u=0,x=0,B=0;if(0>=c)for(var y=e[d].Mb.i;y.next();){var C=y.value;C.valid&&C.fromVertex.layer!==
b&&(u=Cr(C),x=C.portFromColOffset,B=C.portToColOffset,C=C.fromVertex.column,p+=(Math.abs(m+B-(C+x))+1)*u,s+=(Math.abs(q+B-(C+x))+1)*u,t+=(Math.abs(n+B-(C+x))+1)*u)}if(0<=c)for(y=e[d].Hb.i;y.next();)C=y.value,C.valid&&C.toVertex.layer!==b&&(u=Cr(C),x=C.portFromColOffset,B=C.portToColOffset,C=C.toVertex.column,p+=(Math.abs(m+x-(C+B))+1)*u,s+=(Math.abs(q+x-(C+B))+1)*u,t+=(Math.abs(n+x-(C+B))+1)*u);B=x=u=0;y=g[e[d].index];C=h[e[d].index];-1!==y&&(u+=Math.abs(y-m),x+=Math.abs(y-q),B+=Math.abs(y-n));-1!==
C&&(u+=Math.abs(C-m),x+=Math.abs(C-q),B+=Math.abs(C-n));if(s<p||s===p&&x<u)l=k=!0,e[d].column=q;if(t<p||t===p&&B<u)l=k=!0,e[d].column=n}Br(a,b,e);a.normalize();return k}
function cs(a,b,c){var d=0,e=Ar(a,b),f=a.cd[b],g=Ir(a,b,c);c=[];for(d=0;d<f;d++)c[d]=g[d];for(g=!0;g;)for(g=!1,d=0;d<f;d++){var h=e[d].column,k=a.nodeMinColumnSpace(e[d],!0),l=a.nodeMinColumnSpace(e[d],!1),m=0,n=0,p=0,p=n=0;-1===c[d]?0===d&&d===f-1?m=h:0===d?(n=e[d+1].column,m=n-h===l+a.nodeMinColumnSpace(e[d+1],!0)?h-1:h):d===f-1?(p=e[d-1].column,m=h-p===k+a.nodeMinColumnSpace(e[d-1],!1)?h+1:h):(p=e[d-1].column,p=p+a.nodeMinColumnSpace(e[d-1],!1)+k+1,n=e[d+1].column,n=n-a.nodeMinColumnSpace(e[d+
1],!0)-l-1,m=(p+n)/2|0):0===d&&d===f-1?m=c[d]:0===d?(n=e[d+1].column,n=n-a.nodeMinColumnSpace(e[d+1],!0)-l-1,m=Math.min(c[d],n)):d===f-1?(p=e[d-1].column,p=p+a.nodeMinColumnSpace(e[d-1],!1)+k+1,m=Math.max(c[d],p)):(p=e[d-1].column,p=p+a.nodeMinColumnSpace(e[d-1],!1)+k+1,n=e[d+1].column,n=n-a.nodeMinColumnSpace(e[d+1],!0)-l-1,p<c[d]&&c[d]<n?m=c[d]:p>=c[d]?m=p:n<=c[d]&&(m=n));m!==h&&(g=!0,e[d].column=m)}Br(a,b,e);a.normalize()}
function fs(a,b){for(var c=!0,d=a.network.vertexes.i;d.next();){var e=d.value,f=a.nodeMinColumnSpace(e,!0),g=a.nodeMinColumnSpace(e,!1);if(e.column-f<=b&&e.column+g>=b){c=!1;break}}e=!1;if(c)for(d.reset();d.next();)c=d.value,c.column>b&&(c.column-=1,e=!0);return e}
function gs(a,b){for(var c=b,c=b+1,d=0,e=[],f=[],d=0;d<=a.Pa;d++)e[d]=!1,f[d]=!1;for(var g=a.network.vertexes.i;g.next();){var d=g.value,h=d.column-a.nodeMinColumnSpace(d,!0),k=d.column+a.nodeMinColumnSpace(d,!1);h<=b&&k>=b&&(e[d.layer]=!0);h<=c&&k>=c&&(f[d.layer]=!0)}h=!0;c=!1;for(d=0;d<=a.Pa;d++)h=h&&!(e[d]&&f[d]);if(h)for(g.reset();g.next();)e=g.value,e.column>b&&(e.column-=1,c=!0);return c}
function ds(a,b){for(var c=0;c<=a.nb;c++)for(;fs(a,c););a.normalize();for(c=0;c<a.nb;c++)for(;gs(a,c););a.normalize();var c=0,d,e=0,f=0,g=0;if(0<b)for(c=0;c<=a.nb;c++)for(d=Dr(a),e=Gr(a),f=e+1;e<f;)f=e,hs(a,c,1),g=Gr(a),g>e?Er(a,d):g<e&&(e=g,d=Dr(a));if(0>b)for(c=a.nb;0<=c;c--)for(d=Dr(a),e=Gr(a),f=e+1;e<f;)f=e,hs(a,c,-1),g=Gr(a),g>e?Er(a,d):g<e&&(e=g,d=Dr(a));a.normalize()}
function hs(a,b,c){a.rf=0;for(var d=a.network.vertexes.i;d.next();)d.value.component=-1;if(0<c)for(d.reset();d.next();){var e=d.value;e.column-a.nodeMinColumnSpace(e,!0)<=b&&(e.component=a.rf)}if(0>c)for(d.reset();d.next();)e=d.value,e.column+a.nodeMinColumnSpace(e,!1)>=b&&(e.component=a.rf);a.rf++;for(d.reset();d.next();)b=d.value,-1===b.component&&(Kr(a,b,a.rf,-1,!0,!0),a.rf++);var f=0;b=[];for(f=0;f<a.rf*a.rf;f++)b[f]=!1;e=[];for(f=0;f<(a.Pa+1)*(a.nb+1);f++)e[f]=-1;for(d.reset();d.next();)for(var f=
d.value,g=f.layer,h=Math.max(0,f.column-a.nodeMinColumnSpace(f,!0)),k=Math.min(a.nb,f.column+a.nodeMinColumnSpace(f,!1));h<=k;h++)e[g*(a.nb+1)+h]=f.component;for(f=0;f<=a.Pa;f++){if(0<c)for(h=0;h<a.nb;h++)-1!==e[f*(a.nb+1)+h]&&-1!==e[f*(a.nb+1)+h+1]&&e[f*(a.nb+1)+h]!==e[f*(a.nb+1)+h+1]&&(b[e[f*(a.nb+1)+h]*a.rf+e[f*(a.nb+1)+h+1]]=!0);if(0>c)for(h=a.nb;0<h;h--)-1!==e[f*(a.nb+1)+h]&&-1!==e[f*(a.nb+1)+h-1]&&e[f*(a.nb+1)+h]!==e[f*(a.nb+1)+h-1]&&(b[e[f*(a.nb+1)+h]*a.rf+e[f*(a.nb+1)+h-1]]=!0)}e=[];for(f=
0;f<a.rf;f++)e[f]=!0;g=new N("number");g.add(0);for(k=0;0!==g.count;)if(k=g.l[g.count-1],g.Cc(g.count-1),e[k])for(e[k]=!1,f=0;f<a.rf;f++)b[k*a.rf+f]&&g.pd(0,f);if(0<c)for(d.reset();d.next();)a=d.value,e[a.component]&&(a.column-=1);if(0>c)for(d.reset();d.next();)c=d.value,e[c.component]&&(c.column+=1)}
wn.prototype.commitLayout=function(){if(this.co)for(var a=yr(this,!0),b=yr(this,!1),c=this.network.edges.i;c.next();){var d=c.value.link;null!==d&&(d.Za=a,d.ab=b)}this.commitNodes();this.Ex();this.av&&this.commitLinks()};function yr(a,b){return 270===a.aa?b?fe:ie:90===a.aa?b?ie:fe:180===a.aa?b?ge:he:b?he:ge}
wn.prototype.commitNodes=function(){this.Zf=[];this.of=[];this.Qe=[];this.qb=[];for(var a=0;a<=this.Pa;a++)this.Zf[a]=0,this.of[a]=0,this.Qe[a]=0,this.qb[a]=0;for(a=this.network.vertexes.i;a.next();){var b=a.value,c=b.layer;this.Zf[c]=Math.max(this.Zf[c],this.nodeMinLayerSpace(b,!0));this.of[c]=Math.max(this.of[c],this.nodeMinLayerSpace(b,!1))}for(var b=0,d=this.Vk,c=0;c<=this.Pa;c++){var e=d;0>=this.Zf[c]+this.of[c]&&(e=0);0<c&&(b+=e/2);90===this.aa||0===this.aa?(b+=this.of[c],this.Qe[c]=b,b+=this.Zf[c]):
(b+=this.Zf[c],this.Qe[c]=b,b+=this.of[c]);c<this.Pa&&(b+=e/2);this.qb[c]=b}d=b;b=this.md;for(c=0;c<=this.Pa;c++)270===this.aa?this.Qe[c]=b.y+this.Qe[c]:90===this.aa?(this.Qe[c]=b.y+d-this.Qe[c],this.qb[c]=d-this.qb[c]):180===this.aa?this.Qe[c]=b.x+this.Qe[c]:(this.Qe[c]=b.x+d-this.Qe[c],this.qb[c]=d-this.qb[c]);for(a.reset();a.next();){var c=a.value,d=c.layer,e=c.column|0,f=0,g=0;270===this.aa||90===this.aa?(f=b.x+this.Mc*e,g=this.Qe[d]):(f=this.Qe[d],g=b.y+this.Mc*e);c.ra=f;c.Ba=g;c.commit()}};
wn.prototype.Ex=function(){for(var a=0,b=this.Vk,c=0;c<=this.Pa;c++)a+=this.Zf[c],a+=this.of[c];for(var a=a+this.Pa*b,b=[],c=this.Mc*this.nb,d=this.VF;0<=d;d--)270===this.aa?0===d?b.push(new D(0,0,c,Math.abs(this.qb[0]))):b.push(new D(0,this.qb[d-1],c,Math.abs(this.qb[d-1]-this.qb[d]))):90===this.aa?0===d?b.push(new D(0,this.qb[0],c,Math.abs(this.qb[0]-a))):b.push(new D(0,this.qb[d],c,Math.abs(this.qb[d-1]-this.qb[d]))):180===this.aa?0===d?b.push(new D(0,0,Math.abs(this.qb[0]),c)):b.push(new D(this.qb[d-
1],0,Math.abs(this.qb[d-1]-this.qb[d]),c)):0===d?b.push(new D(this.qb[0],0,Math.abs(this.qb[0]-a),c)):b.push(new D(this.qb[d],0,Math.abs(this.qb[d-1]-this.qb[d]),c));this.commitLayers(b,Q.ej)};wn.prototype.commitLayers=function(){};
wn.prototype.commitLinks=function(){for(var a=this.network.edges.i,b;a.next();)b=a.value.link,null!==b&&(b.yk(),b.rn(),b.Lh());for(a.reset();a.next();)b=a.value.link,null!==b&&b.updateRoute();for(a.reset();a.next();){var c=a.value;b=c.link;if(null!==b){b.yk();var d=b,e=d.M,f=d.R,g=d.Ic,h=d.xd;if(c.valid){if(b.me===Ni&&4===b.Z){if(c.rev)var k=e,e=f,f=k,l=g,g=h,h=l;if(c.fromVertex.column===c.toVertex.column){var m=b.getLinkPoint(e,g,b.computeSpot(!0),!0,!1,f,h),n=b.getLinkPoint(f,h,b.computeSpot(!1),
!1,!1,e,g);m.w()||m.set(e.Q.Xj);n.w()||n.set(f.Q.Xj);b.rn();b.Uj(m.x,m.y);b.Uj((2*m.x+n.x)/3,(2*m.y+n.y)/3);b.Uj((m.x+2*n.x)/3,(m.y+2*n.y)/3);b.Uj(n.x,n.y)}else{var p=!1,q=!1;null!==g&&b.computeSpot(!0)===td&&(p=!0);null!==h&&b.computeSpot(!1)===td&&(q=!0);if(p||q){var s=b.j(0).x,t=b.j(0).y,u=b.j(1).x,x=b.j(1).y,B=b.j(2).x,y=b.j(2).y,C=b.j(3).x,K=b.j(3).y;if(p){90===this.aa||270===this.aa?(u=s,x=(t+K)/2):(u=(s+C)/2,x=t);b.L(1,u,x);var J=b.getLinkPoint(e,g,b.computeSpot(!0),!0,!1,f,h);J.w()||J.set(e.Q.Xj);
b.L(0,J.x,J.y)}q&&(90===this.aa||270===this.aa?(B=C,y=(t+K)/2):(B=(s+C)/2,y=K),b.L(2,B,y),J=b.getLinkPoint(f,h,b.computeSpot(!1),!1,!1,e,g),J.w()||J.set(f.Q.Xj),b.L(3,J.x,J.y))}}}b.Lh()}else if(c.fromVertex.layer===c.toVertex.layer)b.Lh();else{var ba=!1,ja=!1,Y=0,P=b.yr+1;if(b.Jb)ja=!0,Y=b.Z,4<Y&&b.points.removeRange(2,Y-3);else if(b.me===Ni)ba=!0,Y=b.Z,4<Y&&b.points.removeRange(2,Y-3),P=2;else{var Y=b.Z,ha=b.computeSpot(!0)===td,Ra=b.computeSpot(!1)===td;2<Y&&ha&&Ra?b.points.removeRange(1,Y-2):3<
Y&&ha&&!Ra?b.points.removeRange(1,Y-3):3<Y&&!ha&&Ra?b.points.removeRange(2,Y-2):4<Y&&!ha&&!Ra&&b.points.removeRange(2,Y-3)}var Ha=c.fromVertex,eb=c.toVertex,ya,Pa;if(c.rev){for(var Ca=0;null!==eb&&Ha!==eb;){Pa=ya=null;for(var Ic=eb.Mb.i;Ic.next();){var Qd=Ic.value;if(Qd.link===c.link&&(ya=Qd.fromVertex,Pa=Qd.toVertex,null===ya.Ec))break}ya!==Ha&&(kb=b.j(P-1).x,Bb=b.j(P-1).y,Ja=ya.ra,Ma=ya.Ba,ja?180===this.aa||0===this.aa?2===P?(b.n(P++,kb,Bb),b.n(P++,kb,Ma)):(Nc=null!==Pa?Pa.Ba:Bb,Nc!==Ma&&(Jb=this.qb[ya.layer-
1],b.n(P++,Jb,Bb),b.n(P++,Jb,Ma))):2===P?(b.n(P++,kb,Bb),b.n(P++,Ja,Bb)):(Re=null!==Pa?Pa.ra:kb,Re!==Ja&&(Jb=this.qb[ya.layer-1],b.n(P++,kb,Jb),b.n(P++,Ja,Jb))):2===P?ba?(fc=Math.max(10,this.Zf[eb.layer]),wb=Math.max(10,this.of[eb.layer]),180===this.aa?(Ca=eb.P.x,b.n(P++,Ca-fc,Ma),b.n(P++,Ca,Ma),b.n(P++,Ca+wb,Ma)):90===this.aa?(Ca=eb.P.y+eb.P.height,b.n(P++,Ja,Ca+wb),b.n(P++,Ja,Ca),b.n(P++,Ja,Ca-fc)):270===this.aa?(Ca=eb.P.y,b.n(P++,Ja,Ca-fc),b.n(P++,Ja,Ca),b.n(P++,Ja,Ca+wb)):(Ca=eb.P.x+eb.P.width,
b.n(P++,Ca+wb,Ma),b.n(P++,Ca,Ma),b.n(P++,Ca-fc,Ma))):(b.n(P++,kb,Bb),180===this.aa||0===this.aa?b.n(P++,kb,Ma):b.n(P++,Ja,Bb),b.n(P++,Ja,Ma)):(fc=Math.max(10,this.Zf[ya.layer]),wb=Math.max(10,this.of[ya.layer]),180===this.aa?(ba&&b.n(P++,Ja-fc,Ma),b.n(P++,Ja,Ma),ba&&b.n(P++,Ja+wb,Ma)):90===this.aa?(ba&&b.n(P++,Ja,Ma+wb),b.n(P++,Ja,Ma),ba&&b.n(P++,Ja,Ma-fc)):270===this.aa?(ba&&b.n(P++,Ja,Ma-fc),b.n(P++,Ja,Ma),ba&&b.n(P++,Ja,Ma+wb)):(ba&&b.n(P++,Ja+wb,Ma),b.n(P++,Ja,Ma),ba&&b.n(P++,Ja-fc,Ma))));eb=
ya}if(null===h||b.computeSpot(!1)!==td)if(kb=b.j(P-1).x,Bb=b.j(P-1).y,Ja=b.j(P).x,Ma=b.j(P).y,ja){var Cg=this.of[Ha.layer],Jc=0;180===this.aa||0===this.aa?(Jc=Bb,Jc>=Ha.P.y&&Jc<=Ha.P.bottom&&(Ca=Ha.ra+Cg,Jc=Jc<Ha.P.y+Ha.P.height/2?Ha.P.y-this.Mc/2:Ha.P.bottom+this.Mc/2,b.n(P++,Ca,Bb),b.n(P++,Ca,Jc)),b.n(P++,Ja,Jc)):(Jc=kb,Jc>=Ha.P.x&&Jc<=Ha.P.right&&(Ca=Ha.Ba+Cg,Jc=Jc<Ha.P.x+Ha.P.width/2?Ha.P.x-this.Mc/2:Ha.P.right+this.Mc/2,b.n(P++,kb,Ca),b.n(P++,Jc,Ca)),b.n(P++,Jc,Ma));b.n(P++,Ja,Ma)}else ba?(fc=
Math.max(10,this.Zf[Ha.layer]),wb=Math.max(10,this.of[Ha.layer]),180===this.aa?(Ca=Ha.P.x+Ha.P.width,b.L(P-2,Ca,Bb),b.L(P-1,Ca+wb,Bb)):90===this.aa?(Ca=Ha.P.y,b.L(P-2,kb,Ca),b.L(P-1,kb,Ca-fc)):270===this.aa?(Ca=Ha.P.y+Ha.P.height,b.L(P-2,kb,Ca),b.L(P-1,kb,Ca+wb)):(Ca=Ha.P.x,b.L(P-2,Ca,Bb),b.L(P-1,Ca-fc,Bb))):(180===this.aa||0===this.aa?b.n(P++,Ja,Bb):b.n(P++,kb,Ma),b.n(P++,Ja,Ma))}else{for(;null!==Ha&&Ha!==eb;){Pa=ya=null;for(var Jf=Ha.Hb.i;Jf.next();){var Dg=Jf.value;if(Dg.link===c.link&&(ya=Dg.toVertex,
Pa=Dg.fromVertex,null!==Pa.Ec&&(Pa=null),null===ya.Ec))break}var kb=0,Bb=0,Ja=0,Ma=0,Jb=0,fc=0,wb=0;if(ya!==eb)if(kb=b.j(P-1).x,Bb=b.j(P-1).y,Ja=ya.ra,Ma=ya.Ba,ja)if(180===this.aa||0===this.aa){var Nc=null!==Pa?Pa.Ba:Bb;Nc!==Ma&&(Jb=this.qb[ya.layer],2===P&&(Jb=0===this.aa?Math.max(Jb,kb):Math.min(Jb,kb)),b.n(P++,Jb,Bb),b.n(P++,Jb,Ma))}else{var Re=null!==Pa?Pa.ra:kb;Re!==Ja&&(Jb=this.qb[ya.layer],2===P&&(Jb=90===this.aa?Math.max(Jb,Bb):Math.min(Jb,Bb)),b.n(P++,kb,Jb),b.n(P++,Ja,Jb))}else fc=Math.max(10,
this.Zf[ya.layer]),wb=Math.max(10,this.of[ya.layer]),180===this.aa?(b.n(P++,Ja+wb,Ma),ba&&b.n(P++,Ja,Ma),b.n(P++,Ja-fc,Ma)):90===this.aa?(b.n(P++,Ja,Ma-fc),ba&&b.n(P++,Ja,Ma),b.n(P++,Ja,Ma+wb)):270===this.aa?(b.n(P++,Ja,Ma+wb),ba&&b.n(P++,Ja,Ma),b.n(P++,Ja,Ma-fc)):(b.n(P++,Ja-fc,Ma),ba&&b.n(P++,Ja,Ma),b.n(P++,Ja+wb,Ma));Ha=ya}ja&&(kb=b.j(P-1).x,Bb=b.j(P-1).y,Ja=b.j(P).x,Ma=b.j(P).y,180===this.aa||0===this.aa?Bb!==Ma&&(Jb=0===this.aa?Math.min(Math.max((Ja+kb)/2,this.qb[eb.layer]),Ja):Math.max(Math.min((Ja+
kb)/2,this.qb[eb.layer]),Ja),b.n(P++,Jb,Bb),b.n(P++,Jb,Ma)):kb!==Ja&&(Jb=90===this.aa?Math.min(Math.max((Ma+Bb)/2,this.qb[eb.layer]),Ma):Math.max(Math.min((Ma+Bb)/2,this.qb[eb.layer]),Ma),b.n(P++,kb,Jb),b.n(P++,Ja,Jb)))}if(null!==d&&ba){if(null!==g){if(b.computeSpot(!0)===td){var Sc=b.j(0),xe=b.j(2);Sc.A(xe)||b.L(1,(Sc.x+xe.x)/2,(Sc.y+xe.y)/2)}J=b.getLinkPoint(e,g,td,!0,!1,f,h);J.w()||J.set(e.Q.Xj);b.L(0,J.x,J.y)}null!==h&&(b.computeSpot(!1)===td&&(Sc=b.j(b.Z-1),xe=b.j(b.Z-3),Sc.A(xe)||b.L(b.Z-2,
(Sc.x+xe.x)/2,(Sc.y+xe.y)/2)),J=b.getLinkPoint(f,h,td,!1,!1,e,g),J.w()||J.set(f.Q.Xj),b.L(b.Z-1,J.x,J.y))}b.Lh();c.commit()}}}for(var Se=new N(W),Kf=this.network.edges.i;Kf.next();){var eg=Kf.value.link;null!==eg&&eg.Jb&&!Se.contains(eg)&&Se.add(eg)}if(0<Se.count)if(90===this.aa||270===this.aa){for(var ye=0,gc=new N(is),mc,kd,Hh=Se.i;Hh.next();){var nc=Hh.value;if(null!==nc&&nc.Jb)for(var $b=2;$b<nc.Z-3;$b++)if(mc=nc.j($b),kd=nc.j($b+1),this.u(mc.y,kd.y)&&!this.u(mc.x,kd.x)){var Kc=new is;Kc.layer=
Math.floor(mc.y/2);var Kb=nc.j(0),kf=nc.j(nc.Z-1);Kc.first=Kb.x*Kb.x+Kb.y;Kc.$c=kf.x*kf.x+kf.y;Kc.Ud=Math.min(mc.x,kd.x);Kc.nd=Math.max(mc.x,kd.x);Kc.index=$b;Kc.link=nc;if($b+2<nc.Z){var ze=nc.j($b-1),hh=nc.j($b+2),Eg=0;ze.y<mc.y?Eg=hh.y<mc.y?3:mc.x<kd.x?2:1:ze.y>mc.y&&(Eg=hh.y>mc.y?0:kd.x<mc.x?2:1);Kc.dh=Eg}gc.add(Kc)}}if(1<gc.count){gc.sort(this.hD);for(var ac=0;ac<gc.count;){for(var Rd=gc.l[ac].layer,Tc=ac+1;Tc<gc.count&&gc.l[Tc].layer===Rd;)Tc++;if(1<Tc-ac)for(var Yb=ac;Yb<Tc;){for(var ld=gc.l[Yb].nd,
oc=ac+1;oc<Tc&&gc.l[oc].Ud<ld;)ld=Math.max(ld,gc.l[oc].nd),oc++;var cb=oc-Yb;if(1<cb){gc.fo(this.tv,Yb,Yb+cb);for(var Cb=1,bc=gc.l[Yb].$c,$b=Yb;$b<oc;$b++){var Lc=gc.l[$b];Lc.$c!==bc&&(Cb++,bc=Lc.$c)}gc.fo(this.gD,Yb,Yb+cb);for(var Ae=1,bc=gc.l[Yb].first,$b=Yb;$b<oc;$b++)Lc=gc.l[$b],Lc.first!==bc&&(Ae++,bc=Lc.first);var Be=!0,fg=Ae;Cb<Ae?(Be=!1,fg=Cb,bc=gc.l[Yb].$c,gc.fo(this.tv,Yb,Yb+cb)):bc=gc.l[Yb].first;for(var lf=0,$b=Yb;$b<oc;$b++){Lc=gc.l[$b];(Be?Lc.first:Lc.$c)!==bc&&(lf++,bc=Be?Lc.first:
Lc.$c);nc=Lc.link;mc=nc.j(Lc.index);kd=nc.j(Lc.index+1);var gg=this.hv*(lf-(fg-1)/2);ye++;nc.yk();nc.L(Lc.index,mc.x,mc.y+gg);nc.L(Lc.index+1,kd.x,kd.y+gg);nc.Lh()}}Yb=oc}ac=Tc}}}else{for(var wc=0,Ab=new N(is),Uc,xd,Sd=Se.i;Sd.next();){var xb=Sd.value;if(null!==xb&&xb.Jb)for(var Vb=2;Vb<xb.Z-3;Vb++)if(Uc=xb.j(Vb),xd=xb.j(Vb+1),this.u(Uc.x,xd.x)&&!this.u(Uc.y,xd.y)){var Oc=new is;Oc.layer=Math.floor(Uc.x/2);var Td=xb.j(0),Ih=xb.j(xb.Z-1);Oc.first=Td.x+Td.y*Td.y;Oc.$c=Ih.x+Ih.y*Ih.y;Oc.Ud=Math.min(Uc.y,
xd.y);Oc.nd=Math.max(Uc.y,xd.y);Oc.index=Vb;Oc.link=xb;if(Vb+2<xb.Z){var Jh=xb.j(Vb-1),Kh=xb.j(Vb+2),Fg=0;Jh.x<Uc.x?Fg=Kh.x<Uc.x?3:Uc.y<xd.y?2:1:Jh.x>Uc.x&&(Fg=Kh.x>Uc.x?0:xd.y<Uc.y?2:1);Oc.dh=Fg}Ab.add(Oc)}}if(1<Ab.count){Ab.sort(this.hD);for(var md=0;md<Ab.count;){for(var yd=Ab.l[md].layer,nd=md+1;nd<Ab.count&&Ab.l[nd].layer===yd;)nd++;if(1<nd-md)for(var Lb=md;Lb<nd;){for(var Te=Ab.l[Lb].nd,Mb=md+1;Mb<nd&&Ab.l[Mb].Ud<Te;)Te=Math.max(Te,Ab.l[Mb].nd),Mb++;var dd=Mb-Lb;if(1<dd){Ab.fo(this.tv,Lb,Lb+
dd);for(var mf=1,cc=Ab.l[Lb].$c,Vb=Lb;Vb<Mb;Vb++){var dc=Ab.l[Vb];dc.$c!==cc&&(mf++,cc=dc.$c)}Ab.fo(this.gD,Lb,Lb+dd);for(var Ud=1,cc=Ab.l[Lb].first,Vb=Lb;Vb<Mb;Vb++)dc=Ab.l[Vb],dc.first!==cc&&(Ud++,cc=dc.first);var zd=!0,Ce=Ud;mf<Ud?(zd=!1,Ce=mf,cc=Ab.l[Lb].$c,Ab.fo(this.tv,Lb,Lb+dd)):cc=Ab.l[Lb].first;for(var De=0,Vb=Lb;Vb<Mb;Vb++){dc=Ab.l[Vb];(zd?dc.first:dc.$c)!==cc&&(De++,cc=zd?dc.first:dc.$c);xb=dc.link;Uc=xb.j(dc.index);xd=xb.j(dc.index+1);var Lf=this.hv*(De-(Ce-1)/2);wc++;xb.yk();xb.L(dc.index,
Uc.x+Lf,Uc.y);xb.L(dc.index+1,xd.x+Lf,xd.y);xb.Lh()}}Lb=Mb}md=nd}}}};wn.prototype.hD=function(a,b){return a instanceof is&&b instanceof is&&a!==b?a.layer<b.layer?-1:a.layer>b.layer?1:a.Ud<b.Ud?-1:a.Ud>b.Ud?1:a.nd<b.nd?-1:a.nd>b.nd?1:0:0};wn.prototype.gD=function(a,b){return a instanceof is&&b instanceof is&&a!==b?a.first<b.first?-1:a.first>b.first||a.dh<b.dh?1:a.dh>b.dh||a.Ud<b.Ud?-1:a.Ud>b.Ud?1:a.nd<b.nd?-1:a.nd>b.nd?1:0:0};
wn.prototype.tv=function(a,b){return a instanceof is&&b instanceof is&&a!==b?a.$c<b.$c?-1:a.$c>b.$c||a.dh<b.dh?1:a.dh>b.dh||a.Ud<b.Ud?-1:a.Ud>b.Ud?1:a.nd<b.nd?-1:a.nd>b.nd?1:0:0};wn.prototype.u=function(a,b){var c=a-b;return-1<c&&1>c};function Ar(a,b){var c,d=a.cd[b];if(d>=a.ag.length){c=[];for(var e=0;e<a.ag.length;e++)c[e]=a.ag[e];a.ag=c}void 0===a.ag[d]||null===a.ag[d]?c=[]:(c=a.ag[d],a.ag[d]=null);d=a.Vp[b];for(e=0;e<d.length;e++){var f=d[e];c[f.index]=f}return c}
function Br(a,b,c){a.ag[a.cd[b]]=c}G(wn,{layerSpacing:"layerSpacing"},function(){return this.Vk},function(a){this.Vk!==a&&(w(a,"number",wn,"layerSpacing"),0<=a&&(this.Vk=a,this.v()))});G(wn,{BH:"columnSpacing"},function(){return this.Mc},function(a){this.Mc!==a&&(w(a,"number",wn,"columnSpacing"),0<=a&&(this.Mc=a,this.v()))});G(wn,{direction:"direction"},function(){return this.aa},function(a){this.aa!==a&&(w(a,"number",wn,"direction"),this.aa=a,this.v())});
G(wn,{QE:"cycleRemoveOption"},function(){return this.jm},function(a){this.jm!==a&&(va(a,wn,wn,"cycleRemoveOption"),a===tr||a===nr)&&(this.jm=a,this.v())});G(wn,{NF:"layeringOption"},function(){return this.Om},function(a){this.Om!==a&&(va(a,wn,wn,"layeringOption"),a===or||a===Lr||a===Nr)&&(this.Om=a,this.v())});G(wn,{AF:"initializeOption"},function(){return this.Dm},function(a){this.Dm!==a&&(va(a,wn,wn,"initializeOption"),a===pr||a===Tr||a===Rr)&&(this.Dm=a,this.v())});
G(wn,{jI:"iterations"},function(){return this.Sk},function(a){this.Sk!==a&&(ua(a,sr,"iterations"),0<=a&&(this.Sk=a,this.v()))});G(wn,{uE:"aggressiveOption"},function(){return this.Zl},function(a){this.Zl!==a&&(va(a,wn,wn,"aggressiveOption"),a===Xr||a===qr||a===Yr)&&(this.Zl=a,this.v())});G(wn,{II:"packOption"},function(){return this.Bh},function(a){this.Bh!==a&&(w(a,"number",wn,"packOption"),0<=a&&8>a&&(this.Bh=a,this.v()))});
G(wn,{co:"setsPortSpots"},function(){return this.Qg},function(a){this.Qg!==a&&(w(a,"boolean",wn,"setsPortSpots"),this.Qg=a,this.v())});G(wn,{hv:"linkSpacing"},function(){return this.qi},function(a){this.qi!==a&&(w(a,"number",wn,"linkSpacing"),0<=a&&(this.qi=a,this.v()))});H(wn,{VF:"maxLayer"},function(){return this.Pa});H(wn,{qI:"maxIndex"},function(){return this.Bt});H(wn,{pI:"maxColumn"},function(){return this.nb});H(wn,{wI:"minIndexLayer"},function(){return this.Np});
H(wn,{rI:"maxIndexLayer"},function(){return this.Re});var nr;wn.CycleDepthFirst=nr=I(wn,"CycleDepthFirst",0);var tr;wn.CycleGreedy=tr=I(wn,"CycleGreedy",1);var or;wn.LayerOptimalLinkLength=or=I(wn,"LayerOptimalLinkLength",0);var Lr;wn.LayerLongestPathSink=Lr=I(wn,"LayerLongestPathSink",1);var Nr;wn.LayerLongestPathSource=Nr=I(wn,"LayerLongestPathSource",2);var pr;wn.InitDepthFirstOut=pr=I(wn,"InitDepthFirstOut",0);var Tr;wn.InitDepthFirstIn=Tr=I(wn,"InitDepthFirstIn",1);var Rr;
wn.InitNaive=Rr=I(wn,"InitNaive",2);var Xr;wn.AggressiveNone=Xr=I(wn,"AggressiveNone",0);var qr;wn.AggressiveLess=qr=I(wn,"AggressiveLess",1);var Yr;wn.AggressiveMore=Yr=I(wn,"AggressiveMore",2);wn.PackNone=0;var Zr;wn.PackExpand=Zr=1;var $r;wn.PackStraighten=$r=2;var bs;wn.PackMedian=bs=4;var rr;wn.PackAll=rr=7;function is(){this.index=this.nd=this.Ud=this.$c=this.first=this.layer=0;this.link=null;this.dh=0}zb(is,{layer:!0,first:!0,$c:!0,Ud:!0,nd:!0,index:!0,link:!0,dh:!0});
function sr(){kc.call(this)}yb(sr,kc);vb("LayeredDigraphNetwork",sr);sr.prototype.createVertex=function(){return new js};sr.prototype.createEdge=function(){return new ks};function js(){lc.call(this);this.index=this.column=this.layer=-1;this.component=NaN;this.near=null;this.valid=!1;this.finish=this.vn=NaN;this.tl=0;this.xy=this.yy=null}yb(js,lc);vb("LayeredDigraphVertex",js);
function ks(){sc.call(this);this.forest=this.rev=this.valid=!1;this.portToPos=this.portFromPos=NaN;this.portToColOffset=this.portFromColOffset=0}yb(ks,sc);vb("LayeredDigraphEdge",ks);function Z(){0<arguments.length&&Aa(Z);lg.call(this);this.Hc=new Xb(Object);this.gq=ls;this.Pe=ms;this.Wq=ns;this.yt=os;this.nz=null;this.yg=!0;this.sc=ps;this.hf=(new Za(10,10)).freeze();this.ha=new qs;this.ga=new qs;this.nx=[]}yb(Z,lg);vb("TreeLayout",Z);
Z.prototype.cloneProtected=function(a){lg.prototype.cloneProtected.call(this,a);a.gq=this.gq;a.Wq=this.Wq;a.yt=this.yt;a.yg=this.yg;a.sc=this.sc;a.hf.assign(this.hf);a.ha.copyInheritedPropertiesFrom(this.ha);a.ga.copyInheritedPropertiesFrom(this.ga)};Z.prototype.createNetwork=function(){return new rs};
Z.prototype.makeNetwork=function(a){function b(a){if(a instanceof V)return!a.Ie&&"Comment"!==a.jc;if(a instanceof W){var b=a.M;if(null===b||b.Ie||"Comment"===b.jc)return!1;a=a.R;return null===a||a.Ie||"Comment"===a.jc?!1:!0}return!1}var c=this.createNetwork();c.vb=this;a instanceof M?(c.Ri(a.Mf,!0,b),c.Ri(a.links,!0,b)):a instanceof Wg?c.Ri(a.lc,!1,b):c.Ri(a.i,!1,b);return c};
Z.prototype.doLayout=function(a){null===a&&v("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");null===this.network&&(this.network=this.makeNetwork(a));this.We!==ss&&(this.md=this.initialOrigin(this.md));var b=this.g;null===b&&a instanceof M&&(b=a);this.Pe=this.path===ls&&null!==b?b.Kc?ms:ts:this.path===ls?ms:this.path;if(0<this.network.vertexes.count){this.network.Iu();for(a=this.network.vertexes.i;a.next();)b=a.value,b.initialized=!1,b.level=
0,b.parent=null,b.children=[];if(0<this.Hc.count){a=new Xb(qs);for(b=this.Hc.i;b.next();){var c=b.value;c instanceof V?(c=this.network.Fl(c),null!==c&&a.add(c)):c instanceof qs&&a.add(c)}this.Hc=a}0===this.Hc.count&&this.findRoots();for(a=this.Hc.copy().i;a.next();)b=a.value,b.initialized||(b.initialized=!0,us(this,b));for(a=this.Hc.i;a.next();)b=a.value,b instanceof qs&&vs(this,b);for(a=this.Hc.i;a.next();)b=a.value,b instanceof qs&&ws(this,b);for(a=this.Hc.i;a.next();)b=a.value,b instanceof qs&&
xs(this,b);this.Bx();if(this.ly===ys){c=[];for(a=this.network.vertexes.i;a.next();){var d=a.value,b=d.parent;null==b&&(b=d);var b=0===b.angle||180===b.angle,e=c[d.level];void 0===e&&(e=0);c[d.level]=Math.max(e,b?d.width:d.height)}for(d=0;d<c.length;d++)void 0===c[d]&&(c[d]=0);this.nz=c;for(a=this.network.vertexes.i;a.next();)d=a.value,b=d.parent,null===b&&(b=d),0===b.angle||180===b.angle?(180===b.angle&&(d.zr+=c[d.level]-d.width),d.width=c[d.level]):(270===b.angle&&(d.Ar+=c[d.level]-d.height),d.height=
c[d.level])}else if(this.ly===zs)for(a=this.network.vertexes.i;a.next();){c=a.value;b=0===c.angle||180===c.angle;e=-1;for(d=0;d<c.children.length;d++)var f=c.children[d],e=Math.max(e,b?f.width:f.height);if(0<=e)for(d=0;d<c.children.length;d++)f=c.children[d],b?(180===c.angle&&(f.zr+=e-f.width),f.width=e):(270===c.angle&&(f.Ar+=e-f.height),f.height=e)}for(a=this.Hc.i;a.next();)b=a.value,b instanceof qs&&this.layoutTree(b);this.arrangeTrees();this.updateParts()}this.network=null;this.Hc=new Xb(Object);
this.Ke=!0};
Z.prototype.findRoots=function(){for(var a=this.network.vertexes.i;a.next();){var b=a.value;switch(this.Pe){case ms:0===b.Mb.count&&this.Hc.add(b);break;case ts:0===b.Hb.count&&this.Hc.add(b);break;default:v("Unhandled path value "+this.Pe.toString())}}if(0===this.Hc.count){for(var a=999999,b=null,c=this.network.vertexes.i;c.next();){var d=c.value;switch(this.Pe){case ms:d.Mb.count<a&&(a=d.Mb.count,b=d);break;case ts:d.Hb.count<a&&(a=d.Hb.count,b=d);break;default:v("Unhandled path value "+this.Pe.toString())}}null!==
b&&this.Hc.add(b)}};
function us(a,b){if(null!==b){switch(a.Pe){case ms:if(0<b.Hb.count){for(var c=new N(qs),d=b.XE;d.next();){var e=d.value;As(a,b,e)&&c.add(e)}0<c.count&&(b.children=c.ae())}break;case ts:if(0<b.Mb.count){c=new N(qs);for(d=b.NG;d.next();)e=d.value,As(a,b,e)&&c.add(e);0<c.count&&(b.children=c.ae())}break;default:v("Unhandled path value"+a.Pe.toString())}c=b.children;d=c.length;for(e=0;e<d;e++){var f=c[e];f.initialized=!0;f.level=b.level+1;f.parent=b;a.Hc.remove(f)}for(e=0;e<d;e++)f=c[e],us(a,f)}}
function As(a,b,c){if(c.initialized){var d;if(null===b)d=!1;else{for(d=b.parent;null!==d&&d!==c;)d=d.parent;d=d===c}if(d||c.level>b.level)return!1;a.removeChild(c.parent,c)}return!0}Z.prototype.removeChild=function(a,b){if(null!==a&&null!==b){for(var c=a.children,d=0,e=0;e<c.length;e++)c[e]===b&&d++;if(0<d){for(var d=Array(c.length-d),f=0,e=0;e<c.length;e++)c[e]!==b&&(d[f++]=c[e]);a.children=d}}};
function vs(a,b){if(null!==b){a.initializeTreeVertexValues(b);b.alignment===Bs&&a.sortTreeVertexChildren(b);for(var c=0,d=b.vl,e=0,f=b.children,g=f.length,h=0;h<g;h++){var k=f[h];vs(a,k);c+=k.descendantCount+1;d=Math.max(d,k.maxChildrenCount);e=Math.max(e,k.maxGenerationCount)}b.descendantCount=c;b.maxChildrenCount=d;b.maxGenerationCount=0<d?e+1:0}}
function Cs(a,b){switch(a.Wq){default:case ns:return null!==b.parent?b.parent:a.ha;case Ds:return null===b.parent?a.ha:null===b.parent.parent?a.ga:b.parent;case Es:if(null!==b.parent)return null!==b.parent.parent?b.parent.parent:a.ga;case Fs:var c=!0;if(0===b.vl)c=!1;else for(var d=b.children,e=d.length,f=0;f<e;f++)if(0<d[f].vl){c=!1;break}return c&&null!==b.parent?a.ga:null!==b.parent?b.parent:a.ha}}
Z.prototype.initializeTreeVertexValues=function(a){var b=Cs(this,a);a.copyInheritedPropertiesFrom(b);if(null!==a.parent&&a.parent.alignment===Bs){for(var b=a.angle,c=a.parent.children,d=0;d<c.length&&a!==c[d];)d++;0===d%2?d!==c.length-1&&(b=90===b?180:180===b?270:270===b?180:270):b=90===b?0:180===b?90:270===b?0:90;a.angle=b}a.initialized=!0};function ws(a,b){if(null!==b){a.assignTreeVertexValues(b);for(var c=b.children,d=c.length,e=0;e<d;e++)ws(a,c[e])}}Z.prototype.assignTreeVertexValues=function(){};
function xs(a,b){if(null!==b){b.alignment!==Bs&&a.sortTreeVertexChildren(b);for(var c=b.children,d=c.length,e=0;e<d;e++)xs(a,c[e])}}Z.prototype.sortTreeVertexChildren=function(a){switch(a.sorting){case Gs:break;case Hs:a.children.reverse();break;case Is:a.children.sort(a.comparer);break;case Js:a.children.sort(a.comparer);a.children.reverse();break;default:v("Unhandled sorting value "+a.sorting.toString())}};Z.prototype.Bx=function(){if(this.comments)for(var a=this.network.vertexes.i;a.next();)this.addComments(a.value)};
Z.prototype.addComments=function(a){var b=a.angle,c=a.parent,d=0,e=Ks,e=!1;null!==c&&(d=c.angle,e=c.alignment,e=Ls(e));var b=90===b||270===b,d=90===d||270===d,c=0===a.vl,f=0,g=0,h=0,k=a.commentSpacing;if(null!==a.dc)for(var l=a.dc.aC();l.next();){var m=l.value;"Comment"===m.jc&&m.sa()&&(null===a.comments&&(a.comments=[]),a.comments.push(m),m.Ee(),m=m.oa,b&&!c||!e&&!d&&c||e&&d&&c?(f=Math.max(f,m.width),g+=m.height+Math.abs(h)):(f+=m.width+Math.abs(h),g=Math.max(g,m.height)),h=k)}null!==a.comments&&
(b&&!c||!e&&!d&&c||e&&d&&c?(f+=Math.abs(a.commentMargin),g=Math.max(0,g-a.height)):(g+=Math.abs(a.commentMargin),f=Math.max(0,f-a.width)),e=db(0,0,a.P.width+f,a.P.height+g),a.Qa=e,fb(e))};function Ls(a){return a===Ms||a===Bs||a===Ns||a===Os}function Ps(a){return a===Ms||a===Bs}function Qs(a){var b=a.parent;if(null!==b){var c=b.alignment;if(Ls(c)){if(Ps(c)){b=b.children;for(c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===Ns)return!0}}return!1}
Z.prototype.layoutComments=function(a){if(null!==a.comments){var b=a.dc.oa,c=a.parent,d=a.angle,e=0,f=Ks,f=!1;null!==c&&(e=c.angle,f=c.alignment,f=Ls(f));for(var c=90===d||270===d,d=90===e||270===e,g=0===a.vl,h=Qs(a),k=0,l=a.comments,m=l.length,n=Va(),p=0;p<m;p++){var q=l[p],s=q.oa;if(c&&!g||!f&&!d&&g||f&&d&&g){if(135<e&&!f||d&&h)if(0<=a.commentMargin)for(n.k(a.P.x-a.commentMargin-s.width,a.P.y+k),q.move(n),q=q.Df();q.next();){var t=q.value;t.Za=ge;t.ab=he}else for(n.k(a.P.x+2*a.B.x-a.commentMargin,
a.P.y+k),q.move(n),q=q.Df();q.next();)t=q.value,t.Za=he,t.ab=ge;else if(0<=a.commentMargin)for(n.k(a.P.x+2*a.B.x+a.commentMargin,a.P.y+k),q.move(n),q=q.Df();q.next();)t=q.value,t.Za=he,t.ab=ge;else for(n.k(a.P.x+a.commentMargin-s.width,a.P.y+k),q.move(n),q=q.Df();q.next();)t=q.value,t.Za=ge,t.ab=he;k=0<=a.commentSpacing?k+(s.height+a.commentSpacing):k+(a.commentSpacing-s.height)}else{if(135<e&&!f||!d&&h)if(0<=a.commentMargin)for(n.k(a.P.x+k,a.P.y-a.commentMargin-s.height),q.move(n),q=q.Df();q.next();)t=
q.value,t.Za=fe,t.ab=ie;else for(n.k(a.P.x+k,a.P.y+2*a.B.y-a.commentMargin),q.move(n),q=q.Df();q.next();)t=q.value,t.Za=ie,t.ab=fe;else if(0<=a.commentMargin)for(n.k(a.P.x+k,a.P.y+2*a.B.y+a.commentMargin),q.move(n),q=q.Df();q.next();)t=q.value,t.Za=ie,t.ab=fe;else for(n.k(a.P.x+k,a.P.y+a.commentMargin-s.height),q.move(n),q=q.Df();q.next();)t=q.value,t.Za=fe,t.ab=ie;k=0<=a.commentSpacing?k+(s.width+a.commentSpacing):k+(a.commentSpacing-s.width)}}A(n);b=k-a.commentSpacing-(c?b.height:b.width);if(this.Pe===
ms)for(e=a.Hb;e.next();)a=e.value.link,null===a||a.mk||(a.fk=0<b?b:NaN);else for(e=a.Mb;e.next();)a=e.value.link,null===a||a.mk||(a.Bk=0<b?b:NaN)}};
Z.prototype.layoutTree=function(a){if(null!==a){for(var b=a.children,c=b.length,d=0;d<c;d++)this.layoutTree(b[d]);switch(a.compaction){case Rs:Ss(this,a);break;case Ts:if(a.alignment===Bs)Ss(this,a);else if(0===a.vl){var d=a.parent,b=!1,c=0,e=Ks;null!==d&&(c=d.angle,e=d.alignment,b=Ls(e));d=Qs(a);a.W.k(0,0);a.Ga.k(a.width,a.height);null===a.parent||null===a.comments||(180!==c&&270!==c||b)&&!d?a.ua.k(0,0):180===c&&!b||(90===c||270===c)&&d?a.ua.k(a.width-2*a.B.x,0):a.ua.k(0,a.height-2*a.B.y);a.Nr=null;
a.gs=null}else{for(var f=Us(a),b=90===f||270===f,g=0,h=a.children,k=h.length,l=0;l<k;l++)var m=h[l],g=Math.max(g,b?m.Ga.width:m.Ga.height);var n=a.alignment,d=n===Vs,p=n===Ws,q=Ls(n),s=Math.max(0,a.breadthLimit),c=Xs(a),t=a.nodeSpacing,u=Ys(a),x=a.rowSpacing,B=0;if(d||p||a.Zn||a.$n&&1===a.maxGenerationCount)B=Math.max(0,a.rowIndent);var d=a.width,e=a.height,y=0,C=0,K=0,J=null,ba=null,ja=0,Y=0,P=0,ha=0,Ra=0,Ha=0,eb=0,ya=0,m=0;q&&!Ps(n)&&135<f&&h.reverse();if(Ps(n))if(1<k)for(l=0;l<k;l++)0===l%2&&l!==
k-1?ya=Math.max(ya,b?h[l].Ga.width:h[l].Ga.height):0!==l%2&&(m=Math.max(m,b?h[l].Ga.width:h[l].Ga.height));else 1===k&&(ya=b?h[0].Ga.width:h[0].Ga.height);if(q){switch(n){case Ms:Y=135>f?Zs(a,h,ya,y,C):$s(a,h,ya,y,C);ya=Y.x;y=Y.width;C=Y.height;break;case Ns:for(l=0;l<k;l++){var m=h[l],Pa=m.Ga,J=0===Ha?0:x;b?(m.W.k(g-Pa.width,ha+J),y=Math.max(y,Pa.width),C=Math.max(C,ha+J+Pa.height),ha+=J+Pa.height):(m.W.k(P+J,g-Pa.height),y=Math.max(y,P+J+Pa.width),C=Math.max(C,Pa.height),P+=J+Pa.width);Ha++}break;
case Os:for(l=0;l<k;l++)m=h[l],Pa=m.Ga,J=0===Ha?0:x,b?(m.W.k(t/2+a.B.x,ha+J),y=Math.max(y,Pa.width),C=Math.max(C,ha+J+Pa.height),ha+=J+Pa.height):(m.W.k(P+J,t/2+a.B.y),y=Math.max(y,P+J+Pa.width),C=Math.max(C,Pa.height),P+=J+Pa.width),Ha++}J=at(this,2);ba=at(this,2);b?(J[0].k(0,0),J[1].k(0,C),ba[0].k(y,0)):(J[0].k(0,0),J[1].k(y,0),ba[0].k(0,C));ba[1].k(y,C)}else for(l=0;l<k;l++){m=h[l];Pa=m.Ga;if(b){0<s&&0<Ha&&P+t+Pa.width>s&&(P<g&&bt(a,n,g-P,0,eb,l-1),Ra++,Ha=0,eb=l,K=C,P=0,ha=135<f?-C-x:C+x);ct(this,
m,0,ha);var Ca=0;if(0===Ha){if(J=m.Nr,ba=m.gs,ja=Pa.width,Y=Pa.height,null===J||null===ba||f!==Us(m))J=at(this,2),ba=at(this,2),J[0].k(0,0),J[1].k(0,Y),ba[0].k(ja,0),ba[1].k(ja,Y)}else{var Ic=ob(),Y=dt(this,a,m,J,ba,ja,Y,Ic),Ca=Y.x,J=Ic[0],ba=Ic[1],ja=Y.width,Y=Y.height;pb(Ic);P<Pa.width&&0>Ca&&(et(a,-Ca,0,eb,l-1),ft(J,-Ca,0),ft(ba,-Ca,0),Ca=0)}m.W.k(Ca,ha);y=Math.max(y,ja);C=Math.max(C,K+(0===Ra?0:x)+Pa.height);P=ja}else{0<s&&0<Ha&&ha+t+Pa.height>s&&(ha<g&&bt(a,n,0,g-ha,eb,l-1),Ra++,Ha=0,eb=l,K=
y,ha=0,P=135<f?-y-x:y+x);ct(this,m,P,0);Ca=0;if(0===Ha){if(J=m.Nr,ba=m.gs,ja=Pa.width,Y=Pa.height,null===J||null===ba||f!==Us(m))J=at(this,2),ba=at(this,2),J[0].k(0,0),J[1].k(ja,0),ba[0].k(0,Y),ba[1].k(ja,Y)}else Ic=ob(),Y=dt(this,a,m,J,ba,ja,Y,Ic),Ca=Y.x,J=Ic[0],ba=Ic[1],ja=Y.width,Y=Y.height,pb(Ic),ha<Pa.height&&0>Ca&&(et(a,0,-Ca,eb,l-1),ft(J,0,-Ca),ft(ba,0,-Ca),Ca=0);m.W.k(P,Ca);C=Math.max(C,Y);y=Math.max(y,K+(0===Ra?0:x)+Pa.width);ha=Y}Ha++}0<Ra&&(b?(C+=Math.max(0,c),P<y&&bt(a,n,y-P,0,eb,k-1),
0<B&&(p||et(a,B,0,0,k-1),y+=B)):(y+=Math.max(0,c),ha<C&&bt(a,n,0,C-ha,eb,k-1),0<B&&(p||et(a,0,B,0,k-1),C+=B)));p=g=0;switch(n){case gt:b?g+=y/2-a.B.x-u/2:p+=C/2-a.B.y-u/2;break;case Ks:0<Ra?b?g+=y/2-a.B.x-u/2:p+=C/2-a.B.y-u/2:b?(l=h[0].W.x+h[0].ua.x,ya=h[k-1].W.x+h[k-1].ua.x+2*h[k-1].B.x,g+=l+(ya-l)/2-a.B.x-u/2):(l=h[0].W.y+h[0].ua.y,ya=h[k-1].W.y+h[k-1].ua.y+2*h[k-1].B.y,p+=l+(ya-l)/2-a.B.y-u/2);break;case Vs:b?(g-=u,y+=u):(p-=u,C+=u);break;case Ws:b?(g+=y-a.width+u,y+=u):(p+=C-a.height+u,C+=u);
break;case Ms:b?g=1<k?g+(ya+t/2-a.B.x):g+(h[0].B.x-a.B.x+h[0].ua.x):p=1<k?p+(ya+t/2-a.B.y):p+(h[0].B.y-a.B.y+h[0].ua.y);break;case Ns:b?g+=y+t/2-a.B.x:p+=C+t/2-a.B.y;break;case Os:break;default:v("Unhandled alignment value "+n.toString())}for(l=0;l<k;l++)m=h[l],b?m.W.k(m.W.x+m.ua.x-g,m.W.y+(135<f?(q?-C:-m.Ga.height)+m.ua.y-c:e+c+m.ua.y)):m.W.k(m.W.x+(135<f?(q?-y:-m.Ga.width)+m.ua.x-c:d+c+m.ua.x),m.W.y+m.ua.y-p);k=h=0;q?b?(y=ht(a,y,g),0>g&&(g=0),135<f&&(p+=C+c),C+=e+c,n===Os&&(h+=t/2+a.B.x),k+=e+c):
(135<f&&(g+=y+c),y+=d+c,C=it(a,C,p),0>p&&(p=0),n===Os&&(k+=t/2+a.B.y),h+=d+c):b?(null===a.comments?d>y&&(n=jt(n,d-y,0),h=n.x,k=n.y,y=d,g=0):y=ht(a,y,g),0>g&&(h-=g,g=0),135<f&&(p+=C+c),C=Math.max(Math.max(C,e),C+e+c),k+=e+c):(135<f&&(g+=y+c),y=Math.max(Math.max(y,d),y+d+c),null===a.comments?e>C&&(n=jt(n,0,e-C),h=n.x,k=n.y,C=e,p=0):C=it(a,C,p),0>p&&(k-=p,p=0),h+=d+c);if(0<Ra)f=at(this,4),n=at(this,4),b?(f[2].k(0,e+c),f[3].k(f[2].x,C),n[2].k(y,f[2].y),n[3].k(n[2].x,f[3].y)):(f[2].k(d+c,0),f[3].k(y,f[2].y),
n[2].k(f[2].x,C),n[3].k(f[3].x,n[2].y));else{f=at(this,J.length+2);n=at(this,ba.length+2);for(l=0;l<J.length;l++)q=J[l],f[l+2].k(q.x+h,q.y+k);for(l=0;l<ba.length;l++)q=ba[l],n[l+2].k(q.x+h,q.y+k)}b?(f[0].k(g,0),f[1].k(f[0].x,e),f[2].y<f[1].y&&(f[2].x>f[0].x?f[2].assign(f[1]):f[1].assign(f[2])),f[3].y<f[2].y&&(f[3].x>f[0].x?f[3].assign(f[2]):f[2].assign(f[3])),n[0].k(g+d,0),n[1].k(n[0].x,e),n[2].y<n[1].y&&(n[2].x<n[0].x?n[2].assign(n[1]):n[1].assign(n[2])),n[3].y<n[2].y&&(n[3].x<n[0].x?n[3].assign(n[2]):
n[2].assign(n[3])),f[2].y-=c/2,n[2].y-=c/2):(f[0].k(0,p),f[1].k(d,f[0].y),f[2].x<f[1].x&&(f[2].y>f[0].y?f[2].assign(f[1]):f[1].assign(f[2])),f[3].x<f[2].x&&(f[3].y>f[0].y?f[3].assign(f[2]):f[2].assign(f[3])),n[0].k(0,p+e),n[1].k(d,n[0].y),n[2].x<n[1].x&&(n[2].y<n[0].y?n[2].assign(n[1]):n[1].assign(n[2])),n[3].x<n[2].x&&(n[3].y<n[0].y?n[3].assign(n[2]):n[2].assign(n[3])),f[2].x-=c/2,n[2].x-=c/2);kt(this,J);kt(this,ba);a.Nr=f;a.gs=n;a.ua.k(g,p);a.Ga.k(y,C)}break;default:v("Unhandled compaction value "+
a.compaction.toString())}}};
function Ss(a,b){if(0===b.vl){var c=!1,d=0,e=Ks;null!==b.parent&&(d=b.parent.angle,e=b.parent.alignment,c=Ls(e));e=Qs(b);b.W.k(0,0);b.Ga.k(b.width,b.height);null===b.parent||null===b.comments||(180!==d&&270!==d||c)&&!e?b.ua.k(0,0):180===d&&!c||(90===d||270===d)&&e?b.ua.k(b.width-2*b.B.x,0):b.ua.k(0,b.height-2*b.B.y)}else{for(var c=Us(b),d=90===c||270===c,f=0,e=b.children,g=e.length,h=0;h<g;h++)var k=e[h],f=Math.max(f,d?k.Ga.width:k.Ga.height);var l=b.alignment,m=l===Vs,n=l===Ws,p=Ls(l),q=Math.max(0,
b.breadthLimit),s=Xs(b),t=b.nodeSpacing,u=Ys(b),x=m||n?0:u/2,B=b.rowSpacing,y=0;if(m||n||b.Zn||b.$n&&1===b.maxGenerationCount)y=Math.max(0,b.rowIndent);var m=b.width,C=b.height,K=0,J=0,ba=0,ja=0,Y=0,P=0,ha=0,Ra=0,Ha=0,eb=0;p&&!Ps(l)&&135<c&&e.reverse();if(Ps(l))if(1<g)for(h=0;h<g;h++){var k=e[h],ya=k.Ga;0===h%2&&h!==g-1?Ha=Math.max(Ha,(d?ya.width:ya.height)+lt(k)-t):0!==h%2&&(eb=Math.max(eb,(d?ya.width:ya.height)+lt(k)-t))}else 1===g&&(Ha=d?e[0].Ga.width:e[0].Ga.height);if(p)switch(l){case Ms:case Bs:J=
135>c?Zs(b,e,Ha,K,J):$s(b,e,Ha,K,J);Ha=J.x;K=J.width;J=J.height;break;case Ns:for(h=0;h<g;h++)k=e[h],ya=k.Ga,q=0===ha?0:B,d?(k.W.k(f-ya.width,Y+q),K=Math.max(K,ya.width),J=Math.max(J,Y+q+ya.height),Y+=q+ya.height):(k.W.k(ja+q,f-ya.height),K=Math.max(K,ja+q+ya.width),J=Math.max(J,ya.height),ja+=q+ya.width),ha++;break;case Os:for(f=0;f<g;f++)k=e[f],ya=k.Ga,q=0===ha?0:B,d?(k.W.k(t/2+b.B.x,Y+q),K=Math.max(K,ya.width),J=Math.max(J,Y+q+ya.height),Y+=q+ya.height):(k.W.k(ja+q,t/2+b.B.y),K=Math.max(K,ja+q+
ya.width),J=Math.max(J,ya.height),ja+=q+ya.width),ha++}else for(h=0;h<g;h++)k=e[h],ya=k.Ga,d?(0<q&&0<ha&&ja+t+ya.width>q&&(ja<f&&bt(b,l,f-ja,0,Ra,h-1),P++,ha=0,Ra=h,ba=J,ja=0,Y=135<c?-J-B:J+B),eb=0===ha?x:t,ct(a,k,0,Y),k.W.k(ja+eb,Y),K=Math.max(K,ja+eb+ya.width),J=Math.max(J,ba+(0===P?0:B)+ya.height),ja+=eb+ya.width):(0<q&&0<ha&&Y+t+ya.height>q&&(Y<f&&bt(b,l,0,f-Y,Ra,h-1),P++,ha=0,Ra=h,ba=K,Y=0,ja=135<c?-K-B:K+B),eb=0===ha?x:t,ct(a,k,ja,0),k.W.k(ja,Y+eb),J=Math.max(J,Y+eb+ya.height),K=Math.max(K,
ba+(0===P?0:B)+ya.width),Y+=eb+ya.height),ha++;0<P&&(d?(J+=Math.max(0,s),ja<K&&bt(b,l,K-ja,0,Ra,g-1),0<y&&(n||et(b,y,0,0,g-1),K+=y)):(K+=Math.max(0,s),Y<J&&bt(b,l,0,J-Y,Ra,g-1),0<y&&(n||et(b,0,y,0,g-1),J+=y)));y=n=0;switch(l){case gt:d?n+=K/2-b.B.x-u/2:y+=J/2-b.B.y-u/2;break;case Ks:0<P?d?n+=K/2-b.B.x-u/2:y+=J/2-b.B.y-u/2:d?(l=e[0].W.x+e[0].ua.x,t=e[g-1].W.x+e[g-1].ua.x+2*e[g-1].B.x,n+=l+(t-l)/2-b.B.x-u/2):(l=e[0].W.y+e[0].ua.y,t=e[g-1].W.y+e[g-1].ua.y+2*e[g-1].B.y,y+=l+(t-l)/2-b.B.y-u/2);break;case Vs:d?
(n-=u,K+=u):(y-=u,J+=u);break;case Ws:d?(n+=K-b.width+u,K+=u):(y+=J-b.height+u,J+=u);break;case Ms:case Bs:d?n=1<g?n+(Ha+t/2-b.B.x):n+(e[0].B.x-b.B.x+e[0].ua.x):y=1<g?y+(Ha+t/2-b.B.y):y+(e[0].B.y-b.B.y+e[0].ua.y);break;case Ns:d?n+=K+t/2-b.B.x:y+=J+t/2-b.B.y;break;case Os:break;default:v("Unhandled alignment value "+l.toString())}for(h=0;h<g;h++)k=e[h],d?k.W.k(k.W.x+k.ua.x-n,k.W.y+(135<c?(p?-J:-k.Ga.height)+k.ua.y-s:C+s+k.ua.y)):k.W.k(k.W.x+(135<c?(p?-K:-k.Ga.width)+k.ua.x-s:m+s+k.ua.x),k.W.y+k.ua.y-
y);d?(K=ht(b,K,n),0>n&&(n=0),135<c&&(y+=J+s),J+=C+s):(135<c&&(n+=K+s),K+=m+s,J=it(b,J,y),0>y&&(y=0));b.ua.k(n,y);b.Ga.k(K,J)}}
function Zs(a,b,c,d,e){var f=b.length;if(0===f)return new D(c,0,d,e);if(1===f){var g=b[0];d=g.Ga.width;e=g.Ga.height;return new D(c,0,d,e)}for(var h=a.nodeSpacing,k=a.rowSpacing,l=90===Us(a),m=0,n=0,p=0,q=0;q<f;q++)if(!(0!==q%2||1<f&&q===f-1)){var g=b[q],s=g.Ga,t=0===m?0:k;if(l){var u=lt(g)-h;g.W.k(c-(s.width+u),p+t);d=Math.max(d,s.width+u);e=Math.max(e,p+t+s.height);p+=t+s.height}else u=lt(g)-h,g.W.k(n+t,c-(s.height+u)),e=Math.max(e,s.height+u),d=Math.max(d,n+t+s.width),n+=t+s.width;m++}var m=0,
x=n,B=p;l?(n=c+h,p=0):(n=0,p=c+h);for(q=0;q<f;q++)0!==q%2&&(g=b[q],s=g.Ga,t=0===m?0:k,l?(u=lt(g)-h,g.W.k(n+u,p+t),d=Math.max(d,n+s.width+u),e=Math.max(e,p+t+s.height),p+=t+s.height):(u=lt(g)-h,g.W.k(n+t,p+u),d=Math.max(d,n+t+s.width),e=Math.max(e,p+s.height+u),n+=t+s.width),m++);1<f&&1===f%2&&(g=b[f-1],s=g.Ga,b=mt(g,l?Math.max(Math.abs(B),Math.abs(p)):Math.max(Math.abs(x),Math.abs(n))),l?(g.W.k(c+h/2-g.B.x-g.ua.x,e+b),l=c+h/2-g.B.x-g.ua.x,d=Math.max(d,l+s.width),0>l&&(d-=l),e=Math.max(e,Math.max(B,
p)+b+s.height),0>g.W.x&&(c=st(a,g.W.x,!1,c,h))):(g.W.k(d+b,c+h/2-g.B.y-g.ua.y),d=Math.max(d,Math.max(x,n)+b+s.width),l=c+h/2-g.B.y-g.ua.y,e=Math.max(e,l+s.height),0>l&&(e-=l),0>g.W.y&&(c=st(a,g.W.y,!0,c,h))));return new D(c,0,d,e)}
function $s(a,b,c,d,e){var f=b.length;if(0===f)return new D(c,0,d,e);if(1===f){var g=b[0];d=g.Ga.width;e=g.Ga.height;return new D(c,0,d,e)}for(var h=a.nodeSpacing,k=a.rowSpacing,l=270===Us(a),m=0,n=0,p=0,q=0;q<f;q++)if(!(0!==q%2||1<f&&q===f-1)){var g=b[q],s=g.Ga,t=0===m?0:k;if(l){var u=lt(g)-h,p=p-(t+s.height);g.W.k(c-(s.width+u),p);d=Math.max(d,s.width+u);e=Math.max(e,Math.abs(p))}else u=lt(g)-h,n-=t+s.width,g.W.k(n,c-(s.height+u)),e=Math.max(e,s.height+u),d=Math.max(d,Math.abs(n));m++}var m=0,x=
n,B=p;l?(n=c+h,p=0):(n=0,p=c+h);for(q=0;q<f;q++)0!==q%2&&(g=b[q],s=g.Ga,t=0===m?0:k,l?(u=lt(g)-h,p-=t+s.height,g.W.k(n+u,p),d=Math.max(d,n+s.width+u),e=Math.max(e,Math.abs(p))):(u=lt(g)-h,n-=t+s.width,g.W.k(n,p+u),e=Math.max(e,p+s.height+u),d=Math.max(d,Math.abs(n))),m++);1<f&&1===f%2&&(g=b[f-1],s=g.Ga,k=mt(g,l?Math.max(Math.abs(B),Math.abs(p)):Math.max(Math.abs(x),Math.abs(n))),l?(g.W.k(c+h/2-g.B.x-g.ua.x,-e-s.height-k),n=c+h/2-g.B.x-g.ua.x,d=Math.max(d,n+s.width),0>n&&(d-=n),e=Math.max(e,Math.abs(Math.min(B,
p))+k+s.height),0>g.W.x&&(c=st(a,g.W.x,!1,c,h))):(g.W.k(-d-s.width-k,c+h/2-g.B.y-g.ua.y),d=Math.max(d,Math.abs(Math.min(x,n))+k+s.width),n=c+h/2-g.B.y-g.ua.y,e=Math.max(e,n+s.height),0>n&&(e-=n),0>g.W.y&&(c=st(a,g.W.y,!0,c,h))));for(q=0;q<f;q++)g=b[q],l?g.W.k(g.W.x,g.W.y+e):g.W.k(g.W.x+d,g.W.y);return new D(c,0,d,e)}function lt(a){return null===a.parent?0:a.parent.nodeSpacing}function mt(a){return null===a.parent?0:a.parent.rowSpacing}
function st(a,b,c,d,e){a=a.children;for(var f=a.length,g=0;g<f;g++)c?a[g].W.k(a[g].W.x,a[g].W.y-b):a[g].W.k(a[g].W.x-b,a[g].W.y);b=a[f-1];return Math.max(d,c?b.ua.y+b.B.y-e/2:b.ua.x+b.B.x-e/2)}
function ht(a,b,c){switch(a.alignment){case Ks:case gt:var d=b;c+a.width>d&&(d=c+a.width);0>c&&(d-=c);return d;case Vs:return a.width>b?a.width:b;case Ws:return 2*a.B.x>b?a.width:b+a.width-2*a.B.x;case Ms:case Bs:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case Ns:return a.width-a.B.x+a.nodeSpacing/2+b;case Os:return Math.max(a.width,a.B.x+a.nodeSpacing/2+b);default:return b}}
function it(a,b,c){switch(a.alignment){case Ks:case gt:var d=b;c+a.height>d&&(d=c+a.height);0>c&&(d-=c);return d;case Vs:return a.height>b?a.height:b;case Ws:return 2*a.B.y>b?a.height:b+a.height-2*a.B.y;case Ms:case Bs:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case Ns:return a.height-a.B.y+a.nodeSpacing/2+b;case Os:return Math.max(a.height,a.B.y+a.nodeSpacing/2+b);default:return b}}
function jt(a,b,c){switch(a){case gt:b/=2;c/=2;break;case Ks:b/=2;c/=2;break;case Vs:c=b=0;break;case Ws:break;default:v("Unhandled alignment value "+a.toString())}return new z(b,c)}function bt(a,b,c,d,e,f){b=jt(b,c,d);et(a,b.x,b.y,e,f)}function et(a,b,c,d,e){if(0!==b||0!==c)for(a=a.children;d<=e;d++){var f=a[d].W;f.x+=b;f.y+=c}}
function ct(a,b,c,d){var e=b.parent;switch(a.Pe){case ms:for(a=b.Mb;a.next();)b=a.value,b.fromVertex===e&&b.oq.k(c,d);break;case ts:for(a=b.Hb;a.next();)b=a.value,b.toVertex===e&&b.oq.k(c,d);break;default:v("Unhandled path value "+a.Pe.toString())}}function ft(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b;e.y+=c}}
function dt(a,b,c,d,e,f,g,h){var k=Us(b),l=90===k||270===k,m=b.nodeSpacing;b=d;var n=e;d=f;e=g;var p=c.Nr,q=c.gs;g=c.Ga;var s=l?Math.max(e,g.height):Math.max(d,g.width);if(null===p||k!==Us(c))p=at(a,2),q=at(a,2),l?(p[0].k(0,0),p[1].k(0,g.height),q[0].k(g.width,0),q[1].k(q[0].x,p[1].y)):(p[0].k(0,0),p[1].k(g.width,0),q[0].k(0,g.height),q[1].k(p[1].x,q[0].y));if(l){c=d;d=9999999;if(!(null===n||2>n.length||null===p||2>p.length))for(l=k=0;k<n.length&&l<p.length;){e=n[k];var t=p[l];f=t.x;var u=t.y;f+=
c;var x=e;k+1<n.length&&(x=n[k+1]);var B=t,t=B.x,B=B.y;l+1<p.length&&(B=p[l+1],t=B.x,B=B.y,t+=c);var y=d;e.y===u?y=f-e.x:e.y>u&&e.y<B?y=f+(e.y-u)/(B-u)*(t-f)-e.x:u>e.y&&u<x.y&&(y=f-(e.x+(u-e.y)/(x.y-e.y)*(x.x-e.x)));y<d&&(d=y);x.y<=e.y?k++:B<=u?l++:(x.y<=B&&k++,B<=x.y&&l++)}c-=d;c+=m;k=p;l=c;if(null===b||2>b.length||null===k||2>k.length)d=null;else{m=at(a,b.length+k.length);for(d=f=e=0;f<k.length&&k[f].y<b[0].y;)u=k[f++],m[d++].k(u.x+l,u.y);for(;e<b.length;)u=b[e++],m[d++].k(u.x,u.y);for(e=b[b.length-
1].y;f<k.length&&k[f].y<=e;)f++;for(;f<k.length&&k[f].y>e;)u=k[f++],m[d++].k(u.x+l,u.y);k=at(a,d);for(e=0;e<d;e++)k[e].assign(m[e]);kt(a,m);d=k}f=q;u=c;if(null===n||2>n.length||null===f||2>f.length)e=null;else{m=at(a,n.length+f.length);for(l=x=k=0;k<n.length&&n[k].y<f[0].y;)e=n[k++],m[l++].k(e.x,e.y);for(;x<f.length;)e=f[x++],m[l++].k(e.x+u,e.y);for(f=f[f.length-1].y;k<n.length&&n[k].y<=f;)k++;for(;k<n.length&&n[k].y>f;)e=n[k++],m[l++].k(e.x,e.y);e=at(a,l);for(k=0;k<l;k++)e[k].assign(m[k]);kt(a,m)}f=
Math.max(0,c)+g.width;g=s}else{c=e;d=9999999;if(!(null===n||2>n.length||null===p||2>p.length))for(l=k=0;k<n.length&&l<p.length;)e=n[k],t=p[l],f=t.x,u=t.y,u+=c,x=e,k+1<n.length&&(x=n[k+1]),B=t,t=B.x,B=B.y,l+1<p.length&&(B=p[l+1],t=B.x,B=B.y,B+=c),y=d,e.x===f?y=u-e.y:e.x>f&&e.x<t?y=u+(e.x-f)/(t-f)*(B-u)-e.y:f>e.x&&f<x.x&&(y=u-(e.y+(f-e.x)/(x.x-e.x)*(x.y-e.y))),y<d&&(d=y),x.x<=e.x?k++:t<=f?l++:(x.x<=t&&k++,t<=x.x&&l++);c-=d;c+=m;k=p;l=c;if(null===b||2>b.length||null===k||2>k.length)d=null;else{m=at(a,
b.length+k.length);for(d=f=e=0;f<k.length&&k[f].x<b[0].x;)u=k[f++],m[d++].k(u.x,u.y+l);for(;e<b.length;)u=b[e++],m[d++].k(u.x,u.y);for(e=b[b.length-1].x;f<k.length&&k[f].x<=e;)f++;for(;f<k.length&&k[f].x>e;)u=k[f++],m[d++].k(u.x,u.y+l);k=at(a,d);for(e=0;e<d;e++)k[e].assign(m[e]);kt(a,m);d=k}f=q;u=c;if(null===n||2>n.length||null===f||2>f.length)e=null;else{m=at(a,n.length+f.length);for(l=x=k=0;k<n.length&&n[k].x<f[0].x;)e=n[k++],m[l++].k(e.x,e.y);for(;x<f.length;)e=f[x++],m[l++].k(e.x,e.y+u);for(f=
f[f.length-1].x;k<n.length&&n[k].x<=f;)k++;for(;k<n.length&&n[k].x>f;)e=n[k++],m[l++].k(e.x,e.y);e=at(a,l);for(k=0;k<l;k++)e[k].assign(m[k]);kt(a,m)}f=s;g=Math.max(0,c)+g.height}kt(a,b);kt(a,p);kt(a,n);kt(a,q);h[0]=d;h[1]=e;return new D(c,0,f,g)}function at(a,b){var c=a.nx[b];if(void 0!==c&&(c=c.pop(),void 0!==c))return c;for(var c=[],d=0;d<b;d++)c[d]=new z;return c}function kt(a,b){var c=b.length,d=a.nx[c];void 0===d&&(d=[],a.nx[c]=d);d.push(b)}
Z.prototype.arrangeTrees=function(){if(this.sc===ss)for(var a=this.Hc.i;a.next();){var b=a.value;if(b instanceof qs){var c=b.dc;if(null!==c){var d=c.position,c=d.x,d=d.y;isFinite(c)||(c=0);isFinite(d)||(d=0);tt(this,b,c,d)}}}else for(a=this.md,b=a.x,c=a.y,a=this.Hc.i;a.next();)if(d=a.value,d instanceof qs)switch(tt(this,d,b+d.ua.x,c+d.ua.y),this.sc){case ps:c+=d.Ga.height+this.hf.height;break;case ut:b+=d.Ga.width+this.hf.width;break;default:v("Unhandled arrangement value "+this.sc.toString())}};
function tt(a,b,c,d){if(null!==b){b.x=c;b.y=d;b=b.children;for(var e=b.length,f=0;f<e;f++){var g=b[f];tt(a,g,c+g.W.x,d+g.W.y)}}}Z.prototype.commitLayout=function(){this.Ty();this.commitNodes();this.Ex();this.av&&this.commitLinks()};Z.prototype.commitNodes=function(){for(var a=this.network.vertexes.i;a.next();)a.value.commit();for(a.reset();a.next();)this.layoutComments(a.value)};
Z.prototype.Ex=function(){if(this.ly===ys){for(var a=this.nz,b=[],c=null,d=this.network.vertexes.i;d.next();){var e=d.value;null===c?c=e.Qa.copy():c.eh(e.Qa);var f=b[e.level],f=void 0===f?Xs(e):Math.max(f,Xs(e));b[e.level]=f}for(d=0;d<b.length;d++)void 0===b[d]&&(b[d]=0);90===this.angle||270===this.angle?(c.Ze(this.nodeSpacing/2,this.layerSpacing),e=new z(-this.nodeSpacing/2,-this.layerSpacing/2)):(c.Ze(this.layerSpacing,this.nodeSpacing/2),e=new z(-this.layerSpacing/2,-this.nodeSpacing/2));var f=
[],c=90===this.angle||270===this.angle?c.width:c.height,g=0;if(180===this.angle||270===this.angle)for(d=0;d<a.length;d++)g+=a[d]+b[d];for(d=0;d<a.length;d++){var h=a[d]+b[d];270===this.angle?(g-=h,f.push(new D(0,g,c,h))):90===this.angle?(f.push(new D(0,g,c,h)),g+=h):180===this.angle?(g-=h,f.push(new D(g,0,h,c))):(f.push(new D(g,0,h,c)),g+=h)}this.commitLayers(f,e)}};Z.prototype.commitLayers=function(){};Z.prototype.commitLinks=function(){for(var a=this.network.edges.i;a.next();)a.value.commit()};
Z.prototype.Ty=function(){for(var a=this.Hc.i;a.next();){var b=a.value;b instanceof qs&&vt(this,b)}};function vt(a,b){if(null!==b){a.setPortSpots(b);for(var c=b.children,d=c.length,e=0;e<d;e++)vt(a,c[e])}}
Z.prototype.setPortSpots=function(a){var b=a.alignment;if(Ls(b)){var c=this.Pe===ms,d=Us(a),e;switch(d){case 0:e=he;break;case 90:e=ie;break;case 180:e=ge;break;default:e=fe}var f=a.children,g=f.length;switch(b){case Ms:case Bs:for(b=0;b<g;b++){var h=f[b],h=(c?h.Mb:h.Hb).first();if(null!==h&&(h=h.link,null!==h)){var k=90===d||270===d?ge:fe;if(1===g||b===g-1&&1===g%2)switch(d){case 0:k=ge;break;case 90:k=fe;break;case 180:k=he;break;default:k=ie}else 0===b%2&&(k=90===d||270===d?he:ie);c?(a.setsPortSpot&&
(h.Za=e),a.setsChildPortSpot&&(h.ab=k)):(a.setsPortSpot&&(h.Za=k),a.setsChildPortSpot&&(h.ab=e))}}break;case Ns:k=90===d||270===d?he:ie;for(d=c?a.Hb:a.Mb;d.next();)h=d.value.link,null!==h&&(c?(a.setsPortSpot&&(h.Za=e),a.setsChildPortSpot&&(h.ab=k)):(a.setsPortSpot&&(h.Za=k),a.setsChildPortSpot&&(h.ab=e)));break;case Os:for(k=90===d||270===d?ge:fe,d=c?a.Hb:a.Mb;d.next();)h=d.value.link,null!==h&&(c?(a.setsPortSpot&&(h.Za=e),a.setsChildPortSpot&&(h.ab=k)):(a.setsPortSpot&&(h.Za=k),a.setsChildPortSpot&&
(h.ab=e)))}}else if(c=Us(a),this.Pe===ms)for(e=a.Hb;e.next();){if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.kc())switch(c){case 0:d.Za=he;break;case 90:d.Za=ie;break;case 180:d.Za=ge;break;default:d.Za=fe}else d.Za=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.kc())switch(c){case 0:d.ab=ge;break;case 90:d.ab=fe;break;case 180:d.ab=he;break;default:d.ab=ie}else d.ab=a.childPortSpot}}else for(e=a.Mb;e.next();)if(d=e.value.link,null!==d){if(a.setsPortSpot)if(a.portSpot.kc())switch(c){case 0:d.ab=
he;break;case 90:d.ab=ie;break;case 180:d.ab=ge;break;default:d.ab=fe}else d.ab=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.kc())switch(c){case 0:d.Za=ge;break;case 90:d.Za=fe;break;case 180:d.Za=he;break;default:d.Za=ie}else d.Za=a.childPortSpot}};function Us(a){a=a.angle;return 45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}
function Xs(a){var b=Us(a),b=90===b||270===b,c=a.layerSpacing;if(0<a.layerSpacingParentOverlap)var d=Math.min(1,a.layerSpacingParentOverlap),c=c-(b?a.height*d:a.width*d);c<(b?-a.height:-a.width)&&(c=b?-a.height:-a.width);return c}function Ys(a){var b=Us(a),b=90===b||270===b,c=a.nodeIndent;if(0<a.nodeIndentPastParent)var d=Math.min(1,a.nodeIndentPastParent),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}
G(Z,{QI:"roots"},function(){return this.Hc},function(a){this.Hc!==a&&(ra(a,Xb,Z,"roots"),this.Hc=a,this.v())});G(Z,{path:"path"},function(){return this.gq},function(a){this.gq!==a&&(va(a,Z,Z,"path"),this.gq=a,this.v())});G(Z,{$G:"treeStyle"},function(){return this.Wq},function(a){this.sc!==a&&(va(a,Z,Z,"treeStyle"),a===ns||a===Es||a===Fs||a===Ds)&&(this.Wq=a,this.v())});
G(Z,{ly:"layerStyle"},function(){return this.yt},function(a){this.sc!==a&&(va(a,Z,Z,"layerStyle"),a===os||a===zs||a===ys)&&(this.yt=a,this.v())});G(Z,{comments:"comments"},function(){return this.yg},function(a){this.yg!==a&&(w(a,"boolean",Z,"comments"),this.yg=a,this.v())});G(Z,{We:"arrangement"},function(){return this.sc},function(a){this.sc!==a&&(va(a,Z,Z,"arrangement"),a===ps||a===ut||a===ss)&&(this.sc=a,this.v())});
G(Z,{DB:"arrangementSpacing"},function(){return this.hf},function(a){ra(a,Za,Z,"arrangementSpacing");this.hf.A(a)||(this.hf.assign(a),this.v())});G(Z,{OI:"rootDefaults"},function(){return this.ha},function(a){this.ha!==a&&(ra(a,qs,Z,"rootDefaults"),this.ha=a,this.v())});G(Z,{nH:"alternateDefaults"},function(){return this.ga},function(a){this.ga!==a&&(ra(a,qs,Z,"alternateDefaults"),this.ga=a,this.v())});
G(Z,{sorting:"sorting"},function(){return this.ha.sorting},function(a){this.ha.sorting!==a&&(va(a,Z,Z,"sorting"),a===Gs||a===Hs||a===Is||Js)&&(this.ha.sorting=a,this.v())});G(Z,{comparer:"comparer"},function(){return this.ha.comparer},function(a){this.ha.comparer!==a&&(w(a,"function",Z,"comparer"),this.ha.comparer=a,this.v())});G(Z,{angle:"angle"},function(){return this.ha.angle},function(a){this.ha.angle!==a&&(w(a,"number",Z,"angle"),0===a||90===a||180===a||270===a)&&(this.ha.angle=a,this.v())});
G(Z,{alignment:"alignment"},function(){return this.ha.alignment},function(a){this.ha.alignment!==a&&(va(a,Z,Z,"alignment"),this.ha.alignment=a,this.v())});G(Z,{nodeIndent:"nodeIndent"},function(){return this.ha.nodeIndent},function(a){this.ha.nodeIndent!==a&&(w(a,"number",Z,"nodeIndent"),0<=a&&(this.ha.nodeIndent=a,this.v()))});
G(Z,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.ha.nodeIndentPastParent},function(a){this.ha.nodeIndentPastParent!==a&&(w(a,"number",Z,"nodeIndentPastParent"),0<=a&&1>=a&&(this.ha.nodeIndentPastParent=a,this.v()))});G(Z,{nodeSpacing:"nodeSpacing"},function(){return this.ha.nodeSpacing},function(a){this.ha.nodeSpacing!==a&&(w(a,"number",Z,"nodeSpacing"),this.ha.nodeSpacing=a,this.v())});
G(Z,{layerSpacing:"layerSpacing"},function(){return this.ha.layerSpacing},function(a){this.ha.layerSpacing!==a&&(w(a,"number",Z,"layerSpacing"),this.ha.layerSpacing=a,this.v())});G(Z,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.ha.layerSpacingParentOverlap},function(a){this.ha.layerSpacingParentOverlap!==a&&(w(a,"number",Z,"layerSpacingParentOverlap"),0<=a&&1>=a&&(this.ha.layerSpacingParentOverlap=a,this.v()))});
G(Z,{compaction:"compaction"},function(){return this.ha.compaction},function(a){this.ha.compaction!==a&&(va(a,Z,Z,"compaction"),a===Rs||a===Ts)&&(this.ha.compaction=a,this.v())});G(Z,{breadthLimit:"breadthLimit"},function(){return this.ha.breadthLimit},function(a){this.ha.breadthLimit!==a&&(w(a,"number",Z,"breadthLimit"),0<=a&&(this.ha.breadthLimit=a,this.v()))});
G(Z,{rowSpacing:"rowSpacing"},function(){return this.ha.rowSpacing},function(a){this.ha.rowSpacing!==a&&(w(a,"number",Z,"rowSpacing"),this.ha.rowSpacing=a,this.v())});G(Z,{rowIndent:"rowIndent"},function(){return this.ha.rowIndent},function(a){this.ha.rowIndent!==a&&(w(a,"number",Z,"rowIndent"),0<=a&&(this.ha.rowIndent=a,this.v()))});
G(Z,{commentSpacing:"commentSpacing"},function(){return this.ha.commentSpacing},function(a){this.ha.commentSpacing!==a&&(w(a,"number",Z,"commentSpacing"),this.ha.commentSpacing=a,this.v())});G(Z,{commentMargin:"commentMargin"},function(){return this.ha.commentMargin},function(a){this.ha.commentMargin!==a&&(w(a,"number",Z,"commentMargin"),this.ha.commentMargin=a,this.v())});
G(Z,{setsPortSpot:"setsPortSpot"},function(){return this.ha.setsPortSpot},function(a){this.ha.setsPortSpot!==a&&(w(a,"boolean",Z,"setsPortSpot"),this.ha.setsPortSpot=a,this.v())});G(Z,{portSpot:"portSpot"},function(){return this.ha.portSpot},function(a){ra(a,R,Z,"portSpot");this.ha.portSpot.A(a)||(this.ha.portSpot=a,this.v())});
G(Z,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.ha.setsChildPortSpot},function(a){this.ha.setsChildPortSpot!==a&&(w(a,"boolean",Z,"setsChildPortSpot"),this.ha.setsChildPortSpot=a,this.v())});G(Z,{childPortSpot:"childPortSpot"},function(){return this.ha.childPortSpot},function(a){ra(a,R,Z,"childPortSpot");this.ha.childPortSpot.A(a)||(this.ha.childPortSpot=a,this.v())});
G(Z,{yH:"alternateSorting"},function(){return this.ga.sorting},function(a){this.ga.sorting!==a&&(va(a,Z,Z,"alternateSorting"),a===Gs||a===Hs||a===Is||Js)&&(this.ga.sorting=a,this.v())});G(Z,{mH:"alternateComparer"},function(){return this.ga.comparer},function(a){this.ga.comparer!==a&&(w(a,"function",Z,"alternateComparer"),this.ga.comparer=a,this.v())});
G(Z,{gH:"alternateAngle"},function(){return this.ga.angle},function(a){this.ga.angle!==a&&(w(a,"number",Z,"alternateAngle"),0===a||90===a||180===a||270===a)&&(this.ga.angle=a,this.v())});G(Z,{fH:"alternateAlignment"},function(){return this.ga.alignment},function(a){this.ga.alignment!==a&&(va(a,Z,Z,"alternateAlignment"),this.ga.alignment=a,this.v())});
G(Z,{qH:"alternateNodeIndent"},function(){return this.ga.nodeIndent},function(a){this.ga.nodeIndent!==a&&(w(a,"number",Z,"alternateNodeIndent"),0<=a&&(this.ga.nodeIndent=a,this.v()))});G(Z,{rH:"alternateNodeIndentPastParent"},function(){return this.ga.nodeIndentPastParent},function(a){this.ga.nodeIndentPastParent!==a&&(w(a,"number",Z,"alternateNodeIndentPastParent"),0<=a&&1>=a&&(this.ga.nodeIndentPastParent=a,this.v()))});
G(Z,{sH:"alternateNodeSpacing"},function(){return this.ga.nodeSpacing},function(a){this.ga.nodeSpacing!==a&&(w(a,"number",Z,"alternateNodeSpacing"),this.ga.nodeSpacing=a,this.v())});G(Z,{oH:"alternateLayerSpacing"},function(){return this.ga.layerSpacing},function(a){this.ga.layerSpacing!==a&&(w(a,"number",Z,"alternateLayerSpacing"),this.ga.layerSpacing=a,this.v())});
G(Z,{pH:"alternateLayerSpacingParentOverlap"},function(){return this.ga.layerSpacingParentOverlap},function(a){this.ga.layerSpacingParentOverlap!==a&&(w(a,"number",Z,"alternateLayerSpacingParentOverlap"),0<=a&&1>=a&&(this.ga.layerSpacingParentOverlap=a,this.v()))});G(Z,{lH:"alternateCompaction"},function(){return this.ga.compaction},function(a){this.ga.compaction!==a&&(va(a,Z,Z,"alternateCompaction"),a===Rs||a===Ts)&&(this.ga.compaction=a,this.v())});
G(Z,{hH:"alternateBreadthLimit"},function(){return this.ga.breadthLimit},function(a){this.ga.breadthLimit!==a&&(w(a,"number",Z,"alternateBreadthLimit"),0<=a&&(this.ga.breadthLimit=a,this.v()))});G(Z,{vH:"alternateRowSpacing"},function(){return this.ga.rowSpacing},function(a){this.ga.rowSpacing!==a&&(w(a,"number",Z,"alternateRowSpacing"),this.ga.rowSpacing=a,this.v())});
G(Z,{uH:"alternateRowIndent"},function(){return this.ga.rowIndent},function(a){this.ga.rowIndent!==a&&(w(a,"number",Z,"alternateRowIndent"),0<=a&&(this.ga.rowIndent=a,this.v()))});G(Z,{kH:"alternateCommentSpacing"},function(){return this.ga.commentSpacing},function(a){this.ga.commentSpacing!==a&&(w(a,"number",Z,"alternateCommentSpacing"),this.ga.commentSpacing=a,this.v())});
G(Z,{jH:"alternateCommentMargin"},function(){return this.ga.commentMargin},function(a){this.ga.commentMargin!==a&&(w(a,"number",Z,"alternateCommentMargin"),this.ga.commentMargin=a,this.v())});G(Z,{xH:"alternateSetsPortSpot"},function(){return this.ga.setsPortSpot},function(a){this.ga.setsPortSpot!==a&&(w(a,"boolean",Z,"alternateSetsPortSpot"),this.ga.setsPortSpot=a,this.v())});
G(Z,{tH:"alternatePortSpot"},function(){return this.ga.portSpot},function(a){ra(a,R,Z,"alternatePortSpot");this.ga.portSpot.A(a)||(this.ga.portSpot=a,this.v())});G(Z,{wH:"alternateSetsChildPortSpot"},function(){return this.ga.setsChildPortSpot},function(a){this.ga.setsChildPortSpot!==a&&(w(a,"boolean",Z,"alternateSetsChildPortSpot"),this.ga.setsChildPortSpot=a,this.v())});
G(Z,{iH:"alternateChildPortSpot"},function(){return this.ga.childPortSpot},function(a){ra(a,R,Z,"alternateChildPortSpot");this.ga.childPortSpot.A(a)||(this.ga.childPortSpot=a,this.v())});var ls;Z.PathDefault=ls=I(Z,"PathDefault",-1);var ms;Z.PathDestination=ms=I(Z,"PathDestination",0);var ts;Z.PathSource=ts=I(Z,"PathSource",1);var Gs;Z.SortingForwards=Gs=I(Z,"SortingForwards",10);var Hs;Z.SortingReverse=Hs=I(Z,"SortingReverse",11);var Is;Z.SortingAscending=Is=I(Z,"SortingAscending",12);var Js;
Z.SortingDescending=Js=I(Z,"SortingDescending",13);var gt;Z.AlignmentCenterSubtrees=gt=I(Z,"AlignmentCenterSubtrees",20);var Ks;Z.AlignmentCenterChildren=Ks=I(Z,"AlignmentCenterChildren",21);var Vs;Z.AlignmentStart=Vs=I(Z,"AlignmentStart",22);var Ws;Z.AlignmentEnd=Ws=I(Z,"AlignmentEnd",23);var Ms;Z.AlignmentBus=Ms=I(Z,"AlignmentBus",24);var Bs;Z.AlignmentBusBranching=Bs=I(Z,"AlignmentBusBranching",25);var Ns;Z.AlignmentTopLeftBus=Ns=I(Z,"AlignmentTopLeftBus",26);var Os;
Z.AlignmentBottomRightBus=Os=I(Z,"AlignmentBottomRightBus",27);var Rs;Z.CompactionNone=Rs=I(Z,"CompactionNone",30);var Ts;Z.CompactionBlock=Ts=I(Z,"CompactionBlock",31);var ns;Z.StyleLayered=ns=I(Z,"StyleLayered",40);var Fs;Z.StyleLastParents=Fs=I(Z,"StyleLastParents",41);var Es;Z.StyleAlternating=Es=I(Z,"StyleAlternating",42);var Ds;Z.StyleRootOnly=Ds=I(Z,"StyleRootOnly",43);var ps;Z.ArrangementVertical=ps=I(Z,"ArrangementVertical",50);var ut;
Z.ArrangementHorizontal=ut=I(Z,"ArrangementHorizontal",51);var ss;Z.ArrangementFixedRoots=ss=I(Z,"ArrangementFixedRoots",52);var os;Z.LayerIndividual=os=I(Z,"LayerIndividual",60);var zs;Z.LayerSiblings=zs=I(Z,"LayerSiblings",61);var ys;Z.LayerUniform=ys=I(Z,"LayerUniform",62);function rs(){kc.call(this)}yb(rs,kc);vb("TreeNetwork",rs);rs.prototype.createVertex=function(){return new qs};rs.prototype.createEdge=function(){return new wt};
function qs(){lc.call(this);this.initialized=!1;this.parent=null;this.children=[];this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0;this.comments=null;this.W=new z(0,0);this.Ga=new Za(0,0);this.ua=new z(0,0);this.$n=this.Zn=this.AG=!1;this.gs=this.Nr=null;this.sorting=Gs;this.comparer=Aq;this.angle=0;this.alignment=Ks;this.nodeIndentPastParent=this.nodeIndent=0;this.nodeSpacing=20;this.layerSpacing=50;this.layerSpacingParentOverlap=0;this.compaction=Ts;this.breadthLimit=
0;this.rowSpacing=25;this.commentSpacing=this.rowIndent=10;this.commentMargin=20;this.setsPortSpot=!0;this.portSpot=ee;this.setsChildPortSpot=!0;this.childPortSpot=ee}yb(qs,lc);vb("TreeVertex",qs);
qs.prototype.copyInheritedPropertiesFrom=function(a){null!==a&&(this.sorting=a.sorting,this.comparer=a.comparer,this.angle=a.angle,this.alignment=a.alignment,this.nodeIndent=a.nodeIndent,this.nodeIndentPastParent=a.nodeIndentPastParent,this.nodeSpacing=a.nodeSpacing,this.layerSpacing=a.layerSpacing,this.layerSpacingParentOverlap=a.layerSpacingParentOverlap,this.compaction=a.compaction,this.breadthLimit=a.breadthLimit,this.rowSpacing=a.rowSpacing,this.rowIndent=a.rowIndent,this.commentSpacing=a.commentSpacing,
this.commentMargin=a.commentMargin,this.setsPortSpot=a.setsPortSpot,this.portSpot=a.portSpot,this.setsChildPortSpot=a.setsChildPortSpot,this.childPortSpot=a.childPortSpot)};H(qs,{vl:"childrenCount"},function(){return this.children.length});G(qs,{NI:"relativePosition"},function(){return this.W},function(a){this.W.set(a)});G(qs,{YI:"subtreeSize"},function(){return this.Ga},function(a){this.Ga.set(a)});G(qs,{XI:"subtreeOffset"},function(){return this.ua},function(a){this.ua.set(a)});
function wt(){sc.call(this);this.oq=new z(0,0)}yb(wt,sc);vb("TreeEdge",wt);
wt.prototype.commit=function(){var a=this.link;if(null!==a&&!a.mk){var b=this.network.vb,c=null,d=null;switch(b.Pe){case ms:c=this.fromVertex;d=this.toVertex;break;case ts:c=this.toVertex;d=this.fromVertex;break;default:v("Unhandled path value "+b.Pe.toString())}if(null!==c&&null!==d)if(b=this.oq,0!==b.x||0!==b.y||c.AG){var d=c.Qa,e=Us(c),f=Xs(c),g=c.rowSpacing;a.updateRoute();var h=a.me===Ni,k=a.Jb,l=0,m,n;a.yk();if(k||h){for(l=2;4<a.Z;)a.VC(2);m=a.j(1);n=a.j(2)}else{for(l=1;3<a.Z;)a.VC(1);m=a.j(0);
n=a.j(a.Z-1)}var p=a.j(a.Z-1),q=0;0===e?(c.alignment===Ws?(q=d.bottom+b.y,0===b.y&&m.y>p.y+c.rowIndent&&(q=Math.min(q,Math.max(m.y,q-Ys(c))))):c.alignment===Vs?(q=d.top+b.y,0===b.y&&m.y<p.y-c.rowIndent&&(q=Math.max(q,Math.min(m.y,q+Ys(c))))):q=c.Zn||c.$n&&1===c.maxGenerationCount?d.top-c.ua.y+b.y:d.y+d.height/2+b.y,h?(a.n(l,m.x,q),l++,a.n(l,d.right+f,q),l++,a.n(l,d.right+f+(b.x-g)/3,q),l++,a.n(l,d.right+f+2*(b.x-g)/3,q),l++,a.n(l,d.right+f+(b.x-g),q),l++,a.n(l,n.x,q)):(k&&(a.n(l,d.right+f/2,m.y),
l++),a.n(l,d.right+f/2,q),l++,a.n(l,d.right+f+b.x-(k?g/2:g),q),l++,k&&a.n(l,a.j(l-1).x,n.y))):90===e?(c.alignment===Ws?(q=d.right+b.x,0===b.x&&m.x>p.x+c.rowIndent&&(q=Math.min(q,Math.max(m.x,q-Ys(c))))):c.alignment===Vs?(q=d.left+b.x,0===b.x&&m.x<p.x-c.rowIndent&&(q=Math.max(q,Math.min(m.x,q+Ys(c))))):q=c.Zn||c.$n&&1===c.maxGenerationCount?d.left-c.ua.x+b.x:d.x+d.width/2+b.x,h?(a.n(l,q,m.y),l++,a.n(l,q,d.bottom+f),l++,a.n(l,q,d.bottom+f+(b.y-g)/3),l++,a.n(l,q,d.bottom+f+2*(b.y-g)/3),l++,a.n(l,q,d.bottom+
f+(b.y-g)),l++,a.n(l,q,n.y)):(k&&(a.n(l,m.x,d.bottom+f/2),l++),a.n(l,q,d.bottom+f/2),l++,a.n(l,q,d.bottom+f+b.y-(k?g/2:g)),l++,k&&a.n(l,n.x,a.j(l-1).y))):180===e?(c.alignment===Ws?(q=d.bottom+b.y,0===b.y&&m.y>p.y+c.rowIndent&&(q=Math.min(q,Math.max(m.y,q-Ys(c))))):c.alignment===Vs?(q=d.top+b.y,0===b.y&&m.y<p.y-c.rowIndent&&(q=Math.max(q,Math.min(m.y,q+Ys(c))))):q=c.Zn||c.$n&&1===c.maxGenerationCount?d.top-c.ua.y+b.y:d.y+d.height/2+b.y,h?(a.n(l,m.x,q),l++,a.n(l,d.left-f,q),l++,a.n(l,d.left-f+(b.x+
g)/3,q),l++,a.n(l,d.left-f+2*(b.x+g)/3,q),l++,a.n(l,d.left-f+(b.x+g),q),l++,a.n(l,n.x,q)):(k&&(a.n(l,d.left-f/2,m.y),l++),a.n(l,d.left-f/2,q),l++,a.n(l,d.left-f+b.x+(k?g/2:g),q),l++,k&&a.n(l,a.j(l-1).x,n.y))):270===e?(c.alignment===Ws?(q=d.right+b.x,0===b.x&&m.x>p.x+c.rowIndent&&(q=Math.min(q,Math.max(m.x,q-Ys(c))))):c.alignment===Vs?(q=d.left+b.x,0===b.x&&m.x<p.x-c.rowIndent&&(q=Math.max(q,Math.min(m.x,q+Ys(c))))):q=c.Zn||c.$n&&1===c.maxGenerationCount?d.left-c.ua.x+b.x:d.x+d.width/2+b.x,h?(a.n(l,
q,m.y),l++,a.n(l,q,d.top-f),l++,a.n(l,q,d.top-f+(b.y+g)/3),l++,a.n(l,q,d.top-f+2*(b.y+g)/3),l++,a.n(l,q,d.top-f+(b.y+g)),l++,a.n(l,q,n.y)):(k&&(a.n(l,m.x,d.top-f/2),l++),a.n(l,q,d.top-f/2),l++,a.n(l,q,d.top-f+b.y+(k?g/2:g)),l++,k&&a.n(l,n.x,a.j(l-1).y))):v("Invalid angle "+e);a.Lh()}else e=c,f=d,a=this.link,c=Us(e),c!==Us(f)&&(b=Xs(e),d=e.Qa,e=f.Qa,0===c&&e.left-d.right<b+1||90===c&&e.top-d.bottom<b+1||180===c&&d.left-e.right<b+1||270===c&&d.top-e.bottom<b+1||(a.updateRoute(),e=a.me===Ni,f=a.Jb,g=
Ls(this.fromVertex.alignment),a.yk(),0===c?(c=d.right+b/2,e?4===a.Z&&(b=a.j(3).y,a.L(1,c-20,a.j(1).y),a.n(2,c-20,b),a.n(3,c,b),a.n(4,c+20,b),a.L(5,a.j(5).x,b)):f?g?a.L(3,a.j(2).x,a.j(4).y):6===a.Z&&(a.L(2,c,a.j(2).y),a.L(3,c,a.j(3).y)):4===a.Z?a.n(2,c,a.j(2).y):3===a.Z?a.L(1,c,a.j(2).y):2===a.Z&&a.n(1,c,a.j(1).y)):90===c?(b=d.bottom+b/2,e?4===a.Z&&(c=a.j(3).x,a.L(1,a.j(1).x,b-20),a.n(2,c,b-20),a.n(3,c,b),a.n(4,c,b+20),a.L(5,c,a.j(5).y)):f?g?a.L(3,a.j(2).x,a.j(4).y):6===a.Z&&(a.L(2,a.j(2).x,b),a.L(3,
a.j(3).x,b)):4===a.Z?a.n(2,a.j(2).x,b):3===a.Z?a.L(1,a.j(2).x,b):2===a.Z&&a.n(1,a.j(1).x,b)):180===c?(c=d.left-b/2,e?4===a.Z&&(b=a.j(3).y,a.L(1,c+20,a.j(1).y),a.n(2,c+20,b),a.n(3,c,b),a.n(4,c-20,b),a.L(5,a.j(5).x,b)):f?g?a.L(3,a.j(2).x,a.j(4).y):6===a.Z&&(a.L(2,c,a.j(2).y),a.L(3,c,a.j(3).y)):4===a.Z?a.n(2,c,a.j(2).y):3===a.Z?a.L(1,c,a.j(2).y):2===a.Z&&a.n(1,c,a.j(1).y)):270===c&&(b=d.top-b/2,e?4===a.Z&&(c=a.j(3).x,a.L(1,a.j(1).x,b+20),a.n(2,c,b+20),a.n(3,c,b),a.n(4,c,b-20),a.L(5,c,a.j(5).y)):f?g?
a.L(3,a.j(2).x,a.j(4).y):6===a.Z&&(a.L(2,a.j(2).x,b),a.L(3,a.j(3).x,b)):4===a.Z?a.n(2,a.j(2).x,b):3===a.Z?a.L(1,a.j(2).x,b):2===a.Z&&a.n(1,a.j(1).x,b)),a.Lh()))}};G(wt,{MI:"relativePoint"},function(){return this.oq},function(a){this.oq.set(a)});function xt(){this.zm=[]}
function on(a){var b=new xt,c=null;"string"===typeof a?c=(new DOMParser).parseFromString(a,"text/xml"):a instanceof Document&&(c=a.implementation.createDocument("http://www.w3.org/2000/svg","svg",null),c.appendChild(c.importNode(a.documentElement,!0)));if(null===c)return null;a=c.getElementsByTagName("svg");if(0===a.length)return null;var d=a[0],e=c.getElementsByTagName("linearGradient"),f=c.getElementsByTagName("radialGradient");for(a=0;a<e.length;a++){for(var g=e[a],h=pn($f,cg,{start:je,end:ke}),
k=g.childNodes,l=0;l<k.length;l++)if("stop"===k[l].tagName){var m=yt(b,k[l],"stop-color");if(null!==m&&""!==m){var n=yt(b,k[l],"offset");if(null===n||""===n)n="0";var p=parseFloat(n);isNaN(p)&&(p=0);h.addColorStop((-1!==n.indexOf("%")?.01:1)*p,m)}}g=g.getAttribute("id");"string"===typeof g&&(b["_brush"+g]=h)}for(a=0;a<f.length;a++){g=f[a];h=pn($f,dg,{start:Dd,end:Dd});k=g.childNodes;for(l=0;l<k.length;l++)if("stop"===k[l].tagName&&(m=yt(b,k[l],"stop-color"),null!==m&&""!==m)){n=yt(b,k[l],"offset");
if(null===n||""===n)n="0";p=parseFloat(n);isNaN(p)&&(p=0);h.addColorStop((-1!==n.indexOf("%")?.01:1)*p,m)}g=g.getAttribute("id");"string"===typeof g&&(b["_brush"+g]=h)}for(e=!0;e;)for(e=!1,f=c.getElementsByTagName("use"),a=0;a<f.length;a++)h=f[a],0===h.childNodes.length&&(g=h.href,void 0!==g&&(g=c.getElementById(g.baseVal.substring(1)),null!==g&&(g=g.cloneNode(!0),g.removeAttribute("id"),k=parseFloat(h.getAttribute("x")),isNaN(k)&&(k=0),l=parseFloat(h.getAttribute("y")),isNaN(l)&&(l=0),m=h.getAttribute("transform"),
null===m&&(m=""),h.setAttribute("transform",m+" translate("+k+","+l+")"),h.appendChild(g),"use"===g.tagName&&(e=!0))));zt(b,d,null);c=new L;if(0===b.zm.length)return c;if(1===b.zm.length)return b.zm[0];for(a=0;a<b.zm.length;a++)c.add(b.zm[a]);return c}function At(a,b){var c=a.getAttribute(b);"string"!==typeof c&&a.style&&(c=a.style[b]);return"string"!==typeof c?null:c}
function yt(a,b,c){var d=b.getAttribute(c);"string"!==typeof d&&b.style&&(d=b.style[c]);return"string"!==typeof d||""===d||"inherit"===d?(b=b.parentNode,"g"===b.tagName||"use"===b.tagName?yt(a,b,c):null):d}
function zt(a,b,c){var d=b.tagName;if(("g"===d||"svg"===d||"use"===d||"symbol"===d)&&"none"!==yt(a,b,"display")){for(var d=b.childNodes,e=0;e<d.length;e++){var f=d[e],g=null;if(void 0!==f.getAttribute){var h=f.getAttribute("transform");switch(f.tagName){case "g":null===h?zt(a,f,null):(g=new L,zt(a,f,g));break;case "use":null===h?zt(a,f,null):(g=new L,zt(a,f,g));break;case "symbol":if("use"!==b.tagName)break;g=new L;zt(a,f,g);var k=g,l=a,m=f;yt(l,m,"preserveAspectRatio");yt(l,m,"viewBox");k.scale=
1;break;case "path":k=f;g=new X;k=k.getAttribute("d");"string"===typeof k&&(g.jF=bf(k));break;case "line":var n=f,g=new X,k=parseFloat(n.getAttribute("x1"));isNaN(k)&&(k=0);l=parseFloat(n.getAttribute("y1"));isNaN(l)&&(l=0);m=parseFloat(n.getAttribute("x2"));isNaN(m)&&(m=0);n=parseFloat(n.getAttribute("y2"));isNaN(n)&&(n=0);var p=new Ke(Oe);g.position=new z(Math.min(k,m),Math.min(l,n));0<(m-k)/(n-l)?(p.da=0,p.ea=0,p.q=Math.abs(m-k),p.s=Math.abs(n-l)):(p.da=0,p.ea=Math.abs(n-l),p.q=Math.abs(m-k),p.s=
0);g.yc=p;break;case "circle":m=f;g=new X;k=parseFloat(m.getAttribute("r"));isNaN(k)||0>k?g=null:(l=parseFloat(m.getAttribute("cx")),isNaN(l)&&(l=0),m=parseFloat(m.getAttribute("cy")),isNaN(m)&&(m=0),n=new Ke(Qe),n.da=0,n.ea=0,n.q=2*k,n.s=2*k,g.position=new z(l-k,m-k),g.yc=n);break;case "ellipse":n=f;g=new X;k=parseFloat(n.getAttribute("rx"));isNaN(k)||0>k?g=null:(l=parseFloat(n.getAttribute("ry")),isNaN(l)||0>l?g=null:(m=parseFloat(n.getAttribute("cx")),isNaN(m)&&(m=0),n=parseFloat(n.getAttribute("cy")),
isNaN(n)&&(n=0),p=new Ke(Qe),p.da=0,p.ea=0,p.q=2*k,p.s=2*l,g.position=new z(m-k,n-l),g.yc=p));break;case "rect":p=f;g=new X;k=parseFloat(p.getAttribute("width"));if(isNaN(k)||0>k)g=null;else if(l=parseFloat(p.getAttribute("height")),isNaN(l)||0>l)g=null;else{m=parseFloat(p.getAttribute("x"));isNaN(m)&&(m=0);n=parseFloat(p.getAttribute("y"));isNaN(n)&&(n=0);var q=p.getAttribute("rx"),s=p.getAttribute("ry"),p=parseFloat(q);if(isNaN(p)||0>p)p=0;var t=parseFloat(s);if(isNaN(t)||0>t)t=0;null!==q&&""!==
q||null===s||""===s?null===q||""===q||null!==s&&""!==s||(t=p):p=t;p=Math.min(p,k/2);t=Math.min(t,l/2);s=void 0;0===p&&0===t?(s=new Ke(Pe),s.da=0,s.ea=0,s.q=k,s.s=l):(s=Q.ia/2,q=E(),S(q,p,0,!0),q.lineTo(k-p,0),T(q,k-p*s,0,k,t*s,k,t),q.lineTo(k,l-t),T(q,k,l-t*s,k-p*s,l,k-p,l),q.lineTo(p,l),T(q,p*s,l,0,l-t*s,0,l-t),q.lineTo(0,t),T(q,0,t*s,p*s,0,p,0),ff(q),s=q.m,F(q));g.position=new z(m,n);g.yc=s}break;case "polygon":g=Bt(f);break;case "polyline":g=Bt(f)}if(null!==g){if(g instanceof X){l=g;k=yt(a,f,"fill");
null!==k&&-1!==k.indexOf("url")?(k=k.substring(k.indexOf("#")+1,k.length-1),k=a["_brush"+k],l.fill=k instanceof $f?k:"black"):l.fill=null===k?"black":"none"===k?null:k;k=yt(a,f,"stroke");null!==k&&-1!==k.indexOf("url")?(k=k.substring(k.indexOf("#")+1,k.length-1),k=a["_brush"+k],l.stroke=k instanceof $f?k:"black"):l.stroke="none"===k?null:k;k=parseFloat(yt(a,f,"stroke-width"));isNaN(k)||(l.Na=k);k=yt(a,f,"stroke-linecap");null!==k&&(l.QG=k);k=yt(a,f,"stroke-dasharray");if(null!==k&&""!==k){m=k.split(",");
n=[];for(k=0;k<m.length;k++)p=parseFloat(m[k]),!isNaN(p)&&0<p&&n.push(p);l.Xy=n}f=yt(a,f,"stroke-dashoffset");null!==f&&""!==f&&(f=parseFloat(f),isNaN(f)||(l.RG=f));l.gy=!0}if(null!==h){h=h.split(")");f=!0;for(k=0;k<h.length;k++)/\(.*[^0-9\.,\s-]/.test(h[k])&&(f=!1),/\(.*[0-9]-[0-9]/.test(h[k])&&(f=!1);if(f)for(k=h.length-1;0<=k;k--)if(l=h[k],""!==l)switch(m=l.indexOf("("),f=l.substring(0,m).replace(/\s*/,""),m=l.substring(m+1).split(/\s*[\s,]\s*/),f){case "rotate":Ct(a,g,m);break;case "translate":f=
g;l=parseFloat(m[0]);isNaN(l)&&(l=0);m=parseFloat(m[1]);isNaN(m)&&(m=0);if(0!==l||0!==m)n=f.position.copy(),isNaN(n.x)&&(n.x=0),isNaN(n.y)&&(n.y=0),f.position=new z(l+n.x,m+n.y);break;case "scale":Dt(a,g,m);break;case "skewX":Et(a,g,m);break;case "skewY":Ft(a,g,m);break;case "matrix":Gt(a,g,m)}}if(g instanceof L){h=g;k=f=0;l=h.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);for(m=h.elements.i;m.next();)n=m.value.position.copy(),isNaN(n.x)&&(n.x=0),isNaN(n.y)&&(n.y=0),n.x<f&&(f=n.x),n.y<k&&
(k=n.y);l.x+=f;l.y+=k;h.position=l}null===c?a.zm.push(g):c.add(g)}}}if(null!==g){a=At(b,"visibility");if("hidden"===a||"collapse"===a)g.visible=!1;b=At(b,"opacity");null!==b&&""!==b&&(b=parseFloat(b),isNaN(b)||(g.opacity=b))}}}
function Gt(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]),g=parseFloat(c[3]),h=parseFloat(c[4]),k=parseFloat(c[5]);if(!isNaN(d+e+f+g+h+k)){var l=b.position.copy();isNaN(l.x)&&(l.x=0);isNaN(l.y)&&(l.y=0);if(b instanceof X){c=b.yc.copy();if(c.type===Pe)c=a.Xq(c);else if(c.type===Qe)c=Ht(c);else if(c.type===Oe){c.type=Le;a=new Me(c.da,c.ea);var m=new Cf($e,c.q,c.s);a.pa.add(m);c.Xa.add(a)}c.offset(l.x,l.y);c.transform(d,e,f,g,h-l.x,k-l.y);a=c.normalize();b.yc=c;l.x-=a.x;l.y-=a.y;
b.position=l}else if(b instanceof L){for(b=b.elements.i;b.next();)e=b.value,d=e.position.copy(),d.x+=l.x,d.y+=l.y,e.position=d;for(b.reset();b.next();)Gt(a,b.value,c);for(b.reset();b.next();)a=b.value,d=a.position.copy(),d.x-=l.x,d.y-=l.y,a.position=d}}}
function Ct(a,b,c){var d=parseFloat(c[0]);isNaN(d)&&(d=0);var e=parseFloat(c[1]);isNaN(e)&&(e=0);var f=parseFloat(c[2]);isNaN(f)&&(f=0);if(0!==d){var g=d*Math.PI/180,h=b.position.copy();isNaN(h.x)&&(h.x=0);isNaN(h.y)&&(h.y=0);if(b instanceof X){c=b.yc.copy();c.type===Qe?c=Ht(c):c.type===Pe&&(c=a.Xq(c));if(c.type===Le)c.rotate(d,e-h.x,f-h.y),f=c.normalize(),b.yc=c,h.x-=f.x,h.y-=f.y,b.position=h;else{var d=c.da-e+h.x,k=c.ea-f+h.y,l=c.q-e+h.x,m=c.s-f+h.y;a=d*Math.cos(g)-k*Math.sin(g)+e-h.x;d=k*Math.cos(g)+
d*Math.sin(g)+f-h.y;e=l*Math.cos(g)-m*Math.sin(g)+e-h.x;f=m*Math.cos(g)+l*Math.sin(g)+f-h.y;l=Math.min(a,e);m=Math.min(d,f);c.da=a-l;c.ea=d-m;c.q=e-l;c.s=f-m;h.x+=l;h.y+=m;b.position=h;b.yc=c}b.fill instanceof $f&&(h=b.fill.copy(),c=Math.atan((.5-h.start.y)/(.5-h.start.x)),isNaN(c)||(c+=g,h.start=new R((1-Math.cos(c))/2,(1-Math.sin(c))/2),h.end=new R((1+Math.cos(c))/2,(1+Math.sin(c))/2)),b.fill=h);b.stroke instanceof $f&&(h=b.stroke.copy(),c=Math.atan((.5-h.start.y)/(.5-h.start.x)),isNaN(c)||(c+=
g,h.start=new R((1-Math.cos(c))/2,(1-Math.sin(c))/2),h.end=new R((1+Math.cos(c))/2,(1+Math.sin(c))/2)),b.stroke=h)}else if(b instanceof L){for(b=b.elements.i;b.next();)f=b.value,g=f.position.copy(),g.x+=h.x,g.y+=h.y,f.position=g;for(b.reset();b.next();)Ct(a,b.value,c);for(b.reset();b.next();)c=b.value,g=c.position.copy(),g.x-=h.x,g.y-=h.y,c.position=g}}}
function Dt(a,b,c){var d=parseFloat(c[0]);isNaN(d)&&(d=1);var e=parseFloat(c[1]);isNaN(e)&&(e=d);if(1!==d||1!==e){var f=b.position.copy();isNaN(f.x)&&(f.x=0);isNaN(f.y)&&(f.y=0);if(b instanceof X)a=b.yc.copy(),f.x*=d,f.y*=e,b.position=f,a.scale(d,e),b.yc=a;else if(b instanceof L){for(b=b.elements.i;b.next();)e=b.value,d=e.position.copy(),d.x+=f.x,d.y+=f.y,e.position=d;for(b.reset();b.next();)Dt(a,b.value,c);for(b.reset();b.next();)a=b.value,d=a.position.copy(),d.x-=f.x,d.y-=f.y,a.position=d}}}
function Et(a,b,c){var d=parseFloat(c[0]);if(!isNaN(d)){var d=d*Math.PI/180,e=b.position.copy();isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);if(b instanceof X){c=b.yc.copy();if(c.type===Pe)c=a.Xq(c);else if(c.type===Qe)c=Ht(c);else if(c.type===Oe){c.type=Le;a=new Me(c.da,c.ea);var f=new Cf($e,c.q,c.s);a.pa.add(f);c.Xa.add(a)}c.offset(e.x,e.y);c.transform(1,0,Math.tan(d),1,-e.x,-e.y);a=c.normalize();b.yc=c;e.x-=a.x;e.y-=a.y;b.position=e}else if(b instanceof L){for(b=b.elements.i;b.next();)d=b.value.position.copy(),
d.x+=e.x,d.y+=e.y,b.value.position=d;for(b.reset();b.next();)Et(a,b.value,c);for(b.reset();b.next();)a=b.value,d=a.position.copy(),d.x-=e.x,d.y-=e.y,a.position=d}}}
function Ft(a,b,c){var d=parseFloat(c[0]);if(!isNaN(d)){var d=d*Math.PI/180,e=b.position.copy();isNaN(e.x)&&(e.x=0);isNaN(e.y)&&(e.y=0);if(b instanceof X){c=b.yc.copy();if(c.type===Pe)c=a.Xq(c);else if(c.type===Qe)c=Ht(c);else if(c.type===Oe){c.type=Le;a=new Me(c.da,c.ea);var f=new Cf($e,c.q,c.s);a.pa.add(f);c.Xa.add(a)}c.offset(e.x,e.y);c.transform(1,Math.tan(d),0,1,-e.x,-e.y);a=c.normalize();b.yc=c;e.x-=a.x;e.y-=a.y;b.position=e}else if(b instanceof L){for(b=b.elements.i;b.next();)f=b.value,d=f.position.copy(),
d.x+=e.x,d.y+=e.y,f.position=d;for(b.reset();b.next();)Ft(a,b.value,c);for(b.reset();b.next();)a=b.value,d=a.position.copy(),d.x-=e.x,d.y-=e.y,a.position=d}}}
function Bt(a){var b=!1;if("polygon"===a.tagName)b=!0;else if("polyline"!==a.tagName)return null;var c=new X,d=a.getAttribute("points");a=new Ke;var e=new N(Me),f=d.split(/\s*[\s,]\s*/);if(4>f.length)return null;for(var d=null,g=new N(Cf),h=1;h<f.length;h+=2){var k=parseFloat(f[h-1]),l=parseFloat(f[h]);if("number"!==typeof k||isNaN(k)||"number"!==typeof l||isNaN(l))return null;1===h?d=new Me(k,l):g.add(new Cf($e,k,l))}b&&(b=new Cf($e,d.da,d.ea),b.close(),g.add(b));d.pa=g;e.add(d);a.Xa=e;b=a.normalize();
c.position=new z(-b.x,-b.y);c.yc=a;return c}
function Ht(a){var b=a.da,c=a.ea,d=a.q,e=a.s,f=Math.abs(d-b)/2,g=Math.abs(e-c)/2,b=Math.min(b,d)+f,c=Math.min(c,e)+g,e=new Me(b,c-g),d=new Cf(wf);d.kb=b+Q.ia*f;d.wb=c-g;d.Hd=b+f;d.Jd=c-Q.ia*g;d.q=b+f;d.s=c;e.pa.add(d);d=new Cf(wf);d.kb=b+f;d.wb=c+Q.ia*g;d.Hd=b+Q.ia*f;d.Jd=c+g;d.q=b;d.s=c+g;e.pa.add(d);d=new Cf(wf);d.kb=b-Q.ia*f;d.wb=c+g;d.Hd=b-f;d.Jd=c+Q.ia*g;d.q=b-f;d.s=c;e.pa.add(d);d=new Cf(wf);d.kb=b-f;d.wb=c-Q.ia*g;d.Hd=b-Q.ia*f;d.Jd=c-g;d.q=b;d.s=c-g;e.pa.add(d);a.type=Le;a.Xa.add(e);return a}
xt.prototype.Xq=function(a){var b=a.da,c=a.ea,d=a.q,e=a.s,f=Math.min(b,d),g=Math.min(c,e),b=Math.abs(d-b),c=Math.abs(e-c),e=new Me(f,g);e.pa.add(new Cf($e,f+b,g));e.pa.add(new Cf($e,f+b,g+c));e.pa.add((new Cf($e,f,g+c)).close());a.type=Le;a.Xa.add(e);return a};function uo(){U.call(this);this.ce=null}yb(uo,U);uo.prototype.cloneProtected=function(a){U.prototype.cloneProtected.call(this,a);a.element=this.ce.cloneNode(!0)};uo.prototype.toString=function(){return"HTMLHost("+this.ce.toString()+")#"+ub(this)};
uo.prototype.Xi=function(a,b){var c=this.ce;if(null!==c){var d=this.Ra(Dd);d.x-=this.Q.width/2;d.y-=this.Q.height/2;d.x-=this.Q.x;d.y-=this.Q.y;var d=b.CD(d),e=b.ck;null===e||e.contains(c)||e.appendChild(c);e=this.transform;c.style.transform="matrix("+e.m11+","+e.m12+","+e.m21+","+e.m22+","+e.dx+","+e.dy+")";c.style.transformOrigin="0 0";e=d.y;c.style.left=d.x+"px";c.style.top=e+"px"}};
uo.prototype.Mn=function(a,b,c,d){var e=this.ka;isFinite(e.width)&&(a=e.width);isFinite(e.height)&&(b=e.height);var e=this.se,f=this.Jf;c=Math.max(c,f.width);d=Math.max(d,f.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);c=this.ce;null!==c&&(b=c.getBoundingClientRect(),a=b.width,b=b.height);ad(this.hc,a,b);Km(this,0,0,a,b)};uo.prototype.Jh=function(a,b,c,d){Om(this,a,b,c,d)};H(uo,{ta:"naturalBounds"},function(){return this.hc});
G(uo,{element:"element"},function(){return this.ce},function(a){var b=this.ce;b!==a&&(a instanceof HTMLElement||v("HTMLHost.element must be an instance of HTMLElement."),this.ce=a,a.className="HTMLHost",this.h("element",b,a),this.ba())});aa.version="1.5.4";window&&(window.module&&"object"===typeof window.module&&"object"===typeof window.module.exports?window.module.exports=aa:window.define&&"function"===typeof window.define&&window.define.amd?(window.go=aa,window.define(aa)):window.go=aa); })(window);
