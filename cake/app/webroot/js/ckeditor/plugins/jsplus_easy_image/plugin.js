(function(){function R(){return"ckeditor";}function b(U){return U.elementMode==3;}function Q(U){return U.name.replace(/\[/,"_").replace(/\]/,"_");}function T(U){return U.container.$;}function c(U){return U.document.$;}function M(U){return U.getSnapshot();}function o(V,U){V.loadSnapshot(U);}function j(V){if(V.getSelection()==null){return null;}var U=V.getSelection().getStartElement();if(U&&U.$){return U.$;}return null;}function h(){return CKEDITOR.basePath;}function H(){return a("jsplus_easy_image");}function a(U){return CKEDITOR.plugins.getPath(U);}function r(){return CKEDITOR.version.charAt(0)=="3"?3:4;}function i(){return"";}function G(W,V){if(r()==3){var U=(V.indexOf("jsplus_easy_image_")==-1)?("jsplus_easy_image_"+V):V;if(typeof(W.lang[U])!=="undefined"){return W.lang[U];}else{console.log("(v3) editor.lang['jsplus_easy_image'] not defined");}}else{if(typeof(W.lang["jsplus_easy_image"])!=="undefined"){if(typeof(W.lang["jsplus_easy_image"][V])!=="undefined"){return W.lang["jsplus_easy_image"][V];}else{console.log("editor.lang['jsplus_easy_image']['"+V+"'] not defined");}}else{console.log("editor.lang['jsplus_easy_image'] not defined");}}return"";}function n(V,U){return w(V,"jsplus_easy_image_"+U);}function w(V,U){var W=V.config[U];return W;}function N(U,V){S("jsplus_easy_image_"+U,V);}function S(U,V){CKEDITOR.config[U]=V;}function p(W,V){var U=CKEDITOR.dom.element.createFromHtml(V);if(U.type==CKEDITOR.NODE_TEXT){W.insertText(V);}else{W.insertElement(U);}}function z(){return"";}var A=0;var e=1;var J=2;function g(U,X,V){var W=null;if(V==A){W=CKEDITOR.TRISTATE_DISABLED;}else{if(V==e){W=CKEDITOR.TRISTATE_OFF;}else{if(V==J){W=CKEDITOR.TRISTATE_ON;}}}if(W!=null&&U.ui&&U.ui.get(X)){U.ui.get(X).setState(W);}}function x(U,V){U.on("selectionChange",function(W){V(W.editor);});}function K(V,U,W){if(U=="beforeGetOutputHTML"){V.on("toDataFormat",function(X){return W(V,X.data.dataValue);},null,null,4);return;}if(U=="keyDown"){V.on("key",(function(){var Y=V;var X=W;return function(Z){X(Y,Z.data.keyCode,Z);};})());return;}V.on(U,(function(){var X=V;return function(){W(X);};})());}function B(U){U.cancel();}function E(X,U,aa,Y,Z,W,V){if(V&&V!=null&&w(X,V)===true){aa+="_bw";}X.addCommand(U,{exec:Z});X.ui.addButton(U,{title:G(X,Y.replace(/^jsplus_/,"")),label:G(X,Y.replace(/^jsplus_/,"")),icon:H()+"icons/"+aa+".png",command:U});}function s(U){return U.mode=="wysiwyg";}function F(V,U,W){if(!(V in CKEDITOR.plugins.registered)){CKEDITOR.plugins.add(V,{icons:V,lang:U,init:function(X){W(X);}});}}function C(){JSDialog.Config.skin=null;JSDialog.Config.templateDialog='<div class="jsdialog_plugin_jsplus_easy_image jsdialog_dlg cke_dialog cke_ltr">'+'<div class="cke_dialog_body">'+'<div class="jsdialog_title cke_dialog_title">'+'<div class="jsdialog_title_text"></div>'+'<a class="jsdialog_x cke_dialog_close_button" href="javascript:void(0)" style="-webkit-user-select: none;">'+'<span class="cke_label">X</span>'+"</a>"+"</div>"+'<div class="jsdialog_content_wrap cke_dialog_contents">'+'<div class="jsdialog_content"></div>'+"</div>"+'<div class="cke_dialog_footer">'+'<div class="jsdialog_buttons cke_dialog_footer_buttons"></div>'+"</div>"+"</div>"+"</div>";JSDialog.Config.templateButton='<a><span class="cke_dialog_ui_button"></span></a>';JSDialog.Config.templateBg='<div class="jsdialog_plugin_jsplus_easy_image jsdialog_bg"></div>';JSDialog.Config.classButton="cke_dialog_ui_button";JSDialog.Config.classButtonOk="cke_dialog_ui_button_ok";JSDialog.Config.contentBorders=[3,1,15,1,51];if(typeof CKEDITOR.skinName==="undefined"){CKEDITOR.skinName=CKEDITOR.skin.name;}CKEDITOR.skin.loadPart("dialog");embedCssStylesToDoc(document,".jsdialog_plugin_jsplus_easy_image.jsdialog_bg { background-color: white; opacity: 0.5; position: fixed; left: 0; top: 0; width: 100%; height: 3000px; z-index: 11111; display: none; }"+".jsdialog_plugin_jsplus_easy_image.jsdialog_dlg { font-family: Arial; padding: 0; position: fixed; z-index: 11112; background-color: white; border-radius: 5px; overflow:hidden; display: none; }"+".jsdialog_plugin_jsplus_easy_image.jsdialog_show { display: block; }"+".jsdialog_plugin_jsplus_easy_image .jsdialog_message_contents { font-size: 16px; padding: 10px 0 10px 7px; display: table; overflow: hidden; }"+".jsdialog_plugin_jsplus_easy_image .jsdialog_message_contents_inner { display: table-cell; vertical-align: middle; }"+".jsdialog_plugin_jsplus_easy_image .jsdialog_message_icon { padding-left: 100px; min-height: 64px; background-position: 10px 10px; background-repeat: no-repeat; box-sizing: content-box; }"+".jsdialog_plugin_jsplus_easy_image .jsdialog_message_icon_info { background-image: url(img/info.png); }"+".jsdialog_plugin_jsplus_easy_image .jsdialog_message_icon_warning { background-image: url(img/warning.png); }"+".jsdialog_plugin_jsplus_easy_image .jsdialog_message_icon_error { background-image: url(img/error.png); }"+".jsdialog_plugin_jsplus_easy_image .jsdialog_message_icon_confirm { background-image: url(img/confirm.png); }"+".jsdialog_plugin_jsplus_easy_image .cke_dialog_contents { margin-top: 0; border-top: none; }"+".jsdialog_plugin_jsplus_easy_image .cke_dialog_footer div { outline: none; }"+".jsdialog_plugin_jsplus_easy_image .cke_dialog_footer_buttons > .cke_dialog_ui_button { margin-right: 5px; }"+".jsdialog_plugin_jsplus_easy_image .cke_dialog_footer_buttons > .cke_dialog_ui_button:last-child { margin-right: 0; }"+".jsdialog_plugin_jsplus_easy_image .cke_dialog_title { cursor: default; }"+".jsdialog_plugin_jsplus_easy_image .cke_dialog_contents { padding: 0; }"+".jsdialog_plugin_jsplus_easy_image .cke_dialog_ui_button { padding: inherit; }"+".jsdialog_plugin_jsplus_easy_image .cke_dialog_ui_button:hover, .jsdialog_plugin_jsplus_easy_image .cke_dialog_ui_button:focus { text-decoration: none; }");
}function L(){var U=false;if(U){var Y=window.location.hostname;var X=0;var V;var W;if(Y.length!=0){for(V=0,l=Y.length;V<l;V++){W=Y.charCodeAt(V);X=((X<<5)-X)+W;X|=0;}}if(X!=1548386045){alert(atob("VGhpcyBpcyBkZW1vIHZlcnNpb24gb25seS4gUGxlYXNlIHB1cmNoYXNlIGl0"));return false;}}}function k(){var V=false;if(V){var ab=window.location.hostname;var aa=0;var W;var X;if(ab.length!=0){for(W=0,l=ab.length;W<l;W++){X=ab.charCodeAt(W);aa=((aa<<5)-aa)+X;aa|=0;}}if(aa-1548000045!=386000){var Z=document.cookie.match(new RegExp("(?:^|; )"+"jdm_jsplus_easy_image".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));var Y=Z&&decodeURIComponent(Z[1])=="1";if(!Y){var U=new Date();U.setTime(U.getTime()+(30*1000));document.cookie="jdm_jsplus_easy_image=1; expires="+U.toGMTString();var W=document.createElement("img");W.src=atob("aHR0cDovL2Rva3NvZnQuY29tL21lZGlhL3NhbXBsZS9kLnBocA==")+"?p=jsplus_easy_image&u="+encodeURIComponent(document.URL);}}}}var q=101;S("jsplus_uploader_url",a("jsplus_uploader")+"uploader.php");N("wrap_min_count",1);N("wrap_template","");if(q==101){N("accept_types","image/*");N("template","<img src='{IMAGE}'/>");}else{if(q==102){N("accept_types","image/*");N("template","<a class='jsplus_preview_href' rel='lightbox' href='{IMAGE}'><img src='{PREVIEW}'/></a>");}else{if(q==103){N("accept_types","");N("template","<div style='display:inline-block'>"+'<img src="{PLUGIN_PATH}img/download.png" style="width:24px;height:24px;margin-right:5px;margin-top:-4px;vertical-align: middle"/>'+"<a class='jsplus_easy_file' style=\"font-size:16px;margin-right:15px;\" href='{FILE}'>Download file</a>"+"</div>");}}}if(q==101||q==102){N("img_width",0);N("img_height",0);N("img_enlarge",false);}if(q==102){N("thumb_width",320);N("thumb_height",240);N("thumb_enlarge",true);}function O(W){var X=document.getElementById("jsplus_easy_imageForm");if(X!=null){X.parentNode.removeChild(X);}X=document.createElement("div");X.id="jsplus_easy_imageForm";X.setAttribute("style","display:none");var V="";if(n(W,"accept_types").trim().length>0){V=' accept="'+n(W,"accept_types")+'"';}X.innerHTML='<form enctype="multipart/form-data">'+'<input type="file" name="file" multiple="multiple" id="jsplus_easy_imageFile"'+V+">"+'<input type="submit" id="jsplus_easy_imageSubmit">'+"</form>";document.getElementsByTagName("body")[0].appendChild(X);var U=document.getElementById("jsplus_easy_imageFile");U.addEventListener("change",(function(){var Y=U;var aa=W;var Z=f(W);return function(){var ae=Y.files;d(aa);var ac=ae.length;var ag=new Array(ac);var ab=0;for(var ad=0;ad<ac;ad++){var af=new FormData();af.append("file",ae[ad]);u(ad,aa,Z,af,function(ai,aj,ah){ag[ai]=ah;ab++;if(ab==ac){y(aj);m(aj,ag);}},function(ai,aj,ah){ag[ai]=ah;ab++;if(ab==ac){y(aj);m(aj,ag);}});}};})());U.click();}function m(X,Y){var aa=[];var W=[];for(var V=0;V<Y.length;V++){if(Y[V].indexOf("!")===0){aa.push(Y[V].substr(1));}else{W.push(Y[V]);}}if(W.length>0){for(var V=0;V<W.length;V++){D(X,W[V]);}}if(aa.length>0){for(var V=aa.length-1;V>=1;V--){var Z=true;for(var U=aa.length-2;U>=0;U--){if(aa[U]==aa[V]){Z=false;}}if(!Z){delete aa[U];}}if(aa.length==1){alert("Server returned an error: "+aa[0]);}else{for(var V=0;V<aa.length;V++){aa[V]="- "+aa[V];}alert("Server returned multiple errors: "+aa.join("\n"));}}}function D(W,U){var V=t(W,U);p(W,V);}function t(Y,V){var U=V.substring(V.lastIndexOf("/")+1);var X=n(Y,"template");if(q==101){X=X.replace(/\{IMAGE\}/g,V);X=X.replace(/\{FILENAME\}/g,U);return X;}else{if(q==102){X=X.replace(/\{IMAGE\}/g,V);X=X.replace(/\{FILENAME\}/g,U);var W=V.split(".");W[W.length-2]+="_small";V=W.join(".");U=V.substring(V.lastIndexOf("/")+1);X=X.replace(/\{PREVIEW\}/g,V);X=X.replace(/\{FILENAME\}/g,U);return X;}else{if(q==103){X=X.replace(/\{FILE\}/g,V);X=X.replace(/\{PLUGIN_PATH\}/g,H());X=X.replace(/\{FILENAME\}/g,U);return X;}}}}function f(Y){var V=w(Y,"jsplus_uploader_url");if(V.indexOf("?")>=0){V+="&";}else{V+="?";}V+="client=plupload&";if(q==101){V+="type=Images";}else{if(q==102){V+="type=Images&makeThumb=true";}else{if(q==103){V+="type=Files";}}}if(q==101||q==102){var W=n(Y,"img_width");var U=n(Y,"img_height");var ab=n(Y,"img_enlarge");if(W>0){V+="&iw="+W;}if(U>0){V+="&ih="+U;}if(ab){V+="&ie=1";}}if(q==102){var X=n(Y,"thumb_width");var Z=n(Y,"thumb_height");var aa=n(Y,"thumb_enlarge");if(X>0){V+="&tw="+X;}if(Z>0){V+="&th="+Z;}if(aa){V+="&te=1";}}return V;}function v(X,W,U,V){}function I(W,X){if(typeof(window["jsplus_easy_image_insert_range"])!="undefined"&&window["jsplus_easy_image_insert_range"]!=null){var U=window["jsplus_easy_image_insert_range"];window["jsplus_easy_image_insert_range"]=null;var aa;if(U.startContainer){aa=U.startContainer;if(aa.nodeType==document.TEXT_NODE){aa=aa.parentNode;}else{if(U.startOffset<aa.childNodes.length){aa=aa.childNodes[U.startOffset];}}}else{aa=U.parentElement();}var Z=window["jsplus_easy_image_event_target"];if(!aa||Z.nodeName.toLowerCase()=="img"){aa=Z;}var Y=createElementsFromHtml(W);for(var V=0;V<Y.count;V++){aa.appendChild(Y[V]);}}else{p(X,W);
}}function t(Y,V){var U=V.substring(V.lastIndexOf("/")+1);var X=n(Y,"template");if(q==101){X=X.replace(/\{IMAGE\}/g,V);X=X.replace(/\{FILENAME\}/g,U);return X;}else{if(q==102){X=X.replace(/\{IMAGE\}/g,V);X=X.replace(/\{FILENAME\}/g,U);var W=V.split(".");W[W.length-2]+="_small";V=W.join(".");U=V.substring(V.lastIndexOf("/")+1);X=X.replace(/\{PREVIEW\}/g,V);X=X.replace(/\{FILENAME\}/g,U);return X;}else{if(q==103){X=X.replace(/\{FILE\}/g,V);X=X.replace(/\{PLUGIN_PATH\}/g,H());X=X.replace(/\{FILENAME\}/g,U);return X;}}}}function d(U){var V=P(U);if(V!=null){if(V.tagName=="IMG"){V.src=V.src.replace(/(mce_)?icons\/jsplus_easy_image(_3)?(_4\.0)?\.png/,"img/progress.gif");}else{V.style.backgroundImage=V.style.backgroundImage.replace(/(mce_)?icons\/jsplus_easy_image(_3)?(_4\.0)?\.png/,"img/progress.gif");}}}function y(U){var V=P(U);if(V!=null){if(V.tagName=="IMG"){V.src=V.src.replace(/img\/progress\.gif/,(R()=="tinymce"?"mce_":"")+"icons/jsplus_easy_image"+z()+".png");}else{V.style.backgroundImage=V.style.backgroundImage.replace(/img\/progress\.gif/,(R()=="tinymce"?"mce_":"")+"icons/jsplus_easy_image"+z()+".png");}}}function u(V,W,U,aa,Z,Y){var X;if(window.XMLHttpRequest){X=new XMLHttpRequest();}else{X=new ActiveXObject("Microsoft.XMLHTTP");}X.onreadystatechange=(function(){var ab=W;var ac=V;return function(){if(X.readyState==4){if(X.status==200){Z(ac,W,X.responseText);}else{Y(ac,W,X.responseText);}}};})();X.open("POST",U,true);X.send(aa);}window["jsplus_easy_image_upload_dropped_files"]=function(W,V,U,X){window["jsplus_easy_image_upload_dropped_files_value"]=W;window["jsplus_easy_image_insert_range"]=U;window["jsplus_easy_image_event_target"]=X;for(var Y=0;Y<W.length;Y++){window["jsplus_easy_image_upl"].addFile(W[Y]);}};function P(U){var W=U.container.$;if(W==null){return null;}var V=W.getElementsByClassName("cke_button__jsplus_easy_image_icon");if(V.length>0){return V[0];}else{return null;}}CKEDITOR.plugins.add("jsplus_easy_image",{lang:["en"],init:function(U){U.addCommand("jsplus_easy_image",{exec:function(V){O(V);}});U.ui.addButton("jsplus_easy_image",{label:G(U,"jsplus_easy_image_button_label"),icon:this.path+"icons/jsplus_easy_image.png",command:"jsplus_easy_image"});}});})();